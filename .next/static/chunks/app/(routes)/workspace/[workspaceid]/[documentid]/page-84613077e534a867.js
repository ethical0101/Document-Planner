(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[205],{9792:function(e,s,l){Promise.resolve().then(l.bind(l,6171))},6171:function(e,s,l){"use strict";l.r(s),l.d(s,{default:function(){return R}});var a=l(7437),t=l(2265),o=l(7162),d=l(5933),r=l(7770),n=function(){return(0,a.jsxs)("div",{className:"flex items-center justify-between w-full p-5 shadow-md px-7",children:[(0,a.jsx)("div",{}),(0,a.jsx)(r.Li,{}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(d.z,{children:"Share"}),(0,a.jsx)(r.l8,{})]})]})},i=l(6028),c=l(7810),u=l(314),m=l(5978),x=l(1331),h=l(3145),f=function(e){let{documentid:s}=e,[l,o]=(0,t.useState)("/Assets/coverImages/cover1.jpg"),[d,r]=(0,t.useState)(null),[n,f]=(0,t.useState)(),[p,j]=(0,t.useState)(!1);(0,t.useEffect)(()=>{s&&g()},[s]);let g=async()=>{let e=(0,m.doc)(u.db,"workspacedocuments",s),a=await (0,m.QT)(e);if(a.exists()){let e=a.data();console.log(e),r(e),f(null==e?void 0:e.Emoji),o((null==e?void 0:e.coverImage)||l)}},v=async(e,l)=>{let a=(0,m.doc)(u.db,"workspacedocuments",s);await (0,m.r7)(a,{[e]:l})};return(0,a.jsxs)("div",{children:[(0,a.jsx)(i.Z,{setNewCover:e=>{o(e),v("coverImage",e)},children:(0,a.jsxs)("div",{className:"relative cursor-pointer group",children:[(0,a.jsx)("h2",{className:"absolute items-center justify-center hidden w-full h-full p-4 group-hover:flex",children:"Change Cover"}),(0,a.jsx)("div",{className:"group-hover:opacity-70",children:(0,a.jsx)(h.default,{src:l,alt:"Cover Image",width:400,height:400,className:"w-full h-[200px] object-cover rounded-t-xl"})})]})}),(0,a.jsx)("div",{className:"absolute ml-10 mt-[-40px] cursor-pointer",children:(0,a.jsx)(c.Z,{showPicker:p,setEmoji:e=>{f(e),j(!1),v("Emoji",e)},children:(0,a.jsx)("div",{className:"bg-[#ffffffb0] p-4 rounded-md",onClick:()=>{j(!p)},children:n?(0,a.jsx)("h3",{className:"text-5xl",children:n}):(0,a.jsx)(x.Z,{className:"w-10 h-10 text-gray-500"})})})}),(0,a.jsx)("div",{className:"p-10 mt-10",children:(0,a.jsx)("input",{type:"text",placeholder:"Untitled Document",defaultValue:(null==d?void 0:d.documentName)||"",className:"text-4xl font-bold outline-none",onChange:e=>{v("documentName",e.target.value)}})})]})},p=l(662),j=l(6960),g=l(6687),v=l(3425),N=l(8734),b=l(3656),y=l(6625),w=l(4737),k=function(e){let{params:s}=e;console.log("This is rich doc params->",s);let l=(0,t.useRef)(null),{user:o}=(0,r.aF)(),d=!1;(0,t.useEffect)(()=>{o&&!l.current&&c()},[o]);let n=async()=>{var e;let a=await l.current.save();console.log(a);let t=(0,m.doc)(u.db,"documentOutput",null==s?void 0:s.documentid);await (0,m.r7)(t,{output:a,EditedBy:null==o?void 0:null===(e=o.primaryEmailAddress)||void 0===e?void 0:e.emailAddress})},i=()=>{(0,m.cf)((0,m.doc)(u.db,"documentOutput",null==s?void 0:s.documentid),e=>{var s,a,t;let r=null===(s=e.data())||void 0===s?void 0:s.output;console.log("Output Data in richdoc",r),d&&(null==r?void 0:r.EditedBy)===(null==o?void 0:null===(a=o.primaryEmailAddress)||void 0===a?void 0:a.emailAddress)||(r&&l.current.render(null===(t=e.data())||void 0===t?void 0:t.output),d=!0)})},c=()=>{l.current=new p.Z({onChange:()=>{n()},onReady:()=>{i()},holder:"editorjs",tools:{header:b.Z,table:g.Z,checklist:{class:y.Z,inlineToolbar:!0},list:{class:N.Z,inlineToolbar:!0,config:{defaultStyle:"unordered"}},image:{class:w.Z,config:{endpoints:{byFile:"http://localhost:8008/uploadFile",byUrl:"http://localhost:8008/fetchUrl"}}},quote:j.Z,code:v.Z}})};return(0,a.jsx)("div",{className:"mr-20 lg:-ml-40",children:(0,a.jsx)("div",{id:"editorjs"})})},C=l(2489),U=l(2718),E=l(1627),Z=l(1250),I=l(1227),z=function(){let{threads:e}=(0,E._d)();return(0,a.jsxs)("div",{className:"w-[300px] h-[350px] shadow-lg rounded-lg overflow-auto",children:[null==e?void 0:e.map(e=>(0,a.jsx)(Z.j,{thread:e},e.id)),(0,a.jsx)(I.a,{})]})},A=function(e){let{params:s}=e;console.log("sgfrsdsfg",s);let[l,o]=(0,t.useState)(!1);return(0,a.jsxs)("div",{children:[(0,a.jsx)(n,{}),(0,a.jsx)(f,{documentid:s.documentid}),(0,a.jsxs)("div",{className:"grid grid-cols-4",children:[(0,a.jsx)("div",{className:"col-span-3",children:(0,a.jsx)(k,{params:s})}),(0,a.jsxs)("div",{className:"fixed right-5 bottom-5",children:[(0,a.jsx)(d.z,{onClick:()=>o(!l),children:l?(0,a.jsx)(C.Z,{}):(0,a.jsx)(U.Z,{})}),l&&(0,a.jsx)(z,{})]})]})]})};function D(e){let{params:s,children:l}=e;return console.log("Room jsx params->",s),console.log("Room jsx children->",l),(0,a.jsx)(E.WT,{authEndpoint:"/api/liveblocks-auth?roomId="+(null==s?void 0:s.documentid),resolveUsers:async e=>{let{userIds:s}=e;console.log("Room jsx UserId's==>",s);let l=(0,m.IO)((0,m.hJ)(u.db,"DocPlannerUsers"),(0,m.ar)("email","in",s)),a=await (0,m.PL)(l),t=[];return a.forEach(e=>{console.log(e.data()),t.push(e.data())}),console.log("Before UserList-->",t),t},resolveMentionSuggestions:async e=>{let{text:s,roomId:l}=e,a=(0,m.IO)((0,m.hJ)(u.db,"DocPlannerUsers"),(0,m.ar)("email","!=",null)),t=await (0,m.PL)(a),o=[];return t.forEach(e=>{console.log(e.data()),o.push(e.data())}),s&&(o=o.filter(e=>e.name.includes(s))),console.log("User List",o),o.map(e=>e.email)},children:(0,a.jsx)(E._A,{id:null==s?void 0:s.documentid,children:(0,a.jsx)(E.EH,{fallback:(0,a.jsx)("div",{children:"Loadingâ€¦"}),children:l})})})}var R=e=>{let{params:s}=e;return console.log("WorkspaceDocument params",s),(0,a.jsx)(D,{params:s,children:(0,a.jsxs)("div",{className:"flex w-full",children:[(0,a.jsx)("div",{className:"z-50",children:(0,a.jsx)(o.Z,{params:s})}),(0,a.jsx)("div",{className:"w-full",children:(0,a.jsx)(A,{params:s})})]})})}},6028:function(e,s,l){"use strict";l.d(s,{Z:function(){return N}});var a=l(7437),t=l(2265),o=l(5933),d=l(9027),r=l(653),n=l(7062);let i=d.fC,c=d.xz,u=d.h_,m=d.x8,x=t.forwardRef((e,s)=>{let{className:l,...t}=e;return(0,a.jsx)(d.aV,{ref:s,className:(0,n.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",l),...t})});x.displayName=d.aV.displayName;let h=t.forwardRef((e,s)=>{let{className:l,children:t,...o}=e;return(0,a.jsxs)(u,{children:[(0,a.jsx)(x,{}),(0,a.jsxs)(d.VY,{ref:s,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",l),...o,children:[t,(0,a.jsxs)(d.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(r.Pxu,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});h.displayName=d.VY.displayName;let f=e=>{let{className:s,...l}=e;return(0,a.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-1.5 text-center sm:text-left",s),...l})};f.displayName="DialogHeader";let p=e=>{let{className:s,...l}=e;return(0,a.jsx)("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...l})};p.displayName="DialogFooter";let j=t.forwardRef((e,s)=>{let{className:l,...t}=e;return(0,a.jsx)(d.Dx,{ref:s,className:(0,n.cn)("text-lg font-semibold leading-none tracking-tight",l),...t})});j.displayName=d.Dx.displayName;let g=t.forwardRef((e,s)=>{let{className:l,...t}=e;return(0,a.jsx)(d.dk,{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",l),...t})});g.displayName=d.dk.displayName;var v=l(3145),N=e=>{let{children:s,setNewCover:l}=e,[d,r]=(0,t.useState)();return(0,a.jsxs)(i,{children:[(0,a.jsx)(c,{className:"w-full",children:s}),(0,a.jsx)(h,{children:(0,a.jsxs)(f,{children:[(0,a.jsx)(j,{children:"Update Cover"}),(0,a.jsx)(g,{children:(0,a.jsx)("div",{className:"grid grid-cols-2 gap-5 mt-3 md:grid-cols-3 lg:grid-cols-4",children:[{imageUrl:"/Assets/coverImages/cover1.jpg"},{imageUrl:"/Assets/coverImages/cover2.jpg"},{imageUrl:"/Assets/coverImages/cover3.jpg"},{imageUrl:"/Assets/coverImages/cover4.jpg"},{imageUrl:"/Assets/coverImages/cover5.jpg"}].map((e,s)=>(0,a.jsx)("div",{onClick:()=>{r(null==e?void 0:e.imageUrl)},className:"".concat(d==(null==e?void 0:e.imageUrl)&&"border-primary border-2 rounded-sm"),children:(0,a.jsx)(v.default,{src:null==e?void 0:e.imageUrl,width:200,height:140,className:"w-full h-[70px] rounded-sm object-cover cursor-pointer"})}))})}),(0,a.jsxs)(p,{className:"sm:justify-end",children:[(0,a.jsx)(m,{asChild:!0,children:(0,a.jsx)(o.z,{type:"button",variant:"secondary",children:"Close"})}),(0,a.jsx)(m,{asChild:!0,children:(0,a.jsx)(o.z,{type:"button",onClick:()=>l(d),children:"Update"})})]})]})})]})}},7810:function(e,s,l){"use strict";var a=l(7437),t=l(1799);l(2265),s.Z=e=>{let{children:s,showPicker:l,setEmoji:o}=e;return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{children:s}),l&&(0,a.jsx)("div",{className:"absolute z-10",children:(0,a.jsx)(t.ZP,{onEmojiClick:e=>o(e.emoji)})})]})}}},function(e){e.O(0,[358,310,289,327,815,583,821,979,534,878,321,591,699,769,738,950,162,971,117,744],function(){return e(e.s=9792)}),_N_E=e.O()}]);