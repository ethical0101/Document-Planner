exports.id=501,exports.ids=[501],exports.modules={18364:e=>{"use strict";e.exports=function(e){return(e=String(e||""),n.test(e))?"rtl":o.test(e)?"ltr":"neutral"};var t="֑-߿יִ-﷽ﹰ-ﻼ",r="A-Za-z\xc0-\xd6\xd8-\xf6\xf8-ʸ̀-֐ࠀ-῿‎Ⰰ-﬜︀-﹯﻽-￿",n=RegExp("^[^"+r+"]*["+t+"]"),o=RegExp("^[^"+t+"]*["+r+"]")},29795:(e,t)=>{"use strict";for(var r="undefined"!=typeof window&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),n={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},o={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:r?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},i={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},a=1;a<20;a++)i["f"+a]=111+a;function s(e){return e=o[e=e.toLowerCase()]||e}t.P6=function(e,t,r){!t||"byKey"in t||(r=t,t=null),Array.isArray(e)||(e=[e]);var a=e.map(function(e){return function(e,t){var r=t&&t.byKey,a={},u=(e=e.replace("++","+add")).split("+"),l=u.length;for(var c in n)a[n[c]]=!1;var d=!0,f=!1,h=void 0;try{for(var p,m=u[Symbol.iterator]();!(d=(p=m.next()).done);d=!0){var v,g=p.value,y=g.endsWith("?")&&g.length>1;y&&(g=g.slice(0,-1));var b=s(g),E=n[b];if(g.length>1&&!E&&!o[g]&&!i[b])throw TypeError('Unknown modifier: "'+g+'"');1!==l&&E||(r?a.key=b:a.which=(v=g,i[v=s(v)]||v.toUpperCase().charCodeAt(0))),E&&(a[E]=!y||null)}}catch(e){f=!0,h=e}finally{try{!d&&m.return&&m.return()}finally{if(f)throw h}}return a}(e,t)}),u=function(e){return a.some(function(t){return function(e,t){for(var r in e){var n=e[r],o=void 0;if(null!=n&&(null!=(o="key"===r&&null!=t.key?t.key.toLowerCase():"which"===r?91===n&&93===t.which?91:t.which:t[r])||!1!==n)&&o!==n)return!1}return!0}(t,e)})};return null==r?u:u(r)}},95220:(e,t,r)=>{var n=r(99931).Symbol;e.exports=n},69950:(e,t,r)=>{var n=r(95220),o=r(20404),i=r(63122),a=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?o(e):i(e)}},1745:(e,t,r)=>{var n=r(85406),o=/^\s+/;e.exports=function(e){return e?e.slice(0,n(e)+1).replace(o,""):e}},62688:e=>{var t="object"==typeof global&&global&&global.Object===Object&&global;e.exports=t},20404:(e,t,r)=>{var n=r(95220),o=Object.prototype,i=o.hasOwnProperty,a=o.toString,s=n?n.toStringTag:void 0;e.exports=function(e){var t=i.call(e,s),r=e[s];try{e[s]=void 0;var n=!0}catch(e){}var o=a.call(e);return n&&(t?e[s]=r:delete e[s]),o}},63122:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},99931:(e,t,r)=>{var n=r(62688),o="object"==typeof self&&self&&self.Object===Object&&self,i=n||o||Function("return this")();e.exports=i},85406:e=>{var t=/\s/;e.exports=function(e){for(var r=e.length;r--&&t.test(e.charAt(r)););return r}},62968:(e,t,r)=>{var n=r(26131),o=r(7441),i=r(61433),a=Math.max,s=Math.min;e.exports=function(e,t,r){var u,l,c,d,f,h,p=0,m=!1,v=!1,g=!0;if("function"!=typeof e)throw TypeError("Expected a function");function y(t){var r=u,n=l;return u=l=void 0,p=t,d=e.apply(n,r)}function b(e){var r=e-h,n=e-p;return void 0===h||r>=t||r<0||v&&n>=c}function E(){var e,r,n,i=o();if(b(i))return C(i);f=setTimeout(E,(e=i-h,r=i-p,n=t-e,v?s(n,c-r):n))}function C(e){return(f=void 0,g&&u)?y(e):(u=l=void 0,d)}function D(){var e,r=o(),n=b(r);if(u=arguments,l=this,h=r,n){if(void 0===f)return p=e=h,f=setTimeout(E,t),m?y(e):d;if(v)return clearTimeout(f),f=setTimeout(E,t),y(h)}return void 0===f&&(f=setTimeout(E,t)),d}return t=i(t)||0,n(r)&&(m=!!r.leading,c=(v="maxWait"in r)?a(i(r.maxWait)||0,t):c,g="trailing"in r?!!r.trailing:g),D.cancel=function(){void 0!==f&&clearTimeout(f),p=0,u=h=l=f=void 0},D.flush=function(){return void 0===f?d:C(o())},D}},26131:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},64002:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},12682:(e,t,r)=>{var n=r(69950),o=r(64002);e.exports=function(e){return"symbol"==typeof e||o(e)&&"[object Symbol]"==n(e)}},7441:(e,t,r)=>{var n=r(99931);e.exports=function(){return n.Date.now()}},4589:(e,t,r)=>{var n=r(62968),o=r(26131);e.exports=function(e,t,r){var i=!0,a=!0;if("function"!=typeof e)throw TypeError("Expected a function");return o(r)&&(i="leading"in r?!!r.leading:i,a="trailing"in r?!!r.trailing:a),n(e,t,{leading:i,maxWait:t,trailing:a})}},61433:(e,t,r)=>{var n=r(1745),o=r(26131),i=r(12682),a=0/0,s=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(i(e))return a;if(o(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=n(e);var r=u.test(e);return r||l.test(e)?c(e.slice(2),r?2:8):s.test(e)?a:+e}},81299:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});let n=(0,r(26323).Z)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]])},85767:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});let n=(0,r(26323).Z)("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]])},85738:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});let n=(0,r(26323).Z)("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]])},94002:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});let n=(0,r(26323).Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},34757:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});let n=(0,r(26323).Z)("StickyNote",[["path",{d:"M16 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8Z",key:"qazsjp"}],["path",{d:"M15 3v4a2 2 0 0 0 2 2h4",key:"40519r"}]])},33841:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});let n=(0,r(26323).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},29334:(e,t,r)=>{"use strict";r.d(t,{ML:()=>eB,W_:()=>ev,NB:()=>eE,OX:()=>ew,y$:()=>eo,E9:()=>ek,e6:()=>ep,o4:()=>eF,xv:()=>eP,YR:()=>tn,Jh:()=>rj,Om:()=>t$});var n,o,i=r(36032),a=Symbol.for("immer-nothing"),s=Symbol.for("immer-draftable"),u=Symbol.for("immer-state");function l(e,...t){throw Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var c=Object.getPrototypeOf;function d(e){return!!e&&!!e[u]}function f(e){return!!e&&(p(e)||Array.isArray(e)||!!e[s]||!!e.constructor?.[s]||b(e)||E(e))}var h=Object.prototype.constructor.toString();function p(e){if(!e||"object"!=typeof e)return!1;let t=c(e);if(null===t)return!0;let r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object||"function"==typeof r&&Function.toString.call(r)===h}function m(e,t){0===v(e)?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function v(e){let t=e[u];return t?t.type_:Array.isArray(e)?1:b(e)?2:E(e)?3:0}function g(e,t){return 2===v(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function y(e,t,r){let n=v(e);2===n?e.set(t,r):3===n?e.add(r):e[t]=r}function b(e){return e instanceof Map}function E(e){return e instanceof Set}function C(e){return e.copy_||e.base_}function D(e,t){if(b(e))return new Map(e);if(E(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);let r=p(e);if(!0!==t&&("class_only"!==t||r)){let t=c(e);return null!==t&&r?{...e}:Object.assign(Object.create(t),e)}{let t=Object.getOwnPropertyDescriptors(e);delete t[u];let r=Reflect.ownKeys(t);for(let n=0;n<r.length;n++){let o=r[n],i=t[o];!1===i.writable&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(t[o]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[o]})}return Object.create(c(e),t)}}function w(e,t=!1){return x(e)||d(e)||!f(e)||(v(e)>1&&(e.set=e.add=e.clear=e.delete=A),Object.freeze(e),t&&Object.entries(e).forEach(([e,t])=>w(t,!0))),e}function A(){l(2)}function x(e){return Object.isFrozen(e)}var B={};function _(e){let t=B[e];return t||l(0,e),t}function O(e,t){t&&(_("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function T(e){k(e),e.drafts_.forEach(F),e.drafts_=null}function k(e){e===n&&(n=e.parent_)}function S(e){return n={drafts_:[],parent_:n,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function F(e){let t=e[u];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function I(e,t){t.unfinalizedDrafts_=t.drafts_.length;let r=t.drafts_[0];return void 0!==e&&e!==r?(r[u].modified_&&(T(t),l(4)),f(e)&&(e=R(t,e),t.parent_||N(t,e)),t.patches_&&_("Patches").generateReplacementPatches_(r[u].base_,e,t.patches_,t.inversePatches_)):e=R(t,r,[]),T(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==a?e:void 0}function R(e,t,r){if(x(t))return t;let n=t[u];if(!n)return m(t,(o,i)=>M(e,n,t,o,i,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return N(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;let t=n.copy_,o=t,i=!1;3===n.type_&&(o=new Set(t),t.clear(),i=!0),m(o,(o,a)=>M(e,n,t,o,a,r,i)),N(e,t,!1),r&&e.patches_&&_("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function M(e,t,r,n,o,i,a){if(d(o)){let a=R(e,o,i&&t&&3!==t.type_&&!g(t.assigned_,n)?i.concat(n):void 0);if(y(r,n,a),!d(a))return;e.canAutoFreeze_=!1}else a&&r.add(o);if(f(o)&&!x(o)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;R(e,o),(!t||!t.scope_.parent_)&&"symbol"!=typeof n&&Object.prototype.propertyIsEnumerable.call(r,n)&&N(e,o)}}function N(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&w(t,r)}var P={get(e,t){if(t===u)return e;let r=C(e);if(!g(r,t))return function(e,t,r){let n=z(t,r);return n?"value"in n?n.value:n.get?.call(e.draft_):void 0}(e,r,t);let n=r[t];return e.finalized_||!f(n)?n:n===j(e.base_,t)?(U(e),e.copy_[t]=H(n,e)):n},has:(e,t)=>t in C(e),ownKeys:e=>Reflect.ownKeys(C(e)),set(e,t,r){let n=z(C(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){let n=j(C(e),t),o=n?.[u];if(o&&o.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if((r===n?0!==r||1/r==1/n:r!=r&&n!=n)&&(void 0!==r||g(e.base_,t)))return!0;U(e),W(e)}return!!(e.copy_[t]===r&&(void 0!==r||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t]))||(e.copy_[t]=r,e.assigned_[t]=!0,!0)},deleteProperty:(e,t)=>(void 0!==j(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,U(e),W(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){let r=C(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:n.enumerable,value:r[t]}:n},defineProperty(){l(11)},getPrototypeOf:e=>c(e.base_),setPrototypeOf(){l(12)}},L={};function j(e,t){let r=e[u];return(r?C(r):e)[t]}function z(e,t){if(!(t in e))return;let r=c(e);for(;r;){let e=Object.getOwnPropertyDescriptor(r,t);if(e)return e;r=c(r)}}function W(e){!e.modified_&&(e.modified_=!0,e.parent_&&W(e.parent_))}function U(e){e.copy_||(e.copy_=D(e.base_,e.scope_.immer_.useStrictShallowCopy_))}function H(e,t){let r=b(e)?_("MapSet").proxyMap_(e,t):E(e)?_("MapSet").proxySet_(e,t):function(e,t){let r=Array.isArray(e),o={type_:r?1:0,scope_:t?t.scope_:n,modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1},i=o,a=P;r&&(i=[o],a=L);let{revoke:s,proxy:u}=Proxy.revocable(i,a);return o.draft_=u,o.revoke_=s,u}(e,t);return(t?t.scope_:n).drafts_.push(r),r}m(P,(e,t)=>{L[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),L.deleteProperty=function(e,t){return L.set.call(this,e,t,void 0)},L.set=function(e,t,r){return P.set.call(this,e[0],t,r,e[0])};var $=new class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,r)=>{let n;if("function"==typeof e&&"function"!=typeof t){let r=t;t=e;let n=this;return function(e=r,...o){return n.produce(e,e=>t.call(this,e,...o))}}if("function"!=typeof t&&l(6),void 0!==r&&"function"!=typeof r&&l(7),f(e)){let o=S(this),i=H(e,void 0),a=!0;try{n=t(i),a=!1}finally{a?T(o):k(o)}return O(o,r),I(n,o)}if(e&&"object"==typeof e)l(1,e);else{if(void 0===(n=t(e))&&(n=e),n===a&&(n=void 0),this.autoFreeze_&&w(n,!0),r){let t=[],o=[];_("Patches").generateReplacementPatches_(e,n,t,o),r(t,o)}return n}},this.produceWithPatches=(e,t)=>{let r,n;return"function"==typeof e?(t,...r)=>this.produceWithPatches(t,t=>e(t,...r)):[this.produce(e,t,(e,t)=>{r=e,n=t}),r,n]},"boolean"==typeof e?.autoFreeze&&this.setAutoFreeze(e.autoFreeze),"boolean"==typeof e?.useStrictShallowCopy&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){var t;f(e)||l(8),d(e)&&(d(t=e)||l(10,t),e=function e(t){let r;if(!f(t)||x(t))return t;let n=t[u];if(n){if(!n.modified_)return n.base_;n.finalized_=!0,r=D(t,n.scope_.immer_.useStrictShallowCopy_)}else r=D(t,!0);return m(r,(t,n)=>{y(r,t,e(n))}),n&&(n.finalized_=!1),r}(t));let r=S(this),n=H(e,void 0);return n[u].isManual_=!0,k(r),n}finishDraft(e,t){let r=e&&e[u];r&&r.isManual_||l(9);let{scope_:n}=r;return O(n,t),I(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){let n=t[r];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}r>-1&&(t=t.slice(r+1));let n=_("Patches").applyPatches_;return d(e)?n(e,t):this.produce(e,e=>n(e,t))}},V=$.produce;$.produceWithPatches.bind($),$.setAutoFreeze.bind($),$.setUseStrictShallowCopy.bind($),$.applyPatches.bind($);var K=$.createDraft.bind($),q=$.finishDraft.bind($),Y={transform(e,t){var{current:r,affinity:n}=e;if(null!=r){var o=eo.transform(r,t,{affinity:n});e.current=o,null==o&&e.unref()}}},G={transform(e,t){var{current:r,affinity:n}=e;if(null!=r){var o=ek.transform(r,t,{affinity:n});e.current=o,null==o&&e.unref()}}},J={transform(e,t){var{current:r,affinity:n}=e;if(null!=r){var o=ep.transform(r,t,{affinity:n});e.current=o,null==o&&e.unref()}}},Z=new WeakMap,X=new WeakMap,Q=new WeakMap,ee=new WeakMap,et=new WeakMap,er=new WeakMap,en=new WeakMap,eo={ancestors(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{reverse:r=!1}=t,n=eo.levels(e,t);return r?n.slice(1):n.slice(0,-1)},common(e,t){for(var r=[],n=0;n<e.length&&n<t.length;n++){var o=e[n];if(o!==t[n])break;r.push(o)}return r},compare(e,t){for(var r=Math.min(e.length,t.length),n=0;n<r;n++){if(e[n]<t[n])return -1;if(e[n]>t[n])return 1}return 0},endsAfter(e,t){var r=e.length-1,n=e.slice(0,r),o=t.slice(0,r),i=e[r],a=t[r];return eo.equals(n,o)&&i>a},endsAt(e,t){var r=e.length,n=e.slice(0,r),o=t.slice(0,r);return eo.equals(n,o)},endsBefore(e,t){var r=e.length-1,n=e.slice(0,r),o=t.slice(0,r),i=e[r],a=t[r];return eo.equals(n,o)&&i<a},equals:(e,t)=>e.length===t.length&&e.every((e,r)=>e===t[r]),hasPrevious:e=>e[e.length-1]>0,isAfter:(e,t)=>1===eo.compare(e,t),isAncestor:(e,t)=>e.length<t.length&&0===eo.compare(e,t),isBefore:(e,t)=>-1===eo.compare(e,t),isChild:(e,t)=>e.length===t.length+1&&0===eo.compare(e,t),isCommon:(e,t)=>e.length<=t.length&&0===eo.compare(e,t),isDescendant:(e,t)=>e.length>t.length&&0===eo.compare(e,t),isParent:(e,t)=>e.length+1===t.length&&0===eo.compare(e,t),isPath:e=>Array.isArray(e)&&(0===e.length||"number"==typeof e[0]),isSibling(e,t){if(e.length!==t.length)return!1;var r=e.slice(0,-1),n=t.slice(0,-1);return e[e.length-1]!==t[t.length-1]&&eo.equals(r,n)},levels(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{reverse:r=!1}=t,n=[],o=0;o<=e.length;o++)n.push(e.slice(0,o));return r&&n.reverse(),n},next(e){if(0===e.length)throw Error("Cannot get the next path of a root path [".concat(e,"], because it has no next index."));var t=e[e.length-1];return e.slice(0,-1).concat(t+1)},operationCanTransformPath(e){switch(e.type){case"insert_node":case"remove_node":case"merge_node":case"split_node":case"move_node":return!0;default:return!1}},parent(e){if(0===e.length)throw Error("Cannot get the parent path of the root path [".concat(e,"]."));return e.slice(0,-1)},previous(e){if(0===e.length)throw Error("Cannot get the previous path of a root path [".concat(e,"], because it has no previous index."));var t=e[e.length-1];if(t<=0)throw Error("Cannot get the previous path of a first child path [".concat(e,"] because it would result in a negative index."));return e.slice(0,-1).concat(t-1)},relative(e,t){if(!eo.isAncestor(t,e)&&!eo.equals(e,t))throw Error("Cannot get the relative path of [".concat(e,"] inside ancestor [").concat(t,"], because it is not above or equal to the path."));return e.slice(t.length)},transform(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)return null;var n=[...e],{affinity:o="forward"}=r;if(0===e.length)return n;switch(t.type){case"insert_node":var{path:i}=t;(eo.equals(i,n)||eo.endsBefore(i,n)||eo.isAncestor(i,n))&&(n[i.length-1]+=1);break;case"remove_node":var{path:a}=t;if(eo.equals(a,n)||eo.isAncestor(a,n))return null;eo.endsBefore(a,n)&&(n[a.length-1]-=1);break;case"merge_node":var{path:s,position:u}=t;eo.equals(s,n)||eo.endsBefore(s,n)?n[s.length-1]-=1:eo.isAncestor(s,n)&&(n[s.length-1]-=1,n[s.length]+=u);break;case"split_node":var{path:l,position:c}=t;if(eo.equals(l,n)){if("forward"===o)n[n.length-1]+=1;else if("backward"!==o)return null}else eo.endsBefore(l,n)?n[l.length-1]+=1:eo.isAncestor(l,n)&&e[l.length]>=c&&(n[l.length-1]+=1,n[l.length]-=c);break;case"move_node":var{path:d,newPath:f}=t;if(eo.equals(d,f))break;if(eo.isAncestor(d,n)||eo.equals(d,n)){var h=f.slice();return eo.endsBefore(d,f)&&d.length<f.length&&(h[d.length-1]-=1),h.concat(n.slice(d.length))}eo.isSibling(d,f)&&(eo.isAncestor(f,n)||eo.equals(f,n))?eo.endsBefore(d,n)?n[d.length-1]-=1:n[d.length-1]+=1:eo.endsBefore(f,n)||eo.equals(f,n)||eo.isAncestor(f,n)?(eo.endsBefore(d,n)&&(n[d.length-1]-=1),n[f.length-1]+=1):eo.endsBefore(d,n)&&(eo.equals(f,n)&&(n[f.length-1]+=1),n[d.length-1]-=1)}return n}};function ei(e){return(ei="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ea(e,t,r){var n;return n=function(e,t){if("object"!==ei(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==ei(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"===ei(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function es(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function eu(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?es(Object(r),!0).forEach(function(t){ea(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):es(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var el=(e,t,r)=>{switch(r.type){case"insert_node":var{path:n,node:o}=r,i=eE.parent(e,n),a=n[n.length-1];if(a>i.children.length)throw Error('Cannot apply an "insert_node" operation at path ['.concat(n,"] because the destination is past the end of the node."));if(i.children.splice(a,0,o),t)for(var[s,u]of ep.points(t))t[u]=ek.transform(s,r);break;case"insert_text":var{path:l,offset:c,text:d}=r;if(0===d.length)break;var f=eE.leaf(e,l),h=f.text.slice(0,c),p=f.text.slice(c);if(f.text=h+d+p,t)for(var[m,v]of ep.points(t))t[v]=ek.transform(m,r);break;case"merge_node":var{path:g}=r,y=eE.get(e,g),b=eo.previous(g),E=eE.get(e,b),C=eE.parent(e,g),D=g[g.length-1];if(eP.isText(y)&&eP.isText(E))E.text+=y.text;else if(eP.isText(y)||eP.isText(E))throw Error('Cannot apply a "merge_node" operation at path ['.concat(g,"] to nodes of different interfaces: ").concat(eF.stringify(y)," ").concat(eF.stringify(E)));else E.children.push(...y.children);if(C.children.splice(D,1),t)for(var[w,A]of ep.points(t))t[A]=ek.transform(w,r);break;case"move_node":var{path:x,newPath:B}=r;if(eo.isAncestor(x,B))throw Error("Cannot move a path [".concat(x,"] to new path [").concat(B,"] because the destination is inside itself."));var _=eE.get(e,x),O=eE.parent(e,x),T=x[x.length-1];O.children.splice(T,1);var k=eo.transform(x,r),S=eE.get(e,eo.parent(k)),F=k[k.length-1];if(S.children.splice(F,0,_),t)for(var[I,R]of ep.points(t))t[R]=ek.transform(I,r);break;case"remove_node":var{path:M}=r,N=M[M.length-1];if(eE.parent(e,M).children.splice(N,1),t)for(var[P,L]of ep.points(t)){var j=ek.transform(P,r);if(null!=t&&null!=j)t[L]=j;else{var z=void 0,W=void 0;for(var[U,H]of eE.texts(e))if(-1===eo.compare(H,M))z=[U,H];else{W=[U,H];break}var $=!1;z&&W&&($=eo.equals(W[1],M)?!eo.hasPrevious(W[1]):eo.common(z[1],M).length<eo.common(W[1],M).length),z&&!$?(P.path=z[1],P.offset=z[0].text.length):W?(P.path=W[1],P.offset=0):t=null}}break;case"remove_text":var{path:V,offset:K,text:q}=r;if(0===q.length)break;var Y=eE.leaf(e,V),G=Y.text.slice(0,K),J=Y.text.slice(K+q.length);if(Y.text=G+J,t)for(var[Z,X]of ep.points(t))t[X]=ek.transform(Z,r);break;case"set_node":var{path:Q,properties:ee,newProperties:et}=r;if(0===Q.length)throw Error("Cannot set properties on the root node!");var er=eE.get(e,Q);for(var en in et){if("children"===en||"text"===en)throw Error('Cannot set the "'.concat(en,'" property of nodes!'));var ei=et[en];null==ei?delete er[en]:er[en]=ei}for(var ea in ee)et.hasOwnProperty(ea)||delete er[ea];break;case"set_selection":var{newProperties:es}=r;if(null==es)t=es;else{if(null==t){if(!ep.isRange(es))throw Error('Cannot apply an incomplete "set_selection" operation properties '.concat(eF.stringify(es)," when there is no current selection."));t=eu({},es)}for(var el in es){var ec=es[el];if(null==ec){if("anchor"===el||"focus"===el)throw Error('Cannot remove the "'.concat(el,'" selection property'));delete t[el]}else t[el]=ec}}break;case"split_node":var ed,{path:ef,position:eh,properties:em}=r;if(0===ef.length)throw Error('Cannot apply a "split_node" operation at path ['.concat(ef,"] because the root node cannot be split."));var ev=eE.get(e,ef),eg=eE.parent(e,ef),ey=ef[ef.length-1];if(eP.isText(ev)){var eb=ev.text.slice(0,eh),eC=ev.text.slice(eh);ev.text=eb,ed=eu(eu({},em),{},{text:eC})}else{var eD=ev.children.slice(0,eh),ew=ev.children.slice(eh);ev.children=eD,ed=eu(eu({},em),{},{children:ew})}if(eg.children.splice(ey+1,0,ed),t)for(var[eA,ex]of ep.points(t))t[ex]=ek.transform(eA,r)}return t},ec=(e,t)=>{for(var r in e){var n=e[r],o=t[r];if((0,i.P)(n)&&(0,i.P)(o)){if(!ec(n,o))return!1}else if(Array.isArray(n)&&Array.isArray(o)){if(n.length!==o.length)return!1;for(var a=0;a<n.length;a++)if(n[a]!==o[a])return!1}else if(n!==o)return!1}for(var s in t)if(void 0===e[s]&&void 0!==t[s])return!1;return!0};function ed(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var ef=["anchor","focus"];function eh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var ep={edges(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{reverse:r=!1}=t,{anchor:n,focus:o}=e;return ep.isBackward(e)===r?[n,o]:[o,n]},end(e){var[,t]=ep.edges(e);return t},equals:(e,t)=>ek.equals(e.anchor,t.anchor)&&ek.equals(e.focus,t.focus),includes(e,t){if(ep.isRange(t)){if(ep.includes(e,t.anchor)||ep.includes(e,t.focus))return!0;var[r,n]=ep.edges(e),[o,i]=ep.edges(t);return ek.isBefore(r,o)&&ek.isAfter(n,i)}var[a,s]=ep.edges(e),u=!1,l=!1;return ek.isPoint(t)?(u=ek.compare(t,a)>=0,l=0>=ek.compare(t,s)):(u=eo.compare(t,a.path)>=0,l=0>=eo.compare(t,s.path)),u&&l},intersection(e,t){var r=ed(e,ef),[n,o]=ep.edges(e),[i,a]=ep.edges(t),s=ek.isBefore(n,i)?i:n,u=ek.isBefore(o,a)?o:a;return ek.isBefore(u,s)?null:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eh(Object(r),!0).forEach(function(t){ea(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eh(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({anchor:s,focus:u},r)},isBackward(e){var{anchor:t,focus:r}=e;return ek.isAfter(t,r)},isCollapsed(e){var{anchor:t,focus:r}=e;return ek.equals(t,r)},isExpanded:e=>!ep.isCollapsed(e),isForward:e=>!ep.isBackward(e),isRange:e=>(0,i.P)(e)&&ek.isPoint(e.anchor)&&ek.isPoint(e.focus),*points(e){yield[e.anchor,"anchor"],yield[e.focus,"focus"]},start(e){var[t]=ep.edges(e);return t},transform(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return V(e,e=>{if(null===e)return null;var n,o,{affinity:i="inward"}=r;if("inward"===i){var a=ep.isCollapsed(e);ep.isForward(e)?(n="forward",o=a?n:"backward"):(n="backward",o=a?n:"forward")}else"outward"===i?ep.isForward(e)?(n="backward",o="forward"):(n="forward",o="backward"):(n=i,o=i);var s=ek.transform(e.anchor,t,{affinity:n}),u=ek.transform(e.focus,t,{affinity:o});if(!s||!u)return null;e.anchor=s,e.focus=u})}},em=e=>(0,i.P)(e)&&eE.isNodeList(e.children)&&!eB.isEditor(e),ev={isAncestor:e=>(0,i.P)(e)&&eE.isNodeList(e.children),isElement:em,isElementList:e=>Array.isArray(e)&&e.every(e=>ev.isElement(e)),isElementProps:e=>void 0!==e.children,isElementType:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"type";return em(e)&&e[r]===t},matches(e,t){for(var r in t)if("children"!==r&&e[r]!==t[r])return!1;return!0}},eg=["children"],ey=["text"],eb=new WeakMap,eE={ancestor(e,t){var r=eE.get(e,t);if(eP.isText(r))throw Error("Cannot get the ancestor node at path [".concat(t,"] because it refers to a text node instead: ").concat(eF.stringify(r)));return r},ancestors(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function*(){for(var n of eo.ancestors(t,r)){var o=[eE.ancestor(e,n),n];yield o}}()},child(e,t){if(eP.isText(e))throw Error("Cannot get the child of a text node: ".concat(eF.stringify(e)));var r=e.children[t];if(null==r)throw Error("Cannot get child at index `".concat(t,"` in node: ").concat(eF.stringify(e)));return r},children(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function*(){for(var{reverse:n=!1}=r,o=eE.ancestor(e,t),{children:i}=o,a=n?i.length-1:0;n?a>=0:a<i.length;){var s=eE.child(o,a),u=t.concat(a);yield[s,u],a=n?a-1:a+1}}()},common(e,t,r){var n=eo.common(t,r);return[eE.get(e,n),n]},descendant(e,t){var r=eE.get(e,t);if(eB.isEditor(r))throw Error("Cannot get the descendant node at path [".concat(t,"] because it refers to the root editor node instead: ").concat(eF.stringify(r)));return r},descendants(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){for(var[r,n]of eE.nodes(e,t))0!==n.length&&(yield[r,n])}()},elements(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){for(var[r,n]of eE.nodes(e,t))ev.isElement(r)&&(yield[r,n])}()},extractProps(e){if(ev.isAncestor(e)){var t=ed(e,eg);return t}var t=ed(e,ey);return t},first(e,t){for(var r=t.slice(),n=eE.get(e,r);n&&!eP.isText(n)&&0!==n.children.length;)n=n.children[0],r.push(0);return[n,r]},fragment(e,t){if(eP.isText(e))throw Error("Cannot get a fragment starting from a root text node: ".concat(eF.stringify(e)));return V({children:e.children},e=>{var[r,n]=ep.edges(t);for(var[,o]of eE.nodes(e,{reverse:!0,pass:e=>{var[,r]=e;return!ep.includes(t,r)}})){if(!ep.includes(t,o)){var i=eE.parent(e,o),a=o[o.length-1];i.children.splice(a,1)}if(eo.equals(o,n.path)){var s=eE.leaf(e,o);s.text=s.text.slice(0,n.offset)}if(eo.equals(o,r.path)){var u=eE.leaf(e,o);u.text=u.text.slice(r.offset)}}eB.isEditor(e)&&(e.selection=null)}).children},get(e,t){for(var r=e,n=0;n<t.length;n++){var o=t[n];if(eP.isText(r)||!r.children[o])throw Error("Cannot find a descendant at path [".concat(t,"] in node: ").concat(eF.stringify(e)));r=r.children[o]}return r},has(e,t){for(var r=e,n=0;n<t.length;n++){var o=t[n];if(eP.isText(r)||!r.children[o])return!1;r=r.children[o]}return!0},isNode:e=>eP.isText(e)||ev.isElement(e)||eB.isEditor(e),isNodeList(e){if(!Array.isArray(e))return!1;var t=eb.get(e);if(void 0!==t)return t;var r=e.every(e=>eE.isNode(e));return eb.set(e,r),r},last(e,t){for(var r=t.slice(),n=eE.get(e,r);n&&!eP.isText(n)&&0!==n.children.length;){var o=n.children.length-1;n=n.children[o],r.push(o)}return[n,r]},leaf(e,t){var r=eE.get(e,t);if(!eP.isText(r))throw Error("Cannot get the leaf node at path [".concat(t,"] because it refers to a non-leaf node: ").concat(eF.stringify(r)));return r},levels(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function*(){for(var n of eo.levels(t,r)){var o=eE.get(e,n);yield[o,n]}}()},matches:(e,t)=>ev.isElement(e)&&ev.isElementProps(t)&&ev.matches(e,t)||eP.isText(e)&&eP.isTextProps(t)&&eP.matches(e,t),nodes(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){for(var{pass:r,reverse:n=!1}=t,{from:o=[],to:i}=t,a=new Set,s=[],u=e;!(i&&(n?eo.isBefore(s,i):eo.isAfter(s,i)));){if(a.has(u)||(yield[u,s]),!a.has(u)&&!eP.isText(u)&&0!==u.children.length&&(null==r||!1===r([u,s]))){a.add(u);var l=n?u.children.length-1:0;eo.isAncestor(s,o)&&(l=o[s.length]),s=s.concat(l),u=eE.get(e,s);continue}if(0===s.length)break;if(!n){var c=eo.next(s);if(eE.has(e,c)){s=c,u=eE.get(e,s);continue}}if(n&&0!==s[s.length-1]){s=eo.previous(s),u=eE.get(e,s);continue}s=eo.parent(s),u=eE.get(e,s),a.add(u)}}()},parent(e,t){var r=eo.parent(t),n=eE.get(e,r);if(eP.isText(n))throw Error("Cannot get the parent of path [".concat(t,"] because it does not exist in the root."));return n},string:e=>eP.isText(e)?e.text:e.children.map(eE.string).join(""),texts(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){for(var[r,n]of eE.nodes(e,t))eP.isText(r)&&(yield[r,n])}()}};function eC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function eD(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eC(Object(r),!0).forEach(function(t){ea(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eC(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var ew={isNodeOperation:e=>ew.isOperation(e)&&e.type.endsWith("_node"),isOperation(e){if(!(0,i.P)(e))return!1;switch(e.type){case"insert_node":case"remove_node":return eo.isPath(e.path)&&eE.isNode(e.node);case"insert_text":case"remove_text":return"number"==typeof e.offset&&"string"==typeof e.text&&eo.isPath(e.path);case"merge_node":return"number"==typeof e.position&&eo.isPath(e.path)&&(0,i.P)(e.properties);case"move_node":return eo.isPath(e.path)&&eo.isPath(e.newPath);case"set_node":return eo.isPath(e.path)&&(0,i.P)(e.properties)&&(0,i.P)(e.newProperties);case"set_selection":return null===e.properties&&ep.isRange(e.newProperties)||null===e.newProperties&&ep.isRange(e.properties)||(0,i.P)(e.properties)&&(0,i.P)(e.newProperties);case"split_node":return eo.isPath(e.path)&&"number"==typeof e.position&&(0,i.P)(e.properties);default:return!1}},isOperationList:e=>Array.isArray(e)&&e.every(e=>ew.isOperation(e)),isSelectionOperation:e=>ew.isOperation(e)&&e.type.endsWith("_selection"),isTextOperation:e=>ew.isOperation(e)&&e.type.endsWith("_text"),inverse(e){switch(e.type){case"insert_node":return eD(eD({},e),{},{type:"remove_node"});case"insert_text":return eD(eD({},e),{},{type:"remove_text"});case"merge_node":return eD(eD({},e),{},{type:"split_node",path:eo.previous(e.path)});case"move_node":var{newPath:t,path:r}=e;if(eo.equals(t,r))return e;if(eo.isSibling(r,t))return eD(eD({},e),{},{path:t,newPath:r});var n=eo.transform(r,e),o=eo.transform(eo.next(r),e);return eD(eD({},e),{},{path:n,newPath:o});case"remove_node":return eD(eD({},e),{},{type:"insert_node"});case"remove_text":return eD(eD({},e),{},{type:"insert_text"});case"set_node":var{properties:i,newProperties:a}=e;return eD(eD({},e),{},{properties:a,newProperties:i});case"set_selection":var{properties:s,newProperties:u}=e;if(null==s)return eD(eD({},e),{},{properties:u,newProperties:null});if(null==u)return eD(eD({},e),{},{properties:null,newProperties:s});return eD(eD({},e),{},{properties:u,newProperties:s});case"split_node":return eD(eD({},e),{},{type:"merge_node",path:eo.next(e.path)})}}},eA=new WeakMap,ex=e=>{var t=eA.get(e);if(void 0!==t)return t;if(!(0,i.P)(e))return!1;var r="function"==typeof e.addMark&&"function"==typeof e.apply&&"function"==typeof e.deleteFragment&&"function"==typeof e.insertBreak&&"function"==typeof e.insertSoftBreak&&"function"==typeof e.insertFragment&&"function"==typeof e.insertNode&&"function"==typeof e.insertText&&"function"==typeof e.isElementReadOnly&&"function"==typeof e.isInline&&"function"==typeof e.isSelectable&&"function"==typeof e.isVoid&&"function"==typeof e.normalizeNode&&"function"==typeof e.onChange&&"function"==typeof e.removeMark&&"function"==typeof e.getDirtyPaths&&(null===e.marks||(0,i.P)(e.marks))&&(null===e.selection||ep.isRange(e.selection))&&eE.isNodeList(e.children)&&ew.isOperationList(e.operations);return eA.set(e,r),r},eB={above:(e,t)=>e.above(t),addMark(e,t,r){e.addMark(t,r)},after:(e,t,r)=>e.after(t,r),before:(e,t,r)=>e.before(t,r),deleteBackward(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{unit:r="character"}=t;e.deleteBackward(r)},deleteForward(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{unit:r="character"}=t;e.deleteForward(r)},deleteFragment(e,t){e.deleteFragment(t)},edges:(e,t)=>e.edges(t),elementReadOnly(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.elementReadOnly(t)},end:(e,t)=>e.end(t),first:(e,t)=>e.first(t),fragment:(e,t)=>e.fragment(t),hasBlocks:(e,t)=>e.hasBlocks(t),hasInlines:(e,t)=>e.hasInlines(t),hasPath:(e,t)=>e.hasPath(t),hasTexts:(e,t)=>e.hasTexts(t),insertBreak(e){e.insertBreak()},insertFragment(e,t,r){e.insertFragment(t,r)},insertNode(e,t){e.insertNode(t)},insertSoftBreak(e){e.insertSoftBreak()},insertText(e,t){e.insertText(t)},isBlock:(e,t)=>e.isBlock(t),isEdge:(e,t,r)=>e.isEdge(t,r),isEditor:e=>ex(e),isElementReadOnly:(e,t)=>e.isElementReadOnly(t),isEmpty:(e,t)=>e.isEmpty(t),isEnd:(e,t,r)=>e.isEnd(t,r),isInline:(e,t)=>e.isInline(t),isNormalizing:e=>e.isNormalizing(),isSelectable:(e,t)=>e.isSelectable(t),isStart:(e,t,r)=>e.isStart(t,r),isVoid:(e,t)=>e.isVoid(t),last:(e,t)=>e.last(t),leaf:(e,t,r)=>e.leaf(t,r),levels:(e,t)=>e.levels(t),marks:e=>e.getMarks(),next:(e,t)=>e.next(t),node:(e,t,r)=>e.node(t,r),nodes:(e,t)=>e.nodes(t),normalize(e,t){e.normalize(t)},parent:(e,t,r)=>e.parent(t,r),path:(e,t,r)=>e.path(t,r),pathRef:(e,t,r)=>e.pathRef(t,r),pathRefs:e=>e.pathRefs(),point:(e,t,r)=>e.point(t,r),pointRef:(e,t,r)=>e.pointRef(t,r),pointRefs:e=>e.pointRefs(),positions:(e,t)=>e.positions(t),previous:(e,t)=>e.previous(t),range:(e,t,r)=>e.range(t,r),rangeRef:(e,t,r)=>e.rangeRef(t,r),rangeRefs:e=>e.rangeRefs(),removeMark(e,t){e.removeMark(t)},setNormalizing(e,t){e.setNormalizing(t)},start:(e,t)=>e.start(t),string:(e,t,r)=>e.string(t,r),unhangRange:(e,t,r)=>e.unhangRange(t,r),void:(e,t)=>e.void(t),withoutNormalizing(e,t){e.withoutNormalizing(t)}},e_={isSpan:e=>Array.isArray(e)&&2===e.length&&e.every(eo.isPath)};function eO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function eT(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eO(Object(r),!0).forEach(function(t){ea(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eO(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var ek={compare(e,t){var r=eo.compare(e.path,t.path);return 0===r?e.offset<t.offset?-1:e.offset>t.offset?1:0:r},isAfter:(e,t)=>1===ek.compare(e,t),isBefore:(e,t)=>-1===ek.compare(e,t),equals:(e,t)=>e.offset===t.offset&&eo.equals(e.path,t.path),isPoint:e=>(0,i.P)(e)&&"number"==typeof e.offset&&eo.isPath(e.path),transform(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return V(e,e=>{if(null===e)return null;var{affinity:n="forward"}=r,{path:o,offset:i}=e;switch(t.type){case"insert_node":case"move_node":e.path=eo.transform(o,t,r);break;case"insert_text":eo.equals(t.path,o)&&(t.offset<i||t.offset===i&&"forward"===n)&&(e.offset+=t.text.length);break;case"merge_node":eo.equals(t.path,o)&&(e.offset+=t.position),e.path=eo.transform(o,t,r);break;case"remove_text":eo.equals(t.path,o)&&t.offset<=i&&(e.offset-=Math.min(i-t.offset,t.text.length));break;case"remove_node":if(eo.equals(t.path,o)||eo.isAncestor(t.path,o))return null;e.path=eo.transform(o,t,r);break;case"split_node":if(eo.equals(t.path,o)){if(t.position===i&&null==n)return null;(t.position<i||t.position===i&&"forward"===n)&&(e.offset-=t.position,e.path=eo.transform(o,t,eT(eT({},r),{},{affinity:"forward"})))}else e.path=eo.transform(o,t,r)}})}},eS=void 0,eF={setScrubber(e){eS=e},stringify:e=>JSON.stringify(e,eS)},eI=["text"],eR=["anchor","focus"];function eM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function eN(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eM(Object(r),!0).forEach(function(t){ea(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eM(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var eP={equals(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{loose:n=!1}=r;return ec(n?ed(e,eI):e,n?ed(t,eI):t)},isText:e=>(0,i.P)(e)&&"string"==typeof e.text,isTextList:e=>Array.isArray(e)&&e.every(e=>eP.isText(e)),isTextProps:e=>void 0!==e.text,matches(e,t){for(var r in t)if("text"!==r&&(!e.hasOwnProperty(r)||e[r]!==t[r]))return!1;return!0},decorations(e,t){var r=[eN({},e)];for(var n of t){var o=ed(n,eR),[i,a]=ep.edges(n),s=[],u=0,l=i.offset,c=a.offset;for(var d of r){var{length:f}=d.text,h=u;if(u+=f,l<=h&&u<=c){Object.assign(d,o),s.push(d);continue}if(l!==c&&(l===u||c===h)||l>u||c<h||c===h&&0!==h){s.push(d);continue}var p=d,m=void 0,v=void 0;if(c<u){var g=c-h;v=eN(eN({},p),{},{text:p.text.slice(g)}),p=eN(eN({},p),{},{text:p.text.slice(0,g)})}if(l>h){var y=l-h;m=eN(eN({},p),{},{text:p.text.slice(0,y)}),p=eN(eN({},p),{},{text:p.text.slice(y)})}Object.assign(p,o),m&&s.push(m),s.push(p),v&&s.push(v)}r=s}return r}},eL=e=>e.selection?e.selection:e.children.length>0?eB.end(e,[]):[0],ej=(e,t)=>{var[r]=eB.node(e,t);return e=>e===r},ez=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=!t,n=t?eq(e):e,i=o.None,a=o.None,s=0,u=null;for(var l of n){var c=l.codePointAt(0);if(!c)break;var d=e5(l,c);if([i,a]=r?[a,d]:[d,i],(i&o.ZWJ)!=0&&(a&o.ExtPict)!=0&&!(r?e6(e.substring(0,s)):e6(e.substring(0,e.length-s)))||(i&o.RI)!=0&&(a&o.RI)!=0&&!(u=null!==u?!u:!!r||te(e.substring(0,e.length-s)))||i!==o.None&&a!==o.None&&function(e,t){return -1===e7.findIndex(r=>(e&r[0])!=0&&(t&r[1])!=0)}(i,a))break;s+=l.length}return s||1},eW=/\s/,eU=/[\u002B\u0021-\u0023\u0025-\u002A\u002C-\u002F\u003A\u003B\u003F\u0040\u005B-\u005D\u005F\u007B\u007D\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,eH=/['\u2018\u2019]/,e$=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=0,n=!1;e.length>0;){var o=ez(e,t),[i,a]=eV(e,o,t);if(eK(i,a,t))n=!0,r+=o;else if(n)break;else r+=o;e=a}return r},eV=(e,t,r)=>{if(r){var n=e.length-t;return[e.slice(n,e.length),e.slice(0,n)]}return[e.slice(0,t),e.slice(t)]},eK=function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(eW.test(t))return!1;if(eH.test(t)){var o=ez(r,n),[i,a]=eV(r,o,n);if(e(i,a,n))return!0}return!eU.test(t)},eq=function*(e){for(var t=e.length-1,r=0;r<e.length;r++){var n=e.charAt(t-r);if(eG(n.charCodeAt(0))){var o=e.charAt(t-r-1);if(eY(o.charCodeAt(0))){yield o+n,r++;continue}}yield n}},eY=e=>e>=55296&&e<=56319,eG=e=>e>=56320&&e<=57343;!function(e){e[e.None=0]="None",e[e.Extend=1]="Extend",e[e.ZWJ=2]="ZWJ",e[e.RI=4]="RI",e[e.Prepend=8]="Prepend",e[e.SpacingMark=16]="SpacingMark",e[e.L=32]="L",e[e.V=64]="V",e[e.T=128]="T",e[e.LV=256]="LV",e[e.LVT=512]="LVT",e[e.ExtPict=1024]="ExtPict",e[e.Any=2048]="Any"}(o||(o={}));var eJ=/^(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC01\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDE41\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4\uDF00\uDF01\uDF36-\uDF3A\uDF40\uDF42]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])$/,eZ=/^(?:[\u0600-\u0605\u06DD\u070F\u0890\u0891\u08E2\u0D4E]|\uD804[\uDCBD\uDCCD\uDDC2\uDDC3]|\uD806[\uDD3F\uDD41\uDE3A\uDE84-\uDE89]|\uD807\uDD46)$/,eX=/^(?:[\u0903\u093B\u093E-\u0940\u0949-\u094C\u094E\u094F\u0982\u0983\u09BF\u09C0\u09C7\u09C8\u09CB\u09CC\u0A03\u0A3E-\u0A40\u0A83\u0ABE-\u0AC0\u0AC9\u0ACB\u0ACC\u0B02\u0B03\u0B40\u0B47\u0B48\u0B4B\u0B4C\u0BBF\u0BC1\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0C01-\u0C03\u0C41-\u0C44\u0C82\u0C83\u0CBE\u0CC0\u0CC1\u0CC3\u0CC4\u0CC7\u0CC8\u0CCA\u0CCB\u0D02\u0D03\u0D3F\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D82\u0D83\u0DD0\u0DD1\u0DD8-\u0DDE\u0DF2\u0DF3\u0E33\u0EB3\u0F3E\u0F3F\u0F7F\u1031\u103B\u103C\u1056\u1057\u1084\u1715\u1734\u17B6\u17BE-\u17C5\u17C7\u17C8\u1923-\u1926\u1929-\u192B\u1930\u1931\u1933-\u1938\u1A19\u1A1A\u1A55\u1A57\u1A6D-\u1A72\u1B04\u1B3B\u1B3D-\u1B41\u1B43\u1B44\u1B82\u1BA1\u1BA6\u1BA7\u1BAA\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2\u1BF3\u1C24-\u1C2B\u1C34\u1C35\u1CE1\u1CF7\uA823\uA824\uA827\uA880\uA881\uA8B4-\uA8C3\uA952\uA953\uA983\uA9B4\uA9B5\uA9BA\uA9BB\uA9BE-\uA9C0\uAA2F\uAA30\uAA33\uAA34\uAA4D\uAAEB\uAAEE\uAAEF\uAAF5\uABE3\uABE4\uABE6\uABE7\uABE9\uABEA\uABEC]|\uD804[\uDC00\uDC02\uDC82\uDCB0-\uDCB2\uDCB7\uDCB8\uDD2C\uDD45\uDD46\uDD82\uDDB3-\uDDB5\uDDBF\uDDC0\uDDCE\uDE2C-\uDE2E\uDE32\uDE33\uDE35\uDEE0-\uDEE2\uDF02\uDF03\uDF3F\uDF41-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF62\uDF63]|\uD805[\uDC35-\uDC37\uDC40\uDC41\uDC45\uDCB1\uDCB2\uDCB9\uDCBB\uDCBC\uDCBE\uDCC1\uDDB0\uDDB1\uDDB8-\uDDBB\uDDBE\uDE30-\uDE32\uDE3B\uDE3C\uDE3E\uDEAC\uDEAE\uDEAF\uDEB6\uDF26]|\uD806[\uDC2C-\uDC2E\uDC38\uDD31-\uDD35\uDD37\uDD38\uDD3D\uDD40\uDD42\uDDD1-\uDDD3\uDDDC-\uDDDF\uDDE4\uDE39\uDE57\uDE58\uDE97]|\uD807[\uDC2F\uDC3E\uDCA9\uDCB1\uDCB4\uDD8A-\uDD8E\uDD93\uDD94\uDD96\uDEF5\uDEF6]|\uD81B[\uDF51-\uDF87\uDFF0\uDFF1]|\uD834[\uDD66\uDD6D])$/,eQ=/^[\u1100-\u115F\uA960-\uA97C]$/,e0=/^[\u1160-\u11A7\uD7B0-\uD7C6]$/,e1=/^[\u11A8-\u11FF\uD7CB-\uD7FB]$/,e2=/^[\uAC00\uAC1C\uAC38\uAC54\uAC70\uAC8C\uACA8\uACC4\uACE0\uACFC\uAD18\uAD34\uAD50\uAD6C\uAD88\uADA4\uADC0\uADDC\uADF8\uAE14\uAE30\uAE4C\uAE68\uAE84\uAEA0\uAEBC\uAED8\uAEF4\uAF10\uAF2C\uAF48\uAF64\uAF80\uAF9C\uAFB8\uAFD4\uAFF0\uB00C\uB028\uB044\uB060\uB07C\uB098\uB0B4\uB0D0\uB0EC\uB108\uB124\uB140\uB15C\uB178\uB194\uB1B0\uB1CC\uB1E8\uB204\uB220\uB23C\uB258\uB274\uB290\uB2AC\uB2C8\uB2E4\uB300\uB31C\uB338\uB354\uB370\uB38C\uB3A8\uB3C4\uB3E0\uB3FC\uB418\uB434\uB450\uB46C\uB488\uB4A4\uB4C0\uB4DC\uB4F8\uB514\uB530\uB54C\uB568\uB584\uB5A0\uB5BC\uB5D8\uB5F4\uB610\uB62C\uB648\uB664\uB680\uB69C\uB6B8\uB6D4\uB6F0\uB70C\uB728\uB744\uB760\uB77C\uB798\uB7B4\uB7D0\uB7EC\uB808\uB824\uB840\uB85C\uB878\uB894\uB8B0\uB8CC\uB8E8\uB904\uB920\uB93C\uB958\uB974\uB990\uB9AC\uB9C8\uB9E4\uBA00\uBA1C\uBA38\uBA54\uBA70\uBA8C\uBAA8\uBAC4\uBAE0\uBAFC\uBB18\uBB34\uBB50\uBB6C\uBB88\uBBA4\uBBC0\uBBDC\uBBF8\uBC14\uBC30\uBC4C\uBC68\uBC84\uBCA0\uBCBC\uBCD8\uBCF4\uBD10\uBD2C\uBD48\uBD64\uBD80\uBD9C\uBDB8\uBDD4\uBDF0\uBE0C\uBE28\uBE44\uBE60\uBE7C\uBE98\uBEB4\uBED0\uBEEC\uBF08\uBF24\uBF40\uBF5C\uBF78\uBF94\uBFB0\uBFCC\uBFE8\uC004\uC020\uC03C\uC058\uC074\uC090\uC0AC\uC0C8\uC0E4\uC100\uC11C\uC138\uC154\uC170\uC18C\uC1A8\uC1C4\uC1E0\uC1FC\uC218\uC234\uC250\uC26C\uC288\uC2A4\uC2C0\uC2DC\uC2F8\uC314\uC330\uC34C\uC368\uC384\uC3A0\uC3BC\uC3D8\uC3F4\uC410\uC42C\uC448\uC464\uC480\uC49C\uC4B8\uC4D4\uC4F0\uC50C\uC528\uC544\uC560\uC57C\uC598\uC5B4\uC5D0\uC5EC\uC608\uC624\uC640\uC65C\uC678\uC694\uC6B0\uC6CC\uC6E8\uC704\uC720\uC73C\uC758\uC774\uC790\uC7AC\uC7C8\uC7E4\uC800\uC81C\uC838\uC854\uC870\uC88C\uC8A8\uC8C4\uC8E0\uC8FC\uC918\uC934\uC950\uC96C\uC988\uC9A4\uC9C0\uC9DC\uC9F8\uCA14\uCA30\uCA4C\uCA68\uCA84\uCAA0\uCABC\uCAD8\uCAF4\uCB10\uCB2C\uCB48\uCB64\uCB80\uCB9C\uCBB8\uCBD4\uCBF0\uCC0C\uCC28\uCC44\uCC60\uCC7C\uCC98\uCCB4\uCCD0\uCCEC\uCD08\uCD24\uCD40\uCD5C\uCD78\uCD94\uCDB0\uCDCC\uCDE8\uCE04\uCE20\uCE3C\uCE58\uCE74\uCE90\uCEAC\uCEC8\uCEE4\uCF00\uCF1C\uCF38\uCF54\uCF70\uCF8C\uCFA8\uCFC4\uCFE0\uCFFC\uD018\uD034\uD050\uD06C\uD088\uD0A4\uD0C0\uD0DC\uD0F8\uD114\uD130\uD14C\uD168\uD184\uD1A0\uD1BC\uD1D8\uD1F4\uD210\uD22C\uD248\uD264\uD280\uD29C\uD2B8\uD2D4\uD2F0\uD30C\uD328\uD344\uD360\uD37C\uD398\uD3B4\uD3D0\uD3EC\uD408\uD424\uD440\uD45C\uD478\uD494\uD4B0\uD4CC\uD4E8\uD504\uD520\uD53C\uD558\uD574\uD590\uD5AC\uD5C8\uD5E4\uD600\uD61C\uD638\uD654\uD670\uD68C\uD6A8\uD6C4\uD6E0\uD6FC\uD718\uD734\uD750\uD76C\uD788]$/,e3=/^[\uAC01-\uAC1B\uAC1D-\uAC37\uAC39-\uAC53\uAC55-\uAC6F\uAC71-\uAC8B\uAC8D-\uACA7\uACA9-\uACC3\uACC5-\uACDF\uACE1-\uACFB\uACFD-\uAD17\uAD19-\uAD33\uAD35-\uAD4F\uAD51-\uAD6B\uAD6D-\uAD87\uAD89-\uADA3\uADA5-\uADBF\uADC1-\uADDB\uADDD-\uADF7\uADF9-\uAE13\uAE15-\uAE2F\uAE31-\uAE4B\uAE4D-\uAE67\uAE69-\uAE83\uAE85-\uAE9F\uAEA1-\uAEBB\uAEBD-\uAED7\uAED9-\uAEF3\uAEF5-\uAF0F\uAF11-\uAF2B\uAF2D-\uAF47\uAF49-\uAF63\uAF65-\uAF7F\uAF81-\uAF9B\uAF9D-\uAFB7\uAFB9-\uAFD3\uAFD5-\uAFEF\uAFF1-\uB00B\uB00D-\uB027\uB029-\uB043\uB045-\uB05F\uB061-\uB07B\uB07D-\uB097\uB099-\uB0B3\uB0B5-\uB0CF\uB0D1-\uB0EB\uB0ED-\uB107\uB109-\uB123\uB125-\uB13F\uB141-\uB15B\uB15D-\uB177\uB179-\uB193\uB195-\uB1AF\uB1B1-\uB1CB\uB1CD-\uB1E7\uB1E9-\uB203\uB205-\uB21F\uB221-\uB23B\uB23D-\uB257\uB259-\uB273\uB275-\uB28F\uB291-\uB2AB\uB2AD-\uB2C7\uB2C9-\uB2E3\uB2E5-\uB2FF\uB301-\uB31B\uB31D-\uB337\uB339-\uB353\uB355-\uB36F\uB371-\uB38B\uB38D-\uB3A7\uB3A9-\uB3C3\uB3C5-\uB3DF\uB3E1-\uB3FB\uB3FD-\uB417\uB419-\uB433\uB435-\uB44F\uB451-\uB46B\uB46D-\uB487\uB489-\uB4A3\uB4A5-\uB4BF\uB4C1-\uB4DB\uB4DD-\uB4F7\uB4F9-\uB513\uB515-\uB52F\uB531-\uB54B\uB54D-\uB567\uB569-\uB583\uB585-\uB59F\uB5A1-\uB5BB\uB5BD-\uB5D7\uB5D9-\uB5F3\uB5F5-\uB60F\uB611-\uB62B\uB62D-\uB647\uB649-\uB663\uB665-\uB67F\uB681-\uB69B\uB69D-\uB6B7\uB6B9-\uB6D3\uB6D5-\uB6EF\uB6F1-\uB70B\uB70D-\uB727\uB729-\uB743\uB745-\uB75F\uB761-\uB77B\uB77D-\uB797\uB799-\uB7B3\uB7B5-\uB7CF\uB7D1-\uB7EB\uB7ED-\uB807\uB809-\uB823\uB825-\uB83F\uB841-\uB85B\uB85D-\uB877\uB879-\uB893\uB895-\uB8AF\uB8B1-\uB8CB\uB8CD-\uB8E7\uB8E9-\uB903\uB905-\uB91F\uB921-\uB93B\uB93D-\uB957\uB959-\uB973\uB975-\uB98F\uB991-\uB9AB\uB9AD-\uB9C7\uB9C9-\uB9E3\uB9E5-\uB9FF\uBA01-\uBA1B\uBA1D-\uBA37\uBA39-\uBA53\uBA55-\uBA6F\uBA71-\uBA8B\uBA8D-\uBAA7\uBAA9-\uBAC3\uBAC5-\uBADF\uBAE1-\uBAFB\uBAFD-\uBB17\uBB19-\uBB33\uBB35-\uBB4F\uBB51-\uBB6B\uBB6D-\uBB87\uBB89-\uBBA3\uBBA5-\uBBBF\uBBC1-\uBBDB\uBBDD-\uBBF7\uBBF9-\uBC13\uBC15-\uBC2F\uBC31-\uBC4B\uBC4D-\uBC67\uBC69-\uBC83\uBC85-\uBC9F\uBCA1-\uBCBB\uBCBD-\uBCD7\uBCD9-\uBCF3\uBCF5-\uBD0F\uBD11-\uBD2B\uBD2D-\uBD47\uBD49-\uBD63\uBD65-\uBD7F\uBD81-\uBD9B\uBD9D-\uBDB7\uBDB9-\uBDD3\uBDD5-\uBDEF\uBDF1-\uBE0B\uBE0D-\uBE27\uBE29-\uBE43\uBE45-\uBE5F\uBE61-\uBE7B\uBE7D-\uBE97\uBE99-\uBEB3\uBEB5-\uBECF\uBED1-\uBEEB\uBEED-\uBF07\uBF09-\uBF23\uBF25-\uBF3F\uBF41-\uBF5B\uBF5D-\uBF77\uBF79-\uBF93\uBF95-\uBFAF\uBFB1-\uBFCB\uBFCD-\uBFE7\uBFE9-\uC003\uC005-\uC01F\uC021-\uC03B\uC03D-\uC057\uC059-\uC073\uC075-\uC08F\uC091-\uC0AB\uC0AD-\uC0C7\uC0C9-\uC0E3\uC0E5-\uC0FF\uC101-\uC11B\uC11D-\uC137\uC139-\uC153\uC155-\uC16F\uC171-\uC18B\uC18D-\uC1A7\uC1A9-\uC1C3\uC1C5-\uC1DF\uC1E1-\uC1FB\uC1FD-\uC217\uC219-\uC233\uC235-\uC24F\uC251-\uC26B\uC26D-\uC287\uC289-\uC2A3\uC2A5-\uC2BF\uC2C1-\uC2DB\uC2DD-\uC2F7\uC2F9-\uC313\uC315-\uC32F\uC331-\uC34B\uC34D-\uC367\uC369-\uC383\uC385-\uC39F\uC3A1-\uC3BB\uC3BD-\uC3D7\uC3D9-\uC3F3\uC3F5-\uC40F\uC411-\uC42B\uC42D-\uC447\uC449-\uC463\uC465-\uC47F\uC481-\uC49B\uC49D-\uC4B7\uC4B9-\uC4D3\uC4D5-\uC4EF\uC4F1-\uC50B\uC50D-\uC527\uC529-\uC543\uC545-\uC55F\uC561-\uC57B\uC57D-\uC597\uC599-\uC5B3\uC5B5-\uC5CF\uC5D1-\uC5EB\uC5ED-\uC607\uC609-\uC623\uC625-\uC63F\uC641-\uC65B\uC65D-\uC677\uC679-\uC693\uC695-\uC6AF\uC6B1-\uC6CB\uC6CD-\uC6E7\uC6E9-\uC703\uC705-\uC71F\uC721-\uC73B\uC73D-\uC757\uC759-\uC773\uC775-\uC78F\uC791-\uC7AB\uC7AD-\uC7C7\uC7C9-\uC7E3\uC7E5-\uC7FF\uC801-\uC81B\uC81D-\uC837\uC839-\uC853\uC855-\uC86F\uC871-\uC88B\uC88D-\uC8A7\uC8A9-\uC8C3\uC8C5-\uC8DF\uC8E1-\uC8FB\uC8FD-\uC917\uC919-\uC933\uC935-\uC94F\uC951-\uC96B\uC96D-\uC987\uC989-\uC9A3\uC9A5-\uC9BF\uC9C1-\uC9DB\uC9DD-\uC9F7\uC9F9-\uCA13\uCA15-\uCA2F\uCA31-\uCA4B\uCA4D-\uCA67\uCA69-\uCA83\uCA85-\uCA9F\uCAA1-\uCABB\uCABD-\uCAD7\uCAD9-\uCAF3\uCAF5-\uCB0F\uCB11-\uCB2B\uCB2D-\uCB47\uCB49-\uCB63\uCB65-\uCB7F\uCB81-\uCB9B\uCB9D-\uCBB7\uCBB9-\uCBD3\uCBD5-\uCBEF\uCBF1-\uCC0B\uCC0D-\uCC27\uCC29-\uCC43\uCC45-\uCC5F\uCC61-\uCC7B\uCC7D-\uCC97\uCC99-\uCCB3\uCCB5-\uCCCF\uCCD1-\uCCEB\uCCED-\uCD07\uCD09-\uCD23\uCD25-\uCD3F\uCD41-\uCD5B\uCD5D-\uCD77\uCD79-\uCD93\uCD95-\uCDAF\uCDB1-\uCDCB\uCDCD-\uCDE7\uCDE9-\uCE03\uCE05-\uCE1F\uCE21-\uCE3B\uCE3D-\uCE57\uCE59-\uCE73\uCE75-\uCE8F\uCE91-\uCEAB\uCEAD-\uCEC7\uCEC9-\uCEE3\uCEE5-\uCEFF\uCF01-\uCF1B\uCF1D-\uCF37\uCF39-\uCF53\uCF55-\uCF6F\uCF71-\uCF8B\uCF8D-\uCFA7\uCFA9-\uCFC3\uCFC5-\uCFDF\uCFE1-\uCFFB\uCFFD-\uD017\uD019-\uD033\uD035-\uD04F\uD051-\uD06B\uD06D-\uD087\uD089-\uD0A3\uD0A5-\uD0BF\uD0C1-\uD0DB\uD0DD-\uD0F7\uD0F9-\uD113\uD115-\uD12F\uD131-\uD14B\uD14D-\uD167\uD169-\uD183\uD185-\uD19F\uD1A1-\uD1BB\uD1BD-\uD1D7\uD1D9-\uD1F3\uD1F5-\uD20F\uD211-\uD22B\uD22D-\uD247\uD249-\uD263\uD265-\uD27F\uD281-\uD29B\uD29D-\uD2B7\uD2B9-\uD2D3\uD2D5-\uD2EF\uD2F1-\uD30B\uD30D-\uD327\uD329-\uD343\uD345-\uD35F\uD361-\uD37B\uD37D-\uD397\uD399-\uD3B3\uD3B5-\uD3CF\uD3D1-\uD3EB\uD3ED-\uD407\uD409-\uD423\uD425-\uD43F\uD441-\uD45B\uD45D-\uD477\uD479-\uD493\uD495-\uD4AF\uD4B1-\uD4CB\uD4CD-\uD4E7\uD4E9-\uD503\uD505-\uD51F\uD521-\uD53B\uD53D-\uD557\uD559-\uD573\uD575-\uD58F\uD591-\uD5AB\uD5AD-\uD5C7\uD5C9-\uD5E3\uD5E5-\uD5FF\uD601-\uD61B\uD61D-\uD637\uD639-\uD653\uD655-\uD66F\uD671-\uD68B\uD68D-\uD6A7\uD6A9-\uD6C3\uD6C5-\uD6DF\uD6E1-\uD6FB\uD6FD-\uD717\uD719-\uD733\uD735-\uD74F\uD751-\uD76B\uD76D-\uD787\uD789-\uD7A3]$/,e4=/^(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])$/,e5=(e,t)=>{var r=o.Any;return -1!==e.search(eJ)&&(r|=o.Extend),8205===t&&(r|=o.ZWJ),t>=127462&&t<=127487&&(r|=o.RI),-1!==e.search(eZ)&&(r|=o.Prepend),-1!==e.search(eX)&&(r|=o.SpacingMark),-1!==e.search(eQ)&&(r|=o.L),-1!==e.search(e0)&&(r|=o.V),-1!==e.search(e1)&&(r|=o.T),-1!==e.search(e2)&&(r|=o.LV),-1!==e.search(e3)&&(r|=o.LVT),-1!==e.search(e4)&&(r|=o.ExtPict),r},e7=[[o.L,o.L|o.V|o.LV|o.LVT],[o.LV|o.V,o.V|o.T],[o.LVT|o.T,o.T],[o.Any,o.Extend|o.ZWJ],[o.Any,o.SpacingMark],[o.Prepend,o.Any],[o.ZWJ,o.ExtPict],[o.RI,o.RI]],e9=/(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC01\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDE41\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4\uDF00\uDF01\uDF36-\uDF3A\uDF40\uDF42]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])*\u200D$/,e6=e=>-1!==e.search(e9),e8=/(?:\uD83C[\uDDE6-\uDDFF])+$/g,te=e=>{var t=e.match(e8);return null!==t&&t[0].length/2%2==1};function tt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function tr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tt(Object(r),!0).forEach(function(t){ea(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tt(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var tn=tr(tr(tr(tr({},{transform(e,t){e.children=K(e.children);var r=e.selection&&K(e.selection);try{r=el(e,r,t)}finally{e.children=q(e.children),r?e.selection=d(r)?q(r):r:e.selection=null}}}),{insertNodes(e,t,r){e.insertNodes(t,r)},liftNodes(e,t){e.liftNodes(t)},mergeNodes(e,t){e.mergeNodes(t)},moveNodes(e,t){e.moveNodes(t)},removeNodes(e,t){e.removeNodes(t)},setNodes(e,t,r){e.setNodes(t,r)},splitNodes(e,t){e.splitNodes(t)},unsetNodes(e,t,r){e.unsetNodes(t,r)},unwrapNodes(e,t){e.unwrapNodes(t)},wrapNodes(e,t,r){e.wrapNodes(t,r)}}),{collapse(e,t){e.collapse(t)},deselect(e){e.deselect()},move(e,t){e.move(t)},select(e,t){e.select(t)},setPoint(e,t,r){e.setPoint(t,r)},setSelection(e,t){e.setSelection(t)}}),{delete(e,t){e.delete(t)},insertFragment(e,t,r){e.insertFragment(t,r)},insertText(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};eB.withoutNormalizing(e,()=>{var{voids:n=!1}=r,{at:o=eL(e)}=r;if(eo.isPath(o)&&(o=eB.range(e,o)),ep.isRange(o)){if(ep.isCollapsed(o))o=o.anchor;else{var i=ep.end(o);if(!n&&eB.void(e,{at:i}))return;var a=ep.start(o),s=eB.pointRef(e,a),u=eB.pointRef(e,i);tn.delete(e,{at:o,voids:n});var l=s.unref(),c=u.unref();o=l||c,tn.setSelection(e,{anchor:o,focus:o})}}if(!(!n&&eB.void(e,{at:o})||eB.elementReadOnly(e,{at:o}))){var{path:d,offset:f}=o;t.length>0&&e.apply({type:"insert_text",path:d,offset:f,text:t})}})}}),to=new WeakMap,ti=e=>to.get(e)||!1,ta=(e,t,r)=>{var n=to.get(e)||!1;to.set(e,!0);try{t(),r()}finally{to.set(e,n)}};function ts(e,t,r){var n,o,i=Z.get(e)||[],a=X.get(e)||new Set,s=e=>{if(e){var t=e.join(",");o.has(t)||(o.add(t),n.push(e))}};if(r)for(var u of(n=[],o=new Set,i))s(r(u));else n=i,o=a;for(var l of t)s(l);Z.set(e,n),X.set(e,o)}var tu=(e,t)=>{for(var r of eB.pathRefs(e))Y.transform(r,t);for(var n of eB.pointRefs(e))G.transform(n,t);for(var o of eB.rangeRefs(e))J.transform(o,t);if(!ti(e)){var i=eo.operationCanTransformPath(t)?e=>eo.transform(e,t):void 0;ts(e,e.getDirtyPaths(t),i)}tn.transform(e,t),e.operations.push(t),eB.normalize(e,{operation:t}),"set_selection"===t.type&&(e.marks=null),Q.get(e)||(Q.set(e,!0),Promise.resolve().then(()=>{Q.set(e,!1),e.onChange({operation:t}),e.operations=[]}))},tl=(e,t)=>{switch(t.type){case"insert_text":case"remove_text":case"set_node":var{path:r}=t;return eo.levels(r);case"insert_node":var{node:n,path:o}=t;return[...eo.levels(o),...eP.isText(n)?[]:Array.from(eE.nodes(n),e=>{var[,t]=e;return o.concat(t)})];case"merge_node":var{path:i}=t;return[...eo.ancestors(i),eo.previous(i)];case"move_node":var{path:a,newPath:s}=t;if(eo.equals(a,s))return[];var u=[],l=[];for(var c of eo.ancestors(a)){var d=eo.transform(c,t);u.push(d)}for(var f of eo.ancestors(s)){var h=eo.transform(f,t);l.push(h)}var p=l[l.length-1],m=s[s.length-1];return[...u,...l,p.concat(m)];case"remove_node":var{path:v}=t;return[...eo.ancestors(v)];case"split_node":var{path:g}=t;return[...eo.levels(g),eo.next(g)];default:return[]}},tc=e=>{var{selection:t}=e;return t?eE.fragment(e,t):[]},td=(e,t)=>{var[r,n]=t;if(!eP.isText(r)){if(ev.isElement(r)&&0===r.children.length){tn.insertNodes(e,{text:""},{at:n.concat(0),voids:!0});return}for(var o=!eB.isEditor(r)&&ev.isElement(r)&&(e.isInline(r)||0===r.children.length||eP.isText(r.children[0])||e.isInline(r.children[0])),i=0,a=0;a<r.children.length;a++,i++){var s=eE.get(e,n);if(!eP.isText(s)){var u=s.children[i],l=s.children[i-1],c=a===r.children.length-1;if((eP.isText(u)||ev.isElement(u)&&e.isInline(u))!==o)tn.removeNodes(e,{at:n.concat(i),voids:!0}),i--;else if(ev.isElement(u)){if(e.isInline(u)){if(null!=l&&eP.isText(l)){if(c){var d={text:""};tn.insertNodes(e,d,{at:n.concat(i+1),voids:!0}),i++}}else{var f={text:""};tn.insertNodes(e,f,{at:n.concat(i),voids:!0}),i++}}}else null!=l&&eP.isText(l)&&(eP.equals(u,l,{loose:!0})?(tn.mergeNodes(e,{at:n.concat(i),voids:!0}),i--):""===l.text?(tn.removeNodes(e,{at:n.concat(i-1),voids:!0}),i--):""===u.text&&(tn.removeNodes(e,{at:n.concat(i),voids:!0}),i--))}}}},tf=(e,t)=>{var{iteration:r,initialDirtyPathsLength:n}=t,o=42*n;if(r>o)throw Error("Could not completely normalize the editor after ".concat(o," iterations! This is usually due to incorrect normalization logic that leaves a node in an invalid state."));return!0},th=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{voids:r=!1,mode:n="lowest",at:o=e.selection,match:i}=t;if(o){var a=eB.path(e,o);for(var[s,u]of eB.levels(e,{at:a,voids:r,match:i,reverse:"lowest"===n}))if(!eP.isText(s)){if(ep.isRange(o)){if(eo.isAncestor(u,o.anchor.path)&&eo.isAncestor(u,o.focus.path))return[s,u]}else if(!eo.equals(a,u))return[s,u]}}};function tp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function tm(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tp(Object(r),!0).forEach(function(t){ea(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tp(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var tv=(e,t,r)=>{var{selection:n}=e;if(n){var o=(t,r)=>{if(!eP.isText(t))return!1;var[n,o]=eB.parent(e,r);return!e.isVoid(n)||e.markableVoid(n)},i=ep.isExpanded(n),a=!1;if(!i){var[s,u]=eB.node(e,n);if(s&&o(s,u)){var[l]=eB.parent(e,u);a=l&&e.markableVoid(l)}}if(i||a)tn.setNodes(e,{[t]:r},{match:o,split:!0,voids:!0});else{var c=tm(tm({},eB.marks(e)||{}),{},{[t]:r});e.marks=c,Q.get(e)||e.onChange()}}};function tg(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ty(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tg(Object(r),!0).forEach(function(t){ea(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tg(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var tb=function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=eB.point(e,t,{edge:"end"}),i=eB.end(e,[]),{distance:a=1}=n,s=0;for(var u of eB.positions(e,ty(ty({},n),{},{at:{anchor:o,focus:i}}))){if(s>a)break;0!==s&&(r=u),s++}return r};function tE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function tC(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tE(Object(r),!0).forEach(function(t){ea(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tE(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var tD=function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=eB.start(e,[]),i=eB.point(e,t,{edge:"start"}),{distance:a=1}=n,s=0;for(var u of eB.positions(e,tC(tC({},n),{},{at:{anchor:o,focus:i},reverse:!0}))){if(s>a)break;0!==s&&(r=u),s++}return r},tw=(e,t)=>{var{selection:r}=e;r&&ep.isCollapsed(r)&&tn.delete(e,{unit:t,reverse:!0})},tA=(e,t)=>{var{selection:r}=e;r&&ep.isCollapsed(r)&&tn.delete(e,{unit:t})},tx=function(e){var{direction:t="forward"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{selection:r}=e;r&&ep.isExpanded(r)&&tn.delete(e,{reverse:"backward"===t})},tB=(e,t)=>[eB.start(e,t),eB.end(e,t)];function t_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function tO(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?t_(Object(r),!0).forEach(function(t){ea(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t_(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var tT=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return eB.above(e,tO(tO({},t),{},{match:t=>ev.isElement(t)&&eB.isElementReadOnly(e,t)}))},tk=(e,t)=>eB.point(e,t,{edge:"end"}),tS=(e,t)=>{var r=eB.path(e,t,{edge:"start"});return eB.node(e,r)},tF=(e,t)=>{var r=eB.range(e,t);return eE.fragment(e,r)};function tI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function tR(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tI(Object(r),!0).forEach(function(t){ea(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tI(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var tM=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return eB.above(e,tR(tR({},t),{},{match:t=>ev.isElement(t)&&eB.isVoid(e,t)}))},tN=(e,t)=>t.children.some(t=>ev.isElement(t)&&eB.isBlock(e,t)),tP=(e,t)=>t.children.some(t=>eP.isText(t)||eB.isInline(e,t)),tL=(e,t)=>eE.has(e,t),tj=(e,t)=>t.children.every(e=>eP.isText(e)),tz=e=>{tn.splitNodes(e,{always:!0})},tW=(e,t,r)=>{tn.insertNodes(e,t,r)},tU=e=>{tn.splitNodes(e,{always:!0})};function tH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var t$=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{selection:n,marks:o}=e;if(n){if(o){var i=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tH(Object(r),!0).forEach(function(t){ea(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tH(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({text:t},o);tn.insertNodes(e,i,{at:r.at,voids:r.voids})}else tn.insertText(e,t,r);e.marks=null}},tV=(e,t)=>!e.isInline(t),tK=(e,t,r)=>eB.isStart(e,t,r)||eB.isEnd(e,t,r),tq=(e,t)=>{var{children:r}=t,[n]=r;return 0===r.length||1===r.length&&eP.isText(n)&&""===n.text&&!e.isVoid(t)},tY=(e,t,r)=>{var n=eB.end(e,r);return ek.equals(t,n)},tG=e=>{var t=ee.get(e);return void 0===t||t},tJ=(e,t,r)=>{if(0!==t.offset)return!1;var n=eB.start(e,r);return ek.equals(t,n)},tZ=(e,t)=>{var r=eB.path(e,t,{edge:"end"});return eB.node(e,r)},tX=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=eB.path(e,t,r);return[eE.leaf(e,n),n]},tQ=["text"],t0=["text"],t1=function(e){var{marks:t,selection:r}=e;if(!r)return null;var{anchor:n,focus:o}=r;if(t)return t;if(ep.isExpanded(r)){if(eB.isEnd(e,n,n.path)){var i=eB.after(e,n);i&&(n=i)}var[a]=eB.nodes(e,{match:eP.isText,at:{anchor:n,focus:o}});if(!a)return{};var[s]=a;return ed(s,tQ)}var{path:u}=n,[l]=eB.leaf(e,u);if(0===n.offset){var c=eB.previous(e,{at:u,match:eP.isText});if(!eB.above(e,{match:t=>ev.isElement(t)&&eB.isVoid(e,t)&&e.markableVoid(t)})){var d=eB.above(e,{match:t=>ev.isElement(t)&&eB.isBlock(e,t)});if(c&&d){var[f,h]=c,[,p]=d;eo.isAncestor(p,h)&&(l=f)}}}return ed(l,t0)},t2=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{mode:r="lowest",voids:n=!1}=t,{match:o,at:i=e.selection}=t;if(i){var a=eB.after(e,i,{voids:n});if(a){var[,s]=eB.last(e,[]),u=[a.path,s];if(eo.isPath(i)&&0===i.length)throw Error("Cannot get the next node from the root node!");if(null==o){if(eo.isPath(i)){var[l]=eB.parent(e,i);o=e=>l.children.includes(e)}else o=()=>!0}var[c]=eB.nodes(e,{at:u,match:o,mode:r,voids:n});return c}}},t3=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=eB.path(e,t,r);return[eE.get(e,n),n]},t4=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{force:r=!1,operation:n}=t,o=e=>Z.get(e)||[],i=e=>X.get(e)||new Set,a=e=>{var t=o(e).pop(),r=t.join(",");return i(e).delete(r),t};if(eB.isNormalizing(e)){if(r){var s=Array.from(eE.nodes(e),e=>{var[,t]=e;return t}),u=new Set(s.map(e=>e.join(",")));Z.set(e,s),X.set(e,u)}0!==o(e).length&&eB.withoutNormalizing(e,()=>{for(var t of o(e))if(eE.has(e,t)){var r=eB.node(e,t),[i,s]=r;ev.isElement(i)&&0===i.children.length&&e.normalizeNode(r,{operation:n})}for(var u=o(e),l=u.length,c=0;0!==u.length;){if(!e.shouldNormalize({dirtyPaths:u,iteration:c,initialDirtyPathsLength:l,operation:n}))return;var d=a(e);if(eE.has(e,d)){var f=eB.node(e,d);e.normalizeNode(f,{operation:n})}c++,u=o(e)}})}},t5=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=eB.path(e,t,r),o=eo.parent(n);return eB.node(e,o)},t7=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{affinity:n="forward"}=r,o={current:t,affinity:n,unref(){var{current:t}=o;return eB.pathRefs(e).delete(o),o.current=null,t}};return eB.pathRefs(e).add(o),o},t9=e=>{var t=et.get(e);return t||(t=new Set,et.set(e,t)),t},t6=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{depth:n,edge:o}=r;if(eo.isPath(t)){if("start"===o){var[,i]=eE.first(e,t);t=i}else if("end"===o){var[,a]=eE.last(e,t);t=a}}return ep.isRange(t)&&(t="start"===o?ep.start(t):"end"===o?ep.end(t):eo.common(t.anchor.path,t.focus.path)),ek.isPoint(t)&&(t=t.path),null!=n&&(t=t.slice(0,n)),t},t8=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{affinity:n="forward"}=r,o={current:t,affinity:n,unref(){var{current:t}=o;return eB.pointRefs(e).delete(o),o.current=null,t}};return eB.pointRefs(e).add(o),o},re=e=>{var t=er.get(e);return t||(t=new Set,er.set(e,t)),t},rt=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{edge:n="start"}=r;if(eo.isPath(t)){if("end"===n){var o,[,i]=eE.last(e,t);o=i}else{var[,a]=eE.first(e,t);o=a}var s=eE.get(e,o);if(!eP.isText(s))throw Error("Cannot get the ".concat(n," point in the node at path [").concat(t,"] because it has no ").concat(n," text node."));return{path:o,offset:"end"===n?s.text.length:0}}if(ep.isRange(t)){var[u,l]=ep.edges(t);return"start"===n?u:l}return t},rr=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{mode:r="lowest",voids:n=!1}=t,{match:o,at:i=e.selection}=t;if(i){var a=eB.before(e,i,{voids:n});if(a){var[,s]=eB.first(e,[]),u=[a.path,s];if(eo.isPath(i)&&0===i.length)throw Error("Cannot get the previous node from the root node!");if(null==o){if(eo.isPath(i)){var[l]=eB.parent(e,i);o=e=>l.children.includes(e)}else o=()=>!0}var[c]=eB.nodes(e,{reverse:!0,at:u,match:o,mode:r,voids:n});return c}}},rn=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{affinity:n="forward"}=r,o={current:t,affinity:n,unref(){var{current:t}=o;return eB.rangeRefs(e).delete(o),o.current=null,t}};return eB.rangeRefs(e).add(o),o},ro=e=>{var t=en.get(e);return t||(t=new Set,en.set(e,t)),t},ri=(e,t,r)=>ep.isRange(t)&&!r?t:{anchor:eB.start(e,t),focus:eB.end(e,r||t)};function ra(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var rs=(e,t)=>{var{selection:r}=e;if(r){var n=(t,r)=>{if(!eP.isText(t))return!1;var[n,o]=eB.parent(e,r);return!e.isVoid(n)||e.markableVoid(n)},o=ep.isExpanded(r),i=!1;if(!o){var[a,s]=eB.node(e,r);if(a&&n(a,s)){var[u]=eB.parent(e,s);i=u&&e.markableVoid(u)}}if(o||i)tn.unsetNodes(e,t,{match:n,split:!0,voids:!0});else{var l=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ra(Object(r),!0).forEach(function(t){ea(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ra(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},eB.marks(e)||{});delete l[t],e.marks=l,Q.get(e)||e.onChange()}}},ru=(e,t)=>{ee.set(e,t)},rl=(e,t)=>eB.point(e,t,{edge:"start"}),rc=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{voids:n=!1}=r,o=eB.range(e,t),[i,a]=ep.edges(o),s="";for(var[u,l]of eB.nodes(e,{at:o,match:eP.isText,voids:n})){var c=u.text;eo.equals(l,a.path)&&(c=c.slice(0,a.offset)),eo.equals(l,i.path)&&(c=c.slice(i.offset)),s+=c}return s},rd=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{voids:n=!1}=r,[o,i]=ep.edges(t);if(0!==o.offset||0!==i.offset||ep.isCollapsed(t)||eo.hasPrevious(i.path))return t;var a=eB.above(e,{at:i,match:t=>ev.isElement(t)&&eB.isBlock(e,t),voids:n}),s=a?a[1]:[],u={anchor:eB.start(e,o),focus:i},l=!0;for(var[c,d]of eB.nodes(e,{at:u,match:eP.isText,reverse:!0,voids:n})){if(l){l=!1;continue}if(""!==c.text||eo.isBefore(d,s)){i={path:d,offset:c.text.length};break}}return{anchor:o,focus:i}},rf=(e,t)=>{var r=eB.isNormalizing(e);eB.setNormalizing(e,!1);try{t()}finally{eB.setNormalizing(e,r)}eB.normalize(e)},rh=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};eB.withoutNormalizing(e,()=>{var r,n,o,{reverse:i=!1,unit:a="character",distance:s=1,voids:u=!1}=t,{at:l=e.selection,hanging:c=!1}=t;if(l){var d=!1;if(ep.isRange(l)&&ep.isCollapsed(l)&&(d=!0,l=l.anchor),ek.isPoint(l)){var f=eB.void(e,{at:l,mode:"highest"});if(!u&&f){var[,h]=f;l=h}else{var p={unit:a,distance:s},m=i?eB.before(e,l,p)||eB.start(e,[]):eB.after(e,l,p)||eB.end(e,[]);l={anchor:l,focus:m},c=!0}}if(eo.isPath(l)){tn.removeNodes(e,{at:l,voids:u});return}if(!ep.isCollapsed(l)){if(!c){var[,v]=ep.edges(l),g=eB.end(e,[]);ek.equals(v,g)||(l=eB.unhangRange(e,l,{voids:u}))}var[y,b]=ep.edges(l),E=eB.above(e,{match:t=>ev.isElement(t)&&eB.isBlock(e,t),at:y,voids:u}),C=eB.above(e,{match:t=>ev.isElement(t)&&eB.isBlock(e,t),at:b,voids:u}),D=E&&C&&!eo.equals(E[1],C[1]),w=eo.equals(y.path,b.path),A=u?null:null!==(r=eB.void(e,{at:y,mode:"highest"}))&&void 0!==r?r:eB.elementReadOnly(e,{at:y,mode:"highest"}),x=u?null:null!==(n=eB.void(e,{at:b,mode:"highest"}))&&void 0!==n?n:eB.elementReadOnly(e,{at:b,mode:"highest"});if(A){var B=eB.before(e,y);B&&E&&eo.isAncestor(E[1],B.path)&&(y=B)}if(x){var _=eB.after(e,b);_&&C&&eo.isAncestor(C[1],_.path)&&(b=_)}var O=[];for(var T of eB.nodes(e,{at:l,voids:u})){var[k,S]=T;(!o||0!==eo.compare(S,o))&&(!u&&ev.isElement(k)&&(eB.isVoid(e,k)||eB.isElementReadOnly(e,k))||!eo.isCommon(S,y.path)&&!eo.isCommon(S,b.path))&&(O.push(T),o=S)}var F=Array.from(O,t=>{var[,r]=t;return eB.pathRef(e,r)}),I=eB.pointRef(e,y),R=eB.pointRef(e,b),M="";if(!w&&!A){var N=I.current,[P]=eB.leaf(e,N),{path:L}=N,{offset:j}=y,z=P.text.slice(j);z.length>0&&(e.apply({type:"remove_text",path:L,offset:j,text:z}),M=z)}if(F.reverse().map(e=>e.unref()).filter(e=>null!==e).forEach(t=>tn.removeNodes(e,{at:t,voids:u})),!x){var W=R.current,[U]=eB.leaf(e,W),{path:H}=W,$=w?y.offset:0,V=U.text.slice($,b.offset);V.length>0&&(e.apply({type:"remove_text",path:H,offset:$,text:V}),M=V)}!w&&D&&R.current&&I.current&&tn.mergeNodes(e,{at:R.current,hanging:!0,voids:u}),d&&i&&"character"===a&&M.length>1&&M.match(/[\u0E00-\u0E7F]+/)&&tn.insertText(e,M.slice(0,M.length-s));var K=I.unref(),q=R.unref(),Y=i?K||q:q||K;null==t.at&&Y&&tn.select(e,Y)}}})},rp=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};eB.withoutNormalizing(e,()=>{var n,{hanging:o=!1,voids:i=!1}=r,{at:a=eL(e),batchDirty:s=!0}=r;if(t.length){if(ep.isRange(a)){if(o||(a=eB.unhangRange(e,a,{voids:i})),ep.isCollapsed(a))a=a.anchor;else{var[,u]=ep.edges(a);if(!i&&eB.void(e,{at:u}))return;var l=eB.pointRef(e,u);tn.delete(e,{at:a}),a=l.unref()}}else eo.isPath(a)&&(a=eB.start(e,a));if(!(!i&&eB.void(e,{at:a}))){var c=eB.above(e,{at:a,match:t=>ev.isElement(t)&&eB.isInline(e,t),mode:"highest",voids:i});if(c){var[,d]=c;eB.isEnd(e,a,d)?a=eB.after(e,d):eB.isStart(e,a,d)&&(a=eB.before(e,d))}var[,f]=eB.above(e,{match:t=>ev.isElement(t)&&eB.isBlock(e,t),at:a,voids:i}),h=eB.isStart(e,a,f),p=eB.isEnd(e,a,f),m=h&&p,v=!h||h&&p,g=!p,[,y]=eE.first({children:t},[]),[,b]=eE.last({children:t},[]),E=[],C=t=>{var[r,n]=t;return 0!==n.length&&(!!m||!(v&&eo.isAncestor(n,y)&&ev.isElement(r)&&!e.isVoid(r)&&!e.isInline(r)||g&&eo.isAncestor(n,b)&&ev.isElement(r)&&!e.isVoid(r)&&!e.isInline(r)))};for(var D of eE.nodes({children:t},{pass:C}))C(D)&&E.push(D);var w=[],A=[],x=[],B=!0,_=!1;for(var[O]of E)ev.isElement(O)&&!e.isInline(O)?(B=!1,_=!0,A.push(O)):B?w.push(O):x.push(O);var[T]=eB.nodes(e,{at:a,match:t=>eP.isText(t)||eB.isInline(e,t),mode:"highest",voids:i}),[,k]=T,S=eB.isStart(e,a,k),F=eB.isEnd(e,a,k),I=eB.pathRef(e,p&&!x.length?eo.next(f):f),R=eB.pathRef(e,F?eo.next(k):k);tn.splitNodes(e,{at:a,match:t=>_?ev.isElement(t)&&eB.isBlock(e,t):eP.isText(t)||eB.isInline(e,t),mode:_?"lowest":"highest",always:_&&(!h||w.length>0)&&(!p||x.length>0),voids:i});var M=eB.pathRef(e,!S||S&&F?eo.next(k):k);if(tn.insertNodes(e,w,{at:M.current,match:t=>eP.isText(t)||eB.isInline(e,t),mode:"highest",voids:i,batchDirty:s}),m&&!w.length&&A.length&&!x.length&&tn.delete(e,{at:f,voids:i}),tn.insertNodes(e,A,{at:I.current,match:t=>ev.isElement(t)&&eB.isBlock(e,t),mode:"lowest",voids:i,batchDirty:s}),tn.insertNodes(e,x,{at:R.current,match:t=>eP.isText(t)||eB.isInline(e,t),mode:"highest",voids:i,batchDirty:s}),!r.at&&(x.length>0&&R.current?n=eo.previous(R.current):A.length>0&&I.current?n=eo.previous(I.current):M.current&&(n=eo.previous(M.current)),n)){var N=eB.end(e,n);tn.select(e,N)}M.unref(),I.unref(),R.unref()}}})},rm=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{edge:r="anchor"}=t,{selection:n}=e;if(n){if("anchor"===r)tn.select(e,n.anchor);else if("focus"===r)tn.select(e,n.focus);else if("start"===r){var[o]=ep.edges(n);tn.select(e,o)}else if("end"===r){var[,i]=ep.edges(n);tn.select(e,i)}}},rv=e=>{var{selection:t}=e;t&&e.apply({type:"set_selection",properties:t,newProperties:null})},rg=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{selection:r}=e,{distance:n=1,unit:o="character",reverse:i=!1}=t,{edge:a=null}=t;if(r){"start"===a&&(a=ep.isBackward(r)?"focus":"anchor"),"end"===a&&(a=ep.isBackward(r)?"anchor":"focus");var{anchor:s,focus:u}=r,l={distance:n,unit:o,ignoreNonSelectable:!0},c={};if(null==a||"anchor"===a){var d=i?eB.before(e,s,l):eB.after(e,s,l);d&&(c.anchor=d)}if(null==a||"focus"===a){var f=i?eB.before(e,u,l):eB.after(e,u,l);f&&(c.focus=f)}tn.setSelection(e,c)}},ry=(e,t)=>{var{selection:r}=e;if(t=eB.range(e,t),r){tn.setSelection(e,t);return}if(!ep.isRange(t))throw Error("When setting the selection and the current selection is `null` you must provide at least an `anchor` and `focus`, but you passed: ".concat(eF.stringify(t)));e.apply({type:"set_selection",properties:r,newProperties:t})};function rb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function rE(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rb(Object(r),!0).forEach(function(t){ea(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rb(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var rC=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{selection:n}=e,{edge:o="both"}=r;if(n){"start"===o&&(o=ep.isBackward(n)?"focus":"anchor"),"end"===o&&(o=ep.isBackward(n)?"anchor":"focus");var{anchor:i,focus:a}=n,s="anchor"===o?i:a;tn.setSelection(e,{["anchor"===o?"anchor":"focus"]:rE(rE({},s),t)})}},rD=(e,t)=>{var{selection:r}=e,n={},o={};if(r){for(var i in t)("anchor"!==i||null==t.anchor||ek.equals(t.anchor,r.anchor))&&("focus"!==i||null==t.focus||ek.equals(t.focus,r.focus))&&("anchor"===i||"focus"===i||t[i]===r[i])||(n[i]=r[i],o[i]=t[i]);Object.keys(n).length>0&&e.apply({type:"set_selection",properties:n,newProperties:o})}},rw=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};eB.withoutNormalizing(e,()=>{var{hanging:n=!1,voids:o=!1,mode:i="lowest",batchDirty:a=!0}=r,{at:s,match:u,select:l}=r;if(eE.isNode(t)&&(t=[t]),0!==t.length){var[c]=t;if(s||(s=eL(e),!1===l||(l=!0)),null==l&&(l=!1),ep.isRange(s)){if(n||(s=eB.unhangRange(e,s,{voids:o})),ep.isCollapsed(s))s=s.anchor;else{var[,d]=ep.edges(s),f=eB.pointRef(e,d);tn.delete(e,{at:s}),s=f.unref()}}if(ek.isPoint(s)){null==u&&(u=eP.isText(c)?e=>eP.isText(e):e.isInline(c)?t=>eP.isText(t)||eB.isInline(e,t):t=>ev.isElement(t)&&eB.isBlock(e,t));var[h]=eB.nodes(e,{at:s.path,match:u,mode:i,voids:o});if(!h)return;var[,p]=h,m=eB.pathRef(e,p),v=eB.isEnd(e,s,p);tn.splitNodes(e,{at:s,match:u,mode:i,voids:o});var g=m.unref();s=v?eo.next(g):g}var y=eo.parent(s),b=s[s.length-1];if(!(!o&&eB.void(e,{at:y}))){if(a){var E=[],C=eo.levels(y);ta(e,()=>{for(var r of t)!function(){var t=y.concat(b);b++;var n={type:"insert_node",path:t,node:r};e.apply(n),s=eo.next(s),E.push(n),eP.isText?C.push(...Array.from(eE.nodes(r),e=>{var[,r]=e;return t.concat(r)})):C.push(t)}()},()=>{ts(e,C,e=>{var t=e;for(var r of E)if(eo.operationCanTransformPath(r)&&!(t=eo.transform(t,r)))return null;return t})})}else for(var D of t){var w=y.concat(b);b++,e.apply({type:"insert_node",path:w,node:D}),s=eo.next(s)}if(s=eo.previous(s),l){var A=eB.end(e,s);A&&tn.select(e,A)}}}})},rA=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};eB.withoutNormalizing(e,()=>{var{at:r=e.selection,mode:n="lowest",voids:o=!1}=t,{match:i}=t;if(null==i&&(i=eo.isPath(r)?ej(e,r):t=>ev.isElement(t)&&eB.isBlock(e,t)),r)for(var a of Array.from(eB.nodes(e,{at:r,match:i,mode:n,voids:o}),t=>{var[,r]=t;return eB.pathRef(e,r)})){var s=a.unref();if(s.length<2)throw Error("Cannot lift node at a path [".concat(s,"] because it has a depth of less than `2`."));var[u,l]=eB.node(e,eo.parent(s)),c=s[s.length-1],{length:d}=u.children;if(1===d){var f=eo.next(l);tn.moveNodes(e,{at:s,to:f,voids:o}),tn.removeNodes(e,{at:l,voids:o})}else if(0===c)tn.moveNodes(e,{at:s,to:l,voids:o});else if(c===d-1){var h=eo.next(l);tn.moveNodes(e,{at:s,to:h,voids:o})}else{var p=eo.next(s),m=eo.next(l);tn.splitNodes(e,{at:p,voids:o}),tn.moveNodes(e,{at:s,to:m,voids:o})}}})},rx=["text"],rB=["children"],r_=(e,t)=>ev.isElement(t)?!!eB.isVoid(e,t)||1===t.children.length&&r_(e,t.children[0]):!eB.isEditor(t),rO=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};eB.withoutNormalizing(e,()=>{var r,n,{match:o,at:i=e.selection}=t,{hanging:a=!1,voids:s=!1,mode:u="lowest"}=t;if(i){if(null==o){if(eo.isPath(i)){var[l]=eB.parent(e,i);o=e=>l.children.includes(e)}else o=t=>ev.isElement(t)&&eB.isBlock(e,t)}if(!a&&ep.isRange(i)&&(i=eB.unhangRange(e,i,{voids:s})),ep.isRange(i)){if(ep.isCollapsed(i))i=i.anchor;else{var[,c]=ep.edges(i),d=eB.pointRef(e,c);tn.delete(e,{at:i}),i=d.unref(),null==t.at&&tn.select(e,i)}}var[f]=eB.nodes(e,{at:i,match:o,voids:s,mode:u}),h=eB.previous(e,{at:i,match:o,voids:s,mode:u});if(f&&h){var[p,m]=f,[v,g]=h;if(0!==m.length&&0!==g.length){var y=eo.next(g),b=eo.common(m,g),E=eo.isSibling(m,g),C=Array.from(eB.levels(e,{at:m}),e=>{var[t]=e;return t}).slice(b.length).slice(0,-1),D=eB.above(e,{at:m,mode:"highest",match:t=>C.includes(t)&&r_(e,t)}),w=D&&eB.pathRef(e,D[1]);if(eP.isText(p)&&eP.isText(v)){var A=ed(p,rx);n=v.text.length,r=A}else if(ev.isElement(p)&&ev.isElement(v)){var A=ed(p,rB);n=v.children.length,r=A}else throw Error("Cannot merge the node at path [".concat(m,"] with the previous sibling because it is not the same kind: ").concat(eF.stringify(p)," ").concat(eF.stringify(v)));E||tn.moveNodes(e,{at:m,to:y,voids:s}),w&&tn.removeNodes(e,{at:w.current,voids:s}),ev.isElement(v)&&eB.isEmpty(e,v)||eP.isText(v)&&""===v.text&&0!==g[g.length-1]?tn.removeNodes(e,{at:g,voids:s}):e.apply({type:"merge_node",path:y,position:n,properties:r}),w&&w.unref()}}}})},rT=(e,t)=>{eB.withoutNormalizing(e,()=>{var{to:r,at:n=e.selection,mode:o="lowest",voids:i=!1}=t,{match:a}=t;if(n){null==a&&(a=eo.isPath(n)?ej(e,n):t=>ev.isElement(t)&&eB.isBlock(e,t));var s=eB.pathRef(e,r);for(var u of Array.from(eB.nodes(e,{at:n,match:a,mode:o,voids:i}),t=>{var[,r]=t;return eB.pathRef(e,r)})){var l=u.unref(),c=s.current;0!==l.length&&e.apply({type:"move_node",path:l,newPath:c}),s.current&&eo.isSibling(c,l)&&eo.isAfter(c,l)&&(s.current=eo.next(s.current))}s.unref()}})},rk=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};eB.withoutNormalizing(e,()=>{var{hanging:r=!1,voids:n=!1,mode:o="lowest"}=t,{at:i=e.selection,match:a}=t;if(i)for(var s of(null==a&&(a=eo.isPath(i)?ej(e,i):t=>ev.isElement(t)&&eB.isBlock(e,t)),!r&&ep.isRange(i)&&(i=eB.unhangRange(e,i,{voids:n})),Array.from(eB.nodes(e,{at:i,match:a,mode:o,voids:n}),t=>{var[,r]=t;return eB.pathRef(e,r)}))){var u=s.unref();if(u){var[l]=eB.node(e,u);e.apply({type:"remove_node",path:u,node:l})}}})},rS=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};eB.withoutNormalizing(e,()=>{var{match:n,at:o=e.selection,compare:i,merge:a}=r,{hanging:s=!1,mode:u="lowest",split:l=!1,voids:c=!1}=r;if(o){if(null==n&&(n=eo.isPath(o)?ej(e,o):t=>ev.isElement(t)&&eB.isBlock(e,t)),!s&&ep.isRange(o)&&(o=eB.unhangRange(e,o,{voids:c})),l&&ep.isRange(o)){if(ep.isCollapsed(o)&&eB.leaf(e,o.anchor)[0].text.length>0)return;var d=eB.rangeRef(e,o,{affinity:"inward"}),[f,h]=ep.edges(o),p="lowest"===u?"lowest":"highest",m=eB.isEnd(e,h,h.path);tn.splitNodes(e,{at:h,match:n,mode:p,voids:c,always:!m});var v=eB.isStart(e,f,f.path);tn.splitNodes(e,{at:f,match:n,mode:p,voids:c,always:!v}),o=d.unref(),null==r.at&&tn.select(e,o)}for(var[g,y]of(i||(i=(e,t)=>e!==t),eB.nodes(e,{at:o,match:n,mode:u,voids:c}))){var b={},E={};if(0!==y.length){var C=!1;for(var D in t)"children"!==D&&"text"!==D&&i(t[D],g[D])&&(C=!0,g.hasOwnProperty(D)&&(b[D]=g[D]),a?null!=t[D]&&(E[D]=a(g[D],t[D])):null!=t[D]&&(E[D]=t[D]));C&&e.apply({type:"set_node",path:y,properties:b,newProperties:E})}}}})},rF=(e,t)=>{if(ep.isCollapsed(t))return t.anchor;var[,r]=ep.edges(t),n=eB.pointRef(e,r);return tn.delete(e,{at:t}),n.unref()},rI=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};eB.withoutNormalizing(e,()=>{var r,n,{mode:o="lowest",voids:i=!1}=t,{match:a,at:s=e.selection,height:u=0,always:l=!1}=t;if(null==a&&(a=t=>ev.isElement(t)&&eB.isBlock(e,t)),ep.isRange(s)&&(s=rF(e,s)),eo.isPath(s)){var c=s,d=eB.point(e,c),[f]=eB.parent(e,c);a=e=>e===f,u=d.path.length-c.length+1,s=d,l=!0}if(s){var h=eB.pointRef(e,s,{affinity:"backward"});try{var[p]=eB.nodes(e,{at:s,match:a,mode:o,voids:i});if(!p)return;var m=eB.void(e,{at:s,mode:"highest"});if(!i&&m){var[v,g]=m;if(ev.isElement(v)&&e.isInline(v)){var y=eB.after(e,g);if(!y){var b=eo.next(g);tn.insertNodes(e,{text:""},{at:b,voids:i}),y=eB.point(e,b)}s=y,l=!0}u=s.path.length-g.length+1,l=!0}r=eB.pointRef(e,s);var E=s.path.length-u,[,C]=p,D=s.path.slice(0,E),w=0===u?s.offset:s.path[E]+0;for(var[A,x]of eB.levels(e,{at:D,reverse:!0,voids:i})){var B=!1;if(x.length<C.length||0===x.length||!i&&ev.isElement(A)&&eB.isVoid(e,A))break;var _=h.current,O=eB.isEnd(e,_,x);if(l||!h||!eB.isEdge(e,_,x)){B=!0;var T=eE.extractProps(A);e.apply({type:"split_node",path:x,position:w,properties:T})}w=x[x.length-1]+(B||O?1:0)}if(null==t.at){var k=r.current||eB.end(e,[]);tn.select(e,k)}}finally{h.unref(),null===(n=r)||void 0===n||n.unref()}}})},rR=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Array.isArray(t)||(t=[t]);var n={};for(var o of t)n[o]=null;tn.setNodes(e,n,r)},rM=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};eB.withoutNormalizing(e,()=>{var{mode:r="lowest",split:n=!1,voids:o=!1}=t,{at:i=e.selection,match:a}=t;if(i){null==a&&(a=eo.isPath(i)?ej(e,i):t=>ev.isElement(t)&&eB.isBlock(e,t)),eo.isPath(i)&&(i=eB.range(e,i));var s=ep.isRange(i)?eB.rangeRef(e,i):null;for(var u of Array.from(eB.nodes(e,{at:i,match:a,mode:r,voids:o}),t=>{var[,r]=t;return eB.pathRef(e,r)}).reverse())!function(){var t=u.unref(),[r]=eB.node(e,t),i=eB.range(e,t);n&&s&&(i=ep.intersection(s.current,i)),tn.liftNodes(e,{at:i,match:e=>ev.isAncestor(r)&&r.children.includes(e),voids:o})}();s&&s.unref()}})};function rN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function rP(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rN(Object(r),!0).forEach(function(t){ea(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rN(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var rL=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};eB.withoutNormalizing(e,()=>{var{mode:n="lowest",split:o=!1,voids:i=!1}=r,{match:a,at:s=e.selection}=r;if(s){if(null==a&&(a=eo.isPath(s)?ej(e,s):e.isInline(t)?t=>ev.isElement(t)&&eB.isInline(e,t)||eP.isText(t):t=>ev.isElement(t)&&eB.isBlock(e,t)),o&&ep.isRange(s)){var[u,l]=ep.edges(s),c=eB.rangeRef(e,s,{affinity:"inward"});tn.splitNodes(e,{at:l,match:a,voids:i}),tn.splitNodes(e,{at:u,match:a,voids:i}),s=c.unref(),null==r.at&&tn.select(e,s)}for(var[,d]of Array.from(eB.nodes(e,{at:s,match:e.isInline(t)?t=>ev.isElement(t)&&eB.isBlock(e,t):e=>eB.isEditor(e),mode:"lowest",voids:i})))if(0===function(){var r=ep.isRange(s)?ep.intersection(s,eB.range(e,d)):s;if(!r)return 0;var o=Array.from(eB.nodes(e,{at:r,match:a,mode:n,voids:i}));if(o.length>0){var[u]=o,l=o[o.length-1],[,c]=u,[,f]=l;if(0===c.length&&0===f.length)return 0;var h=eo.equals(c,f)?eo.parent(c):eo.common(c,f),p=eB.range(e,c,f),[m]=eB.node(e,h),v=h.length+1,g=eo.next(f.slice(0,v)),y=rP(rP({},t),{},{children:[]});tn.insertNodes(e,y,{at:g,voids:i}),tn.moveNodes(e,{at:p,match:e=>ev.isAncestor(m)&&m.children.includes(e),to:g.concat(0),voids:i})}}())continue}})},rj=()=>{var e={children:[],operations:[],selection:null,marks:null,isElementReadOnly:()=>!1,isInline:()=>!1,isSelectable:()=>!0,isVoid:()=>!1,markableVoid:()=>!1,onChange:()=>{},apply:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return tu(e,...r)},addMark:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return tv(e,...r)},deleteBackward:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return tw(e,...r)},deleteForward:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return tA(e,...r)},deleteFragment:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return tx(e,...r)},getFragment:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return tc(e,...r)},insertBreak:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return tz(e,...r)},insertSoftBreak:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return tU(e,...r)},insertFragment:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return rp(e,...r)},insertNode:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return tW(e,...r)},insertText:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return t$(e,...r)},normalizeNode:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return td(e,...r)},removeMark:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return rs(e,...r)},getDirtyPaths:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return tl(e,...r)},shouldNormalize:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return tf(e,...r)},above:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return th(e,...r)},after:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return tb(e,...r)},before:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return tD(e,...r)},collapse:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return rm(e,...r)},delete:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return rh(e,...r)},deselect:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return rv(e,...r)},edges:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return tB(e,...r)},elementReadOnly:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return tT(e,...r)},end:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return tk(e,...r)},first:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return tS(e,...r)},fragment:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return tF(e,...r)},getMarks:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return t1(e,...r)},hasBlocks:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return tN(e,...r)},hasInlines:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return tP(e,...r)},hasPath:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return tL(e,...r)},hasTexts:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return tj(e,...r)},insertNodes:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return rw(e,...r)},isBlock:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return tV(e,...r)},isEdge:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return tK(e,...r)},isEmpty:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return tq(e,...r)},isEnd:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return tY(e,...r)},isNormalizing:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return tG(e,...r)},isStart:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return tJ(e,...r)},last:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return tZ(e,...r)},leaf:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return tX(e,...r)},levels:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){var{at:r=e.selection,reverse:n=!1,voids:o=!1}=t,{match:i}=t;if(null==i&&(i=()=>!0),r){var a=[],s=eB.path(e,r);for(var[u,l]of eE.levels(e,s))if(i(u,l)&&(a.push([u,l]),!o&&ev.isElement(u)&&eB.isVoid(e,u)))break;n&&a.reverse(),yield*a}}()}(e,...r)},liftNodes:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return rA(e,...r)},mergeNodes:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return rO(e,...r)},move:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return rg(e,...r)},moveNodes:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return rT(e,...r)},next:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return t2(e,...r)},node:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return t3(e,...r)},nodes:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){var r,n,o,{at:i=e.selection,mode:a="all",universal:s=!1,reverse:u=!1,voids:l=!1,ignoreNonSelectable:c=!1}=t,{match:d}=t;if(d||(d=()=>!0),i){if(e_.isSpan(i))r=i[0],n=i[1];else{var f=eB.path(e,i,{edge:"start"}),h=eB.path(e,i,{edge:"end"});r=u?h:f,n=u?f:h}var p=eE.nodes(e,{reverse:u,from:r,to:n,pass:t=>{var[r]=t;return!!ev.isElement(r)&&(!!(!l&&(eB.isVoid(e,r)||eB.isElementReadOnly(e,r)))||!!c&&!eB.isSelectable(e,r))}}),m=[];for(var[v,g]of p)if(!(c&&ev.isElement(v))||eB.isSelectable(e,v)){var y=o&&0===eo.compare(g,o[1]);if("highest"!==a||!y){if(!d(v,g)){if(s&&!y&&eP.isText(v))return;continue}if("lowest"===a&&y){o=[v,g];continue}var b="lowest"===a?o:[v,g];b&&(s?m.push(b):yield b),o=[v,g]}}"lowest"===a&&o&&(s?m.push(o):yield o),s&&(yield*m)}}()}(e,...r)},normalize:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return t4(e,...r)},parent:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return t5(e,...r)},path:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return t6(e,...r)},pathRef:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return t7(e,...r)},pathRefs:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return t9(e,...r)},point:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return rt(e,...r)},pointRef:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return t8(e,...r)},pointRefs:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return re(e,...r)},positions:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){var{at:r=e.selection,unit:n="offset",reverse:o=!1,voids:i=!1,ignoreNonSelectable:a=!1}=t;if(r){var s=eB.range(e,r),[u,l]=ep.edges(s),c=o?l:u,d=!1,f="",h=0,p=0,m=0;for(var[v,g]of eB.nodes(e,{at:r,reverse:o,voids:i,ignoreNonSelectable:a})){if(ev.isElement(v)){if(!i&&(e.isVoid(v)||e.isElementReadOnly(v))){yield eB.start(e,g);continue}if(e.isInline(v))continue;if(eB.hasInlines(e,v)){var y=eo.isAncestor(g,l.path)?l:eB.end(e,g),b=eo.isAncestor(g,u.path)?u:eB.start(e,g);f=eB.string(e,{anchor:b,focus:y},{voids:i}),d=!0}}if(eP.isText(v)){var E,C=eo.equals(g,c.path);for(C?(p=o?c.offset:v.text.length-c.offset,m=c.offset):(p=v.text.length,m=o?p:0),(C||d||"offset"===n)&&(yield{path:g,offset:m},d=!1);;){if(0===h){if(""===f)break;E=f,f=eV(f,h="character"===n?ez(E,o):"word"===n?e$(E,o):"line"===n||"block"===n?E.length:1,o)[1]}if(m=o?m-h:m+h,(p-=h)<0){h=-p;break}h=0,yield{path:g,offset:m}}}}}}()}(e,...r)},previous:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return rr(e,...r)},range:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return ri(e,...r)},rangeRef:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return rn(e,...r)},rangeRefs:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return ro(e,...r)},removeNodes:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return rk(e,...r)},select:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return ry(e,...r)},setNodes:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return rS(e,...r)},setNormalizing:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return ru(e,...r)},setPoint:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return rC(e,...r)},setSelection:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return rD(e,...r)},splitNodes:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return rI(e,...r)},start:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return rl(e,...r)},string:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return rc(e,...r)},unhangRange:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return rd(e,...r)},unsetNodes:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return rR(e,...r)},unwrapNodes:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return rM(e,...r)},void:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return tM(e,...r)},withoutNormalizing:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return rf(e,...r)},wrapNodes:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return rL(e,...r)}};return e}},218:(e,t,r)=>{"use strict";var n=r(28964),o=r(94455),i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=o.useSyncExternalStore,s=n.useRef,u=n.useEffect,l=n.useMemo,c=n.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,r,n,o){var d=s(null);if(null===d.current){var f={hasValue:!1,value:null};d.current=f}else f=d.current;var h=a(e,(d=l(function(){function e(e){if(!u){if(u=!0,a=e,e=n(e),void 0!==o&&f.hasValue){var t=f.value;if(o(t,e))return s=t}return s=e}if(t=s,i(a,e))return t;var r=n(e);return void 0!==o&&o(t,r)?t:(a=e,s=r)}var a,s,u=!1,l=void 0===r?null:r;return[function(){return e(t())},null===l?void 0:function(){return e(l())}]},[t,r,n,o]))[0],d[1]);return u(function(){f.hasValue=!0,f.value=h},[h]),c(h),h}},90490:(e,t,r)=>{"use strict";e.exports=r(218)},62386:(e,t,r)=>{"use strict";r.d(t,{x7:()=>ec,Me:()=>eo,oo:()=>ef,RR:()=>es,Cp:()=>el,dr:()=>ed,cv:()=>ei,uY:()=>ea,dp:()=>eu});let n=["top","right","bottom","left"],o=Math.min,i=Math.max,a=Math.round,s=Math.floor,u=e=>({x:e,y:e}),l={left:"right",right:"left",bottom:"top",top:"bottom"},c={start:"end",end:"start"};function d(e,t){return"function"==typeof e?e(t):e}function f(e){return e.split("-")[0]}function h(e){return e.split("-")[1]}function p(e){return"x"===e?"y":"x"}function m(e){return"y"===e?"height":"width"}function v(e){return["top","bottom"].includes(f(e))?"y":"x"}function g(e){return e.replace(/start|end/g,e=>c[e])}function y(e){return e.replace(/left|right|bottom|top/g,e=>l[e])}function b(e){return"number"!=typeof e?{top:0,right:0,bottom:0,left:0,...e}:{top:e,right:e,bottom:e,left:e}}function E(e){let{x:t,y:r,width:n,height:o}=e;return{width:n,height:o,top:r,left:t,right:t+n,bottom:r+o,x:t,y:r}}function C(e,t,r){let n,{reference:o,floating:i}=e,a=v(t),s=p(v(t)),u=m(s),l=f(t),c="y"===a,d=o.x+o.width/2-i.width/2,g=o.y+o.height/2-i.height/2,y=o[u]/2-i[u]/2;switch(l){case"top":n={x:d,y:o.y-i.height};break;case"bottom":n={x:d,y:o.y+o.height};break;case"right":n={x:o.x+o.width,y:g};break;case"left":n={x:o.x-i.width,y:g};break;default:n={x:o.x,y:o.y}}switch(h(t)){case"start":n[s]-=y*(r&&c?-1:1);break;case"end":n[s]+=y*(r&&c?-1:1)}return n}let D=async(e,t,r)=>{let{placement:n="bottom",strategy:o="absolute",middleware:i=[],platform:a}=r,s=i.filter(Boolean),u=await (null==a.isRTL?void 0:a.isRTL(t)),l=await a.getElementRects({reference:e,floating:t,strategy:o}),{x:c,y:d}=C(l,n,u),f=n,h={},p=0;for(let r=0;r<s.length;r++){let{name:i,fn:m}=s[r],{x:v,y:g,data:y,reset:b}=await m({x:c,y:d,initialPlacement:n,placement:f,strategy:o,middlewareData:h,rects:l,platform:a,elements:{reference:e,floating:t}});c=null!=v?v:c,d=null!=g?g:d,h={...h,[i]:{...h[i],...y}},b&&p<=50&&(p++,"object"==typeof b&&(b.placement&&(f=b.placement),b.rects&&(l=!0===b.rects?await a.getElementRects({reference:e,floating:t,strategy:o}):b.rects),{x:c,y:d}=C(l,f,u)),r=-1)}return{x:c,y:d,placement:f,strategy:o,middlewareData:h}};async function w(e,t){var r;void 0===t&&(t={});let{x:n,y:o,platform:i,rects:a,elements:s,strategy:u}=e,{boundary:l="clippingAncestors",rootBoundary:c="viewport",elementContext:f="floating",altBoundary:h=!1,padding:p=0}=d(t,e),m=b(p),v=s[h?"floating"===f?"reference":"floating":f],g=E(await i.getClippingRect({element:null==(r=await (null==i.isElement?void 0:i.isElement(v)))||r?v:v.contextElement||await (null==i.getDocumentElement?void 0:i.getDocumentElement(s.floating)),boundary:l,rootBoundary:c,strategy:u})),y="floating"===f?{x:n,y:o,width:a.floating.width,height:a.floating.height}:a.reference,C=await (null==i.getOffsetParent?void 0:i.getOffsetParent(s.floating)),D=await (null==i.isElement?void 0:i.isElement(C))&&await (null==i.getScale?void 0:i.getScale(C))||{x:1,y:1},w=E(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:y,offsetParent:C,strategy:u}):y);return{top:(g.top-w.top+m.top)/D.y,bottom:(w.bottom-g.bottom+m.bottom)/D.y,left:(g.left-w.left+m.left)/D.x,right:(w.right-g.right+m.right)/D.x}}function A(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function x(e){return n.some(t=>e[t]>=0)}async function B(e,t){let{placement:r,platform:n,elements:o}=e,i=await (null==n.isRTL?void 0:n.isRTL(o.floating)),a=f(r),s=h(r),u="y"===v(r),l=["left","top"].includes(a)?-1:1,c=i&&u?-1:1,p=d(t,e),{mainAxis:m,crossAxis:g,alignmentAxis:y}="number"==typeof p?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return s&&"number"==typeof y&&(g="end"===s?-1*y:y),u?{x:g*c,y:m*l}:{x:m*l,y:g*c}}function _(){return"undefined"!=typeof window}function O(e){return S(e)?(e.nodeName||"").toLowerCase():"#document"}function T(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function k(e){var t;return null==(t=(S(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function S(e){return!!_()&&(e instanceof Node||e instanceof T(e).Node)}function F(e){return!!_()&&(e instanceof Element||e instanceof T(e).Element)}function I(e){return!!_()&&(e instanceof HTMLElement||e instanceof T(e).HTMLElement)}function R(e){return!!_()&&"undefined"!=typeof ShadowRoot&&(e instanceof ShadowRoot||e instanceof T(e).ShadowRoot)}function M(e){let{overflow:t,overflowX:r,overflowY:n,display:o}=z(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(o)}function N(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch(e){return!1}})}function P(e){let t=L(),r=F(e)?z(e):e;return"none"!==r.transform||"none"!==r.perspective||!!r.containerType&&"normal"!==r.containerType||!t&&!!r.backdropFilter&&"none"!==r.backdropFilter||!t&&!!r.filter&&"none"!==r.filter||["transform","perspective","filter"].some(e=>(r.willChange||"").includes(e))||["paint","layout","strict","content"].some(e=>(r.contain||"").includes(e))}function L(){return"undefined"!=typeof CSS&&!!CSS.supports&&CSS.supports("-webkit-backdrop-filter","none")}function j(e){return["html","body","#document"].includes(O(e))}function z(e){return T(e).getComputedStyle(e)}function W(e){return F(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function U(e){if("html"===O(e))return e;let t=e.assignedSlot||e.parentNode||R(e)&&e.host||k(e);return R(t)?t.host:t}function H(e,t,r){var n;void 0===t&&(t=[]),void 0===r&&(r=!0);let o=function e(t){let r=U(t);return j(r)?t.ownerDocument?t.ownerDocument.body:t.body:I(r)&&M(r)?r:e(r)}(e),i=o===(null==(n=e.ownerDocument)?void 0:n.body),a=T(o);if(i){let e=$(a);return t.concat(a,a.visualViewport||[],M(o)?o:[],e&&r?H(e):[])}return t.concat(o,H(o,[],r))}function $(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function V(e){let t=z(e),r=parseFloat(t.width)||0,n=parseFloat(t.height)||0,o=I(e),i=o?e.offsetWidth:r,s=o?e.offsetHeight:n,u=a(r)!==i||a(n)!==s;return u&&(r=i,n=s),{width:r,height:n,$:u}}function K(e){return F(e)?e:e.contextElement}function q(e){let t=K(e);if(!I(t))return u(1);let r=t.getBoundingClientRect(),{width:n,height:o,$:i}=V(t),s=(i?a(r.width):r.width)/n,l=(i?a(r.height):r.height)/o;return s&&Number.isFinite(s)||(s=1),l&&Number.isFinite(l)||(l=1),{x:s,y:l}}let Y=u(0);function G(e){let t=T(e);return L()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:Y}function J(e,t,r,n){var o;void 0===t&&(t=!1),void 0===r&&(r=!1);let i=e.getBoundingClientRect(),a=K(e),s=u(1);t&&(n?F(n)&&(s=q(n)):s=q(e));let l=(void 0===(o=r)&&(o=!1),n&&(!o||n===T(a))&&o)?G(a):u(0),c=(i.left+l.x)/s.x,d=(i.top+l.y)/s.y,f=i.width/s.x,h=i.height/s.y;if(a){let e=T(a),t=n&&F(n)?T(n):n,r=e,o=$(r);for(;o&&n&&t!==r;){let e=q(o),t=o.getBoundingClientRect(),n=z(o),i=t.left+(o.clientLeft+parseFloat(n.paddingLeft))*e.x,a=t.top+(o.clientTop+parseFloat(n.paddingTop))*e.y;c*=e.x,d*=e.y,f*=e.x,h*=e.y,c+=i,d+=a,o=$(r=T(o))}}return E({width:f,height:h,x:c,y:d})}function Z(e,t){let r=W(e).scrollLeft;return t?t.left+r:J(k(e)).left+r}function X(e,t,r){let n;if("viewport"===t)n=function(e,t){let r=T(e),n=k(e),o=r.visualViewport,i=n.clientWidth,a=n.clientHeight,s=0,u=0;if(o){i=o.width,a=o.height;let e=L();(!e||e&&"fixed"===t)&&(s=o.offsetLeft,u=o.offsetTop)}return{width:i,height:a,x:s,y:u}}(e,r);else if("document"===t)n=function(e){let t=k(e),r=W(e),n=e.ownerDocument.body,o=i(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),a=i(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight),s=-r.scrollLeft+Z(e),u=-r.scrollTop;return"rtl"===z(n).direction&&(s+=i(t.clientWidth,n.clientWidth)-o),{width:o,height:a,x:s,y:u}}(k(e));else if(F(t))n=function(e,t){let r=J(e,!0,"fixed"===t),n=r.top+e.clientTop,o=r.left+e.clientLeft,i=I(e)?q(e):u(1),a=e.clientWidth*i.x;return{width:a,height:e.clientHeight*i.y,x:o*i.x,y:n*i.y}}(t,r);else{let r=G(e);n={...t,x:t.x-r.x,y:t.y-r.y}}return E(n)}function Q(e){return"static"===z(e).position}function ee(e,t){if(!I(e)||"fixed"===z(e).position)return null;if(t)return t(e);let r=e.offsetParent;return k(e)===r&&(r=r.ownerDocument.body),r}function et(e,t){let r=T(e);if(N(e))return r;if(!I(e)){let t=U(e);for(;t&&!j(t);){if(F(t)&&!Q(t))return t;t=U(t)}return r}let n=ee(e,t);for(;n&&["table","td","th"].includes(O(n))&&Q(n);)n=ee(n,t);return n&&j(n)&&Q(n)&&!P(n)?r:n||function(e){let t=U(e);for(;I(t)&&!j(t);){if(P(t))return t;if(N(t))break;t=U(t)}return null}(e)||r}let er=async function(e){let t=this.getOffsetParent||et,r=this.getDimensions,n=await r(e.floating);return{reference:function(e,t,r){let n=I(t),o=k(t),i="fixed"===r,a=J(e,!0,i,t),s={scrollLeft:0,scrollTop:0},l=u(0);if(n||!n&&!i){if(("body"!==O(t)||M(o))&&(s=W(t)),n){let e=J(t,!0,i,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else o&&(l.x=Z(o))}let c=0,d=0;if(o&&!n&&!i){let e=o.getBoundingClientRect();d=e.top+s.scrollTop,c=e.left+s.scrollLeft-Z(o,e)}return{x:a.left+s.scrollLeft-l.x-c,y:a.top+s.scrollTop-l.y-d,width:a.width,height:a.height}}(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}},en={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:r,offsetParent:n,strategy:o}=e,i="fixed"===o,a=k(n),s=!!t&&N(t.floating);if(n===a||s&&i)return r;let l={scrollLeft:0,scrollTop:0},c=u(1),d=u(0),f=I(n);if((f||!f&&!i)&&(("body"!==O(n)||M(a))&&(l=W(n)),I(n))){let e=J(n);c=q(n),d.x=e.x+n.clientLeft,d.y=e.y+n.clientTop}return{width:r.width*c.x,height:r.height*c.y,x:r.x*c.x-l.scrollLeft*c.x+d.x,y:r.y*c.y-l.scrollTop*c.y+d.y}},getDocumentElement:k,getClippingRect:function(e){let{element:t,boundary:r,rootBoundary:n,strategy:a}=e,s=[..."clippingAncestors"===r?N(t)?[]:function(e,t){let r=t.get(e);if(r)return r;let n=H(e,[],!1).filter(e=>F(e)&&"body"!==O(e)),o=null,i="fixed"===z(e).position,a=i?U(e):e;for(;F(a)&&!j(a);){let t=z(a),r=P(a);r||"fixed"!==t.position||(o=null),(i?!r&&!o:!r&&"static"===t.position&&!!o&&["absolute","fixed"].includes(o.position)||M(a)&&!r&&function e(t,r){let n=U(t);return!(n===r||!F(n)||j(n))&&("fixed"===z(n).position||e(n,r))}(e,a))?n=n.filter(e=>e!==a):o=t,a=U(a)}return t.set(e,n),n}(t,this._c):[].concat(r),n],u=s[0],l=s.reduce((e,r)=>{let n=X(t,r,a);return e.top=i(n.top,e.top),e.right=o(n.right,e.right),e.bottom=o(n.bottom,e.bottom),e.left=i(n.left,e.left),e},X(t,u,a));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}},getOffsetParent:et,getElementRects:er,getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){let{width:t,height:r}=V(e);return{width:t,height:r}},getScale:q,isElement:F,isRTL:function(e){return"rtl"===z(e).direction}};function eo(e,t,r,n){let a;void 0===n&&(n={});let{ancestorScroll:u=!0,ancestorResize:l=!0,elementResize:c="function"==typeof ResizeObserver,layoutShift:d="function"==typeof IntersectionObserver,animationFrame:f=!1}=n,h=K(e),p=u||l?[...h?H(h):[],...H(t)]:[];p.forEach(e=>{u&&e.addEventListener("scroll",r,{passive:!0}),l&&e.addEventListener("resize",r)});let m=h&&d?function(e,t){let r,n=null,a=k(e);function u(){var e;clearTimeout(r),null==(e=n)||e.disconnect(),n=null}return function l(c,d){void 0===c&&(c=!1),void 0===d&&(d=1),u();let{left:f,top:h,width:p,height:m}=e.getBoundingClientRect();if(c||t(),!p||!m)return;let v=s(h),g=s(a.clientWidth-(f+p)),y={rootMargin:-v+"px "+-g+"px "+-s(a.clientHeight-(h+m))+"px "+-s(f)+"px",threshold:i(0,o(1,d))||1},b=!0;function E(e){let t=e[0].intersectionRatio;if(t!==d){if(!b)return l();t?l(!1,t):r=setTimeout(()=>{l(!1,1e-7)},1e3)}b=!1}try{n=new IntersectionObserver(E,{...y,root:a.ownerDocument})}catch(e){n=new IntersectionObserver(E,y)}n.observe(e)}(!0),u}(h,r):null,v=-1,g=null;c&&(g=new ResizeObserver(e=>{let[n]=e;n&&n.target===h&&g&&(g.unobserve(t),cancelAnimationFrame(v),v=requestAnimationFrame(()=>{var e;null==(e=g)||e.observe(t)})),r()}),h&&!f&&g.observe(h),g.observe(t));let y=f?J(e):null;return f&&function t(){let n=J(e);y&&(n.x!==y.x||n.y!==y.y||n.width!==y.width||n.height!==y.height)&&r(),y=n,a=requestAnimationFrame(t)}(),r(),()=>{var e;p.forEach(e=>{u&&e.removeEventListener("scroll",r),l&&e.removeEventListener("resize",r)}),null==m||m(),null==(e=g)||e.disconnect(),g=null,f&&cancelAnimationFrame(a)}}let ei=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var r,n;let{x:o,y:i,placement:a,middlewareData:s}=t,u=await B(t,e);return a===(null==(r=s.offset)?void 0:r.placement)&&null!=(n=s.arrow)&&n.alignmentOffset?{}:{x:o+u.x,y:i+u.y,data:{...u,placement:a}}}}},ea=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){let{x:r,y:n,placement:a}=t,{mainAxis:s=!0,crossAxis:u=!1,limiter:l={fn:e=>{let{x:t,y:r}=e;return{x:t,y:r}}},...c}=d(e,t),h={x:r,y:n},m=await w(t,c),g=v(f(a)),y=p(g),b=h[y],E=h[g];if(s){let e="y"===y?"top":"left",t="y"===y?"bottom":"right",r=b+m[e],n=b-m[t];b=i(r,o(b,n))}if(u){let e="y"===g?"top":"left",t="y"===g?"bottom":"right",r=E+m[e],n=E-m[t];E=i(r,o(E,n))}let C=l.fn({...t,[y]:b,[g]:E});return{...C,data:{x:C.x-r,y:C.y-n,enabled:{[y]:s,[g]:u}}}}}},es=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var r,n,o,i,a;let{placement:s,middlewareData:u,rects:l,initialPlacement:c,platform:b,elements:E}=t,{mainAxis:C=!0,crossAxis:D=!0,fallbackPlacements:A,fallbackStrategy:x="bestFit",fallbackAxisSideDirection:B="none",flipAlignment:_=!0,...O}=d(e,t);if(null!=(r=u.arrow)&&r.alignmentOffset)return{};let T=f(s),k=v(c),S=f(c)===c,F=await (null==b.isRTL?void 0:b.isRTL(E.floating)),I=A||(S||!_?[y(c)]:function(e){let t=y(e);return[g(e),t,g(t)]}(c)),R="none"!==B;!A&&R&&I.push(...function(e,t,r,n){let o=h(e),i=function(e,t,r){let n=["left","right"],o=["right","left"];switch(e){case"top":case"bottom":if(r)return t?o:n;return t?n:o;case"left":case"right":return t?["top","bottom"]:["bottom","top"];default:return[]}}(f(e),"start"===r,n);return o&&(i=i.map(e=>e+"-"+o),t&&(i=i.concat(i.map(g)))),i}(c,_,B,F));let M=[c,...I],N=await w(t,O),P=[],L=(null==(n=u.flip)?void 0:n.overflows)||[];if(C&&P.push(N[T]),D){let e=function(e,t,r){void 0===r&&(r=!1);let n=h(e),o=p(v(e)),i=m(o),a="x"===o?n===(r?"end":"start")?"right":"left":"start"===n?"bottom":"top";return t.reference[i]>t.floating[i]&&(a=y(a)),[a,y(a)]}(s,l,F);P.push(N[e[0]],N[e[1]])}if(L=[...L,{placement:s,overflows:P}],!P.every(e=>e<=0)){let e=((null==(o=u.flip)?void 0:o.index)||0)+1,t=M[e];if(t)return{data:{index:e,overflows:L},reset:{placement:t}};let r=null==(i=L.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0])?void 0:i.placement;if(!r)switch(x){case"bestFit":{let e=null==(a=L.filter(e=>{if(R){let t=v(e.placement);return t===k||"y"===t}return!0}).map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:a[0];e&&(r=e);break}case"initialPlacement":r=c}if(s!==r)return{reset:{placement:r}}}return{}}}},eu=function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){var r,n;let a,s;let{placement:u,rects:l,platform:c,elements:p}=t,{apply:m=()=>{},...g}=d(e,t),y=await w(t,g),b=f(u),E=h(u),C="y"===v(u),{width:D,height:A}=l.floating;"top"===b||"bottom"===b?(a=b,s=E===(await (null==c.isRTL?void 0:c.isRTL(p.floating))?"start":"end")?"left":"right"):(s=b,a="end"===E?"top":"bottom");let x=A-y.top-y.bottom,B=D-y.left-y.right,_=o(A-y[a],x),O=o(D-y[s],B),T=!t.middlewareData.shift,k=_,S=O;if(null!=(r=t.middlewareData.shift)&&r.enabled.x&&(S=B),null!=(n=t.middlewareData.shift)&&n.enabled.y&&(k=x),T&&!E){let e=i(y.left,0),t=i(y.right,0),r=i(y.top,0),n=i(y.bottom,0);C?S=D-2*(0!==e||0!==t?e+t:i(y.left,y.right)):k=A-2*(0!==r||0!==n?r+n:i(y.top,y.bottom))}await m({...t,availableWidth:S,availableHeight:k});let F=await c.getDimensions(p.floating);return D!==F.width||A!==F.height?{reset:{rects:!0}}:{}}}},el=function(e){return void 0===e&&(e={}),{name:"hide",options:e,async fn(t){let{rects:r}=t,{strategy:n="referenceHidden",...o}=d(e,t);switch(n){case"referenceHidden":{let e=A(await w(t,{...o,elementContext:"reference"}),r.reference);return{data:{referenceHiddenOffsets:e,referenceHidden:x(e)}}}case"escaped":{let e=A(await w(t,{...o,altBoundary:!0}),r.floating);return{data:{escapedOffsets:e,escaped:x(e)}}}default:return{}}}}},ec=e=>({name:"arrow",options:e,async fn(t){let{x:r,y:n,placement:a,rects:s,platform:u,elements:l,middlewareData:c}=t,{element:f,padding:g=0}=d(e,t)||{};if(null==f)return{};let y=b(g),E={x:r,y:n},C=p(v(a)),D=m(C),w=await u.getDimensions(f),A="y"===C,x=A?"clientHeight":"clientWidth",B=s.reference[D]+s.reference[C]-E[C]-s.floating[D],_=E[C]-s.reference[C],O=await (null==u.getOffsetParent?void 0:u.getOffsetParent(f)),T=O?O[x]:0;T&&await (null==u.isElement?void 0:u.isElement(O))||(T=l.floating[x]||s.floating[D]);let k=T/2-w[D]/2-1,S=o(y[A?"top":"left"],k),F=o(y[A?"bottom":"right"],k),I=T-w[D]-F,R=T/2-w[D]/2+(B/2-_/2),M=i(S,o(R,I)),N=!c.arrow&&null!=h(a)&&R!==M&&s.reference[D]/2-(R<S?S:F)-w[D]/2<0,P=N?R<S?R-S:R-I:0;return{[C]:E[C]+P,data:{[C]:M,centerOffset:R-M-P,...N&&{alignmentOffset:P}},reset:N}}}),ed=function(e){return void 0===e&&(e={}),{options:e,fn(t){let{x:r,y:n,placement:o,rects:i,middlewareData:a}=t,{offset:s=0,mainAxis:u=!0,crossAxis:l=!0}=d(e,t),c={x:r,y:n},h=v(o),m=p(h),g=c[m],y=c[h],b=d(s,t),E="number"==typeof b?{mainAxis:b,crossAxis:0}:{mainAxis:0,crossAxis:0,...b};if(u){let e="y"===m?"height":"width",t=i.reference[m]-i.floating[e]+E.mainAxis,r=i.reference[m]+i.reference[e]-E.mainAxis;g<t?g=t:g>r&&(g=r)}if(l){var C,D;let e="y"===m?"width":"height",t=["top","left"].includes(f(o)),r=i.reference[h]-i.floating[e]+(t&&(null==(C=a.offset)?void 0:C[h])||0)+(t?0:E.crossAxis),n=i.reference[h]+i.reference[e]+(t?0:(null==(D=a.offset)?void 0:D[h])||0)-(t?E.crossAxis:0);y<r?y=r:y>n&&(y=n)}return{[m]:g,[h]:y}}}},ef=(e,t,r)=>{let n=new Map,o={platform:en,...r},i={...o.platform,_c:n};return D(e,t,{...o,platform:i})}},62246:(e,t,r)=>{"use strict";r.d(t,{Cp:()=>y,RR:()=>v,YF:()=>d,cv:()=>h,dp:()=>g,dr:()=>m,uY:()=>p,x7:()=>b});var n=r(62386),o=r(28964),i=r(46817),a="undefined"!=typeof document?o.useLayoutEffect:o.useEffect;function s(e,t){let r,n,o;if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if((r=e.length)!==t.length)return!1;for(n=r;0!=n--;)if(!s(e[n],t[n]))return!1;return!0}if((r=(o=Object.keys(e)).length)!==Object.keys(t).length)return!1;for(n=r;0!=n--;)if(!({}).hasOwnProperty.call(t,o[n]))return!1;for(n=r;0!=n--;){let r=o[n];if(("_owner"!==r||!e.$$typeof)&&!s(e[r],t[r]))return!1}return!0}return e!=e&&t!=t}function u(e){return"undefined"==typeof window?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function l(e,t){let r=u(e);return Math.round(t*r)/r}function c(e){let t=o.useRef(e);return a(()=>{t.current=e}),t}function d(e){void 0===e&&(e={});let{placement:t="bottom",strategy:r="absolute",middleware:d=[],platform:f,elements:{reference:h,floating:p}={},transform:m=!0,whileElementsMounted:v,open:g}=e,[y,b]=o.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[E,C]=o.useState(d);s(E,d)||C(d);let[D,w]=o.useState(null),[A,x]=o.useState(null),B=o.useCallback(e=>{e!==k.current&&(k.current=e,w(e))},[]),_=o.useCallback(e=>{e!==S.current&&(S.current=e,x(e))},[]),O=h||D,T=p||A,k=o.useRef(null),S=o.useRef(null),F=o.useRef(y),I=null!=v,R=c(v),M=c(f),N=c(g),P=o.useCallback(()=>{if(!k.current||!S.current)return;let e={placement:t,strategy:r,middleware:E};M.current&&(e.platform=M.current),(0,n.oo)(k.current,S.current,e).then(e=>{let t={...e,isPositioned:!1!==N.current};L.current&&!s(F.current,t)&&(F.current=t,i.flushSync(()=>{b(t)}))})},[E,t,r,M,N]);a(()=>{!1===g&&F.current.isPositioned&&(F.current.isPositioned=!1,b(e=>({...e,isPositioned:!1})))},[g]);let L=o.useRef(!1);a(()=>(L.current=!0,()=>{L.current=!1}),[]),a(()=>{if(O&&(k.current=O),T&&(S.current=T),O&&T){if(R.current)return R.current(O,T,P);P()}},[O,T,P,R,I]);let j=o.useMemo(()=>({reference:k,floating:S,setReference:B,setFloating:_}),[B,_]),z=o.useMemo(()=>({reference:O,floating:T}),[O,T]),W=o.useMemo(()=>{let e={position:r,left:0,top:0};if(!z.floating)return e;let t=l(z.floating,y.x),n=l(z.floating,y.y);return m?{...e,transform:"translate("+t+"px, "+n+"px)",...u(z.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:t,top:n}},[r,m,z.floating,y.x,y.y]);return o.useMemo(()=>({...y,update:P,refs:j,elements:z,floatingStyles:W}),[y,P,j,z,W])}let f=e=>({name:"arrow",options:e,fn(t){let{element:r,padding:o}="function"==typeof e?e(t):e;return r&&({}).hasOwnProperty.call(r,"current")?null!=r.current?(0,n.x7)({element:r.current,padding:o}).fn(t):{}:r?(0,n.x7)({element:r,padding:o}).fn(t):{}}}),h=(e,t)=>({...(0,n.cv)(e),options:[e,t]}),p=(e,t)=>({...(0,n.uY)(e),options:[e,t]}),m=(e,t)=>({...(0,n.dr)(e),options:[e,t]}),v=(e,t)=>({...(0,n.RR)(e),options:[e,t]}),g=(e,t)=>({...(0,n.dp)(e),options:[e,t]}),y=(e,t)=>({...(0,n.Cp)(e),options:[e,t]}),b=(e,t)=>({...f(e),options:[e,t]})},90193:(e,t,r)=>{"use strict";let n,o,i,a,s;r.d(t,{F0:()=>e8,MT:()=>ev,OU:()=>k,PO:()=>S,Pz:()=>ef,Q8:()=>I,VB:()=>tw,W_:()=>ed,Xd:()=>tL,Zb:()=>y,du:()=>e5,eI:()=>tD,hu:()=>p,iK:()=>e6,iV:()=>b,iz:()=>tE,nn:()=>m,vE:()=>h,wn:()=>tO,x0:()=>eN,x3:()=>tP,yO:()=>z,yg:()=>P,yo:()=>e7,yt:()=>j});var u=Object.defineProperty,l="@liveblocks/core",c="2.8.2",d="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{};function f(e){console.error(e)}function h(e,t){throw Error(t)}function p(e,t){}function m(e,t="Expected value to be non-nullable"){return e}function v(){let e,t;return[new Promise((r,n)=>{e=r,t=n}),e,t]}function g(){let[e,t,r]=v();return{promise:e,resolve:t,reject:r}}function y(){let e=new Set,t=new Set,r=null;function n(e){return t.add(e),()=>t.delete(e)}function o(t){return e.add(t),()=>e.delete(t)}async function i(e){let t;return new Promise(r=>{t=n(t=>{(void 0===e||e(t))&&r(t)})}).finally(()=>t?.())}function a(r){e.forEach(e=>e(r)),e.clear(),t.forEach(e=>e(r))}return{notify:function(e){null!==r?r.push(e):a(e)},subscribe:n,subscribeOnce:o,_forceClear:function(){e.clear(),t.clear()},count:function(){return e.size+t.size},waitUntil:i,pause:function(){r=[]},unpause:function(){if(null!==r){for(let e of r)a(e);r=null}},observable:{subscribe:n,subscribeOnce:o,waitUntil:i}}}var b={};((e,t)=>{for(var r in t)u(e,r,{get:t[r],enumerable:!0})})(b,{error:()=>w,errorWithTitle:()=>B,warn:()=>D,warnWithTitle:()=>x});var E="background:#0e0d12;border-radius:9999px;color:#fff;padding:3px 7px;font-family:sans-serif;font-weight:600;";function C(e){return"undefined"==typeof window?console[e]:(t,...r)=>console[e]("%cLiveblocks",E,t,...r)}var D=C("warn"),w=C("error");function A(e){return"undefined"==typeof window?console[e]:(t,r,...n)=>console[e](`%cLiveblocks%c ${t}`,E,"font-weight:600",r,...n)}var x=A("warn"),B=A("error"),_=class{constructor(e){this.curr=e}get current(){return this.curr}allowPatching(e){let t=this,r=!0;e({...this.curr,patch(e){if(r)for(let r of(t.curr=Object.assign({},t.curr,e),Object.entries(e))){let[e,t]=r;"patch"!==e&&(this[e]=t)}else throw Error("Can no longer patch stale context")}}),r=!1}},O=1,T=class{get initialState(){let e=this.states.values()[Symbol.iterator]().next();if(!e.done)return e.value;throw Error("No states defined yet")}get currentState(){if(null===this.currentStateOrNull){if(0===this.runningState)throw Error("Not started yet");throw Error("Already stopped")}return this.currentStateOrNull}start(){if(0!==this.runningState)throw Error("State machine has already started");return this.runningState=1,this.currentStateOrNull=this.initialState,this.enter(null),this}stop(){if(1!==this.runningState)throw Error("Cannot stop a state machine that hasn't started yet");this.exit(null),this.runningState=2,this.currentStateOrNull=null}constructor(e){this.id=O++,this.runningState=0,this.currentStateOrNull=null,this.states=new Set,this.enterFns=new Map,this.cleanupStack=[],this.knownEventTypes=new Set,this.allowedTransitions=new Map,this.currentContext=new _(e),this.eventHub={didReceiveEvent:y(),willTransition:y(),didIgnoreEvent:y(),willExitState:y(),didEnterState:y()},this.events={didReceiveEvent:this.eventHub.didReceiveEvent.observable,willTransition:this.eventHub.willTransition.observable,didIgnoreEvent:this.eventHub.didIgnoreEvent.observable,willExitState:this.eventHub.willExitState.observable,didEnterState:this.eventHub.didEnterState.observable}}get context(){return this.currentContext.current}addState(e){if(0!==this.runningState)throw Error("Already started");return this.states.add(e),this}onEnter(e,t){if(0!==this.runningState)throw Error("Already started");if(this.enterFns.has(e))throw Error(`enter/exit function for ${e} already exists`);return this.enterFns.set(e,t),this}onEnterAsync(e,t,r,n){return this.onEnter(e,()=>{let e=new AbortController,o=e.signal,i=!1;return t(this.currentContext.current,o).then(e=>{o.aborted||(i=!0,this.transition({type:"ASYNC_OK",data:e},r))},e=>{o.aborted||(i=!0,this.transition({type:"ASYNC_ERROR",reason:e},n))}),()=>{i||e.abort()}})}getStatesMatching(e){let t=[];if("*"===e)for(let e of this.states)t.push(e);else if(e.endsWith(".*")){let r=e.slice(0,-1);for(let e of this.states)e.startsWith(r)&&t.push(e)}else this.states.has(e)&&t.push(e);if(0===t.length)throw Error(`No states match ${JSON.stringify(e)}`);return t}addTransitions(e,t){if(0!==this.runningState)throw Error("Already started");for(let r of this.getStatesMatching(e)){let n=this.allowedTransitions.get(r);for(let[o,i]of(void 0===n&&(n=new Map,this.allowedTransitions.set(r,n)),Object.entries(t))){if(n.has(o))throw Error(`Trying to set transition "${o}" on "${r}" (via "${e}"), but a transition already exists there.`);let t=i;if(this.knownEventTypes.add(o),void 0!==t){let e="function"==typeof t?t:()=>t;n.set(o,e)}}}return this}addTimedTransition(e,t,r){return this.onEnter(e,()=>{let e=setTimeout(()=>{this.transition({type:"TIMER"},r)},"function"==typeof t?t(this.currentContext.current):t);return()=>{clearTimeout(e)}})}getTargetFn(e){return this.allowedTransitions.get(this.currentState)?.get(e)}exit(e){this.eventHub.willExitState.notify(this.currentState),this.currentContext.allowPatching(t=>{e=e??this.cleanupStack.length;for(let r=0;r<e;r++)this.cleanupStack.pop()?.(t)})}enter(e){let t=function(e,t){let r=e.split(".");if(t<1||t>r.length+1)throw Error("Invalid number of levels");let n=[];t>r.length&&n.push("*");for(let e=r.length-t+1;e<r.length;e++){let t=r.slice(0,e);t.length>0&&n.push(t.join(".")+".*")}return n.push(e),n}(this.currentState,e??this.currentState.split(".").length+1);this.currentContext.allowPatching(e=>{for(let r of t){let t=this.enterFns.get(r),n=t?.(e);"function"==typeof n?this.cleanupStack.push(n):this.cleanupStack.push(null)}}),this.eventHub.didEnterState.notify(this.currentState)}send(e){if(!this.knownEventTypes.has(e.type))throw Error(`Invalid event ${JSON.stringify(e.type)}`);if(2===this.runningState)return;let t=this.getTargetFn(e.type);if(void 0!==t)return this.transition(e,t);this.eventHub.didIgnoreEvent.notify(e)}transition(e,t){let r,n;this.eventHub.didReceiveEvent.notify(e);let o=this.currentState,i=("function"==typeof t?t:()=>t)(e,this.currentContext.current);if(null===i){this.eventHub.didIgnoreEvent.notify(e);return}if("string"==typeof i?r=i:(r=i.target,n=Array.isArray(i.effect)?i.effect:[i.effect]),!this.states.has(r))throw Error(`Invalid next state name: ${JSON.stringify(r)}`);this.eventHub.willTransition.notify({from:o,to:r});let[a,s]=function(e,t){if(e===t)return[0,0];let r=e.split("."),n=t.split("."),o=Math.min(r.length,n.length),i=0;for(;i<o&&r[i]===n[i];i++);return[r.length-i,n.length-i]}(this.currentState,r);if(a>0&&this.exit(a),this.currentStateOrNull=r,void 0!==n){let t=n;this.currentContext.allowPatching(r=>{for(let n of t)"function"==typeof n?n(r,e):r.patch(n)})}s>0&&this.enter(s)}};function k(e){throw Error(e)}function S(e){return null!==e&&"object"==typeof e&&"[object Object]"===Object.prototype.toString.call(e)}function F(e){return Object.entries(e)}function I(e,t){let r={};for(let n of Object.entries(e)){let e=n[0];if("__proto__"===e)continue;let o=n[1];r[e]=t(o,e)}return r}function R(e){try{return JSON.parse(e)}catch(e){return}}function M(e){return JSON.parse(JSON.stringify(e))}function N(e){return e.filter(e=>null!=e)}function P(e){let t={...e};return Object.keys(e).forEach(e=>{void 0===t[e]&&delete t[e]}),t}async function L(e,t,r){let n;return Promise.race([e,new Promise((e,o)=>{n=setTimeout(()=>{o(Error(r))},t)})]).finally(()=>clearTimeout(n))}function j(e){let t=null;return()=>(null===t&&(t=e().catch(e=>{throw setTimeout(()=>{t=null},5e3),e})),t)}var z=((n=z||{})[n.UPDATE_PRESENCE=100]="UPDATE_PRESENCE",n[n.USER_JOINED=101]="USER_JOINED",n[n.USER_LEFT=102]="USER_LEFT",n[n.BROADCASTED_EVENT=103]="BROADCASTED_EVENT",n[n.ROOM_STATE=104]="ROOM_STATE",n[n.INITIAL_STORAGE_STATE=200]="INITIAL_STORAGE_STATE",n[n.UPDATE_STORAGE=201]="UPDATE_STORAGE",n[n.REJECT_STORAGE_OP=299]="REJECT_STORAGE_OP",n[n.UPDATE_YDOC=300]="UPDATE_YDOC",n[n.THREAD_CREATED=400]="THREAD_CREATED",n[n.THREAD_DELETED=407]="THREAD_DELETED",n[n.THREAD_METADATA_UPDATED=401]="THREAD_METADATA_UPDATED",n[n.THREAD_UPDATED=408]="THREAD_UPDATED",n[n.COMMENT_CREATED=402]="COMMENT_CREATED",n[n.COMMENT_EDITED=403]="COMMENT_EDITED",n[n.COMMENT_DELETED=404]="COMMENT_DELETED",n[n.COMMENT_REACTION_ADDED=405]="COMMENT_REACTION_ADDED",n[n.COMMENT_REACTION_REMOVED=406]="COMMENT_REACTION_REMOVED",n),W=((o=W||{})[o.CLOSE_NORMAL=1e3]="CLOSE_NORMAL",o[o.CLOSE_ABNORMAL=1006]="CLOSE_ABNORMAL",o[o.UNEXPECTED_CONDITION=1011]="UNEXPECTED_CONDITION",o[o.TRY_AGAIN_LATER=1013]="TRY_AGAIN_LATER",o[o.INVALID_MESSAGE_FORMAT=4e3]="INVALID_MESSAGE_FORMAT",o[o.NOT_ALLOWED=4001]="NOT_ALLOWED",o[o.MAX_NUMBER_OF_MESSAGES_PER_SECONDS=4002]="MAX_NUMBER_OF_MESSAGES_PER_SECONDS",o[o.MAX_NUMBER_OF_CONCURRENT_CONNECTIONS=4003]="MAX_NUMBER_OF_CONCURRENT_CONNECTIONS",o[o.MAX_NUMBER_OF_MESSAGES_PER_DAY_PER_APP=4004]="MAX_NUMBER_OF_MESSAGES_PER_DAY_PER_APP",o[o.MAX_NUMBER_OF_CONCURRENT_CONNECTIONS_PER_ROOM=4005]="MAX_NUMBER_OF_CONCURRENT_CONNECTIONS_PER_ROOM",o[o.ROOM_ID_UPDATED=4006]="ROOM_ID_UPDATED",o[o.KICKED=4100]="KICKED",o[o.TOKEN_EXPIRED=4109]="TOKEN_EXPIRED",o[o.CLOSE_WITHOUT_RETRY=4999]="CLOSE_WITHOUT_RETRY",o);function U(e){return 4999===e||e>=4e3&&e<4100}function H(e){return 1013===e||e>=4200&&e<4300}function $(e){let t=e.currentState;switch(t){case"@ok.connected":case"@ok.awaiting-pong":return"connected";case"@idle.initial":return"initial";case"@auth.busy":case"@auth.backoff":case"@connecting.busy":case"@connecting.backoff":case"@idle.zombie":return e.context.successCount>0?"reconnecting":"connecting";case"@idle.failed":return"disconnected";default:return h(t,"Unknown state")}}var V=[250,500,1e3,2e3,4e3,8e3,1e4],K=V[0]-1,q=[2e3,3e4,6e4,3e5],Y=class extends Error{constructor(e){super(e)}},G=class extends Error{constructor(e,t){super(e),this.code=t}};function J(e,t){return t.find(t=>t>e)??t[t.length-1]}function Z(e){e.patch({backoffDelay:J(e.backoffDelay,V)})}function X(e){e.patch({backoffDelay:J(e.backoffDelay,q)})}function Q(e){e.patch({successCount:0})}function ee(e,t){let r=2===e?w:1===e?D:()=>{};return()=>{r(t)}}function et(e){let t="Connection to Liveblocks websocket server";return r=>{e instanceof Error?D(`${t} could not be established. ${String(e)}`):D(eo(e)?`${t} closed prematurely (code: ${e.code}). Retrying in ${r.backoffDelay}ms.`:`${t} could not be established.`)}}function er(e){let t=[`code: ${e.code}`];return e.reason&&t.push(`reason: ${e.reason}`),e=>{D(`Connection to Liveblocks websocket server closed (${t.join(", ")}). Retrying in ${e.backoffDelay}ms.`)}}var en=ee(1,"Connection to WebSocket closed permanently. Won't retry.");function eo(e){return!(e instanceof Error)&&"close"===e.type}var ei=e=>t=>t.patch(e),ea=class{constructor(e,t=!1,r=!0){let{machine:n,events:o,cleanups:i}=function(e,t){let r=y();r.pause();let n=y();function o(e,t){return()=>{let r=new G(e,t);n.notify(r)}}let i=new T({successCount:0,authValue:null,socket:null,backoffDelay:K}).addState("@idle.initial").addState("@idle.failed").addState("@idle.zombie").addState("@auth.busy").addState("@auth.backoff").addState("@connecting.busy").addState("@connecting.backoff").addState("@ok.connected").addState("@ok.awaiting-pong");i.addTransitions("*",{RECONNECT:{target:"@auth.backoff",effect:[Z,Q]},DISCONNECT:"@idle.initial"}),i.onEnter("@idle.*",Q).addTransitions("@idle.*",{CONNECT:(e,t)=>null!==t.authValue?"@connecting.busy":"@auth.busy"}),i.addTransitions("@auth.backoff",{NAVIGATOR_ONLINE:{target:"@auth.busy",effect:ei({backoffDelay:K})}}).addTimedTransition("@auth.backoff",e=>e.backoffDelay,"@auth.busy").onEnterAsync("@auth.busy",()=>L(e.authenticate(),1e4,"Timed out during auth"),e=>({target:"@connecting.busy",effect:ei({authValue:e.data})}),e=>e.reason instanceof Y?{target:"@idle.failed",effect:[ee(2,e.reason.message),o(e.reason.message,-1)]}:{target:"@auth.backoff",effect:[Z,ee(2,`Authentication failed: ${e.reason instanceof Error?e.reason.message:String(e.reason)}`)]});let a=e=>i.send({type:"EXPLICIT_SOCKET_ERROR",event:e}),s=e=>i.send({type:"EXPLICIT_SOCKET_CLOSE",event:e}),u=e=>"pong"===e.data?i.send({type:"PONG"}):r.notify(e);function l(e){e&&(e.removeEventListener("error",a),e.removeEventListener("close",s),e.removeEventListener("message",u),e.close())}i.addTransitions("@connecting.backoff",{NAVIGATOR_ONLINE:{target:"@connecting.busy",effect:ei({backoffDelay:K})}}).addTimedTransition("@connecting.backoff",e=>e.backoffDelay,"@connecting.busy").onEnterAsync("@connecting.busy",async(r,n)=>{let o=null,i=null;return L(new Promise((n,l)=>{if(null===r.authValue)throw Error("No auth authValue");let c=e.createSocket(r.authValue);function d(e){o=e,c.removeEventListener("message",u),l(e)}i=c;let[f,h]=v();function p(e){let t=R(e.data);t?.type===104&&h()}t.waitForActorId||h(),c.addEventListener("message",u),t.waitForActorId&&c.addEventListener("message",p),c.addEventListener("error",d),c.addEventListener("close",d),c.addEventListener("open",()=>{c.addEventListener("error",a),c.addEventListener("close",s);let e=()=>{c.removeEventListener("error",d),c.removeEventListener("close",d),c.removeEventListener("message",p)};f.then(()=>{n([c,e])})})}),1e4,"Timed out during websocket connection").then(([e,t])=>{if(t(),n.aborted)throw Error("Aborted");if(o)throw o;return e}).catch(e=>{throw l(i),e})},e=>({target:"@ok.connected",effect:ei({socket:e.data,backoffDelay:K})}),e=>{let t=e.reason;if(t instanceof Y)return{target:"@idle.failed",effect:[ee(2,t.message),o(t.message,-1)]};if(eo(t)){if(4109===t.code)return"@auth.busy";if(H(t.code))return{target:"@connecting.backoff",effect:[X,et(t)]};if(U(t.code))return{target:"@idle.failed",effect:[ee(2,t.reason),o(t.reason,t.code)]}}return{target:"@auth.backoff",effect:[Z,et(t)]}});let c={target:"@ok.awaiting-pong",effect:e=>{e.socket?.send("ping")}},d=()=>{let t="undefined"!=typeof document?document:void 0;return t?.visibilityState==="hidden"&&e.canZombie()?"@idle.zombie":c};if(i.addTimedTransition("@ok.connected",3e4,d).addTransitions("@ok.connected",{NAVIGATOR_OFFLINE:d,WINDOW_GOT_FOCUS:c}),i.addTransitions("@idle.zombie",{WINDOW_GOT_FOCUS:"@connecting.backoff"}),i.onEnter("@ok.*",e=>{e.patch({successCount:e.successCount+1});let t=setTimeout(r.unpause,0);return e=>{l(e.socket),e.patch({socket:null}),clearTimeout(t),r.pause()}}).addTransitions("@ok.awaiting-pong",{PONG:"@ok.connected"}).addTimedTransition("@ok.awaiting-pong",2e3,{target:"@connecting.busy",effect:ee(1,"Received no pong from server, assume implicit connection loss.")}).addTransitions("@ok.*",{EXPLICIT_SOCKET_ERROR:(e,t)=>t.socket?.readyState===1?null:{target:"@connecting.backoff",effect:Z},EXPLICIT_SOCKET_CLOSE:e=>{var t;return U(e.event.code)?{target:"@idle.failed",effect:[en,o(e.event.reason,e.event.code)]}:(t=e.event.code)>=4100&&t<4200?4109===e.event.code?"@auth.busy":{target:"@auth.backoff",effect:[Z,er(e.event)]}:H(e.event.code)?{target:"@connecting.backoff",effect:[X,er(e.event)]}:{target:"@connecting.backoff",effect:[Z,er(e.event)]}}}),"undefined"!=typeof document){let e="undefined"!=typeof document?document:void 0,t="undefined"!=typeof window?window:void 0,r=t??e;i.onEnter("*",n=>{function o(){i.send({type:"NAVIGATOR_OFFLINE"})}function a(){i.send({type:"NAVIGATOR_ONLINE"})}function s(){e?.visibilityState==="visible"&&i.send({type:"WINDOW_GOT_FOCUS"})}return t?.addEventListener("online",a),t?.addEventListener("offline",o),r?.addEventListener("visibilitychange",s),()=>{r?.removeEventListener("visibilitychange",s),t?.removeEventListener("online",a),t?.removeEventListener("offline",o),l(n.socket)}})}let f=[],{statusDidChange:h,didConnect:p,didDisconnect:m,unsubscribe:g}=function(e){let t=y(),r=y(),n=y(),o=null,i=e.events.didEnterState.subscribe(()=>{let i=$(e);i!==o&&t.notify(i),"connected"===o&&"connected"!==i?n.notify():"connected"!==o&&"connected"===i&&r.notify(),o=i});return{statusDidChange:t.observable,didConnect:r.observable,didDisconnect:n.observable,unsubscribe:i}}(i);return f.push(g),t.enableDebugLogging&&f.push(function(e){let t=new Date().getTime();function r(...n){D(`${((new Date().getTime()-t)/1e3).toFixed(2)} [FSM #${e.id}]`,...n)}let n=[e.events.didReceiveEvent.subscribe(e=>r(`Event ${e.type}`)),e.events.willTransition.subscribe(({from:e,to:t})=>r("Transitioning",e,"→",t)),e.events.didIgnoreEvent.subscribe(e=>r("Ignored event",e.type,e,"(current state won't handle it)"))];return()=>{for(let e of n)e()}}(i)),i.start(),{machine:i,cleanups:f,events:{statusDidChange:h,didConnect:p,didDisconnect:m,onMessage:r.observable,onLiveblocksError:n.observable}}}(e,{waitForActorId:r,enableDebugLogging:t});this.machine=n,this.events=o,this.cleanups=i}getStatus(){try{return $(this.machine)}catch{return"initial"}}get authValue(){return this.machine.context.authValue}connect(){this.machine.send({type:"CONNECT"})}reconnect(){this.machine.send({type:"RECONNECT"})}disconnect(){this.machine.send({type:"DISCONNECT"})}destroy(){let e;for(this.machine.stop();e=this.cleanups.pop();)e()}send(e){let t=this.machine.context?.socket;null===t?D("Cannot send: not connected yet",e):1!==t.readyState?D("Cannot send: WebSocket no longer open",e):t.send(e)}_privateSendMachineEvent(e){this.machine.send(e)}};function es(e){return e.includes("room:write")}function eu(e){return e.includes("comments:write")||e.includes("room:write")}function el(e){var t;let r=e.split(".");if(3!==r.length)throw Error("Authentication error: invalid JWT token");let n=R(function(e){try{let t=e.replace(/-/g,"+").replace(/_/g,"/");return decodeURIComponent(atob(t).split("").map(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)}).join(""))}catch(t){return atob(e)}}(r[1]));if(!(n&&S(t=n)&&("acc"===t.k||"id"===t.k||"sec-legacy"===t.k)))throw Error("Authentication error: expected a valid token but did not get one. Hint: if you are using a callback, ensure the room is passed when creating the token. For more information: https://liveblocks.io/docs/api-reference/liveblocks-client#createClientCallback");return{raw:e,parsed:n}}async function ec(e,t,r){let n;let o=await e(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!o.ok){let e=`${(await o.text()).trim()||"reason not provided in auth response"} (${o.status} returned by POST ${t})`;if(401===o.status||403===o.status)throw new Y(`Unauthorized: ${e}`);throw Error(`Failed to authenticate: ${e}`)}try{n=await o.json()}catch(e){throw Error(`Expected a JSON response when doing a POST request on "${t}". ${String(e)}`)}if(!S(n)||"string"!=typeof n.token)throw Error(`Expected a JSON response of the form \`{ token: "..." }\` when doing a POST request on "${t}", but got ${JSON.stringify(n)}`);let{token:i}=n;return{token:i}}var ed=Symbol();function ef(e,...t){return"object"!=typeof e||null===e||Array.isArray(e)?JSON.stringify(e,...t):JSON.stringify(Object.keys(e).sort().reduce((t,r)=>(t[r]=e[r],t),{}),...t)}y().observable,Date.now();var eh=class{constructor(e){this.input=e;let{promise:t,resolve:r,reject:n}=g();this.promise=t,this.resolve=r,this.reject=n}},ep=class{constructor(e,t){this.queue=[],this.error=!1,this.callback=e,this.size=t.size??50,this.delay=t.delay}clearDelayTimeout(){void 0!==this.delayTimeoutId&&(clearTimeout(this.delayTimeoutId),this.delayTimeoutId=void 0)}schedule(){this.queue.length===this.size?this.flush():1===this.queue.length&&(this.clearDelayTimeout(),this.delayTimeoutId=setTimeout(()=>void this.flush(),this.delay))}async flush(){if(0===this.queue.length)return;let e=this.queue.splice(0),t=e.map(e=>e.input);try{let r=await this.callback(t);this.error=!1,e.forEach((t,n)=>{let o=r?.[n];Array.isArray(r)?e.length!==r.length?t.reject(Error(`Callback must return an array of the same length as the number of provided items. Expected ${e.length}, but got ${r.length}.`)):o instanceof Error?t.reject(o):t.resolve(o):t.reject(Error("Callback must return an array."))})}catch(t){this.error=!0,e.forEach(e=>{e.reject(t)})}}get(e){let t=this.queue.find(t=>ef(t.input)===ef(e));if(t)return t.promise;let r=new eh(e);return this.queue.push(r),this.schedule(),r.promise}clear(){this.queue=[],this.error=!1,this.clearDelayTimeout()}};function em(e){let t=new Map,r=y();function n(e,n){t.set(e,n),r.notify()}async function o(r){let o=ef(r);if(!t.has(o))try{n(o,{isLoading:!0});let t=await e.get(r);n(o,{isLoading:!1,data:t})}catch(e){n(o,{isLoading:!1,error:e})}}return{...r.observable,get:o,getState:function(e){let r=ef(e);return t.get(r)}}}function ev(e){let t=!0,r=!1,n=e,o=new Set;function i(){if(r)for(let e of(r=!1,o))e(n)}return{get:function(){return n},set:function(e){let o=n,a=e(o);a!==o&&(n=a,r=!0),t&&i()},batch:function(e){if(!1===t)return e();t=!1;try{e()}finally{t=!0,i()}},subscribe:function(e){return o.add(e),()=>{o.delete(e)}}}}function eg(e){let t=e.editedAt?new Date(e.editedAt):void 0,r=new Date(e.createdAt),n=e.reactions.map(e=>({...e,createdAt:new Date(e.createdAt)}));if(e.body)return{...e,reactions:n,createdAt:r,editedAt:t};{let o=new Date(e.deletedAt);return{...e,reactions:n,createdAt:r,editedAt:t,deletedAt:o}}}function ey(e){let t=e.updatedAt?new Date(e.updatedAt):void 0,r=new Date(e.createdAt),n=e.comments.map(e=>eg(e));return{...e,createdAt:r,updatedAt:t,comments:n}}function eb(e){let t=new Date(e.notifiedAt),r=e.readAt?new Date(e.readAt):null;if("activities"in e){let n=e.activities.map(e=>({...e,createdAt:new Date(e.createdAt)}));return{...e,notifiedAt:t,readAt:r,activities:n}}return{...e,notifiedAt:t,readAt:r}}function eE(e){let t=new Date(e.deletedAt);return{...e,deletedAt:t}}function eC(e){let t=new Date(e.deletedAt);return{...e,deletedAt:t}}function eD(e,t,r){let n=new URL(t,e);return void 0!==r&&(n.search=(r instanceof URLSearchParams?r:function(e){let t=new URLSearchParams;for(let[r,n]of Object.entries(e))null!=n&&t.set(r,n.toString());return t}(r)).toString()),n.toString()}function ew(e,...t){return e.reduce((e,r,n)=>e+encodeURIComponent(t[n-1]??"")+r)}var eA=e_(0),ex=e_(1),eB=eA+e_(-1);function e_(e){let t=32+(e<0?95+e:e);if(t<32||t>126)throw Error(`Invalid n value: ${e}`);return String.fromCharCode(t)}function eO(e,t){return void 0!==e&&void 0!==t?function(e,t){if(e<t)return eT(e,t);if(e>t)return eT(t,e);throw Error("Cannot compute value between two equal positions")}(e,t):void 0!==e?function(e){for(let t=0;t<=e.length-1;t++){let r=e.charCodeAt(t);if(!(r>=126))return e.substring(0,t)+String.fromCharCode(r+1)}return e+ex}(e):void 0!==t?function(e){let t=e.length-1;for(let r=0;r<=t;r++){let n=e.charCodeAt(r);if(!(n<=32)){if(r!==t)return e.substring(0,r+1);if(33===n)return e.substring(0,r)+eB;return e.substring(0,r)+String.fromCharCode(n-1)}}return ex}(t):ex}function eT(e,t){let r=0,n=e.length,o=t.length;for(;;){let a=r<n?e.charCodeAt(r):32,s=r<o?t.charCodeAt(r):126;if(a===s){r++;continue}if(s-a!=1){var i;return((i=r)<e.length?e.substring(0,i):e+eA.repeat(i-e.length))+String.fromCharCode(s+a>>1)}{let t=r+1,n=e.substring(0,t);return n.length<t&&(n+=eA.repeat(t-n.length)),n+eT(e.substring(t),"")}}}function ek(e){return!function(e){if(""===e)return!1;let t=e.length-1,r=e.charCodeAt(t);if(r<33||r>126)return!1;for(let r=0;r<t;r++){let t=e.charCodeAt(r);if(t<32||t>126)return!1}return!0}(e)?function(e){let t=[];for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);t.push(n<32?32:n>126?126:n)}for(;t.length>0&&32===t[t.length-1];)t.length--;return t.length>0?String.fromCharCode(...t):ex}(e):e}var eS=((i=eS||{})[i.INIT=0]="INIT",i[i.SET_PARENT_KEY=1]="SET_PARENT_KEY",i[i.CREATE_LIST=2]="CREATE_LIST",i[i.UPDATE_OBJECT=3]="UPDATE_OBJECT",i[i.CREATE_OBJECT=4]="CREATE_OBJECT",i[i.DELETE_CRDT=5]="DELETE_CRDT",i[i.DELETE_OBJECT_KEY=6]="DELETE_OBJECT_KEY",i[i.CREATE_MAP=7]="CREATE_MAP",i[i.CREATE_REGISTER=8]="CREATE_REGISTER",i);function eF(e,t,r=ek(t)){return Object.freeze({type:"HasParent",node:e,key:t,pos:r})}var eI=Object.freeze({type:"NoParent"}),eR=class{constructor(){this._parent=eI}_getParentKeyOrThrow(){switch(this.parent.type){case"HasParent":return this.parent.key;case"NoParent":throw Error("Parent key is missing");case"Orphaned":return this.parent.oldKey;default:return h(this.parent,"Unknown state")}}get _parentPos(){switch(this.parent.type){case"HasParent":return this.parent.pos;case"NoParent":throw Error("Parent key is missing");case"Orphaned":return this.parent.oldPos;default:return h(this.parent,"Unknown state")}}get _pool(){return this.__pool}get roomId(){return this.__pool?this.__pool.roomId:null}get _id(){return this.__id}get parent(){return this._parent}get _parentKey(){switch(this.parent.type){case"HasParent":return this.parent.key;case"NoParent":return null;case"Orphaned":return this.parent.oldKey;default:return h(this.parent,"Unknown state")}}_apply(e,t){return 5===e.type&&"HasParent"===this.parent.type?this.parent.node._detachChild(this):{modified:!1}}_setParentLink(e,t){switch(this.parent.type){case"HasParent":if(this.parent.node!==e)throw Error("Cannot set parent: node already has a parent");this._parent=eF(e,t);return;case"Orphaned":case"NoParent":this._parent=eF(e,t);return;default:return h(this.parent,"Unknown state")}}_attach(e,t){if(this.__id||this.__pool)throw Error("Cannot attach node: already attached");t.addNode(e,this),this.__id=e,this.__pool=t}_detach(){switch(this.__pool&&this.__id&&this.__pool.deleteNode(this.__id),this.parent.type){case"HasParent":this._parent=function(e,t=ek(e)){return Object.freeze({type:"Orphaned",oldKey:e,oldPos:t})}(this.parent.key,this.parent.pos);break;case"NoParent":this._parent=eI;break;case"Orphaned":break;default:h(this.parent,"Unknown state")}this.__pool=void 0}invalidate(){(void 0!==this._cachedImmutable||void 0!==this._cachedTreeNode)&&(this._cachedImmutable=void 0,this._cachedTreeNode=void 0,"HasParent"===this.parent.type&&this.parent.node.invalidate())}toTreeNode(e){return(void 0===this._cachedTreeNode||this._cachedTreeNodeKey!==e)&&(this._cachedTreeNodeKey=e,this._cachedTreeNode=this._toTreeNode(e)),this._cachedTreeNode}toImmutable(){return void 0===this._cachedImmutable&&(this._cachedImmutable=this._toImmutable()),this._cachedImmutable}},eM=((a=eM||{})[a.OBJECT=0]="OBJECT",a[a.LIST=1]="LIST",a[a.MAP=2]="MAP",a[a.REGISTER=3]="REGISTER",a),eN=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((e,t)=>e+=(t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t<63?"_":"-",""),eP=class e extends eR{constructor(e){super(),this._data=e}get data(){return this._data}static _deserialize([t,r],n,o){let i=new e(r.data);return i._attach(t,o),i}_toOps(e,t,r){if(void 0===this._id)throw Error("Cannot serialize register if parentId or parentKey is undefined");return[{type:8,opId:r?.generateOpId(),id:this._id,parentId:e,parentKey:t,data:this.data}]}_serialize(){if("HasParent"!==this.parent.type)throw Error("Cannot serialize LiveRegister if parent is missing");return{type:3,parentId:m(this.parent.node._id,"Parent node expected to have ID"),parentKey:this.parent.key,data:this.data}}_attachChild(e){throw Error("Method not implemented.")}_detachChild(e){throw Error("Method not implemented.")}_apply(e,t){return super._apply(e,t)}_toTreeNode(e){return{type:"Json",id:this._id??eN(),key:e,payload:this._data}}_toImmutable(){return this._data}clone(){return M(this.data)}};function eL(e,t){let r=e._parentPos,n=t._parentPos;return r===n?0:r<n?-1:1}var ej=class e extends eR{constructor(e){let t;for(let r of(super(),this._items=[],this._implicitlyDeletedItems=new WeakSet,this._unacknowledgedSets=new Map,e)){let e=eO(t),n=e3(r);n._setParentLink(this,e),this._items.push(n),t=e}}static _deserialize([t],r,n){let o=new e([]);o._attach(t,n);let i=r.get(t);if(void 0===i)return o;for(let[e,t]of i){let i=eX([e,t],r,n);i._setParentLink(o,t.parentKey),o._insertAndSort(i)}return o}_toOps(e,t,r){if(void 0===this._id)throw Error("Cannot serialize item is not attached");let n=[],o={id:this._id,opId:r?.generateOpId(),type:2,parentId:e,parentKey:t};for(let e of(n.push(o),this._items)){let t=e._getParentKeyOrThrow(),o=eK(e._toOps(this._id,t,r),void 0),i=o[0].opId;void 0!==i&&this._unacknowledgedSets.set(t,i),n.push(...o)}return n}_insertAndSort(e){this._items.push(e),this._sortItems()}_sortItems(){this._items.sort(eL),this.invalidate()}_indexOfPosition(e){return this._items.findIndex(t=>t._getParentKeyOrThrow()===e)}_attach(e,t){for(let r of(super._attach(e,t),this._items))r._attach(t.generateId(),t)}_detach(){for(let e of(super._detach(),this._items))e._detach()}_applySetRemote(e){if(void 0===this._pool)throw Error("Can't attach child if managed pool is not present");let{id:t,parentKey:r}=e,n=eJ(e);n._attach(t,this._pool),n._setParentLink(this,r);let o=e.deletedId,i=this._indexOfPosition(r);if(-1!==i){let t=this._items[i];if(t._id===o)return t._detach(),this._items[i]=n,{modified:eW(this,[eU(i,n)]),reverse:[]};{this._implicitlyDeletedItems.add(t),this._items[i]=n;let r=[eU(i,n)],o=this._detachItemAssociatedToSetOperation(e.deletedId);return o&&r.push(o),{modified:eW(this,r),reverse:[]}}}{let t=[],o=this._detachItemAssociatedToSetOperation(e.deletedId);return o&&t.push(o),this._insertAndSort(n),t.push(e$(this._indexOfPosition(r),n)),{reverse:[],modified:eW(this,t)}}}_applySetAck(e){if(void 0===this._pool)throw Error("Can't attach child if managed pool is not present");let t=[],r=this._detachItemAssociatedToSetOperation(e.deletedId);r&&t.push(r);let n=this._unacknowledgedSets.get(e.parentKey);if(void 0!==n){if(n!==e.opId)return 0===t.length?{modified:!1}:{modified:eW(this,t),reverse:[]};this._unacknowledgedSets.delete(e.parentKey)}let o=this._indexOfPosition(e.parentKey),i=this._items.find(t=>t._id===e.id);if(void 0!==i){if(i._parentKey===e.parentKey)return{modified:t.length>0&&eW(this,t),reverse:[]};-1!==o&&(this._implicitlyDeletedItems.add(this._items[o]),this._items.splice(o,1),t.push(eH(o)));let r=this._items.indexOf(i);i._setParentLink(this,e.parentKey),this._sortItems();let n=this._items.indexOf(i);return n!==r&&t.push(eV(r,n,i)),{modified:t.length>0&&eW(this,t),reverse:[]}}{let r=this._pool.getNode(e.id);if(r&&this._implicitlyDeletedItems.has(r)){r._setParentLink(this,e.parentKey),this._implicitlyDeletedItems.delete(r),this._insertAndSort(r);let n=this._items.indexOf(r);return{modified:eW(this,[-1===o?e$(n,r):eU(n,r),...t]),reverse:[]}}{-1!==o&&this._items.splice(o,1);let{newItem:r,newIndex:n}=this._createAttachItemAndSort(e,e.parentKey);return{modified:eW(this,[-1===o?e$(n,r):eU(n,r),...t]),reverse:[]}}}}_detachItemAssociatedToSetOperation(e){if(void 0===e||void 0===this._pool)return null;let t=this._pool.getNode(e);if(void 0===t)return null;let r=this._detachChild(t);return!1===r.modified?null:r.modified.updates[0]}_applyRemoteInsert(e){if(void 0===this._pool)throw Error("Can't attach child if managed pool is not present");let t=ek(e.parentKey),r=this._indexOfPosition(t);-1!==r&&this._shiftItemPosition(r,t);let{newItem:n,newIndex:o}=this._createAttachItemAndSort(e,t);return{modified:eW(this,[e$(o,n)]),reverse:[]}}_applyInsertAck(e){let t=this._items.find(t=>t._id===e.id),r=ek(e.parentKey),n=this._indexOfPosition(r);if(t){if(t._parentKey===r)return{modified:!1};{let e=this._items.indexOf(t);-1!==n&&this._shiftItemPosition(n,r),t._setParentLink(this,r),this._sortItems();let o=this._indexOfPosition(r);return o===e?{modified:!1}:{modified:eW(this,[eV(e,o,t)]),reverse:[]}}}{let t=m(this._pool).getNode(e.id);if(t&&this._implicitlyDeletedItems.has(t))return t._setParentLink(this,r),this._implicitlyDeletedItems.delete(t),this._insertAndSort(t),{modified:eW(this,[e$(this._indexOfPosition(r),t)]),reverse:[]};{-1!==n&&this._shiftItemPosition(n,r);let{newItem:t,newIndex:o}=this._createAttachItemAndSort(e,r);return{modified:eW(this,[e$(o,t)]),reverse:[]}}}}_applyInsertUndoRedo(e){let{id:t,parentKey:r}=e,n=eJ(e);if(this._pool?.getNode(t)!==void 0)return{modified:!1};n._attach(t,m(this._pool)),n._setParentLink(this,r);let o=this._indexOfPosition(r),i=r;return -1!==o&&(i=eO(this._items[o]?._parentPos,this._items[o+1]?._parentPos),n._setParentLink(this,i)),this._insertAndSort(n),{modified:eW(this,[e$(this._indexOfPosition(i),n)]),reverse:[{type:5,id:t}]}}_applySetUndoRedo(e){let{id:t,parentKey:r}=e,n=eJ(e);if(this._pool?.getNode(t)!==void 0)return{modified:!1};this._unacknowledgedSets.set(r,m(e.opId));let o=this._indexOfPosition(r);if(n._attach(t,m(this._pool)),n._setParentLink(this,r),-1===o)return this._insertAndSort(n),this._detachItemAssociatedToSetOperation(e.deletedId),{reverse:[{type:5,id:t}],modified:eW(this,[e$(this._indexOfPosition(r),n)])};{let t=this._items[o];t._detach(),this._items[o]=n;let i=eK(t._toOps(m(this._id),r,this._pool),e.id),a=[eU(o,n)],s=this._detachItemAssociatedToSetOperation(e.deletedId);return s&&a.push(s),{modified:eW(this,a),reverse:i}}}_attachChild(e,t){let r;if(void 0===this._pool)throw Error("Can't attach child if managed pool is not present");return!1!==(r="set"===e.intent?1===t?this._applySetRemote(e):2===t?this._applySetAck(e):this._applySetUndoRedo(e):1===t?this._applyRemoteInsert(e):2===t?this._applyInsertAck(e):this._applyInsertUndoRedo(e)).modified&&this.invalidate(),r}_detachChild(e){if(e){let t=m(e._parentKey),r=e._toOps(m(this._id),t,this._pool),n=this._items.indexOf(e);return -1===n?{modified:!1}:(this._items.splice(n,1),this.invalidate(),e._detach(),{modified:eW(this,[eH(n)]),reverse:r})}return{modified:!1}}_applySetChildKeyRemote(e,t){if(this._implicitlyDeletedItems.has(t))return this._implicitlyDeletedItems.delete(t),t._setParentLink(this,e),this._insertAndSort(t),{modified:eW(this,[e$(this._items.indexOf(t),t)]),reverse:[]};if(e===t._parentKey)return{modified:!1};let r=this._indexOfPosition(e);if(-1===r){let r=this._items.indexOf(t);t._setParentLink(this,e),this._sortItems();let n=this._items.indexOf(t);return n===r?{modified:!1}:{modified:eW(this,[eV(r,n,t)]),reverse:[]}}{this._items[r]._setParentLink(this,eO(e,this._items[r+1]?._parentPos));let n=this._items.indexOf(t);t._setParentLink(this,e),this._sortItems();let o=this._items.indexOf(t);return o===n?{modified:!1}:{modified:eW(this,[eV(n,o,t)]),reverse:[]}}}_applySetChildKeyAck(e,t){let r=m(t._parentKey);if(this._implicitlyDeletedItems.has(t)){let r=this._indexOfPosition(e);return this._implicitlyDeletedItems.delete(t),-1!==r&&this._items[r]._setParentLink(this,eO(e,this._items[r+1]?._parentPos)),t._setParentLink(this,e),this._insertAndSort(t),{modified:!1}}{if(e===r)return{modified:!1};let n=this._items.indexOf(t),o=this._indexOfPosition(e);-1!==o&&this._items[o]._setParentLink(this,eO(e,this._items[o+1]?._parentPos)),t._setParentLink(this,e),this._sortItems();let i=this._items.indexOf(t);return n===i?{modified:!1}:{modified:eW(this,[eV(n,i,t)]),reverse:[]}}}_applySetChildKeyUndoRedo(e,t){let r=m(t._parentKey),n=this._items.indexOf(t),o=this._indexOfPosition(e);-1!==o&&this._items[o]._setParentLink(this,eO(e,this._items[o+1]?._parentPos)),t._setParentLink(this,e),this._sortItems();let i=this._items.indexOf(t);return n===i?{modified:!1}:{modified:eW(this,[eV(n,i,t)]),reverse:[{type:1,id:m(t._id),parentKey:r}]}}_setChildKey(e,t,r){return 1===r?this._applySetChildKeyRemote(e,t):2===r?this._applySetChildKeyAck(e,t):this._applySetChildKeyUndoRedo(e,t)}_apply(e,t){return super._apply(e,t)}_serialize(){if("HasParent"!==this.parent.type)throw Error("Cannot serialize LiveList if parent is missing");return{type:1,parentId:m(this.parent.node._id,"Parent node expected to have ID"),parentKey:this.parent.key}}get length(){return this._items.length}push(e){return this._pool?.assertStorageIsWritable(),this.insert(e,this.length)}insert(e,t){if(this._pool?.assertStorageIsWritable(),t<0||t>this._items.length)throw Error(`Cannot insert list item at index "${t}". index should be between 0 and ${this._items.length}`);let r=eO(this._items[t-1]?this._items[t-1]._parentPos:void 0,this._items[t]?this._items[t]._parentPos:void 0),n=e3(e);if(n._setParentLink(this,r),this._insertAndSort(n),this._pool&&this._id){let e=this._pool.generateId();n._attach(e,this._pool),this._pool.dispatch(n._toOps(this._id,r,this._pool),[{type:5,id:e}],new Map([[this._id,eW(this,[e$(t,n)])]]))}}move(e,t){if(this._pool?.assertStorageIsWritable(),t<0)throw Error("targetIndex cannot be less than 0");if(t>=this._items.length)throw Error("targetIndex cannot be greater or equal than the list length");if(e<0)throw Error("index cannot be less than 0");if(e>=this._items.length)throw Error("index cannot be greater or equal than the list length");let r=null,n=null;e<t?(n=t===this._items.length-1?void 0:this._items[t+1]._parentPos,r=this._items[t]._parentPos):(n=this._items[t]._parentPos,r=0===t?void 0:this._items[t-1]._parentPos);let o=eO(r,n),i=this._items[e],a=i._getParentKeyOrThrow();if(i._setParentLink(this,o),this._sortItems(),this._pool&&this._id){let r=new Map([[this._id,eW(this,[eV(e,t,i)])]]);this._pool.dispatch([{type:1,id:m(i._id),opId:this._pool.generateOpId(),parentKey:o}],[{type:1,id:m(i._id),parentKey:a}],r)}}delete(e){if(this._pool?.assertStorageIsWritable(),e<0||e>=this._items.length)throw Error(`Cannot delete list item at index "${e}". index should be between 0 and ${this._items.length-1}`);let t=this._items[e];if(t._detach(),this._items.splice(e,1),this.invalidate(),this._pool){let r=t._id;if(r){let n=new Map;n.set(m(this._id),eW(this,[eH(e)])),this._pool.dispatch([{id:r,opId:this._pool.generateOpId(),type:5}],t._toOps(m(this._id),t._getParentKeyOrThrow()),n)}}}clear(){if(this._pool?.assertStorageIsWritable(),this._pool){let e=[],t=[],r=[];for(let n of this._items){n._detach();let o=n._id;o&&(e.push({type:5,id:o,opId:this._pool.generateOpId()}),t.push(...n._toOps(m(this._id),n._getParentKeyOrThrow())),r.push(eH(0)))}this._items=[],this.invalidate();let n=new Map;n.set(m(this._id),eW(this,r)),this._pool.dispatch(e,t,n)}else{for(let e of this._items)e._detach();this._items=[],this.invalidate()}}set(e,t){if(this._pool?.assertStorageIsWritable(),e<0||e>=this._items.length)throw Error(`Cannot set list item at index "${e}". index should be between 0 and ${this._items.length-1}`);let r=this._items[e],n=r._getParentKeyOrThrow(),o=r._id;r._detach();let i=e3(t);if(i._setParentLink(this,n),this._items[e]=i,this.invalidate(),this._pool&&this._id){let t=this._pool.generateId();i._attach(t,this._pool);let a=new Map;a.set(this._id,eW(this,[eU(e,i)]));let s=eK(i._toOps(this._id,n,this._pool),o);this._unacknowledgedSets.set(n,m(s[0].opId));let u=eK(r._toOps(this._id,n,void 0),t);this._pool.dispatch(s,u,a)}}toArray(){return this._items.map(e=>e2(e))}every(e){return this.toArray().every(e)}filter(e){return this.toArray().filter(e)}find(e){return this.toArray().find(e)}findIndex(e){return this.toArray().findIndex(e)}forEach(e){return this.toArray().forEach(e)}get(e){if(!(e<0)&&!(e>=this._items.length))return e2(this._items[e])}indexOf(e,t){return this.toArray().indexOf(e,t)}lastIndexOf(e,t){return this.toArray().lastIndexOf(e,t)}map(e){return this._items.map((t,r)=>e(e2(t),r))}some(e){return this.toArray().some(e)}[Symbol.iterator](){return new ez(this._items)}_createAttachItemAndSort(e,t){let r=eJ(e);return r._attach(e.id,m(this._pool)),r._setParentLink(this,t),this._insertAndSort(r),{newItem:r,newIndex:this._indexOfPosition(t)}}_shiftItemPosition(e,t){let r=eO(t,this._items.length>e+1?this._items[e+1]?._parentPos:void 0);this._items[e]._setParentLink(this,r)}_toTreeNode(e){return{type:"LiveList",id:this._id??eN(),key:e,payload:this._items.map((e,t)=>e.toTreeNode(t.toString()))}}toImmutable(){return super.toImmutable()}_toImmutable(){return this._items.map(e=>e.toImmutable())}clone(){return new e(this._items.map(e=>e.clone()))}},ez=class{constructor(e){this._innerIterator=e[Symbol.iterator]()}[Symbol.iterator](){return this}next(){let e=this._innerIterator.next();return e.done?{done:!0,value:void 0}:{value:e2(e.value)}}};function eW(e,t){return{node:e,type:"LiveList",updates:t}}function eU(e,t){return{index:e,type:"set",item:t instanceof eP?t.data:t}}function eH(e){return{index:e,type:"delete"}}function e$(e,t){return{index:e,type:"insert",item:t instanceof eP?t.data:t}}function eV(e,t,r){return{index:t,type:"move",previousIndex:e,item:r instanceof eP?r.data:r}}function eK(e,t){return e.map((e,r)=>0===r?{...e,intent:"set",deletedId:t}:e)}var eq=e=>e,eY=class e extends eR{constructor(e){if(super(),this.unacknowledgedSet=new Map,e){let t=[];for(let[r,n]of e){let e=e3(n);e._setParentLink(this,r),t.push([r,e])}this._map=new Map(t)}else this._map=new Map}_toOps(e,t,r){if(void 0===this._id)throw Error("Cannot serialize item is not attached");let n=[],o={id:this._id,opId:r?.generateOpId(),type:7,parentId:e,parentKey:t};for(let[e,t]of(n.push(o),this._map))n.push(...t._toOps(this._id,e,r));return n}static _deserialize([t,r],n,o){let i=new e;i._attach(t,o);let a=n.get(t);if(void 0===a)return i;for(let[e,t]of a){let r=eX([e,t],n,o);r._setParentLink(i,t.parentKey),i._map.set(t.parentKey,r),i.invalidate()}return i}_attach(e,t){for(let[r,n]of(super._attach(e,t),this._map))e0(n)&&n._attach(t.generateId(),t)}_attachChild(e,t){let r;if(void 0===this._pool)throw Error("Can't attach child if managed pool is not present");let{id:n,parentKey:o,opId:i}=e,a=eJ(e);if(void 0!==this._pool.getNode(n))return{modified:!1};if(2===t){let e=this.unacknowledgedSet.get(o);if(e===i)return this.unacknowledgedSet.delete(o),{modified:!1};if(void 0!==e)return{modified:!1}}else 1===t&&this.unacknowledgedSet.delete(o);let s=this._map.get(o);if(s){let e=m(this._id);r=s._toOps(e,o),s._detach()}else r=[{type:5,id:n}];return a._setParentLink(this,o),a._attach(n,this._pool),this._map.set(o,a),this.invalidate(),{modified:{node:this,type:"LiveMap",updates:{[o]:{type:"update"}}},reverse:r}}_detach(){for(let e of(super._detach(),this._map.values()))e._detach()}_detachChild(e){let t=m(this._id),r=m(e._parentKey),n=e._toOps(t,r,this._pool);for(let[t,r]of this._map)r===e&&(this._map.delete(t),this.invalidate());return e._detach(),{modified:{node:this,type:"LiveMap",updates:{[r]:{type:"delete"}}},reverse:n}}_serialize(){if("HasParent"!==this.parent.type)throw Error("Cannot serialize LiveMap if parent is missing");return{type:2,parentId:m(this.parent.node._id,"Parent node expected to have ID"),parentKey:this.parent.key}}get(e){let t=this._map.get(e);if(void 0!==t)return e2(t)}set(e,t){this._pool?.assertStorageIsWritable();let r=this._map.get(e);r&&r._detach();let n=e3(t);if(n._setParentLink(this,e),this._map.set(e,n),this.invalidate(),this._pool&&this._id){let t=this._pool.generateId();n._attach(t,this._pool);let o=new Map;o.set(this._id,{node:this,type:"LiveMap",updates:{[e]:{type:"update"}}});let i=n._toOps(this._id,e,this._pool);this.unacknowledgedSet.set(e,m(i[0].opId)),this._pool.dispatch(n._toOps(this._id,e,this._pool),r?r._toOps(this._id,e):[{type:5,id:t}],o)}}get size(){return this._map.size}has(e){return this._map.has(e)}delete(e){this._pool?.assertStorageIsWritable();let t=this._map.get(e);if(void 0===t)return!1;if(t._detach(),this._map.delete(e),this.invalidate(),this._pool&&t._id){let r=m(this._id),n=new Map;n.set(r,{node:this,type:"LiveMap",updates:{[e]:{type:"delete"}}}),this._pool.dispatch([{type:5,id:t._id,opId:this._pool.generateOpId()}],t._toOps(r,e),n)}return!0}entries(){let e=this._map.entries();return{[Symbol.iterator](){return this},next(){let t=e.next();return t.done?{done:!0,value:void 0}:{value:[t.value[0],e2(t.value[1])]}}}}[Symbol.iterator](){return this.entries()}keys(){return this._map.keys()}values(){let e=this._map.values();return{[Symbol.iterator](){return this},next(){let t=e.next();return t.done?{done:!0,value:void 0}:{value:e2(t.value)}}}}forEach(e){for(let t of this)e(t[1],t[0],this)}_toTreeNode(e){return{type:"LiveMap",id:this._id??eN(),key:e,payload:Array.from(this._map.entries()).map(([e,t])=>t.toTreeNode(e))}}toImmutable(){return super.toImmutable()}_toImmutable(){let e=new Map;for(let[t,r]of this._map)e.set(t,r.toImmutable());return eq(e)}clone(){return new e(Array.from(this._map).map(([e,t])=>[e,t.clone()]))}},eG=class e extends eR{static _buildRootAndParentToChildren(e){let t=new Map,r=null;for(let[n,o]of e)if(0!==o.type||void 0!==o.parentId&&void 0!==o.parentKey){let e=[n,o],r=t.get(o.parentId);void 0!==r?r.push(e):t.set(o.parentId,[e])}else r=[n,o];if(null===r)throw Error("Root can't be null");return[r,t]}static _fromItems(t,r){let[n,o]=e._buildRootAndParentToChildren(t);return e._deserialize(n,o,r)}constructor(e={}){super(),this._propToLastUpdate=new Map;let t=P(e);for(let e of Object.keys(t)){let r=t[e];e0(r)&&r._setParentLink(this,e)}this._map=new Map(Object.entries(t))}_toOps(e,t,r){if(void 0===this._id)throw Error("Cannot serialize item is not attached");let n=r?.generateOpId(),o=[],i={type:4,id:this._id,opId:n,parentId:e,parentKey:t,data:{}};for(let[e,t]of(o.push(i),this._map))e0(t)?o.push(...t._toOps(this._id,e,r)):i.data[e]=t;return o}static _deserialize([t,r],n,o){let i=new e(r.data);return i._attach(t,o),this._deserializeChildren(i,n,o)}static _deserializeChildren(e,t,r){let n=t.get(m(e._id));if(void 0===n)return e;for(let[o,i]of n){let n=function([e,t],r,n){switch(t.type){case 0:return eG._deserialize([e,t],r,n);case 1:return ej._deserialize([e,t],r,n);case 2:return eY._deserialize([e,t],r,n);case 3:return t.data;default:throw Error("Unexpected CRDT type")}}([o,i],t,r);eQ(n)&&n._setParentLink(e,i.parentKey),e._map.set(i.parentKey,n),e.invalidate()}return e}_attach(e,t){for(let[r,n]of(super._attach(e,t),this._map))e0(n)&&n._attach(t.generateId(),t)}_attachChild(e,t){let r;if(void 0===this._pool)throw Error("Can't attach child if managed pool is not present");let{id:n,opId:o,parentKey:i}=e,a=eZ(e);if(void 0!==this._pool.getNode(n))return this._propToLastUpdate.get(i)===o&&this._propToLastUpdate.delete(i),{modified:!1};if(0===t)this._propToLastUpdate.set(i,m(o));else if(void 0===this._propToLastUpdate.get(i));else if(this._propToLastUpdate.get(i)===o)return this._propToLastUpdate.delete(i),{modified:!1};else return{modified:!1};let s=m(this._id),u=this._map.get(i);return e0(u)?(r=u._toOps(s,i),u._detach()):r=void 0===u?[{type:6,id:s,key:i}]:[{type:3,id:s,data:{[i]:u}}],this._map.set(i,a),this.invalidate(),eQ(a)&&(a._setParentLink(this,i),a._attach(n,this._pool)),{reverse:r,modified:{node:this,type:"LiveObject",updates:{[i]:{type:"update"}}}}}_detachChild(e){if(e){let t=m(this._id),r=m(e._parentKey),n=e._toOps(t,r,this._pool);for(let[t,r]of this._map)r===e&&(this._map.delete(t),this.invalidate());return e._detach(),{modified:{node:this,type:"LiveObject",updates:{[r]:{type:"delete"}}},reverse:n}}return{modified:!1}}_detach(){for(let e of(super._detach(),this._map.values()))e0(e)&&e._detach()}_apply(e,t){return 3===e.type?this._applyUpdate(e,t):6===e.type?this._applyDeleteObjectKey(e,t):super._apply(e,t)}_serialize(){let e={};for(let[t,r]of this._map)e0(r)||(e[t]=r);return"HasParent"===this.parent.type&&this.parent.node._id?{type:0,parentId:this.parent.node._id,parentKey:this.parent.key,data:e}:{type:0,data:e}}_applyUpdate(e,t){let r=!1,n=m(this._id),o=[],i={type:3,id:n,data:{}};for(let t in e.data){let e=this._map.get(t);e0(e)?(o.push(...e._toOps(n,t)),e._detach()):void 0!==e?i.data[t]=e:void 0===e&&o.push({type:6,id:n,key:t})}let a={};for(let n in e.data){let o=e.data[n];if(void 0===o)continue;if(t)this._propToLastUpdate.set(n,m(e.opId));else if(void 0===this._propToLastUpdate.get(n))r=!0;else{if(this._propToLastUpdate.get(n)!==e.opId)continue;this._propToLastUpdate.delete(n);continue}let i=this._map.get(n);e0(i)&&i._detach(),r=!0,a[n]={type:"update"},this._map.set(n,o),this.invalidate()}return 0!==Object.keys(i.data).length&&o.unshift(i),r?{modified:{node:this,type:"LiveObject",updates:a},reverse:o}:{modified:!1}}_applyDeleteObjectKey(e,t){let r=e.key;if(!1===this._map.has(r)||!t&&void 0!==this._propToLastUpdate.get(r))return{modified:!1};let n=this._map.get(r),o=m(this._id),i=[];return e0(n)?(i=n._toOps(o,e.key),n._detach()):void 0!==n&&(i=[{type:3,id:o,data:{[r]:n}}]),this._map.delete(r),this.invalidate(),{modified:{node:this,type:"LiveObject",updates:{[e.key]:{type:"delete"}}},reverse:i}}toObject(){return Object.fromEntries(this._map)}set(e,t){this._pool?.assertStorageIsWritable(),this.update({[e]:t})}get(e){return this._map.get(e)}delete(e){let t;this._pool?.assertStorageIsWritable();let r=this._map.get(e);if(void 0===r)return;if(void 0===this._pool||void 0===this._id){e0(r)&&r._detach(),this._map.delete(e),this.invalidate();return}e0(r)?(r._detach(),t=r._toOps(this._id,e)):t=[{type:3,data:{[e]:r},id:this._id}],this._map.delete(e),this.invalidate();let n=new Map;n.set(this._id,{node:this,type:"LiveObject",updates:{[e]:{type:"delete"}}}),this._pool.dispatch([{type:6,key:e,id:this._id,opId:this._pool.generateOpId()}],t,n)}update(e){if(this._pool?.assertStorageIsWritable(),void 0===this._pool||void 0===this._id){for(let t in e){let r=e[t];if(void 0===r)continue;let n=this._map.get(t);e0(n)&&n._detach(),e0(r)&&r._setParentLink(this,t),this._map.set(t,r),this.invalidate()}return}let t=[],r=[],n=this._pool.generateOpId(),o={},i={id:this._id,type:3,data:{}},a={};for(let s in e){let u=e[s];if(void 0===u)continue;let l=this._map.get(s);if(e0(l)?(r.push(...l._toOps(this._id,s)),l._detach()):void 0===l?r.push({type:6,id:this._id,key:s}):i.data[s]=l,e0(u)){u._setParentLink(this,s),u._attach(this._pool.generateId(),this._pool);let e=u._toOps(this._id,s,this._pool),r=e.find(e=>e.parentId===this._id);r&&this._propToLastUpdate.set(s,m(r.opId)),t.push(...e)}else o[s]=u,this._propToLastUpdate.set(s,n);this._map.set(s,u),this.invalidate(),a[s]={type:"update"}}0!==Object.keys(i.data).length&&r.unshift(i),0!==Object.keys(o).length&&t.unshift({opId:n,id:this._id,type:3,data:o});let s=new Map;s.set(this._id,{node:this,type:"LiveObject",updates:a}),this._pool.dispatch(t,r,s)}toImmutable(){return super.toImmutable()}toTreeNode(e){return super.toTreeNode(e)}_toTreeNode(e){let t=this._id??eN();return{type:"LiveObject",id:t,key:e,payload:Array.from(this._map.entries()).map(([e,r])=>e0(r)?r.toTreeNode(e):{type:"Json",id:`${t}:${e}`,key:e,payload:r})}}_toImmutable(){let e={};for(let[t,r]of this._map)e[t]=eQ(r)?r.toImmutable():r;return e}clone(){return new e(Object.fromEntries(Array.from(this._map).map(([e,t])=>[e,eQ(t)?t.clone():M(t)])))}};function eJ(e){return e3(eZ(e))}function eZ(e){switch(e.type){case 8:return e.data;case 4:return new eG(e.data);case 7:return new eY;case 2:return new ej([]);default:return h(e,"Unknown creation Op")}}function eX([e,t],r,n){switch(t.type){case 0:return eG._deserialize([e,t],r,n);case 1:return ej._deserialize([e,t],r,n);case 2:return eY._deserialize([e,t],r,n);case 3:return eP._deserialize([e,t],r,n);default:throw Error("Unexpected CRDT type")}}function eQ(e){return e1(e)||e instanceof eY||function(e){return e instanceof eG}(e)}function e0(e){return eQ(e)||e instanceof eP}function e1(e){return e instanceof ej}function e2(e){return e instanceof eP?e.data:e instanceof ej||e instanceof eY||e instanceof eG?e:h(e,"Unknown AbstractCrdt")}function e3(e){return e instanceof eG||e instanceof eY||e instanceof ej?e:new eP(e)}function e4(e,t){return void 0===e?t:"LiveObject"===e.type&&"LiveObject"===t.type?function(e,t){let r=e.updates;for(let[e,n]of F(t.updates))r[e]=n;return{...t,updates:r}}(e,t):"LiveMap"===e.type&&"LiveMap"===t.type?function(e,t){let r=e.updates;for(let[e,n]of F(t.updates))r[e]=n;return{...t,updates:r}}(e,t):"LiveList"===e.type&&"LiveList"===t.type?function(e,t){let r=e.updates;return{...t,updates:r.concat(t.updates)}}(e,t):t}async function e5(e,t,r,n){let o=r.length>0?r[r.length-1]:0,i=0;for(;;){i++;let a=e();try{return await a}catch(e){if(n?.(e))throw e;if(i>=t)throw Error(`Failed after ${t} attempts: ${String(e)}`)}let s=r[i-1]??o;await function(e){return new Promise(t=>setTimeout(t,e))}(s)}}function e7(e,t){let r=[];for(let n=0,o=e.length;n<o;n+=t)r.push(e.slice(n,n+t));return r}function e9(e){return`${e}_${eN()}`}function e6(){return e9("th")}function e8(){return e9("cm")}function te(e){return Array.isArray(e)}var tt=/^[a-zA-Z_][a-zA-Z0-9_]*$/;function tr(e){let t=[],r=Object.entries(e),n=[],o=[],i=[];return r.forEach(([e,t])=>{if(!tt.test(e))throw Error("Key must only contain letters, numbers, _");ti(t)?n.push([e,t]):ta(t)?o.push([e,t]):"object"!=typeof t||"startsWith"in t||i.push([e,t])}),t=[...tn(n),...to(o)],i.forEach(([e,r])=>{let n=Object.entries(r),o=[],i=[];n.forEach(([t,r])=>{if(tc(t))throw Error("Key cannot be empty");ti(r)?o.push([tu(e,t),r]):ta(r)&&i.push([tu(e,t),r])}),t=[...t,...tn(o),...to(i)]}),t.map(({key:e,operator:t,value:r})=>ts(e,t,tl(r))).join(" AND ")}var tn=e=>{let t=[];return e.forEach(([e,r])=>{t.push({key:e,operator:":",value:r})}),t},to=e=>{let t=[];return e.forEach(([e,r])=>{"startsWith"in r&&"string"==typeof r.startsWith&&t.push({key:e,operator:"^",value:r.startsWith})}),t},ti=e=>"string"==typeof e||"number"==typeof e||"boolean"==typeof e,ta=e=>"object"==typeof e&&null!==e&&"startsWith"in e,ts=(e,t,r)=>`${e}${t}${r}`,tu=(e,t)=>t?`${e}[${JSON.stringify(t)}]`:e,tl=e=>{if("string"==typeof e){if(tc(e))throw Error("Value cannot be empty");return JSON.stringify(e)}return e.toString()},tc=e=>!e||""===e.toString().trim(),td=((s=td||{})[s.UPDATE_PRESENCE=100]="UPDATE_PRESENCE",s[s.BROADCAST_EVENT=103]="BROADCAST_EVENT",s[s.FETCH_STORAGE=200]="FETCH_STORAGE",s[s.UPDATE_STORAGE=201]="UPDATE_STORAGE",s[s.FETCH_YDOC=300]="FETCH_YDOC",s[s.UPDATE_YDOC=301]="UPDATE_YDOC",s);function tf(e,t){let r=!1,n={...e};return Object.keys(t).forEach(e=>{let o=t[e];n[e]!==o&&(void 0===o?delete n[e]:n[e]=o,r=!0)}),r?n:e}var th=class{constructor(){this._ev=y()}get didInvalidate(){return this._ev.observable}invalidate(){void 0!==this._cache&&(this._cache=void 0,this._ev.notify())}get current(){return this._cache??(this._cache=this._toImmutable())}},tp=class extends th{constructor(){super(),this._connections=new Map,this._presences=new Map,this._users=new Map}connectionIds(){return this._connections.keys()}_toImmutable(){return N(Array.from(this._presences.keys()).map(e=>this.getUser(Number(e))))}clearOthers(){this._connections=new Map,this._presences=new Map,this._users=new Map,this.invalidate()}_getUser(e){let t=this._connections.get(e),r=this._presences.get(e);if(void 0!==t&&void 0!==r)return function(e,t){let{connectionId:r,id:n,info:o}=e,i=es(e.scopes);return eq(P({connectionId:r,id:n,info:o,canWrite:i,canComment:eu(e.scopes),isReadOnly:!i,presence:t}))}(t,r)}getUser(e){let t=this._users.get(e);if(t)return t;let r=this._getUser(e);if(r)return this._users.set(e,r),r}_invalidateUser(e){this._users.has(e)&&this._users.delete(e),this.invalidate()}setConnection(e,t,r,n){this._connections.set(e,eq({connectionId:e,id:t,info:r,scopes:n})),this._presences.has(e)&&this._invalidateUser(e)}removeConnection(e){this._connections.delete(e),this._presences.delete(e),this._invalidateUser(e)}setOther(e,t){this._presences.set(e,eq(P(t))),this._connections.has(e)&&this._invalidateUser(e)}patchOther(e,t){let r=this._presences.get(e);if(void 0===r)return;let n=tf(r,t);r!==n&&(this._presences.set(e,eq(n)),this._invalidateUser(e))}},tm=class extends th{constructor(e){super(),this._data=eq(P(e))}_toImmutable(){return this._data}patch(e){let t=this._data,r=tf(t,e);t!==r&&(this._data=eq(r),this.invalidate())}},tv=class extends th{constructor(e){super(),this._value=eq(e)}_toImmutable(){return this._value}set(e){this._value=eq(e),this.invalidate()}},tg=class extends th{constructor(...e){super();let t=e.pop();this._refs=e,this._refs.forEach(e=>{e.didInvalidate.subscribe(()=>this.invalidate())}),this._transform=t}_toImmutable(){return this._transform(...this._refs.map(e=>e.current))}};function ty(e,t){return{type:"User",id:`${t.connectionId}`,key:e,payload:{connectionId:t.connectionId,id:t.id,info:t.info,presence:t.presence,isReadOnly:!t.canWrite}}}var tb=[2e3,2e3,2e3,2e3,2e3,2e3,2e3,2e3,2e3,2e3],tE=class extends Error{constructor(e,t,r){super(e),this.message=e,this.status=t,this.details=r}};function tC(e){return"public"===e.type?e.publicApiKey:e.token.raw}function tD(e){var t;let r=tA("throttle",e.throttle??100,16,1e3),n=tA("lostConnectionTimeout",e.lostConnectionTimeout??5e3,200,3e4,1e3),o=function(e){if(void 0!==e)return tA("backgroundKeepAliveTimeout",e,15e3)}(e.backgroundKeepAliveTimeout),i="string"==typeof(t=e.baseUrl)&&t.startsWith("http")?t:"https://api.liveblocks.io",a=function(e){let t=function(e){let{publicApiKey:t,authEndpoint:r}=e;if(void 0!==r&&void 0!==t)throw Error("You cannot simultaneously use `publicApiKey` and `authEndpoint` options. Please pick one and leave the other option unspecified. For more information: https://liveblocks.io/docs/api-reference/liveblocks-client#createClient");if("string"==typeof t){if(t.startsWith("sk_"))throw Error("Invalid `publicApiKey` option. The value you passed is a secret key, which should not be used from the client. Please only ever pass a public key here. For more information: https://liveblocks.io/docs/api-reference/liveblocks-client#createClientPublicKey");if(!t.startsWith("pk_"))throw Error("Invalid key. Please use the public key format: pk_<public key>. For more information: https://liveblocks.io/docs/api-reference/liveblocks-client#createClientPublicKey");return{type:"public",publicApiKey:t}}if("string"==typeof r)return{type:"private",url:r};if("function"==typeof r)return{type:"custom",callback:r};if(void 0!==r)throw Error("The `authEndpoint` option must be a string or a function. For more information: https://liveblocks.io/docs/api-reference/liveblocks-client#createClientAuthEndpoint");throw Error("Invalid Liveblocks client options. Please provide either a `publicApiKey` or `authEndpoint` option. They cannot both be empty. For more information: https://liveblocks.io/docs/api-reference/liveblocks-client#createClient")}(e),r=new Set,n=[],o=[],i=new Map;function a(e,t){return"comments:read"===e?t.includes("comments:read")||t.includes("comments:write")||t.includes("room:read")||t.includes("room:write"):"room:read"===e&&(t.includes("room:read")||t.includes("room:write"))}async function s(n){let o=e.polyfills?.fetch??("undefined"==typeof window?void 0:window.fetch);if("private"===t.type){if(void 0===o)throw new Y("To use Liveblocks client in a non-DOM environment with a url as auth endpoint, you need to provide a fetch polyfill.");let e=el((await ec(o,t.url,{room:n.roomId})).token);if(r.has(e.raw))throw new Y("The same Liveblocks auth token was issued from the backend before. Caching Liveblocks tokens is not supported.");return e}if("custom"===t.type){let e=await t.callback(n.roomId);if(e&&"object"==typeof e){if("string"==typeof e.token)return el(e.token);if("string"==typeof e.error){let t=`Authentication failed: ${"reason"in e&&"string"==typeof e.reason?e.reason:"Forbidden"}`;if("forbidden"===e.error)throw new Y(t);throw Error(t)}}throw Error('Your authentication callback function should return a token, but it did not. Hint: the return value should look like: { token: "..." }')}throw Error("Unexpected authentication type. Must be private or custom.")}return{reset:function(){r.clear(),n.length=0,o.length=0,i.clear()},getAuthValue:async function(e){let u;if("public"===t.type)return{type:"public",publicApiKey:t.publicApiKey};let l=function(e){let t=Math.ceil(Date.now()/1e3);for(let r=n.length-1;r>=0;r--){let i=n[r];if(o[r]<=t){n.splice(r,1),o.splice(r,1);continue}if("id"===i.parsed.k)return i;if("acc"===i.parsed.k){if(!e.roomId&&0===Object.entries(i.parsed.perms).length)return i;for(let[t,r]of Object.entries(i.parsed.perms))if(e.roomId){if(t.includes("*")&&e.roomId.startsWith(t.replace("*",""))||e.roomId===t&&a(e.requestedScope,r))return i}else if(t.includes("*")&&a(e.requestedScope,r))return i}}}(e);if(void 0!==l)return{type:"secret",token:l};e.roomId?void 0===(u=i.get(e.roomId))&&(u=s(e),i.set(e.roomId,u)):void 0===(u=i.get("liveblocks-user-token"))&&(u=s(e),i.set("liveblocks-user-token",u));try{let e=await u,t=Math.floor(Date.now()/1e3)+(e.parsed.exp-e.parsed.iat)-30;return r.add(e.raw),"sec-legacy"!==e.parsed.k&&(n.push(e),o.push(t)),{type:"secret",token:e}}finally{e.roomId?i.delete(e.roomId):i.delete("liveblocks-user-token")}}}}(e),s=new Map;function u(e){let t=()=>{if(e.unsubs.delete(t)){if(0===e.unsubs.size){var r;(r=e.room).id,s.delete(r.id),r.destroy()}}else D("This leave function was already called. Calling it more than once has no effect.")};return e.unsubs.add(t),{room:e.room,leave:t}}let l=ev(null),{getInboxNotifications:d,getInboxNotificationsSince:f,getUnreadInboxNotificationsCount:p,markAllInboxNotificationsAsRead:v,markInboxNotificationAsRead:b,deleteAllInboxNotifications:E,deleteInboxNotification:C,getThreads:w,getThreadsSince:A}=function({baseUrl:e,authManager:t,currentUserIdStore:r,fetcher:n}){async function o(o,i,a){let s;o.startsWith("/v2/c/")||k("Expected a /v2/c/* endpoint");let u=await t.getAuthValue({requestedScope:"comments:read"});if("secret"===u.type&&"acc"===u.token.parsed.k){let e=u.token.parsed.uid;r.set(()=>e)}let l=eD(e,o,a),d=await n(l.toString(),{...i,headers:{...i?.headers,Authorization:`Bearer ${tC(u)}`,"X-LB-Client":c||"dev"}});if(!d.ok&&d.status>=400&&d.status<600){let e;try{let t=await d.json();e=new tw(t.message,d.status,t)}catch{e=new tw(d.statusText,d.status)}throw e}try{s=await d.json()}catch{s={}}return s}async function i(){let e=await o(ew`/v2/c/inbox-notifications`,void 0,{});return{threads:e.threads.map(ey),inboxNotifications:e.inboxNotifications.map(eb),requestedAt:new Date(e.meta.requestedAt)}}async function a(e){let t=await o(ew`/v2/c/inbox-notifications`,void 0,{since:e.since.toISOString()});return{threads:{updated:t.threads.map(ey),deleted:t.deletedThreads.map(eE)},inboxNotifications:{updated:t.inboxNotifications.map(eb),deleted:t.deletedInboxNotifications.map(eC)},requestedAt:new Date(t.meta.requestedAt)}}async function s(){let{count:e}=await o(ew`/v2/c/inbox-notifications/count`);return e}async function u(){await o(ew`/v2/c/inbox-notifications/read`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({inboxNotificationIds:"all"})})}async function l(e){await o(ew`/v2/c/inbox-notifications/read`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({inboxNotificationIds:e})})}let d=new ep(async e=>{let t=e.flat();return await l(t),t},{delay:50});return{getInboxNotifications:i,getInboxNotificationsSince:a,getUnreadInboxNotificationsCount:s,markAllInboxNotificationsAsRead:u,markInboxNotificationAsRead:async function(e){await d.get(e)},deleteAllInboxNotifications:async function(){await o(ew`/v2/c/inbox-notifications`,{method:"DELETE"})},deleteInboxNotification:async function(e){await o(ew`/v2/c/inbox-notifications/${e}`,{method:"DELETE"})},getThreads:async function(e){let t;e?.query&&(t=tr(e.query));let r=await o(ew`/v2/c/threads`,void 0,{query:t});return{threads:r.threads.map(ey),inboxNotifications:r.inboxNotifications.map(eb),requestedAt:new Date(r.meta.requestedAt)}},getThreadsSince:async function(e){let t;e?.query&&(t=tr(e.query));let r=await o(ew`/v2/c/threads`,void 0,{since:e.since.toISOString(),query:t});return{threads:{updated:r.threads.map(ey),deleted:r.deletedThreads.map(eE)},inboxNotifications:{updated:r.inboxNotifications.map(eb),deleted:r.deletedInboxNotifications.map(eC)},requestedAt:new Date(r.meta.requestedAt)}}}}({baseUrl:i,fetcher:e.polyfills?.fetch||fetch,authManager:a,currentUserIdStore:l}),x=e.resolveUsers,_=tx(()=>!x,"Set the resolveUsers option in createClient to specify user info."),O=em(new ep(async e=>{let t=e.flat(),r=await x?.({userIds:t});return _(),r??t.map(()=>void 0)},{delay:50})),T=e.resolveRoomsInfo,S=tx(()=>!T,"Set the resolveRoomsInfo option in createClient to specify room info."),F=em(new ep(async e=>{let t=e.flat(),r=await T?.({roomIds:t});return S(),r??t.map(()=>void 0)},{delay:50}));return Object.defineProperty({enterRoom:function(t,...l){var d;let f=s.get(t);if(void 0!==f)return u(f);let p=l[0]??{},v=function(e,t){let r,n,o;let i=e.initialPresence,a=e.initialStorage,[s,u]=function(){let e="undefined"!=typeof document?document:void 0,t={current:null};function r(){e?.visibilityState==="hidden"?t.current=t.current??Date.now():t.current=null}return e?.addEventListener("visibilitychange",r),[t,()=>{e?.removeEventListener("visibilitychange",r)}]}(),l={...t.delegates,canZombie:()=>void 0!==t.backgroundKeepAliveTimeout&&null!==s.current&&Date.now()>s.current+t.backgroundKeepAliveTimeout&&"synchronizing"!==ec()},d=new ea(l,t.enableDebugLogging),f={buffer:{flushTimerID:void 0,lastFlushedAt:0,presenceUpdates:{type:"full",data:i},messages:[],storageOperations:[]},staticSessionInfo:new tv(null),dynamicSessionInfo:new tv(null),myPresence:new tm(i),others:new tp,initialStorage:a,idFactory:null,provider:void 0,onProviderUpdate:y(),clock:0,opClock:0,nodes:new Map,root:void 0,undoStack:[],redoStack:[],pausedHistory:null,activeBatch:null,unacknowledgedOps:new Map,opStackTraces:void 0},p=e=>e(),v=t.unstable_batchedUpdates??p,b=!1;d.events.onMessage.subscribe(function(e){if("string"!=typeof e.data)return;let t=function(e){let t=R(e);return void 0===t?null:te(t)?N(t.map(e=>J(e))):N([J(t)])}(e.data);if(null===t||0===t.length)return;let r={storageUpdates:new Map,others:[]};v(()=>{for(let e of t)switch(e.type){case 101:{let t=function(e){f.others.setConnection(e.actor,e.id,e.info,e.scopes),f.buffer.messages.push({type:100,data:f.myPresence.current,targetActor:e.actor}),Z();let t=f.others.getUser(e.actor);return t?{type:"enter",user:t}:void 0}(e);t&&r.others.push(t);break}case 100:{let t=function(e){if(void 0!==e.targetActor){let t=f.others.getUser(e.actor);f.others.setOther(e.actor,e.data);let r=f.others.getUser(e.actor);if(void 0===t&&void 0!==r)return{type:"enter",user:r}}else f.others.patchOther(e.actor,e.data);let t=f.others.getUser(e.actor);return t?{type:"update",updates:e.data,user:t}:void 0}(e);t&&r.others.push(t);break}case 103:{let t=f.others.current;C.customEvent.notify({connectionId:e.actor,user:e.actor<0?null:t.find(t=>t.connectionId===e.actor)??null,event:e.event});break}case 102:{let t=function(e){let t=f.others.getUser(e.actor);return t?(f.others.removeConnection(e.actor),{type:"leave",user:t}):null}(e);t&&r.others.push(t);break}case 300:C.ydoc.notify(e);break;case 104:r.others.push(function(e,t){var r;let n;for(let o of(f.dynamicSessionInfo.set({actor:e.actor,nonce:e.nonce,scopes:e.scopes}),f.idFactory=(r=e.actor,n=0,()=>`${r}:${n++}`),z(t),f.others.connectionIds()))void 0===e.users[o]&&f.others.removeConnection(o);for(let t in e.users){let r=e.users[t],n=Number(t);f.others.setConnection(n,r.id,r.info,r.scopes)}return{type:"reset"}}(e,p));break;case 200:et(e);break;case 201:for(let[t,n]of K(e.ops,!1).updates.storageUpdates)r.storageUpdates.set(t,e4(r.storageUpdates.get(t),n));break;case 299:B("Storage mutation rejection error",e.reason);break;case 400:case 407:case 401:case 408:case 405:case 406:case 402:case 403:case 404:C.comments.notify(e)}$(r,p)})}),d.events.statusDidChange.subscribe(function(e){let t=d.authValue;if(null!==t){let e=tC(t);if(e!==r){if(r=e,"secret"===t.type){let e=t.token.parsed;f.staticSessionInfo.set({userId:"sec-legacy"===e.k?e.id:e.uid,userInfo:"sec-legacy"===e.k?e.info:e.ui})}else f.staticSessionInfo.set({userId:void 0,userInfo:void 0})}}v(()=>{C.status.notify(e),z(p)})}),d.events.statusDidChange.subscribe(function(e){"reconnecting"===e?n=setTimeout(()=>{v(()=>{C.lostConnection.notify("lost"),b=!0,f.others.clearOthers(),$({others:[{type:"reset"}]},p)})},t.lostConnectionTimeout):(clearTimeout(n),b&&("disconnected"===e?v(()=>{C.lostConnection.notify("failed")}):v(()=>{C.lostConnection.notify("restored")}),b=!1))}),d.events.didConnect.subscribe(function(){f.buffer.presenceUpdates={type:"full",data:{...f.myPresence.current}},null!==Q&&en({flush:!1}),Z()}),d.events.didDisconnect.subscribe(function(){clearTimeout(f.buffer.flushTimerID)}),d.events.onLiveblocksError.subscribe(e=>{v(()=>{C.error.notify(e)})});let E={roomId:t.roomId,getNode:e=>f.nodes.get(e),addNode:(e,t)=>void f.nodes.set(e,t),deleteNode:e=>void f.nodes.delete(e),generateId:()=>`${V()}:${f.clock++}`,generateOpId:()=>`${V()}:${f.opClock++}`,dispatch(e,t,r){let n=f.activeBatch;if(n){for(let t of e)n.ops.push(t);for(let[e,t]of r)n.updates.storageUpdates.set(e,e4(n.updates.storageUpdates.get(e),t));n.reverseOps.unshift(...t)}else v(()=>{H(t,p),f.redoStack.length=0,X(e),$({storageUpdates:r},p)})},assertStorageIsWritable:()=>{let e=f.dynamicSessionInfo.current?.scopes;if(void 0!==e&&!es(e))throw Error("Cannot write to storage with a read only user, please ensure the user has write permissions")}},C={status:y(),lostConnection:y(),customEvent:y(),self:y(),myPresence:y(),others:y(),error:y(),storageBatch:y(),history:y(),storageDidLoad:y(),storageStatus:y(),ydoc:y(),comments:y()};async function w(e,r,n,o){e.startsWith("/v2/c/rooms/")||k("Expected a /v2/c/rooms/* endpoint");let i=eD(t.baseUrl,e,o),a=t.polyfills?.fetch||fetch;return await a(i,{...n,headers:{...n?.headers,Authorization:`Bearer ${tC(r)}`,"X-LB-Client":c||"dev"}})}async function A(e,t){return w(ew`/v2/c/rooms/${t}/storage`,e,{method:"GET",headers:{"Content-Type":"application/json"}})}async function x(e,r){if(!d.authValue)throw Error("Not authorized");return w("/send-message"===e?ew`/v2/c/rooms/${t.roomId}/send-message`:ew`/v2/c/rooms/${t.roomId}/text-metadata`,d.authValue,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})}async function _(e,r){if(!d.authValue)throw Error("Not authorized");return w(ew`/v2/c/rooms/${t.roomId}/text-mentions`,d.authValue,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e,mentionId:r})})}async function O(e){if(!d.authValue)throw Error("Not authorized");return w(ew`/v2/c/rooms/${t.roomId}/text-mentions/${e}`,d.authValue,{method:"DELETE"})}async function T(e,r){let n=await l.authenticate();return w(ew`/v2/c/rooms/${t.roomId}/text-metadata`,n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:e,rootKey:r})})}async function S(){let e=await l.authenticate();return w(ew`/v2/c/rooms/${t.roomId}/versions`,e,{method:"GET"})}async function F(e){let r=await l.authenticate();return w(ew`/v2/c/rooms/${t.roomId}/y-version/${e}`,r,{method:"GET"})}async function I(){let e=await l.authenticate();return w(ew`/v2/c/rooms/${t.roomId}/version`,e,{method:"POST"})}function P(e){let r=JSON.stringify(e),n=f.dynamicSessionInfo.current?.nonce;if(t.unstable_fallbackToHTTP&&n&&new TextEncoder().encode(r).length>1047552){x("/send-message",{nonce:n,messages:e}).then(e=>{e.ok||403!==e.status||d.reconnect()}),D("Message was too large for websockets and sent over HTTP instead");return}d.send(r)}let L=new tg(f.staticSessionInfo,f.dynamicSessionInfo,f.myPresence,(e,t,r)=>{if(null===e||null===t)return null;{let n=es(t.scopes);return{connectionId:t.actor,id:e.userId,info:e.userInfo,presence:r,canWrite:n,canComment:eu(t.scopes)}}});function z(e){let t=L.current;null!==t&&t!==o&&(e(()=>{C.self.notify(t)}),o=t)}let W=new tg(L,e=>null!==e?ty("Me",e):null);function U(e,t){f.undoStack.length>=50&&f.undoStack.shift(),f.undoStack.push(e),G(t)}function H(e,t){null!==f.pausedHistory?f.pausedHistory.unshift(...e):U(e,t)}function $(e,t){let r=e.storageUpdates,n=e.others;t(()=>{if(void 0!==n&&n.length>0){let e=f.others.current;for(let t of n)C.others.notify({...t,others:e})}if(e.presence&&(z(p),C.myPresence.notify(f.myPresence.current)),void 0!==r&&r.size>0){let e=Array.from(r.values());C.storageBatch.notify(e)}eh()})}function V(){let e=f.dynamicSessionInfo.current;if(e)return e.actor;throw Error("Internal. Tried to get connection id but connection was never open")}function K(e,t){let r={reverse:[],storageUpdates:new Map,presence:!1},n=new Set,o=e.map(e=>"presence"===e.type||e.opId?e:{...e,opId:E.generateOpId()});for(let e of o)if("presence"===e.type){let t={type:"presence",data:{}};for(let r in e.data)t.data[r]=f.myPresence.current[r];if(f.myPresence.patch(e.data),null===f.buffer.presenceUpdates)f.buffer.presenceUpdates={type:"partial",data:e.data};else for(let t in e.data)f.buffer.presenceUpdates.data[t]=e.data[t];r.reverse.unshift(t),r.presence=!0}else{let o;if(t)o=0;else{let t=m(e.opId);o=f.unacknowledgedOps.delete(t)?2:1}let i=function(e,t){if(5===e.type&&"ACK"===e.id)return{modified:!1};switch(e.type){case 6:case 3:case 5:{let r=f.nodes.get(e.id);if(void 0===r)return{modified:!1};return r._apply(e,0===t)}case 1:{let r=f.nodes.get(e.id);if(void 0===r)return{modified:!1};if("HasParent"===r.parent.type&&e1(r.parent.node))return r.parent.node._setChildKey(ek(e.parentKey),r,t);return{modified:!1}}case 4:case 2:case 7:case 8:{if(void 0===e.parentId)return{modified:!1};let r=f.nodes.get(e.parentId);if(void 0===r)return{modified:!1};return r._attachChild(e,t)}}}(e,o);if(i.modified){let t=i.modified.node._id;t&&n.has(t)||(r.storageUpdates.set(m(i.modified.node._id),e4(r.storageUpdates.get(m(i.modified.node._id)),i.modified)),r.reverse.unshift(...i.reverse)),(2===e.type||7===e.type||4===e.type)&&n.add(m(e.id))}}return{ops:o,reverse:r.reverse,updates:{storageUpdates:r.storageUpdates,presence:r.presence}}}function q(){return f.undoStack.length>0}function Y(){return f.redoStack.length>0}function G(e){e(()=>{C.history.notify({canUndo:q(),canRedo:Y()})})}function J(e){var t;return null===(t=e)||"string"==typeof t||"number"==typeof t||"boolean"==typeof t||te(t)?null:e}function Z(){let e=f.buffer.storageOperations;if(e.length>0){for(let t of e)f.unacknowledgedOps.set(m(t.opId),t);eh()}if("connected"!==d.getStatus()){f.buffer.storageOperations=[];return}let r=Date.now(),n=r-f.buffer.lastFlushedAt;if(n>=t.throttleDelay){let e=function(){let e=[];for(let t of(f.buffer.presenceUpdates&&e.push("full"===f.buffer.presenceUpdates.type?{type:100,targetActor:-1,data:f.buffer.presenceUpdates.data}:{type:100,data:f.buffer.presenceUpdates.data}),f.buffer.messages))e.push(t);return f.buffer.storageOperations.length>0&&e.push({type:201,ops:f.buffer.storageOperations}),e}();if(0===e.length)return;P(e),f.buffer={flushTimerID:void 0,lastFlushedAt:r,messages:[],storageOperations:[],presenceUpdates:null}}else clearTimeout(f.buffer.flushTimerID),f.buffer.flushTimerID=setTimeout(Z,t.throttleDelay-n)}function X(e){let{storageOperations:t}=f.buffer;for(let r of e)t.push(r);Z()}let Q=null,ee=null;function et(e){let t=new Map(f.unacknowledgedOps);(function(e,t){if(0===e.items.length)throw Error("Internal error: cannot load storage without items");void 0!==f.root?function(e,t){if(void 0===f.root)return;let r=new Map;for(let[e,t]of f.nodes)r.set(e,t._serialize());$(K(function(e,t){let r=[];return e.forEach((e,n)=>{t.get(n)||r.push({type:5,id:n})}),t.forEach((t,n)=>{let o=e.get(n);if(o)0===t.type&&(0!==o.type||JSON.stringify(t.data)!==JSON.stringify(o.data))&&r.push({type:3,id:n,data:t.data}),t.parentKey!==o.parentKey&&r.push({type:1,id:n,parentKey:m(t.parentKey,"Parent key must not be missing")});else switch(t.type){case 3:r.push({type:8,id:n,parentId:t.parentId,parentKey:t.parentKey,data:t.data});break;case 1:r.push({type:2,id:n,parentId:t.parentId,parentKey:t.parentKey});break;case 0:if(void 0===t.parentId||void 0===t.parentKey)throw Error("Internal error. Cannot serialize storage root into an operation");r.push({type:4,id:n,parentId:t.parentId,parentKey:t.parentKey,data:t.data});break;case 2:r.push({type:7,id:n,parentId:t.parentId,parentKey:t.parentKey})}}),r}(r,new Map(e)),!1).updates,t)}(e.items,t):f.root=eG._fromItems(e.items,E);let r=L.current?.canWrite??!0,n=f.undoStack.length;for(let e in f.initialStorage)if(void 0===f.root.get(e)){if(r){var o;f.root.set(e,void 0===(o=f.initialStorage[e])?void 0:eQ(o)?o.clone():M(o))}else D(`Attempted to populate missing storage key '${e}', but current user has no write access`)}f.undoStack.length=n})(e,p),function(e,t){if(0===e.size)return;let r=[],n=K(Array.from(e.values()),!0);r.push({type:201,ops:n.ops}),$(n.updates,t),P(r)}(t,p),ee?.(),eh(),C.storageDidLoad.notify()}async function er(){if(!d.authValue)return;let e=await A(d.authValue,t.roomId);et({type:200,items:await e.json()})}function en(e){let r=f.buffer.messages;t.unstable_streamData?er():r.some(e=>200===e.type)||r.push({type:200}),e.flush&&Z()}function eo(){return null===Q&&(en({flush:!0}),Q=new Promise(e=>{ee=e}),eh()),Q}function ei(){let e=f.root;return void 0!==e?e:(eo(),null)}async function el(){return void 0!==f.root?Promise.resolve({root:f.root}):(await eo(),{root:m(f.root)})}function ec(){return void 0===f.root?null===Q?"not-loaded":"loading":0===f.unacknowledgedOps.size?"synchronized":"synchronizing"}let ef=ec();function eh(){let e=ec();ef!==e&&(ef=e,C.storageStatus.notify(e))}function ev(){return null!==L.current}async function eA(){for(;!ev();){let{promise:e,resolve:t}=g(),r=eO.self.subscribeOnce(t),n=eO.status.subscribeOnce(t);await e,r(),n()}}function ex(){return null!==ei()}async function eB(){for(;!ex();)await el()}let e_=new tg(f.others,e=>e.map((e,t)=>ty(`Other ${t}`,e))),eO={status:C.status.observable,lostConnection:C.lostConnection.observable,customEvent:C.customEvent.observable,others:C.others.observable,self:C.self.observable,myPresence:C.myPresence.observable,error:C.error.observable,storage:C.storageBatch.observable,storageBatch:C.storageBatch.observable,history:C.history.observable,storageDidLoad:C.storageDidLoad.observable,storageStatus:C.storageStatus.observable,ydoc:C.ydoc.observable,comments:C.comments.observable};async function eT(e,t,r){return w(e,await l.authenticate(),r,t)}async function eS(e,t,r){let n;let o=await eT(e,r,t);if(!o.ok&&o.status>=400&&o.status<600){let e;try{let t=await o.json();e=new tE(t.message,o.status,t)}catch{e=new tE(o.statusText,o.status)}throw e}try{n=await o.json()}catch{n={}}return n}async function eF(e){let r=await eT(ew`/v2/c/rooms/${t.roomId}/threads`,{since:e?.since?.toISOString()},{headers:{"Content-Type":"application/json"}});if(r.ok){let e=await r.json();return{threads:{updated:e.data.map(ey),deleted:e.deletedThreads.map(eE)},inboxNotifications:{updated:e.inboxNotifications.map(eb),deleted:e.deletedInboxNotifications.map(eC)},requestedAt:new Date(e.meta.requestedAt)}}if(404===r.status)return{threads:{updated:[],deleted:[]},inboxNotifications:{updated:[],deleted:[]},requestedAt:new Date};throw Error("There was an error while getting threads.")}async function eI(e){let r;e?.query&&(r=tr(e.query));let n=await eT(ew`/v2/c/rooms/${t.roomId}/threads`,{query:r},{headers:{"Content-Type":"application/json"}});if(n.ok){let e=await n.json();return{threads:e.data.map(ey),inboxNotifications:e.inboxNotifications.map(eb),requestedAt:new Date(e.meta.requestedAt)}}if(404===n.status)return{threads:[],inboxNotifications:[],deletedThreads:[],deletedInboxNotifications:[],requestedAt:new Date};throw Error("There was an error while getting threads.")}async function eR(e){let r=await eT(ew`/v2/c/rooms/${t.roomId}/thread-with-notification/${e}`);if(r.ok){let e=await r.json();return{thread:ey(e.thread),inboxNotification:e.inboxNotification?eb(e.inboxNotification):void 0}}if(404===r.status)return{thread:void 0,inboxNotification:void 0};throw Error(`There was an error while getting thread ${e}.`)}async function eM({metadata:e,body:r,commentId:n=e8(),threadId:o=e6(),attachmentIds:i}){return ey(await eS(ew`/v2/c/rooms/${t.roomId}/threads`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:o,comment:{id:n,body:r,attachmentIds:i},metadata:e})}))}async function eN(e){await eS(ew`/v2/c/rooms/${t.roomId}/threads/${e}`,{method:"DELETE"})}async function eP({metadata:e,threadId:r}){return await eS(ew`/v2/c/rooms/${t.roomId}/threads/${r}/metadata`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}async function eL(e){await eS(ew`/v2/c/rooms/${t.roomId}/threads/${e}/mark-as-resolved`,{method:"POST"})}async function ej(e){await eS(ew`/v2/c/rooms/${t.roomId}/threads/${e}/mark-as-unresolved`,{method:"POST"})}async function ez({threadId:e,commentId:r=e8(),body:n,attachmentIds:o}){return eg(await eS(ew`/v2/c/rooms/${t.roomId}/threads/${e}/comments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:r,body:n,attachmentIds:o})}))}async function eW({threadId:e,commentId:r,body:n,attachmentIds:o}){return eg(await eS(ew`/v2/c/rooms/${t.roomId}/threads/${e}/comments/${r}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({body:n,attachmentIds:o})}))}async function eU({threadId:e,commentId:r}){await eS(ew`/v2/c/rooms/${t.roomId}/threads/${e}/comments/${r}`,{method:"DELETE"})}async function eH({threadId:e,commentId:r,emoji:n}){var o;return{...o=await eS(ew`/v2/c/rooms/${t.roomId}/threads/${e}/comments/${r}/reactions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({emoji:n})}),createdAt:new Date(o.createdAt)}}async function e$({threadId:e,commentId:r,emoji:n}){await eS(ew`/v2/c/rooms/${t.roomId}/threads/${e}/comments/${r}/reactions/${n}`,{method:"DELETE"})}async function eV(e,r={}){let n=r.signal,o=n?new DOMException(`Upload of attachment ${e.id} was aborted.`,"AbortError"):void 0;if(n?.aborted)throw o;let i=e=>{if(n?.aborted)throw o;if(e instanceof tE&&413===e.status)throw e;return!1};if(e.size<=5242880)return e5(()=>eS(ew`/v2/c/rooms/${t.roomId}/attachments/${e.id}/upload/${encodeURIComponent(e.name)}`,{method:"PUT",body:e.file,signal:n},{fileSize:e.size}),10,tb,i);{let r;let a=[],s=await e5(()=>eS(ew`/v2/c/rooms/${t.roomId}/attachments/${e.id}/multipart/${encodeURIComponent(e.name)}`,{method:"POST",signal:n},{fileSize:e.size}),10,tb,i);try{r=s.uploadId;let u=function(e){let t=[],r=0;for(;r<e.size;){let n=Math.min(r+5242880,e.size);t.push({partNumber:t.length+1,part:e.slice(r,n)}),r=n}return t}(e.file);if(n?.aborted)throw o;for(let r of e7(u,5)){let o=[];for(let{part:a,partNumber:u}of r)o.push(e5(()=>eS(ew`/v2/c/rooms/${t.roomId}/attachments/${e.id}/multipart/${s.uploadId}/${String(u)}`,{method:"PUT",body:a,signal:n}),10,tb,i));a.push(...await Promise.all(o))}if(n?.aborted)throw o;let l=a.sort((e,t)=>e.partNumber-t.partNumber);return eS(ew`/v2/c/rooms/${t.roomId}/attachments/${e.id}/multipart/${r}/complete`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({parts:l}),signal:n})}catch(n){if(r&&n?.name&&("AbortError"===n.name||"TimeoutError"===n.name))try{await eT(ew`/v2/c/rooms/${t.roomId}/attachments/${e.id}/multipart/${r}`,void 0,{method:"DELETE"})}catch(e){}throw n}}}async function eK(e){let{urls:r}=await eS(ew`/v2/c/rooms/${t.roomId}/attachments/presigned-urls`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({attachmentIds:e})});return r}let eq=new ep(async e=>{let t=e.flat();return(await eK(t)).map(e=>e??Error("There was an error while getting this attachment's URL"))},{delay:50}),eY=em(eq);async function eJ(e,t){let r;let n=await l.authenticate(),o=await w(e,n,t);if(!o.ok&&o.status>=400&&o.status<600){let e;try{let t=await o.json();e=new tw(t.message,o.status,t)}catch{e=new tw(o.statusText,o.status)}throw e}try{r=await o.json()}catch{r={}}return r}async function eZ(e){await eJ(ew`/v2/c/rooms/${t.roomId}/inbox-notifications/read`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({inboxNotificationIds:e})})}let eX=new ep(async e=>{let t=e.flat();return await eZ(t),t},{delay:50});async function e2(e){await eX.get(e)}return Object.defineProperty({[ed]:{get presenceBuffer(){return M(f.buffer.presenceUpdates?.data??null)},get undoStack(){return M(f.undoStack)},get nodeCount(){return f.nodes.size},getProvider:()=>f.provider,setProvider(e){f.provider=e,f.onProviderUpdate.notify()},onProviderUpdate:f.onProviderUpdate.observable,reportTextEditor:T,createTextMention:_,deleteTextMention:O,listTextVersions:S,getTextVersion:F,createTextVersion:I,getSelf_forDevTools:()=>W.current,getOthers_forDevTools:()=>e_.current,simulate:{explicitClose:e=>d._privateSendMachineEvent({type:"EXPLICIT_SOCKET_CLOSE",event:e}),rawSend:e=>d.send(e)},attachmentUrlsStore:eY},id:t.roomId,subscribe:function(e,t,r){if("string"==typeof e&&("my-presence"===e||"others"===e||"event"===e||"error"===e||"history"===e||"status"===e||"storage-status"===e||"lost-connection"===e||"connection"===e||"comments"===e)){if("function"!=typeof t)throw Error("Second argument must be a callback function");switch(e){case"event":return eO.customEvent.subscribe(t);case"my-presence":return eO.myPresence.subscribe(t);case"others":return eO.others.subscribe(e=>{let{others:r,...n}=e;return t(r,n)});case"error":return eO.error.subscribe(t);case"status":return eO.status.subscribe(t);case"lost-connection":return eO.lostConnection.subscribe(t);case"history":return eO.history.subscribe(t);case"storage-status":return eO.storageStatus.subscribe(t);case"comments":return eO.comments.subscribe(t);default:return h(e,`"${String(e)}" is not a valid event name`)}}if(void 0===t||"function"==typeof e){if("function"==typeof e)return eO.storageBatch.subscribe(e);throw Error("Please specify a listener callback")}if(e0(e))return r?.isDeep?eO.storageBatch.subscribe(r=>{let n=r.filter(t=>(function e(t,r){return t===r||"HasParent"===t.parent.type&&e(t.parent.node,r)})(t.node,e));n.length>0&&t(n)}):eO.storageBatch.subscribe(r=>{for(let n of r)n.node._id===e._id&&t(n.node)});throw Error(`${String(e)} is not a value that can be subscribed to.`)},connect:()=>d.connect(),reconnect:()=>d.reconnect(),disconnect:()=>d.disconnect(),destroy:()=>{u(),d.destroy()},updatePresence:function(e,t){let r={};for(let t in null===f.buffer.presenceUpdates&&(f.buffer.presenceUpdates={type:"partial",data:{}}),e){let n=e[t];void 0!==n&&(f.buffer.presenceUpdates.data[t]=n,r[t]=f.myPresence.current[t])}f.myPresence.patch(e),f.activeBatch?(t?.addToHistory&&f.activeBatch.reverseOps.unshift({type:"presence",data:r}),f.activeBatch.updates.presence=!0):(Z(),v(()=>{t?.addToHistory&&H([{type:"presence",data:r}],p),$({presence:!0},p)}))},updateYDoc:function(e,t){let r={type:301,update:e,guid:t};f.buffer.messages.push(r),C.ydoc.notify(r),Z()},broadcastEvent:function(e,t={shouldQueueEventIfNotReady:!1}){("connected"===d.getStatus()||t.shouldQueueEventIfNotReady)&&(f.buffer.messages.push({type:103,event:e}),Z())},batch:function(e){let t;return f.activeBatch?e():(v(()=>{f.activeBatch={ops:[],updates:{storageUpdates:new Map,presence:!1,others:[]},reverseOps:[]};try{t=e()}finally{let e=f.activeBatch;f.activeBatch=null,e.reverseOps.length>0&&H(e.reverseOps,p),e.ops.length>0&&(f.redoStack.length=0),e.ops.length>0&&X(e.ops),$(e.updates,p),Z()}}),t)},history:{undo:function(){if(f.activeBatch)throw Error("undo is not allowed during a batch");let e=f.undoStack.pop();if(void 0===e)return;f.pausedHistory=null;let t=K(e,!0);for(let e of(v(()=>{$(t.updates,p),f.redoStack.push(t.reverse),G(p)}),t.ops))"presence"!==e.type&&f.buffer.storageOperations.push(e);Z()},redo:function(){if(f.activeBatch)throw Error("redo is not allowed during a batch");let e=f.redoStack.pop();if(void 0===e)return;f.pausedHistory=null;let t=K(e,!0);for(let e of(v(()=>{$(t.updates,p),f.undoStack.push(t.reverse),G(p)}),t.ops))"presence"!==e.type&&f.buffer.storageOperations.push(e);Z()},canUndo:q,canRedo:Y,clear:function(){f.undoStack.length=0,f.redoStack.length=0},pause:function(){null===f.pausedHistory&&(f.pausedHistory=[])},resume:function(){let e=f.pausedHistory;f.pausedHistory=null,null!==e&&e.length>0&&U(e,v)}},fetchYDoc:function(e,t){f.buffer.messages.find(r=>300===r.type&&r.vector===e&&r.guid===t)||f.buffer.messages.push({type:300,vector:e,guid:t}),Z()},getStorage:el,getStorageSnapshot:ei,getStorageStatus:ec,isPresenceReady:ev,isStorageReady:ex,waitUntilPresenceReady:j(eA),waitUntilStorageReady:j(eB),events:eO,getStatus:()=>d.getStatus(),getSelf:()=>L.current,getPresence:()=>f.myPresence.current,getOthers:()=>f.others.current,getThreads:eI,getThreadsSince:eF,getThread:eR,createThread:eM,deleteThread:eN,editThreadMetadata:eP,markThreadAsResolved:eL,markThreadAsUnresolved:ej,createComment:ez,editComment:eW,deleteComment:eU,addReaction:eH,removeReaction:e$,prepareAttachment:function(e){return{type:"localAttachment",status:"idle",id:e9("at"),name:e.name,size:e.size,mimeType:e.type,file:e}},uploadAttachment:eV,getAttachmentUrl:function(e){return eq.get(e)},getNotificationSettings:function(){return eJ(ew`/v2/c/rooms/${t.roomId}/notification-settings`)},updateNotificationSettings:function(e){return eJ(ew`/v2/c/rooms/${t.roomId}/notification-settings`,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}})},markInboxNotificationAsRead:e2},ed,{enumerable:!1})}({initialPresence:("function"==typeof p.initialPresence?p.initialPresence(t):p.initialPresence)??{},initialStorage:("function"==typeof p.initialStorage?p.initialStorage(t):p.initialStorage)??{}},{roomId:t,throttleDelay:r,lostConnectionTimeout:n,backgroundKeepAliveTimeout:o,polyfills:e.polyfills,delegates:e.mockedDelegates??{createSocket:(d=e.polyfills?.WebSocket,e=>{let r=d??("undefined"==typeof WebSocket?void 0:WebSocket);if(void 0===r)throw new Y("To use Liveblocks client in a non-DOM environment, you need to provide a WebSocket polyfill.");let n=new URL(i);if(n.protocol="http:"===n.protocol?"ws":"wss",n.pathname="/v7",n.searchParams.set("roomId",t),"secret"===e.type)n.searchParams.set("tok",e.token.raw);else{if("public"!==e.type)return h(e,"Unhandled case");n.searchParams.set("pubkey",e.publicApiKey)}return n.searchParams.set("version",c||"dev"),new r(n.toString())}),authenticate:async()=>a.getAuthValue({requestedScope:"room:read",roomId:t})},enableDebugLogging:e.enableDebugLogging,unstable_batchedUpdates:p?.unstable_batchedUpdates,baseUrl:i,unstable_fallbackToHTTP:!!e.unstable_fallbackToHTTP,unstable_streamData:!!e.unstable_streamData}),b={room:v,unsubs:new Set};if(s.set(t,b),p.autoConnect??!0){if("undefined"==typeof atob){if(e.polyfills?.atob===void 0)throw Error("You need to polyfill atob to use the client in your environment. Please follow the instructions at https://liveblocks.io/docs/errors/liveblocks-client/atob-polyfill");global.atob=e.polyfills.atob}v.connect()}return u(b)},getRoom:function(e){return s.get(e)?.room||null},logout:function(){for(let{room:t}of(a.reset(),s.values())){var e;"initial"===(e=t.getStatus())||"disconnected"===e||t.reconnect()}},getInboxNotifications:d,getInboxNotificationsSince:f,getUnreadInboxNotificationsCount:p,markAllInboxNotificationsAsRead:v,markInboxNotificationAsRead:b,deleteAllInboxNotifications:E,deleteInboxNotification:C,getThreads:w,[ed]:{currentUserIdStore:l,resolveMentionSuggestions:e.resolveMentionSuggestions,usersStore:O,roomsInfoStore:F,getRoomIds:()=>Array.from(s.keys()),getThreads:w,getThreadsSince:A}},ed,{enumerable:!1})}var tw=class extends Error{constructor(e,t,r){super(e),this.message=e,this.status=t,this.details=r}};function tA(e,t,r,n,o){if("number"!=typeof t||t<r||void 0!==n&&t>n)throw Error(void 0!==n?`${e} should be between ${o??r} and ${n}.`:`${e} should be at least ${o??r}.`);return t}function tx(e,...t){return()=>{}}var tB={paragraph:function(e){return"type"in e&&"paragraph"===e.type},text:function(e){return!("type"in e)&&"text"in e&&"string"==typeof e.text},link:function(e){return"type"in e&&"link"===e.type},mention:function(e){return"type"in e&&"mention"===e.type}},t_={paragraph:"block",text:"inline",link:"inline",mention:"inline"};function tO(e){let t=new Set;return function(e,t,r){if(!e||!e?.content)return;let n="string"==typeof t?t:void 0,o=n?t_[n]:"all",i=n?tB[n]:()=>!0,a="function"==typeof t?t:r;for(let t of e.content)if(("all"===o||"block"===o)&&i(t)&&a?.(t),"all"===o||"inline"===o)for(let e of t.children)i(e)&&a?.(e)}(e,"mention",e=>t.add(e.id)),Array.from(t)}var tT={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},tk=RegExp(Object.keys(tT).map(e=>`\\${e}`).join("|"),"g"),tS=class{constructor(e,t){this._strings=e,this._values=t}toString(){return this._strings.reduce((e,t,r)=>{var n;return e+((n=m(this._values[r-1]))instanceof tS?n.toString():Array.isArray(n)?(n.length<=0?new tS([""],[]):new tS(["",...Array(n.length-1).fill(""),""],n)).toString():String(n).replace(tk,e=>tT[e]))+t})}},tF={_:"\\_","*":"\\*","#":"\\#","`":"\\`","~":"\\~","!":"\\!","|":"\\|","(":"\\(",")":"\\)","{":"\\{","}":"\\}","[":"\\[","]":"\\]"},tI=RegExp(Object.keys(tF).map(e=>`\\${e}`).join("|"),"g"),tR=class{constructor(e,t){this._strings=e,this._values=t}toString(){return this._strings.reduce((e,t,r)=>{var n;return e+((n=m(this._values[r-1]))instanceof tR?n.toString():Array.isArray(n)?(n.length<=0?new tR([""],[]):new tR(["",...Array(n.length-1).fill(""),""],n)).toString():String(n).replace(tI,e=>tF[e]))+t})}};function tM(e){let t={};for(let r in e){let n=e[r];void 0!==n&&(t[r]=function e(t){return t instanceof eG?tM(t.toObject()):t instanceof ej?t.toArray().map(e):t instanceof eY?function(t){let r={};for(let[n,o]of t.entries())r[n]=e(o);return r}(t):t instanceof eP?t.data:Array.isArray(t)?t.map(e):S(t)?tM(t):t}(n))}return t}function tN(e){if(Array.isArray(e))return new ej(e.map(tN));if(!S(e))return e;{let t={};for(let r in e){let n=e[r];void 0!==n&&(t[r]=tN(n))}return new eG(t)}}function tP(e){let t={state:"stopped",timeoutHandle:null,interval:null,lastScheduledAt:null,remainingInterval:null};function r(){"running"===t.state&&n(t.interval),e()}function n(e){t={state:"running",interval:"stopped"!==t.state?t.interval:e,lastScheduledAt:performance.now(),timeoutHandle:setTimeout(r,e),remainingInterval:null}}function o(e){"running"!==t.state&&n(e)}function i(){"stopped"!==t.state&&(t.timeoutHandle&&clearTimeout(t.timeoutHandle),t={state:"stopped",interval:null,lastScheduledAt:null,timeoutHandle:null,remainingInterval:null})}return{start:o,restart:function(e){i(),o(e)},pause:function(){"running"===t.state&&(clearTimeout(t.timeoutHandle),t={state:"paused",interval:t.interval,lastScheduledAt:t.lastScheduledAt,timeoutHandle:null,remainingInterval:t.interval-(performance.now()-t.lastScheduledAt)})},resume:function(){if("paused"===t.state){var e;e=t.remainingInterval,"paused"===t.state&&(t={state:"running",interval:t.interval,lastScheduledAt:t.lastScheduledAt,timeoutHandle:setTimeout(r,e),remainingInterval:null})}},stop:i}}function tL(e,t){if(Object.is(e,t))return!0;let r=Array.isArray(e),n=Array.isArray(t);return r||n?!!r&&!!n&&function(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!Object.is(e[r],t[r]))return!1;return!0}(e,t):function(e,t){if(!S(e)||!S(t))return!1;let r=Object.keys(e);return r.length===Object.keys(t).length&&r.every(r=>Object.prototype.hasOwnProperty.call(t,r)&&Object.is(e[r],t[r]))}(e,t)}!function(e,t,r){let n=Symbol.for(e),o=`${t||"dev"} (esm)`;d[n]?d[n]===o||f(`Multiple copies of Liveblocks are being loaded in your project. This will cause issues! See https://liveblocks.io/docs/errors/dupes 

Conflicts:
- ${e} ${d[n]} (already loaded)
- ${e} ${o} (trying to load this now)`):d[n]=o,t&&c&&t!==c&&f(`Cross-linked versions of Liveblocks found, which will cause issues! See https://liveblocks.io/docs/errors/cross-linked 

Conflicts:
- ${l} is at ${c}
- ${e} is at ${t}

Always upgrade all Liveblocks packages to the same version number.`)}(l,c,0)},93529:(e,t,r)=>{"use strict";let n;r.d(t,{sv:()=>Q,tI:()=>U,mm:()=>Z,F4:()=>$,av:()=>q});var o=r(44706),i=r(94274),a=r(28964),s=r(11831),u=r(95495),l=r(11183),c=r(15874);function d(e){return a.createElement(c.JO,{...e},a.createElement("path",{d:"m11.784 5.797-6.13 6.138a4 4 0 0 0-1.03 1.775L4 16l2.285-.624a4 4 0 0 0 1.776-1.032l6.145-6.152m-2.422-2.395 1.244-1.246c.608-.608 1.826-.81 2.53-.104.7.7.499 1.893-.122 2.515l-1.23 1.23m-2.422-2.395 2.422 2.395"}))}var f=r(67914);function h(e){return a.createElement(c.JO,{...e},a.createElement("path",{d:"M11 3.07A7 7 0 1 0 16.93 9"}),a.createElement("path",{d:"M7.5 11.5S8.25 13 10 13s2.5-1.5 2.5-1.5M8 8h0"}),a.createElement("path",{d:"M12 8h0"}),a.createElement("path",{d:"M13 5h4m-2-2v4"}),a.createElement("circle",{cx:"8",cy:"8",r:".25"}),a.createElement("circle",{cx:"12",cy:"8",r:".25"}))}var p=r(64761),m=r(45045),v=r(39185),g=r(94490),y=r(23176),b=r(78709),E=r(56714),C=r(88973),D=r(51276);let w=new WeakMap;function A(e){w.delete(e),n?.unobserve(e)}var x=r(94455);function B(e){return window.addEventListener("blur",e),window.addEventListener("focus",e),()=>{window.removeEventListener("blur",e),window.removeEventListener("focus",e)}}function _(){return document.hasFocus()}function O(){return!0}var T=r(6533),k=r(28706),S=r(82744),F=r(59811),I=r(74086),R=r(17019),M=r(69874),N=r(42917),P=r(11265),L=r(73198),j=r(20941),z=r(66206),W=r(71168);function U({userId:e,className:t,...r}){let n=(0,y.d)();return a.createElement(m.pf,{className:(0,E.A)("lb-comment-mention",t),"data-self":e===n?"":void 0,...r},b.$S,a.createElement(L.n,{userId:e}))}function H({href:e,children:t,className:r,...n}){return a.createElement(m.rU,{className:(0,E.A)("lb-comment-link",r),href:e,...n},t)}function $({href:e,children:t,className:r,...n}){return a.createElement("span",{className:(0,E.A)("lb-comment-link",r),...n},t)}let V=(0,a.forwardRef)(({reaction:e,overrides:t,className:r,...n},o)=>{let i=(0,p.QG)(t);return a.createElement(F.z,{className:(0,E.A)("lb-comment-reaction",r),variant:"outline","aria-label":i.COMMENT_REACTION_DESCRIPTION(e.emoji,e.users.length),...n,ref:o},a.createElement(R.d,{className:"lb-comment-reaction-emoji",emoji:e.emoji}),a.createElement("span",{className:"lb-comment-reaction-count"},e.users.length))}),K=(0,a.forwardRef)(({comment:e,reaction:t,overrides:r,disabled:n,...s},u)=>{let l=(0,o.Bc)(),c=(0,o.QU)(),d=(0,y.d)(),f=(0,a.useMemo)(()=>t.users.some(e=>e.id===d),[d,t]),h=(0,p.QG)(r),m=(0,a.useMemo)(()=>a.createElement("span",null,h.COMMENT_REACTION_LIST(a.createElement(N.a,{values:t.users.map(e=>a.createElement(L.n,{key:e.id,userId:e.id,replaceSelf:!0})),formatRemaining:h.LIST_REMAINING_USERS,truncate:5,locale:h.locale}),t.emoji,t.users.length)),[h,t]),v=(0,a.useCallback)(e=>{e.stopPropagation()},[]),g=(0,a.useCallback)(r=>{r?l({threadId:e.threadId,commentId:e.id,emoji:t.emoji}):c({threadId:e.threadId,commentId:e.id,emoji:t.emoji})},[l,e.threadId,e.id,t.emoji,c]);return a.createElement(P.u,{content:m,multiline:!0,className:"lb-comment-reaction-tooltip"},a.createElement(i.f,{asChild:!0,pressed:f,onPressedChange:g,onClick:v,disabled:n,ref:u},a.createElement(V,{"data-self":f?"":void 0,reaction:t,overrides:r,...s})))}),q=(0,a.forwardRef)(({reaction:e,overrides:t,...r},n)=>{let o=(0,y.d)(),i=(0,a.useMemo)(()=>e.users.some(e=>e.id===o),[o,e]);return a.createElement(V,{disableable:!1,"data-self":i?"":void 0,reaction:e,overrides:t,...r,ref:n})});function Y({attachment:e,url:t}){"application/pdf"===e.mimeType||e.mimeType.startsWith("image/")||e.mimeType.startsWith("video/")||e.mimeType.startsWith("audio/")?window.open(t,"_blank"):function(e,t){let r=document.createElement("a");r.href=e,r.download=t,r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r)}(t,e.name)}function G({attachment:e,onAttachmentClick:t,className:r,overrides:n,...i}){let{url:s}=(0,o.d3)(e.id),u=(0,a.useCallback)(r=>{if(!s)return;let n={attachment:e,url:s};t?.(n,r),r.isDefaultPrevented()||Y(n)},[e,t,s]);return a.createElement(k.Et,{className:(0,E.A)("lb-comment-attachment",r),...i,attachment:e,overrides:n,onClick:s?u:void 0})}function J({attachment:e,onAttachmentClick:t,className:r,overrides:n,...i}){let{url:s}=(0,o.d3)(e.id),u=(0,a.useCallback)(r=>{if(!s)return;let n={attachment:e,url:s};t?.(n,r),r.isDefaultPrevented()||Y(n)},[e,t,s]);return a.createElement(k.QC,{className:(0,E.A)("lb-comment-attachment",r),...i,attachment:e,overrides:n,onClick:s?u:void 0})}function Z({className:e,...t}){return a.createElement(k.QC,{className:(0,E.A)("lb-comment-attachment",e),...t})}function X({threadId:e,commentRef:t}){let r=(0,o.J6)();return function(e,t,r){let o=r?.enabled??!0,i=(0,D.d)(t);(0,a.useEffect)(()=>{let t=e.current;if(t){if(o){var r;r=e=>{e.isIntersecting&&i.current()},n||(n=new IntersectionObserver(e=>{for(let t of e){let e=w.get(t.target);e?.(t)}})),w.set(t,r),n.observe(t)}else A(t);return()=>{A(t)}}},[o])}(t,()=>{r(e)},{enabled:(0,x.useSyncExternalStore)(B,_,O)}),null}let Q=(0,a.forwardRef)(({comment:e,indentContent:t=!0,showDeleted:r,showActions:n="hover",showReactions:i=!0,showAttachments:c=!0,onAuthorClick:b,onMentionClick:D,onAttachmentClick:w,onCommentEdit:A,onCommentDelete:x,overrides:B,className:_,additionalActions:O,additionalActionsClassName:R,autoMarkReadThreadId:N,...$},V)=>{let q=!!(0,a.useContext)(o.BU),Y=(0,a.useRef)(null),Z=(0,C.v)(V,Y),Q=(0,y.d)(),ee=(0,o.X0)(),et=(0,o.us)(),er=(0,o.Bc)(),en=(0,o.QU)(),eo=(0,p.QG)(B),[ei,ea]=(0,a.useState)(!1),[es,eu]=(0,a.useState)(!1),[el,ec]=(0,a.useState)(!1),[ed,ef]=(0,a.useState)(!1),{mediaAttachments:eh,fileAttachments:ep}=(0,a.useMemo)(()=>(0,k.Ev)(e.attachments),[e.attachments]),em=(0,a.useCallback)(e=>{e.stopPropagation()},[]),ev=(0,a.useCallback)(()=>{ea(!0)},[]),eg=(0,a.useCallback)(e=>{e.stopPropagation(),ea(!1)},[]),ey=(0,a.useCallback)(({body:t,attachments:r},n)=>{A?.(e),n.preventDefault(),ea(!1),et({commentId:e.id,threadId:e.threadId,body:t,attachments:r})},[e,et,A]),eb=(0,a.useCallback)(()=>{x?.(e),ee({commentId:e.id,threadId:e.threadId})},[e,ee,x]),eE=(0,a.useCallback)(t=>{b?.(e.userId,t)},[e.userId,b]),eC=(0,a.useCallback)(t=>{let r=e.reactions.findIndex(e=>e.emoji===t);r>=0&&Q&&e.reactions[r].users.some(e=>e.id===Q)?en({threadId:e.threadId,commentId:e.id,emoji:t}):er({threadId:e.threadId,commentId:e.id,emoji:t})},[er,e.id,e.reactions,e.threadId,en,Q]);return((0,a.useEffect)(()=>{},[]),r||e.body)?a.createElement(j.pn,null,q&&N&&a.createElement(X,{commentRef:Y,threadId:N}),a.createElement("div",{id:e.id,className:(0,E.A)("lb-root lb-comment",t&&"lb-comment:indent-content","hover"===n&&"lb-comment:show-actions-hover",(el||ed)&&"lb-comment:action-open",_),"data-deleted":e.body?void 0:"","data-editing":ei?"":void 0,"data-target":es?"":void 0,dir:eo.dir,...$,ref:Z},a.createElement("div",{className:"lb-comment-header"},a.createElement("div",{className:"lb-comment-details"},a.createElement(S.q,{className:"lb-comment-avatar",userId:e.userId,onClick:eE}),a.createElement("span",{className:"lb-comment-details-labels"},a.createElement(L.n,{className:"lb-comment-author",userId:e.userId,onClick:eE}),a.createElement("span",{className:"lb-comment-date"},a.createElement(g.E,{locale:eo.locale,date:e.createdAt,className:"lb-date lb-comment-date-created"}),e.editedAt&&e.body&&a.createElement(a.Fragment,null," ",a.createElement("span",{className:"lb-comment-date-edited"},eo.COMMENT_EDITED))))),n&&!ei&&a.createElement("div",{className:(0,E.A)("lb-comment-actions",R)},O??null,i&&a.createElement(M.h,{onEmojiSelect:eC,onOpenChange:ef},a.createElement(P.u,{content:eo.COMMENT_ADD_REACTION},a.createElement(z.xo,{asChild:!0},a.createElement(F.z,{className:"lb-comment-action",onClick:em,"aria-label":eo.COMMENT_ADD_REACTION},a.createElement(h,{className:"lb-button-icon"}))))),e.userId===Q&&a.createElement(I.Lt,{open:el,onOpenChange:ec,align:"end",content:a.createElement(a.Fragment,null,a.createElement(I.hP,{onSelect:ev,onClick:em},a.createElement(d,{className:"lb-dropdown-item-icon"}),eo.COMMENT_EDIT),a.createElement(I.hP,{onSelect:eb,onClick:em},a.createElement(l.p,{className:"lb-dropdown-item-icon"}),eo.COMMENT_DELETE))},a.createElement(P.u,{content:eo.COMMENT_MORE},a.createElement(W.$F,{asChild:!0},a.createElement(F.z,{className:"lb-comment-action",disabled:!e.body,onClick:em,"aria-label":eo.COMMENT_MORE},a.createElement(f.w,{className:"lb-button-icon"}))))))),a.createElement("div",{className:"lb-comment-content"},ei?a.createElement(T.a,{className:"lb-comment-composer",onComposerSubmit:ey,defaultValue:e.body,defaultAttachments:e.attachments,autoFocus:!0,showAttribution:!1,showAttachments:c,actions:a.createElement(a.Fragment,null,a.createElement(P.u,{content:eo.COMMENT_EDIT_COMPOSER_CANCEL,"aria-label":eo.COMMENT_EDIT_COMPOSER_CANCEL},a.createElement(F.z,{className:"lb-composer-action",onClick:eg},a.createElement(u.a,{className:"lb-button-icon"}))),a.createElement(P.mK,{content:eo.COMMENT_EDIT_COMPOSER_SAVE,shortcut:a.createElement(P.vw,{name:"enter"})},a.createElement(v.k4,{asChild:!0},a.createElement(F.z,{variant:"primary",className:"lb-composer-action",onClick:em,"aria-label":eo.COMMENT_EDIT_COMPOSER_SAVE},a.createElement(s.n,{className:"lb-button-icon"}))))),overrides:{COMPOSER_PLACEHOLDER:eo.COMMENT_EDIT_COMPOSER_PLACEHOLDER}}):e.body?a.createElement(a.Fragment,null,a.createElement(m.uT,{className:"lb-comment-body",body:e.body,components:{Mention:({userId:e})=>a.createElement(U,{userId:e,onClick:t=>D?.(e,t)}),Link:H}}),c&&(eh.length>0||ep.length>0)?a.createElement("div",{className:"lb-comment-attachments"},eh.length>0?a.createElement("div",{className:"lb-attachments"},eh.map(e=>a.createElement(G,{key:e.id,attachment:e,overrides:B,onAttachmentClick:w}))):null,ep.length>0?a.createElement("div",{className:"lb-attachments"},ep.map(e=>a.createElement(J,{key:e.id,attachment:e,overrides:B,onAttachmentClick:w}))):null):null,i&&e.reactions.length>0&&a.createElement("div",{className:"lb-comment-reactions"},e.reactions.map(t=>a.createElement(K,{key:t.emoji,comment:e,reaction:t,overrides:B})),a.createElement(M.h,{onEmojiSelect:eC},a.createElement(P.u,{content:eo.COMMENT_ADD_REACTION},a.createElement(z.xo,{asChild:!0},a.createElement(F.z,{className:"lb-comment-reaction lb-comment-reaction-add",variant:"outline",onClick:em,"aria-label":eo.COMMENT_ADD_REACTION},a.createElement(h,{className:"lb-button-icon"}))))))):a.createElement("div",{className:"lb-comment-body"},a.createElement("p",{className:"lb-comment-deleted"},eo.COMMENT_DELETED))))):null})},6533:(e,t,r)=>{"use strict";r.d(t,{a:()=>R});var n=r(90193),o=r(44706),i=r(28964),a=r(15874);function s(e){return i.createElement(a.JO,{...e},i.createElement("path",{d:"m14.077 11.737-3.723 3.62c-1.55 1.507-4.128 1.507-5.678 0-1.543-1.5-1.543-4.02 0-5.52l5.731-5.573c1.034-1.006 2.754-1.007 3.789-.003 1.03 1 1.032 2.682.003 3.684l-5.744 5.572a1.377 1.377 0 0 1-1.893 0 1.283 1.283 0 0 1-.392-.92c0-.345.14-.676.392-.92L10.348 8"}))}function u(e){return i.createElement(a.JO,{...e},i.createElement("path",{d:"M10 17a7 7 0 1 0 0-14 7 7 0 0 0 0 14Z"}),i.createElement("path",{d:"M7.5 11.5S8.25 13 10 13s2.5-1.5 2.5-1.5M8 8h.007"}),i.createElement("path",{d:"M12 8h.007"}),i.createElement("circle",{cx:8,cy:8,r:.25}),i.createElement("circle",{cx:12,cy:8,r:.25}))}function l(e){return i.createElement(a.JO,{...e},i.createElement("path",{d:"M10 13a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"}),i.createElement("path",{d:"M13 7v3.7c0 1.105.855 2.1 1.9 2.1a2.12 2.12 0 0 0 2.1-2.1V10a7 7 0 1 0-2.8 5.6"}))}function c(e){return i.createElement(a.JO,{...e},i.createElement("path",{d:"m5 16 12-6L5 4l2 6-2 6ZM7 10h10"}))}var d=r(64761),f=r(39185),h=r(90331),p=r(22161),m=r(78709),v=r(56714),g=r(98175),y=r(28706);function b({className:e,...t}){return i.createElement("a",{href:"https://liveblocks.io",target:"_blank",rel:"noopener noreferrer",className:(0,v.A)("lb-composer-attribution",e),...t},i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 72","aria-label":"Made with Liveblocks"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M86 10h-8v50h8V10Zm16 14h-8v36h8V24Zm0-15h-8v9h8V9Zm13 15h-9l12 36h10l13-36h-9l-9 28-8-28Zm44-1c-11 0-18 8-18 19s7 19 18 19c8 0 15-4 17-13h-8c-1 4-5 6-9 6-6 0-9-3-9-10h27c0-10-6-21-18-21Zm0 7c5 0 9 3 9 8h-18c0-5 4-8 9-8Zm42-7c-4 0-8 2-11 6V10h-8v50h8v-5c3 4 7 6 11 6 11 0 16-9 16-19s-5-19-16-19Zm-2 32c-7 0-9-7-9-13s2-13 9-13 9 7 9 13-2 13-9 13Zm32-45h-8v50h8V10Zm24 51c11 0 18-8 18-19s-8-19-18-19c-11 0-19 8-19 19s7 19 19 19Zm0-6c-8 0-10-7-10-13s2-13 10-13c7 0 9 7 9 13s-2 13-9 13Zm39 6c8 0 15-4 17-12l-8-1c-2 4-4 6-9 6-7 0-9-6-9-12s2-12 9-12c5 0 8 3 8 7l9-1c-2-8-9-13-17-13-11 0-18 9-18 19 0 11 7 19 18 19Zm30-14 4-4 10 17h10l-15-23 15-13h-11l-13 13V10h-9v50h9V47Zm39 14c8 0 16-3 16-12 0-8-8-10-15-11-2-1-7-1-7-5 0-3 3-4 6-4 4 0 7 3 7 7l8-1c-1-9-8-12-15-12s-15 3-15 11 9 10 15 11c3 1 8 2 8 5 0 4-4 5-7 5-5 0-8-3-9-7l-8 1c1 8 9 12 16 12ZM41 27H0l12 12v17l29-29ZM20 60h40L48 48V32L20 60Z",fill:"currentColor"})))}var E=r(82744),C=r(59811),D=r(69874),w=r(11265),A=r(73198),x=r(20941),B=r(66206);function _({label:e,tooltipLabel:t,className:r,onClick:n,...o}){let{createMention:a}=(0,h.xc)(),s=(0,i.useCallback)(e=>{e.preventDefault()},[]),u=(0,i.useCallback)(e=>{n?.(e),e.isDefaultPrevented()||(e.stopPropagation(),a())},[a,n]);return i.createElement(w.u,{content:t??e},i.createElement(C.z,{className:(0,v.A)("lb-composer-editor-action",r),onMouseDown:s,onClick:u,"aria-label":e,...o},i.createElement(l,{className:"lb-button-icon"})))}function O({label:e,tooltipLabel:t,onPickerOpenChange:r,className:n,...o}){let{insertText:a}=(0,h.xc)(),s=(0,i.useCallback)(e=>{e.preventDefault()},[]),l=(0,i.useCallback)(e=>{e.stopPropagation()},[]);return i.createElement(D.h,{onEmojiSelect:a,onOpenChange:r},i.createElement(w.u,{content:t??e},i.createElement(B.xo,{asChild:!0},i.createElement(C.z,{className:(0,v.A)("lb-composer-editor-action",n),onMouseDown:s,onClick:l,"aria-label":e,...o},i.createElement(u,{className:"lb-button-icon"})))))}function T({label:e,tooltipLabel:t,className:r,...n}){let o=(0,i.useCallback)(e=>{e.preventDefault()},[]),a=(0,i.useCallback)(e=>{e.stopPropagation()},[]);return i.createElement(w.u,{content:t??e},i.createElement(f.m5,{asChild:!0},i.createElement(C.z,{className:(0,v.A)("lb-composer-editor-action",r),onMouseDown:o,onClick:a,"aria-label":e,...n},i.createElement(s,{className:"lb-button-icon"}))))}function k({attachment:e,className:t,overrides:r,...n}){let{removeAttachment:o}=(0,h.xc)(),a=(0,i.useCallback)(()=>{o(e.id)},[e.id,o]);return i.createElement(y.QC,{className:(0,v.A)("lb-composer-attachment",t),...n,attachment:e,onDeleteClick:a,preventFocusOnDelete:!0,overrides:r})}function S({overrides:e,className:t,...r}){let{attachments:n}=(0,h.xc)();return 0===n.length?null:i.createElement("div",{className:(0,v.A)("lb-composer-attachments",t),...r},i.createElement("div",{className:"lb-attachments"},n.map(t=>i.createElement(k,{key:t.id,attachment:t,overrides:e}))))}let F={Mention:function({userId:e}){return i.createElement(f.pf,{className:"lb-composer-mention"},m.$S,i.createElement(A.n,{userId:e}))},MentionSuggestions:function({userIds:e}){return e.length>0?i.createElement(f.Db,{className:"lb-root lb-portal lb-elevation lb-composer-suggestions lb-composer-mention-suggestions"},i.createElement(f.Yi,{className:"lb-composer-suggestions-list lb-composer-mention-suggestions-list"},e.map(e=>i.createElement(f.m$,{key:e,className:"lb-composer-suggestions-list-item lb-composer-mention-suggestion",value:e},i.createElement(E.q,{userId:e,className:"lb-composer-mention-suggestion-avatar"}),i.createElement(A.n,{userId:e,className:"lb-composer-mention-suggestion-user"}))))):null},Link:function({href:e,children:t}){return i.createElement(f.rU,{href:e,className:"lb-composer-link"},t)}};function I({showAttachments:e=!0,showAttribution:t,defaultValue:r,isCollapsed:n,overrides:o,actions:a,autoFocus:u,hasResolveMentionSuggestions:l,onEmojiPickerOpenChange:m,onEmptyChange:v,onEditorClick:y}){let{isEmpty:E}=(0,h.xc)(),{hasMaxAttachments:D}=(0,h.yr)(),A=(0,d.QG)(o),[x,B]=(0,p.KI)({disabled:D});(0,g.b)(()=>{v(E)},[E,v]);let k=(0,i.useCallback)(e=>{e.preventDefault()},[]),I=(0,i.useCallback)(e=>{e.stopPropagation()},[]);return i.createElement("div",{className:"lb-composer-editor-container",...B},i.createElement(f.ML,{className:"lb-composer-editor",onClick:y,placeholder:A.COMPOSER_PLACEHOLDER,defaultValue:r,autoFocus:u,components:F,dir:A.dir}),e&&i.createElement(S,{overrides:o}),(!n||x)&&i.createElement("div",{className:"lb-composer-footer"},i.createElement("div",{className:"lb-composer-editor-actions"},l&&i.createElement(_,{label:A.COMPOSER_INSERT_MENTION}),i.createElement(O,{label:A.COMPOSER_INSERT_EMOJI,onPickerOpenChange:m}),e&&i.createElement(T,{label:A.COMPOSER_ATTACH_FILES})),t&&i.createElement(b,null),i.createElement("div",{className:"lb-composer-actions"},a??i.createElement(i.Fragment,null,i.createElement(w.mK,{content:A.COMPOSER_SEND,shortcut:i.createElement(w.vw,{name:"enter"})},i.createElement(f.k4,{asChild:!0},i.createElement(C.z,{onMouseDown:k,onClick:I,className:"lb-composer-action",variant:"primary","aria-label":A.COMPOSER_SEND},i.createElement(c,null))))))),e&&x&&i.createElement("div",{className:"lb-composer-attachments-drop-area"},i.createElement("div",{className:"lb-composer-attachments-drop-area-label"},i.createElement(s,null),A.COMPOSER_ATTACH_FILES)))}let R=(0,i.forwardRef)(({threadId:e,commentId:t,metadata:r,defaultValue:a,defaultAttachments:s,onComposerSubmit:u,collapsed:l,defaultCollapsed:c,onCollapsedChange:h,overrides:p,actions:m,onBlur:g,className:y,onFocus:b,autoFocus:E,disabled:C,showAttachments:D=!0,showAttribution:w,...A},B)=>{let _=(0,o.m8)(),O=(0,o.LL)(),T=(0,o.bN)(),k=(0,o.us)(),S=void 0!==_[n.W_].resolveMentionSuggestions,F=(0,i.useRef)(!0),R=(0,i.useRef)(!1),M=(0,d.QG)(p),[N,P]=function(e,t,r){let[n,o]=(0,i.useState)(r),a=void 0!==e,s=(0,i.useRef)(a);return(0,i.useEffect)(()=>{s.current=a},[a]),[a?e:n,(0,i.useCallback)(e=>(a||o(e),t?.(e)),[a,t])]}((void 0!==l||void 0!==c)&&l,h,c),L=(0,i.useCallback)(e=>{F.current=e},[]),j=(0,i.useCallback)(e=>{R.current=e},[]),z=(0,i.useCallback)(e=>{b?.(e),!e.isDefaultPrevented()&&F.current&&P?.(!1)},[P,b]),W=(0,i.useCallback)(e=>{g?.(e),!e.isDefaultPrevented()&&(e.currentTarget.contains(e.relatedTarget??document.activeElement)||!F.current||R.current||P?.(!0))},[g,P]),U=(0,i.useCallback)(e=>{e.stopPropagation(),F.current&&P?.(!1)},[P]),H=(0,i.useCallback)((n,o)=>{u?.(n,o),o.isDefaultPrevented()||(t&&e?k({commentId:t,threadId:e,body:n.body,attachments:n.attachments}):e?T({threadId:e,body:n.body,attachments:n.attachments}):O({body:n.body,metadata:r??{},attachments:n.attachments}))},[t,T,O,k,r,u,e]);return i.createElement(x.pn,null,i.createElement(f.l0,{onComposerSubmit:H,className:(0,v.A)("lb-root lb-composer lb-composer-form",y),dir:M.dir,...A,ref:B,"data-collapsed":N?"":void 0,onFocus:z,onBlur:W,disabled:C,defaultAttachments:s,pasteFilesAsAttachments:D},i.createElement(I,{defaultValue:a,actions:m,overrides:p,isCollapsed:N,showAttachments:D,showAttribution:w,hasResolveMentionSuggestions:S,onEmptyChange:L,onEmojiPickerOpenChange:j,onEditorClick:U,autoFocus:E})))})},97836:(e,t,r)=>{"use strict";r.d(t,{L:()=>N});var n=r(90193),o=r(44706),i=r(69008),a=r(20941),s=r(28964);let u={Anchor:"a"},l=(0,s.createContext)(void 0);var c=r(11831),d=r(11183),f=r(67914),h=r(64761),p=r(94490),m=r(23176),v=r(56714);let g="https://localhost:9999",y=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/;var b=r(82744),E=r(59811),C=r(74086),D=r(45045),w=r(93529),A=r(73198);function x({comment:e,showHeader:t=!0,showAttachments:r=!0,showReactions:n=!0,overrides:o,className:i,...a}){let u=(0,h.QG)(o);return s.createElement("div",{className:(0,v.A)("lb-root lb-inbox-notification-comment lb-comment",i),...a},t&&s.createElement("div",{className:"lb-comment-header"},s.createElement(A.n,{className:"lb-comment-author",userId:e.userId})),s.createElement("div",{className:"lb-comment-content"},e.body?s.createElement(s.Fragment,null,s.createElement(D.uT,{className:"lb-comment-body",body:e.body,components:{Mention:w.tI,Link:w.F4}}),n&&e.reactions.length>0&&s.createElement("div",{className:"lb-comment-reactions"},e.reactions.map(e=>s.createElement(w.av,{key:e.emoji,reaction:e,overrides:o,disabled:!0}))),r&&e.attachments.length>0?s.createElement("div",{className:"lb-comment-attachments"},s.createElement("div",{className:"lb-attachments"},e.attachments.map(e=>s.createElement(w.mm,{key:e.id,attachment:e,overrides:o})))):null):s.createElement("div",{className:"lb-comment-body"},s.createElement("p",{className:"lb-comment-deleted"},u.COMMENT_DELETED))))}function B(e){return Array.from(new Set(e.map(e=>e.userId)))}var _=r(42917);function O({roomId:e,className:t,...r}){let{info:n,isLoading:i}=(0,o.xS)(e),a=(0,s.useMemo)(()=>n?.name??e,[n?.name,e]);return s.createElement("span",{className:(0,v.A)("lb-name lb-room",t),"data-loading":i?"":void 0,...r},i?null:a)}var T=r(11265),k=r(71168);let S=(0,s.forwardRef)(({inboxNotification:e,children:t,aside:r,title:n,date:m,unread:g,markAsReadOnClick:y,onClick:b,href:D,showActions:w,overrides:A,components:x,className:B,asChild:_,...O},S)=>{let F=(0,h.QG)(A),{Anchor:I}=function(e){let t=(0,s.useContext)(l);return(0,s.useMemo)(()=>({...u,...t,...e}),[t,e])}(x),R=_?i.g7:I,[M,N]=(0,s.useState)(!1),P=(0,o.WX)(),L=(0,o.gV)(),j=(0,s.useCallback)(t=>{b?.(t);let r=y??!!D;g&&r&&P(e.id)},[D,e.id,y,P,b,g]),z=(0,s.useCallback)(e=>{e.stopPropagation()},[]),W=(0,s.useCallback)(e=>{e.preventDefault(),e.stopPropagation()},[]),U=(0,s.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),N(e=>!e)},[]),H=(0,s.useCallback)(()=>{P(e.id)},[e.id,P]),$=(0,s.useCallback)(()=>{L(e.id)},[e.id,L]);return s.createElement(a.pn,null,s.createElement(R,{className:(0,v.A)("lb-root lb-inbox-notification","hover"===w&&"lb-inbox-notification:show-actions-hover",M&&"lb-inbox-notification:action-open",B),dir:F.dir,"data-unread":g?"":void 0,"data-kind":e.kind,onClick:j,href:D,...O,ref:S},r&&s.createElement("div",{className:"lb-inbox-notification-aside"},r),s.createElement("div",{className:"lb-inbox-notification-content"},s.createElement("div",{className:"lb-inbox-notification-header"},s.createElement("span",{className:"lb-inbox-notification-title"},n),s.createElement("div",{className:"lb-inbox-notification-details"},s.createElement("span",{className:"lb-inbox-notification-details-labels"},s.createElement(p.E,{locale:F.locale,date:m,className:"lb-date lb-inbox-notification-date"}),g&&s.createElement("span",{className:"lb-inbox-notification-unread-indicator",role:"presentation"}))),w&&s.createElement("div",{className:"lb-inbox-notification-actions"},s.createElement(C.Lt,{open:M,onOpenChange:N,align:"end",content:s.createElement(s.Fragment,null,g?s.createElement(C.hP,{onSelect:H,onClick:z},s.createElement(c.n,{className:"lb-dropdown-item-icon"}),F.INBOX_NOTIFICATION_MARK_AS_READ):null,s.createElement(C.hP,{onSelect:$,onClick:z},s.createElement(d.p,{className:"lb-dropdown-item-icon"}),F.INBOX_NOTIFICATION_DELETE))},s.createElement(T.u,{content:F.INBOX_NOTIFICATION_MORE},s.createElement(k.$F,{asChild:!0},s.createElement(E.z,{className:"lb-inbox-notification-action",onClick:U,onPointerDown:W,onPointerUp:W,"aria-label":F.INBOX_NOTIFICATION_MORE},s.createElement(f.w,{className:"lb-button-icon"}))))))),s.createElement("div",{className:"lb-inbox-notification-body"},t))))});function F({className:e,...t}){return s.createElement(b.q,{className:(0,v.A)("lb-inbox-notification-avatar",e),...t})}let I=(0,s.forwardRef)(({inboxNotification:e,href:t,showRoomName:r=!0,showReactions:i=!0,showAttachments:a=!0,showActions:u="hover",overrides:l,...c},d)=>{let f=(0,h.QG)(l),p=(0,o.k9)(e.id),v=(0,m.d)(),{info:b}=(0,o.xS)(e.roomId),{unread:E,date:C,aside:D,title:w,content:T,commentId:k}=(0,s.useMemo)(()=>{let t=function(e,t,r){let o=t.comments.filter(t=>!!t.body&&(e.readAt?t.createdAt>e.readAt&&t.createdAt<=e.notifiedAt:t.createdAt<=e.notifiedAt));if(0===o.length){let r=t.comments.filter(e=>e.body).slice(-3);return{type:"comments",unread:!1,comments:r,userIds:B(r),date:e.notifiedAt}}let i=function(e,t){for(let r=e.length-1;r>=0;r--){let o=e[r];if(o.userId!==t&&o.body&&(0,n.wn)(o.body).includes(t))return o}}(o,r);return i?{type:"mention",unread:!0,comments:[i],userIds:[i.userId],date:i.createdAt}:{type:"comments",unread:!0,comments:o.slice(-3),userIds:B(o),date:e.notifiedAt}}(e,p,v??"");switch(t.type){case"comments":{let e=[...t.userIds].reverse(),n=e[0],o=s.createElement(F,{userId:n}),u=f.INBOX_NOTIFICATION_THREAD_COMMENTS_LIST(s.createElement(_.a,{values:e.map(e=>s.createElement(A.n,{key:e,userId:e,replaceSelf:!0})),formatRemaining:f.LIST_REMAINING_USERS,truncate:2,locale:f.locale}),r?s.createElement(O,{roomId:p.roomId}):void 0,e.length),c=s.createElement("div",{className:"lb-inbox-notification-comments"},t.comments.map(e=>s.createElement(x,{key:e.id,comment:e,showHeader:t.comments.length>1,showAttachments:a,showReactions:i,overrides:l})));return{unread:t.unread,date:t.date,aside:o,title:u,content:c,threadId:p.id,commentId:t.comments[t.comments.length-1].id}}case"mention":{let e=t.userIds[0],n=t.comments[0],o=s.createElement(F,{userId:e}),u=f.INBOX_NOTIFICATION_THREAD_MENTION(s.createElement(A.n,{key:e,userId:e}),r?s.createElement(O,{roomId:p.roomId}):void 0),c=s.createElement("div",{className:"lb-inbox-notification-comments"},s.createElement(x,{key:n.id,comment:n,showHeader:!1,showAttachments:a,showReactions:i,overrides:l}));return{unread:t.unread,date:t.date,aside:o,title:u,content:c,threadId:p.id,commentId:n.id}}default:return(0,n.vE)(t,"Unexpected thread inbox notification type")}},[f,v,e,l,r,a,i,p]),I=(0,s.useMemo)(()=>{let e=t??b?.url;return e?function(e,t,r){let n=y.test(e),o=new URL(e,n?void 0:g);if(void 0!==t)for(let[e,r]of Object.entries(t))r&&o.searchParams.set(e,String(r));return o.hash||void 0===r||(o.hash=`#${r}`),n?o.href:o.href.replace(g,"")}(e,void 0,k):void 0},[k,t,b?.url]);return s.createElement(S,{inboxNotification:e,aside:D,title:w,date:C,unread:E,overrides:l,href:I,showActions:u,markAsReadOnClick:!1,...c,ref:d},T)}),R=(0,s.forwardRef)(({inboxNotification:e,showActions:t="hover",showRoomName:r=!0,overrides:n,...o},i)=>{let a=(0,h.QG)(n),u=(0,s.useMemo)(()=>!e.readAt||e.notifiedAt>e.readAt,[e.notifiedAt,e.readAt]);return s.createElement(S,{inboxNotification:e,aside:s.createElement(F,{userId:e.createdBy}),title:a.INBOX_NOTIFICATION_TEXT_MENTION(s.createElement(A.n,{key:e.createdBy,userId:e.createdBy}),r?s.createElement(O,{roomId:e.roomId}):void 0),date:e.notifiedAt,unread:u,overrides:n,showActions:t,...o,ref:i})}),M=(0,s.forwardRef)(({inboxNotification:e,showActions:t="hover",title:r,aside:n,children:o,overrides:i,...a},u)=>{let l=(0,s.useMemo)(()=>!e.readAt||e.notifiedAt>e.readAt,[e.notifiedAt,e.readAt]);return s.createElement(S,{inboxNotification:e,aside:n,title:r,date:e.notifiedAt,unread:l,overrides:i,showActions:t,...a,ref:u},o)}),N=Object.assign((0,s.forwardRef)(({inboxNotification:e,kinds:t,...r},n)=>{switch(e.kind){case"thread":{let o=t?.thread??I;return s.createElement(o,{inboxNotification:e,...r,ref:n})}case"textMention":{let o=t?.textMention??R;return s.createElement(o,{inboxNotification:e,...r,ref:n})}default:{let o=t?.[e.kind];if(!o)return null;return s.createElement(o,{inboxNotification:e,...r,ref:n})}}}),{Thread:I,TextMention:R,Custom:M,Icon:function({className:e,...t}){return s.createElement("div",{className:(0,v.A)("lb-inbox-notification-icon",e),...t})},Avatar:F})},42213:(e,t,r)=>{"use strict";r.d(t,{L:()=>i});var n=r(28964),o=r(56714);let i=(0,n.forwardRef)(({children:e,className:t,...r},i)=>n.createElement("ol",{className:(0,o.A)("lb-root lb-inbox-notification-list",t),...r,ref:i},n.Children.map(e,(e,t)=>n.createElement("li",{key:t,className:"lb-inbox-notification-list-item"},e))))},28706:(e,t,r)=>{"use strict";r.d(t,{QC:()=>B,Et:()=>x,Ev:()=>_});var n=r(44706),o=r(28964),i=r(95495),a=r(96054),s=r(15874);function u(e){return o.createElement(s.JO,{...e},o.createElement("path",{d:"m3.794 13.526 5.326-9.89a1 1 0 0 1 1.76 0l5.326 9.89a1 1 0 0 1-.88 1.474H4.674a1 1 0 0 1-.88-1.474ZM10 7.5v2m0 2.5h.007"}),o.createElement("circle",{cx:10,cy:12,r:.25}))}var l=r(64761),c=r(90331),d=r(22161),f=r(56714),h=r(7665);let p=["B","KB","MB","GB"];function m(e,t){let r;if(0===e)return`0 ${p[1]}`;r=0===e?1:Math.max(1,Math.min(Math.floor(Math.log(Math.abs(e))/Math.log(1e3)),p.length-1));let n=e/1e3**r,o=1;1===r&&(n>=10&&(o=0),n<.1&&n>0&&(o=2),n<.01&&(n=.01));let i=p[r],a=(0,h.Y4)(t,{minimumFractionDigits:0,maximumFractionDigits:o}).format(n);return`${a} ${i}`}var v=r(11265);let g=/^(.+?)(\.[^.]+)?$/,y=(0,o.memo)(({mimeType:e})=>{let t=(0,o.useMemo)(()=>(function(e){return"application/zip"===e||"application/gzip"===e||"application/vnd.rar"===e||"application/x-rar-compressed"===e||"application/x-7z-compressed"===e||"application/x-zip-compressed"===e||"application/x-tar"===e||"application/x-bzip"===e||"application/x-bzip2"===e?o.createElement("path",{d:"M13 15h2v1h-1.5a.5.5 0 0 0 0 1H15v1h-1.5a.5.5 0 0 0 0 1H15v1h-1.5a.5.5 0 0 0 0 1h1a.5.5 0 0 0 .5-.5V20h1.5a.5.5 0 0 0 0-1H15v-1h1.5a.5.5 0 0 0 0-1H15v-1h1.5a.5.5 0 0 0 .5-.5V15a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-4a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2Z"}):e.startsWith("text/")||e.startsWith("font/")||e.startsWith("application/")?o.createElement("path",{d:"M10 16a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 0 1h-8a.5.5 0 0 1-.5-.5Z"}):e.startsWith("image/")?o.createElement("path",{d:"M12 16h6a1 1 0 0 1 1 1v3l-1.293-1.293a1 1 0 0 0-1.414 0L14.09 20.91l-.464-.386a1 1 0 0 0-1.265-.013l-1.231.985A.995.995 0 0 1 11 21v-4a1 1 0 0 1 1-1Zm-2 1a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-4Zm3 2a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z"}):e.startsWith("video/")?o.createElement("path",{d:"M12 15.71a1 1 0 0 1 1.49-.872l4.96 2.79a1 1 0 0 1 0 1.744l-4.96 2.79A1 1 0 0 1 12 21.29v-5.58Z"}):e.startsWith("audio/")?o.createElement("path",{d:"M15 15a.5.5 0 0 0-.5.5v7a.5.5 0 0 0 1 0v-7a.5.5 0 0 0-.5-.5Zm-2.5 2.5a.5.5 0 0 1 1 0v3a.5.5 0 0 1-1 0v-3Zm-2 1a.5.5 0 0 1 1 0v1a.5.5 0 0 1-1 0v-1Zm6-1a.5.5 0 0 1 1 0v3a.5.5 0 0 1-1 0v-3ZM19 16a.5.5 0 0 0-.5.5v5a.5.5 0 0 0 1 0v-5a.5.5 0 0 0-.5-.5Z"}):null})(e),[e]);return o.createElement("svg",{className:"lb-attachment-icon",width:30,height:30,viewBox:"0 0 30 30",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd",xmlns:"http://www.w3.org/2000/svg"},o.createElement("path",{d:"M6 5a2 2 0 0 1 2-2h5.843a4 4 0 0 1 2.829 1.172l6.156 6.156A4 4 0 0 1 24 13.157V25a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2V5Z",className:"lb-attachment-icon-shadow"}),o.createElement("path",{d:"M6 5a2 2 0 0 1 2-2h5.843a4 4 0 0 1 2.829 1.172l6.156 6.156A4 4 0 0 1 24 13.157V25a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2V5Z",className:"lb-attachment-icon-background"}),o.createElement("path",{d:"M14.382 3.037a4 4 0 0 1 2.29 1.135l6.156 6.157a4 4 0 0 1 1.136 2.289A2 2 0 0 0 22 11h-4a2 2 0 0 1-2-2V5a2 2 0 0 0-1.618-1.963Z",className:"lb-attachment-icon-fold"}),t&&o.createElement("g",{className:"lb-attachment-icon-glyph"},t))});function b({attachment:e}){let{url:t}=(0,n.d3)(e.id),[r,i]=(0,o.useState)(!1),s=(0,o.useCallback)(()=>{i(!0)},[]);return o.createElement(o.Fragment,null,r?null:o.createElement(a.L,null),t?o.createElement("div",{className:"lb-attachment-preview-media","data-hidden":r?void 0:""},o.createElement("img",{src:t,loading:"lazy",onLoad:s})):null)}function E({attachment:e}){let{url:t}=(0,n.d3)(e.id),[r,i]=(0,o.useState)(!1),s=(0,o.useCallback)(()=>{i(!0)},[]);return o.createElement(o.Fragment,null,r?null:o.createElement(a.L,null),t?o.createElement("div",{className:"lb-attachment-preview-media","data-hidden":r?void 0:""},o.createElement("video",{src:t,onLoadedData:s})):null)}function C({attachment:e}){let t=(0,n.mT)();if(("attachment"===e.type||"uploaded"===e.status)&&t&&e.size<=62914560){if(e.mimeType.startsWith("image/"))return o.createElement(b,{attachment:e});if(e.mimeType.startsWith("video/"))return o.createElement(E,{attachment:e})}return o.createElement(y,{mimeType:e.mimeType})}function D({attachment:e}){let{base:t,extension:r}=(0,o.useMemo)(()=>(function(e){let t=e.match(g);return{base:t?.[1]??e,extension:t?.[2]}})(e.name),[e.name]);return o.createElement("span",{className:"lb-attachment-name",title:e.name},o.createElement("span",{className:"lb-attachment-name-base"},t),r&&o.createElement("span",{className:"lb-attachment-name-extension"},r))}function w(e){return(0,o.useCallback)(t=>{if(e?.(t),!t.isDefaultPrevented()&&("Enter"===t.key||" "===t.key)){t.preventDefault();let e=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});t.target.dispatchEvent(e)}},[e])}function A(e,t){let r=(0,l.QG)(t),n=(0,c.b3)(),o=n?.maxAttachmentSize,i="localAttachment"===e.type?e.status:void 0;return{isUploading:"uploading"===i,isError:"error"===i,description:"localAttachment"===e.type&&"error"===e.status?e.error instanceof d.YZ?"server"===e.error.origin?r.ATTACHMENT_TOO_LARGE():r.ATTACHMENT_TOO_LARGE(o?m(o,r.locale):void 0):r.ATTACHMENT_ERROR(e.error):m(e.size,r.locale),deleteLabel:n?r.COMPOSER_REMOVE_ATTACHMENT:r.COMMENT_DELETE_ATTACHMENT}}function x({attachment:e,overrides:t,onClick:r,onDeleteClick:n,preventFocusOnDelete:s,className:l,onKeyDown:c,...d}){let{isUploading:h,isError:p,description:m,deleteLabel:g}=A(e,t),y=(0,o.useCallback)(e=>{s&&e.preventDefault()},[s]),b=w(c);return o.createElement("div",{className:(0,f.A)("lb-attachment lb-media-attachment",l),"data-error":p?"":void 0,...d,role:r?"button":void 0,onClick:r,tabIndex:r?0:-1,onKeyDown:r?b:void 0},o.createElement("div",{className:"lb-attachment-preview"},h?o.createElement(a.L,null):p?o.createElement(u,null):o.createElement(C,{attachment:e})),o.createElement("div",{className:"lb-attachment-details"},o.createElement(D,{attachment:e}),o.createElement("span",{className:"lb-attachment-description",title:m},m)),n&&o.createElement(v.u,{content:g},o.createElement("button",{type:"button",className:"lb-attachment-delete",onClick:n,onPointerDown:y,"aria-label":g},o.createElement(i.a,null))))}function B({attachment:e,overrides:t,onClick:r,onDeleteClick:n,preventFocusOnDelete:s,className:l,onKeyDown:c,...d}){let{isUploading:h,isError:p,description:m,deleteLabel:g}=A(e,t),y=(0,o.useCallback)(e=>{s&&e.preventDefault()},[s]),b=w(c);return o.createElement("div",{className:(0,f.A)("lb-attachment lb-file-attachment",l),"data-error":p?"":void 0,...d,role:r?"button":void 0,onClick:r,tabIndex:r?0:-1,onKeyDown:r?b:void 0},o.createElement("div",{className:"lb-attachment-preview"},h?o.createElement(a.L,null):p?o.createElement(u,null):o.createElement(C,{attachment:e})),o.createElement("div",{className:"lb-attachment-details"},o.createElement(D,{attachment:e}),o.createElement("span",{className:"lb-attachment-description",title:m},m)),n&&o.createElement(v.u,{content:g},o.createElement("button",{type:"button",className:"lb-attachment-delete",onClick:n,onPointerDown:y,"aria-label":g},o.createElement(i.a,null))))}function _(e){let t=[],r=[];for(let n of e)(n.mimeType.startsWith("image/")||n.mimeType.startsWith("video/"))&&n.size<=62914560?t.push(n):r.push(n);return{mediaAttachments:t,fileAttachments:r}}},82744:(e,t,r)=>{"use strict";r.d(t,{q:()=>s});var n=r(44706),o=r(28964),i=r(56714);function a(e){return e.trim().split(" ").reduce((e,t,r,n)=>((0===r||r===n.length-1)&&(e+=t.charAt(0).toLocaleUpperCase()),e),"")}function s({userId:e,className:t,...r}){let{user:s,isLoading:u}=(0,n.qf)(e),l=(0,o.useMemo)(()=>s?.name,[s]),c=(0,o.useMemo)(()=>s?.avatar,[s]),d=(0,o.useMemo)(()=>l?a(l):void 0,[l]),f=(0,o.useMemo)(()=>u||s?void 0:a(e),[u,s,e]);return o.createElement("div",{className:(0,i.A)("lb-avatar",t),"data-loading":u?"":void 0,...r},c&&o.createElement("img",{className:"lb-avatar-image",src:c,alt:l}),d?o.createElement("span",{className:"lb-avatar-fallback","aria-hidden":!0},d):f?o.createElement("span",{className:"lb-avatar-fallback","aria-label":e,title:e},f):null)}},59811:(e,t,r)=>{"use strict";r.d(t,{z:()=>i});var n=r(28964),o=r(56714);let i=(0,n.forwardRef)(({variant:e="default",size:t="default",disableable:r=!0,className:i,...a},s)=>n.createElement("button",{type:"button",className:(0,o.A)("lb-button",!r&&"lb-button:non-disableable",i),"data-variant":e,"data-size":t,...a,ref:s}))},74086:(e,t,r)=>{"use strict";r.d(t,{Lt:()=>l,hP:()=>c});var n=r(71168),o=r(28964),i=r(92257),a=r(30662),s=r(64761),u=r(56714);function l({children:e,content:t,defaultOpen:r,open:l,onOpenChange:c,className:d,...f}){let h=(0,s.QG)(),{portalContainer:p}=(0,i.T)();return o.createElement(n.fC,{defaultOpen:r,open:l,onOpenChange:c,dir:h.dir},e,o.createElement(n.Uv,{container:p},o.createElement(n.VY,{className:(0,u.A)("lb-root lb-portal lb-elevation lb-dropdown",d),sideOffset:a.v0,collisionPadding:a.rV,...f},t)))}let c=(0,o.forwardRef)(({children:e,className:t,...r},i)=>o.createElement(n.Xi,{className:(0,u.A)("lb-dropdown-item",t),...r,ref:i},e))},17019:(e,t,r)=>{"use strict";r.d(t,{d:()=>a});var n=r(28964),o=r(22595),i=r(56714);let a=(0,n.forwardRef)(({className:e,...t},r)=>n.createElement(o.d,{className:(0,i.A)("lb-emoji",e),...t,ref:r}))},69874:(e,t,r)=>{"use strict";let n;r.d(t,{h:()=>ne});var o=r(66206),i=r(28964),a=r(92257),s=r(30662),u=r(15874);function l(e){return i.createElement(u.JO,{...e},i.createElement("path",{d:"M9 15A6 6 0 1 0 9 3a6 6 0 0 0 0 12Zm7.5 1.5-3.25-3.25"}))}var c=r(96054),d=r(64761),f=r(69008),h=r(97247),p=r(46817);function m(e,t){return r=>e(t(r))}function v(e,t){return t(e)}function g(...e){return e}function y(e){e()}function b(e){return void 0!==e}function E(){}function C(e){e(2)}function D(e){return e(4)}function w(e,t){return e(1,e=>t(0,e))}function A(e,t){let r=e(1,e=>{r(),t(e)});return r}function x(){let e=[];return(t,r)=>{switch(t){case 2:e.splice(0,e.length);return;case 1:return e.push(r),()=>{let t=e.indexOf(r);t>-1&&e.splice(t,1)};case 0:e.slice().forEach(e=>{e(r)});return;default:throw Error(`unrecognized action ${t}`)}}}function B(e){let t=e,r=x();return(e,n)=>{switch(e){case 1:n(t);break;case 0:t=n;break;case 4:return t}return r(e,n)}}function _(e){var t;return w(e,t=x()),t}function O(e,t){var r;return w(e,r=B(t)),r}function T(e,...t){let r=function(...e){return t=>e.reduceRight(v,t)}(...t);return(t,n)=>{switch(t){case 1:return e(1,r(n));case 2:C(e);return}}}function k(e,t){return e===t}function S(e=k){let t;return r=>n=>{e(t,n)||(t=n,r(n))}}function F(e){return t=>r=>{e(r)&&t(r)}}function I(e){return t=>m(t,e)}function R(e){return t=>()=>t(e)}function M(e,t){return r=>n=>r(t=e(t,n))}function N(e){return t=>r=>{e>0?e--:t(r)}}function P(e){let t,r=null;return n=>o=>{r=o,t||(t=setTimeout(()=>{t=void 0,n(r)},e))}}function L(e){let t,r;return n=>o=>{t=o,r&&clearTimeout(r),r=setTimeout(()=>{n(t)},e)}}function j(...e){let t=Array(e.length),r=0,n=null,o=Math.pow(2,e.length)-1;return e.forEach((e,i)=>{let a=Math.pow(2,i);e(1,e=>{let s=r;r|=a,t[i]=e,s!==o&&r===o&&n&&(n(),n=null)})}),e=>i=>{let a=()=>e([i].concat(t));r===o?a():n=a}}function z(...e){return function(t,r){switch(t){case 1:return function(...e){return()=>{e.map(y)}}(...e.map(e=>e(1,r)));case 2:return;default:throw Error(`unrecognized action ${t}`)}}}function W(e,t=k){return T(e,S(t))}function U(...e){let t=x(),r=Array(e.length),n=0,o=Math.pow(2,e.length)-1;return e.forEach((e,i)=>{let a=Math.pow(2,i);e(1,e=>{r[i]=e,(n|=a)===o&&t(0,r)})}),function(e,i){switch(e){case 1:return n===o&&i(r),t(1,i);case 2:return C(t);default:throw Error(`unrecognized action ${e}`)}}}function H(e,t=[],{singleton:r}={singleton:!0}){return{id:$(),constructor:e,dependencies:t,singleton:r}}let $=()=>Symbol(),V="undefined"!=typeof document?i.useLayoutEffect:i.useEffect;function K(e,t,r){let n=Object.keys(t.required||{}),o=Object.keys(t.optional||{}),a=Object.keys(t.methods||{}),s=Object.keys(t.events||{}),u=i.createContext({});function l(e,r){for(let o of(e.propsReady&&(0,e.propsReady)(0,!1),n))(0,e[t.required[o]])(0,r[o]);for(let n of o)n in r&&(0,e[t.optional[n]])(0,r[n]);e.propsReady&&(0,e.propsReady)(0,!0)}return{Component:i.forwardRef((c,d)=>{var f;let{children:p,...m}=c,[v]=i.useState(()=>{var t;return l(t=function(e){let t=new Map,r=({id:e,constructor:n,dependencies:o,singleton:i})=>{if(i&&t.has(e))return t.get(e);let a=n(o.map(e=>r(e)));return i&&t.set(e,a),a};return r(e)}(e),m),t}),[g]=i.useState(()=>{var e;return e=v,s.reduce((r,n)=>(r[n]=function(e){let t,r;let n=()=>t&&t();return function(o,i){switch(o){case 1:if(!i)return n(),E;if(r===i)return;return n(),r=i,t=e(1,i);case 2:n(),r=null;return;default:throw Error(`unrecognized action ${o}`)}}}(e[t.events[n]]),r),{})});return V(()=>{for(let e of s)e in m&&(0,g[e])(1,m[e]);return()=>{Object.values(g).map(C)}},[m,g,v]),V(()=>{l(v,m)}),i.useImperativeHandle(d,(f=a.reduce((e,r)=>(e[r]=e=>{(0,v[t.methods[r]])(0,e)},e),{}),()=>f)),(0,h.jsx)(u.Provider,{value:v,children:r?(0,h.jsx)(r,{...function(e,t){let r={},n={},o=0,i=e.length;for(;o<i;)n[e[o]]=1,o+=1;for(let e in t)n.hasOwnProperty(e)||(r[e]=t[e]);return r}([...n,...o,...s],m),children:p}):p})}),usePublisher:e=>{var t;return i.useCallback((t=i.useContext(u)[e],e=>{t(0,e)}),[e])},useEmitterValue:i.version.startsWith("18")?e=>{let t=i.useContext(u)[e],r=i.useCallback(e=>t(1,e),[t]);return i.useSyncExternalStore(r,()=>D(t),()=>D(t))}:e=>{let t=i.useContext(u)[e],[r,n]=i.useState(()=>D(t));return V(()=>t(1,e=>{e!==r&&n(()=>e)}),[t,r]),r},useEmitter:(e,t)=>{let r=i.useContext(u)[e];V(()=>r(1,t),[t,r])}}}let q="undefined"!=typeof document?i.useLayoutEffect:i.useEffect;var Y=((n=Y||{})[n.DEBUG=0]="DEBUG",n[n.INFO=1]="INFO",n[n.WARN=2]="WARN",n[n.ERROR=3]="ERROR",n);let G={0:"debug",1:"log",2:"warn",3:"error"},J=()=>"undefined"==typeof globalThis?window:globalThis,Z=H(()=>{let e=B(3);return{log:B((t,r,n=1)=>{var o;n>=(null!=(o=J().VIRTUOSO_LOG_LEVEL)?o:D(e))&&console[G[n]]("%creact-virtuoso: %c%s %o","color: #0253b3; font-weight: bold","color: initial",t,r)}),logLevel:e}},[],{singleton:!0});function X(e,t,r){let n=i.useRef(null),o=e=>{};if("undefined"!=typeof ResizeObserver){let a=i.useMemo(()=>new ResizeObserver(t=>{let n=()=>{let r=t[0].target;null!==r.offsetParent&&e(r)};r?n():requestAnimationFrame(n)}),[e]);o=e=>{e&&t?(a.observe(e),n.current=e):(n.current&&a.unobserve(n.current),n.current=null)}}return{ref:n,callbackRef:o}}function Q(e,t,r){return X(e,t,r).callbackRef}function ee(e,t,r,n,o,a,s,u,l){return X(i.useCallback(r=>{let i=function(e,t,r,n){let o=e.length;if(0===o)return null;let i=[];for(let a=0;a<o;a++){let o=e.item(a);if(!o||void 0===o.dataset.index)continue;let s=parseInt(o.dataset.index),u=parseFloat(o.dataset.knownSize),l=t(o,r);if(0===l&&n("Zero-sized element, this should not happen",{child:o},Y.ERROR),l===u)continue;let c=i[i.length-1];0===i.length||c.size!==l||c.endIndex!==s-1?i.push({startIndex:s,endIndex:s,size:l}):i[i.length-1].endIndex++}return i}(r.children,t,u?"offsetWidth":"offsetHeight",o),l=r.parentElement;for(;!l.dataset.virtuosoScroller;)l=l.parentElement;let c="window"===l.lastElementChild.dataset.viewportType;n({scrollTop:Math.max(s?u?s.scrollLeft:s.scrollTop:c?u?window.pageXOffset||document.documentElement.scrollLeft:window.pageYOffset||document.documentElement.scrollTop:u?l.scrollLeft:l.scrollTop,0),scrollHeight:s?u?s.scrollWidth:s.scrollHeight:c?u?document.documentElement.scrollWidth:document.documentElement.scrollHeight:u?l.scrollWidth:l.scrollHeight,viewportHeight:s?u?s.offsetWidth:s.offsetHeight:c?u?window.innerWidth:window.innerHeight:u?l.offsetWidth:l.offsetHeight}),null==a||a(u?et("column-gap",getComputedStyle(r).columnGap,o):et("row-gap",getComputedStyle(r).rowGap,o)),null!==i&&e(i)},[e,t,o,a,s,n]),r,l)}function et(e,t,r){return("normal"===t||(null==t?void 0:t.endsWith("px"))||r(`${e} was not resolved to pixel value correctly`,t,Y.WARN),"normal"===t)?0:parseInt(null!=t?t:"0",10)}function er(e,t){return Math.round(e.getBoundingClientRect()[t])}function en(e,t){return 1.01>Math.abs(e-t)}function eo(e,t,r,n=E,o,a){let s=i.useRef(null),u=i.useRef(null),l=i.useRef(null),c=i.useCallback(r=>{let n=r.target,o=n===window||n===document,i=a?o?window.pageXOffset||document.documentElement.scrollLeft:n.scrollLeft:o?window.pageYOffset||document.documentElement.scrollTop:n.scrollTop,s=a?o?document.documentElement.scrollWidth:n.scrollWidth:o?document.documentElement.scrollHeight:n.scrollHeight,c=a?o?window.innerWidth:n.offsetWidth:o?window.innerHeight:n.offsetHeight,d=()=>{e({scrollTop:Math.max(i,0),scrollHeight:s,viewportHeight:c})};r.suppressFlushSync?d():p.flushSync(d),null!==u.current&&(i===u.current||i<=0||i===s-c)&&(u.current=null,t(!0),l.current&&(clearTimeout(l.current),l.current=null))},[e,t]);return i.useEffect(()=>{let e=o||s.current;return n(o||s.current),c({target:e,suppressFlushSync:!0}),e.addEventListener("scroll",c,{passive:!0}),()=>{n(null),e.removeEventListener("scroll",c)}},[s,c,r,n,o]),{scrollerRef:s,scrollByCallback:function(e){a&&(e={left:e.top,behavior:e.behavior}),s.current.scrollBy(e)},scrollToCallback:function(r){let n,o,i;let c=s.current;if(!c||(a?"offsetWidth"in c&&0===c.offsetWidth:"offsetHeight"in c&&0===c.offsetHeight))return;let d="smooth"===r.behavior;c===window?(o=Math.max(er(document.documentElement,a?"width":"height"),a?document.documentElement.scrollWidth:document.documentElement.scrollHeight),n=a?window.innerWidth:window.innerHeight,i=a?document.documentElement.scrollLeft:document.documentElement.scrollTop):(o=c[a?"scrollWidth":"scrollHeight"],n=er(c,a?"width":"height"),i=c[a?"scrollLeft":"scrollTop"]);let f=o-n;if(r.top=Math.ceil(Math.max(Math.min(f,r.top),0)),en(n,o)||r.top===i){e({scrollTop:i,scrollHeight:o,viewportHeight:n}),d&&t(!0);return}d?(u.current=r.top,l.current&&clearTimeout(l.current),l.current=setTimeout(()=>{l.current=null,u.current=null,t(!0)},1e3)):u.current=null,a&&(r={left:r.top,behavior:r.behavior}),c.scrollTo(r)}}}let ei=H(()=>{let e=x(),t=x(),r=B(0),n=x(),o=B(0),i=x(),a=x(),s=B(0),u=B(0),l=B(0),c=B(0),d=x(),f=x(),h=B(!1),p=B(!1),m=B(!1);return w(T(e,I(({scrollTop:e})=>e)),t),w(T(e,I(({scrollHeight:e})=>e)),a),w(t,o),{scrollContainerState:e,scrollTop:t,viewportHeight:i,headerHeight:s,fixedHeaderHeight:u,fixedFooterHeight:l,footerHeight:c,scrollHeight:a,smoothScrollTargetReached:n,horizontalDirection:p,skipAnimationFrameInResizeObserver:m,scrollTo:d,scrollBy:f,statefulScrollTop:o,deviation:r,scrollingInProgress:h}},[],{singleton:!0}),ea={lvl:0};function es(e,t,r,n=ea,o=ea){return{k:e,v:t,lvl:r,l:n,r:o}}function eu(e){return e===ea}function el(e,t){return eu(e)?void 0:t===e.k?e.v:t<e.k?el(e.l,t):el(e.r,t)}function ec(e,t,r="k"){if(eu(e))return[-1/0,void 0];if(Number(e[r])===t)return[e.k,e.v];if(Number(e[r])<t){let n=ec(e.r,t,r);return n[0]===-1/0?[e.k,e.v]:n}return ec(e.l,t,r)}function ed(e,t,r){return eu(e)?es(t,r,1):t===e.k?eh(e,{k:t,v:r}):t<e.k?ey(eb(eh(e,{l:ed(e.l,t,r)}))):ey(eb(eh(e,{r:ed(e.r,t,r)})))}function ef(e){return eu(e)?[]:[...ef(e.l),{k:e.k,v:e.v},...ef(e.r)]}function eh(e,t){return es(void 0!==t.k?t.k:e.k,void 0!==t.v?t.v:e.v,void 0!==t.lvl?t.lvl:e.lvl,void 0!==t.l?t.l:e.l,void 0!==t.r?t.r:e.r)}function ep(e){return eu(e)||e.lvl>e.r.lvl}function em(e){let{l:t,r,lvl:n}=e;if(r.lvl>=n-1&&t.lvl>=n-1)return e;if(n>r.lvl+1){if(ep(t))return eb(eh(e,{lvl:n-1}));if(!eu(t)&&!eu(t.r))return eh(t.r,{l:eh(t,{r:t.r.l}),r:eh(e,{l:t.r.r,lvl:n-1}),lvl:n});throw Error("Unexpected empty nodes")}if(ep(e))return ey(eh(e,{lvl:n-1}));if(eu(r)||eu(r.l))throw Error("Unexpected empty nodes");{let t=r.l,o=ep(t)?r.lvl-1:r.lvl;return eh(t,{l:eh(e,{r:t.l,lvl:n-1}),r:ey(eh(r,{l:t.r,lvl:o})),lvl:t.lvl+1})}}function ev(e,t,r){if(eu(e))return[];let n=ec(e,t)[0];return eg(function e(t,r,n){if(eu(t))return[];let{k:o,v:i,l:a,r:s}=t,u=[];return o>r&&(u=u.concat(e(a,r,n))),o>=r&&o<=n&&u.push({k:o,v:i}),o<=n&&(u=u.concat(e(s,r,n))),u}(e,n,r),({k:e,v:t})=>({index:e,value:t}))}function eg(e,t){let r=e.length;if(0===r)return[];let{index:n,value:o}=t(e[0]),i=[];for(let a=1;a<r;a++){let{index:r,value:s}=t(e[a]);i.push({start:n,end:r-1,value:o}),n=r,o=s}return i.push({start:n,end:1/0,value:o}),i}function ey(e){let{r:t,lvl:r}=e;return eu(t)||eu(t.r)||t.lvl!==r||t.r.lvl!==r?e:eh(t,{l:eh(e,{r:t.l}),lvl:r+1})}function eb(e){let{l:t}=e;return eu(t)||t.lvl!==e.lvl?e:eh(t,{r:eh(e,{l:t.r})})}function eE(e,t,r,n=0){let o=e.length-1;for(;n<=o;){let i=Math.floor((n+o)/2),a=r(e[i],t);if(0===a)return i;if(-1===a){if(o-n<2)return i-1;o=i-1}else{if(o===n)return i;n=i+1}}throw Error(`Failed binary finding record in array - ${e.join(",")}, searched for ${t}`)}let eC=H(()=>({recalcInProgress:B(!1)}),[],{singleton:!0});function eD(e,t){let r=0,n=0;for(;r<e;)r+=t[n+1]-t[n]-1,n++;return n-(r===e?0:1)}function ew({index:e},t){return t===e?0:t<e?-1:1}function eA({offset:e},t){return t===e?0:t<e?-1:1}function ex(e){return{index:e.index,value:e}}function eB(e,t,r,n){let o=e,i=0,a=0,s=0,u=0;if(0!==t){u=eE(o,t-1,ew),s=o[u].offset;let e=ec(r,t-1);i=e[0],a=e[1],o.length&&o[u].size===ec(r,t)[1]&&(u-=1),o=o.slice(0,u+1)}else o=[];for(let{start:e,value:u}of ev(r,t,1/0)){let t=e-i,r=t*a+s+t*n;o.push({offset:r,size:u,index:e}),i=e,s=r,a=u}return{offsetTree:o,lastIndex:i,lastOffset:s,lastSize:a}}function e_(e,[t,r,n,o]){t.length>0&&n("received item sizes",t,Y.DEBUG);let i=e.sizeTree,a=i,s=0;if(r.length>0&&eu(i)&&2===t.length){let e=t[0].size,n=t[1].size;a=r.reduce((t,r)=>ed(ed(t,r,e),r+1,n),a)}else[a,s]=function(e,t){let r=eu(e)?0:1/0;for(let n of t){let{size:t,startIndex:o,endIndex:i}=n;if(r=Math.min(r,o),eu(e)){e=ed(e,0,t);continue}let a=ev(e,o-1,i+1);if(a.some(function(e){let{size:t,startIndex:r,endIndex:n}=e;return e=>e.start===r&&(e.end===n||e.end===1/0)&&e.value===t}(n)))continue;let s=!1,u=!1;for(let{start:r,end:n,value:o}of a)s?(i>=r||t===o)&&(e=function e(t,r){if(eu(t))return ea;let{k:n,l:o,r:i}=t;if(r===n){if(eu(o))return i;if(eu(i))return o;{let[e,r]=function e(t){return eu(t.r)?[t.k,t.v]:e(t.r)}(o);return em(eh(t,{k:e,v:r,l:function e(t){return eu(t.r)?t.l:em(eh(t,{r:e(t.r)}))}(o)}))}}return r<n?em(eh(t,{l:e(o,r)})):em(eh(t,{r:e(i,r)}))}(e,r)):(u=o!==t,s=!0),n>i&&i>=r&&o!==t&&(e=ed(e,i+1,o));u&&(e=ed(e,o,t))}return[e,r]}(a,t);if(a===i)return e;let{offsetTree:u,lastIndex:l,lastSize:c,lastOffset:d}=eB(e.offsetTree,s,a,o);return{sizeTree:a,offsetTree:u,lastIndex:l,lastOffset:d,lastSize:c,groupOffsetTree:r.reduce((e,t)=>ed(e,t,eO(t,u,o)),ea),groupIndices:r}}function eO(e,t,r){if(0===t.length)return 0;let{offset:n,index:o,size:i}=t[eE(t,e,ew)],a=e-o,s=i*a+(a-1)*r+n;return s>0?s+r:s}function eT(e,t,r){if(void 0!==e.groupIndex)return t.groupIndices[e.groupIndex]+1;{let n=ek("LAST"===e.index?r:e.index,t);return Math.max(0,n,Math.min(r,n))}}function ek(e,t){if(!eS(t))return e;let r=0;for(;t.groupIndices[r]<=e+r;)r++;return e+r}function eS(e){return!eu(e.groupOffsetTree)}let eF={offsetHeight:"height",offsetWidth:"width"},eI=H(([{log:e},{recalcInProgress:t}])=>{let r=x(),n=x(),o=O(n,0),i=x(),a=x(),s=B(0),u=B([]),l=B(void 0),c=B(void 0),d=B((e,t)=>er(e,eF[t])),f=B(void 0),h=B(0),p={offsetTree:[],sizeTree:ea,groupOffsetTree:ea,lastIndex:0,lastOffset:0,lastSize:0,groupIndices:[]},m=O(T(r,j(u,e,h),M(e_,p),S()),p),v=O(T(u,S(),M((e,t)=>({prev:e.current,current:t}),{prev:[],current:[]}),I(({prev:e})=>e)),[]);w(T(u,F(e=>e.length>0),j(m,h),I(([e,t,r])=>{let n=e.reduce((e,n,o)=>ed(e,n,eO(n,t.offsetTree,r)||o),ea);return{...t,groupIndices:e,groupOffsetTree:n}})),m),w(T(n,j(m),F(([e,{lastIndex:t}])=>e<t),I(([e,{lastIndex:t,lastSize:r}])=>[{startIndex:e,endIndex:t,size:r}])),r),w(l,c);let g=O(T(l,I(e=>void 0===e)),!0);w(T(c,F(e=>void 0!==e&&eu(D(m).sizeTree)),I(e=>[{startIndex:0,endIndex:0,size:e}])),r);let y=_(T(r,j(m),M(({sizes:e},[t,r])=>({changed:r!==e,sizes:r}),{changed:!1,sizes:p}),I(e=>e.changed)));T(s,M((e,t)=>({diff:e.prev-t,prev:t}),{diff:0,prev:0}),I(e=>e.diff))(1,e=>{let{groupIndices:r}=D(m);if(e>0)t(0,!0),i(0,e+eD(e,r));else if(e<0){let t=D(v);t.length>0&&(e-=eD(-e,t)),a(0,e)}}),T(s,j(e))(1,([e,t])=>{e<0&&t("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",{firstItemIndex:s},Y.ERROR)});let b=_(i);w(T(i,j(m),I(([e,t])=>{let r=t.groupIndices.length>0,n=[],o=t.lastSize;if(r){let r=el(t.sizeTree,0),i=0,a=0;for(;i<e;){let e=t.groupIndices[a],s=t.groupIndices.length===a+1?1/0:t.groupIndices[a+1]-e-1;n.push({startIndex:e,endIndex:e,size:r}),n.push({startIndex:e+1,endIndex:e+1+s-1,size:o}),a++,i+=s+1}let s=ef(t.sizeTree);return i!==e&&s.shift(),s.reduce((t,{k:r,v:n})=>{let o=t.ranges;return 0!==t.prevSize&&(o=[...t.ranges,{startIndex:t.prevIndex,endIndex:r+e-1,size:t.prevSize}]),{ranges:o,prevIndex:r+e,prevSize:n}},{ranges:n,prevIndex:e,prevSize:0}).ranges}return ef(t.sizeTree).reduce((t,{k:r,v:n})=>({ranges:[...t.ranges,{startIndex:t.prevIndex,endIndex:r+e-1,size:t.prevSize}],prevIndex:r+e,prevSize:n}),{ranges:[],prevIndex:0,prevSize:o}).ranges})),r);let E=_(T(a,j(m,h),I(([e,{offsetTree:t},r])=>eO(-e,t,r))));return w(T(a,j(m,h),I(([e,t,r])=>{if(t.groupIndices.length>0){if(eu(t.sizeTree))return t;let n=ea,o=D(v),i=0,a=0,s=0;for(;i<-e;){s=o[a];let e=o[a+1]-s-1;a++,i+=e+1}return n=ef(t.sizeTree).reduce((t,{k:r,v:n})=>ed(t,Math.max(0,r+e),n),n),i!==-e&&(n=ed(n,0,el(t.sizeTree,s)),n=ed(n,1,ec(t.sizeTree,-e+1)[1])),{...t,sizeTree:n,...eB(t.offsetTree,0,n,r)}}{let n=ef(t.sizeTree).reduce((t,{k:r,v:n})=>ed(t,Math.max(0,r+e),n),ea);return{...t,sizeTree:n,...eB(t.offsetTree,0,n,r)}}})),m),{data:f,totalCount:n,sizeRanges:r,groupIndices:u,defaultItemSize:c,fixedItemSize:l,unshiftWith:i,shiftWith:a,shiftWithOffset:E,beforeUnshiftWith:b,firstItemIndex:s,gap:h,sizes:m,listRefresh:y,statefulTotalCount:o,trackItemSizes:g,itemSize:d}},g(Z,eC),{singleton:!0}),eR="undefined"!=typeof document&&"scrollBehavior"in document.documentElement.style;function eM(e){let t="number"==typeof e?{index:e}:e;return t.align||(t.align="start"),t.behavior&&eR||(t.behavior="auto"),t.offset||(t.offset=0),t}let eN=H(([{sizes:e,totalCount:t,listRefresh:r,gap:n},{scrollingInProgress:o,viewportHeight:i,scrollTo:a,smoothScrollTargetReached:s,headerHeight:u,footerHeight:l,fixedHeaderHeight:c,fixedFooterHeight:d},{log:f}])=>{let h=x(),p=x(),m=B(0),v=null,g=null,y=null;function b(){v&&(v(),v=null),y&&(y(),y=null),g&&(clearTimeout(g),g=null),o(0,!1)}return w(T(h,j(e,i,t,m,u,l,f),j(n,c,d),I(([[e,t,n,i,a,u,l,c],d,f,m])=>{let E=eM(e),{align:C,behavior:D,offset:w}=E,x=i-1,B=eT(E,t,x),_=eO(B,t.offsetTree,d)+u;"end"===C?(_+=f+ec(t.sizeTree,B)[1]-n+m,B===x&&(_+=l)):"center"===C?_+=(f+ec(t.sizeTree,B)[1]-n+m)/2:_-=a,w&&(_+=w);let O=t=>{b(),t?(c("retrying to scroll to",{location:e},Y.DEBUG),h(0,e)):(p(0,!0),c("list did not change, scroll successful",{},Y.DEBUG))};if(b(),"smooth"===D){let e=!1;y=r(1,t=>{e=e||t}),v=A(s,()=>{O(e)})}else v=A(T(r,e=>{let t=setTimeout(()=>{e(!1)},150);return r=>{r&&(e(!0),clearTimeout(t))}}),O);return g=setTimeout(()=>{b()},1200),o(0,!0),c("scrolling from index to",{index:B,top:_,behavior:D},Y.DEBUG),{top:_,behavior:D}})),a),{scrollToIndex:h,scrollTargetReached:p,topListHeight:m}},g(eI,ei,Z),{singleton:!0}),eP="down",eL={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollTop:0,viewportHeight:0,scrollHeight:0}},ej=H(([{scrollContainerState:e,scrollTop:t,viewportHeight:r,headerHeight:n,footerHeight:o,scrollBy:i}])=>{let a=B(!1),s=B(!0),u=x(),l=x(),c=B(4),d=B(0),f=O(T(z(T(W(t),N(1),R(!0)),T(W(t),N(1),R(!1),L(100))),S()),!1),h=O(T(z(T(i,R(!0)),T(i,R(!1),L(200))),S()),!1);w(T(U(W(t),W(d)),I(([e,t])=>e<=t),S()),s),w(T(s,P(50)),l);let p=_(T(U(e,W(r),W(n),W(o),W(c)),M((e,[{scrollTop:t,scrollHeight:r},n,o,i,a])=>{let s={viewportHeight:n,scrollTop:t,scrollHeight:r};if(t+n-r>-a){let r,n;return t>e.state.scrollTop?(r="SCROLLED_DOWN",n=e.state.scrollTop-t):(r="SIZE_DECREASED",n=e.state.scrollTop-t||e.scrollTopDelta),{atBottom:!0,state:s,atBottomBecause:r,scrollTopDelta:n}}return{atBottom:!1,notAtBottomBecause:s.scrollHeight>e.state.scrollHeight?"SIZE_INCREASED":n<e.state.viewportHeight?"VIEWPORT_HEIGHT_DECREASING":t<e.state.scrollTop?"SCROLLING_UPWARDS":"NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",state:s}},eL),S((e,t)=>e&&e.atBottom===t.atBottom))),m=O(T(e,M((e,{scrollTop:t,scrollHeight:r,viewportHeight:n})=>{if(en(e.scrollHeight,r))return{scrollTop:t,scrollHeight:r,jump:0,changed:!1};{let o=r-(t+n)<1;return e.scrollTop!==t&&o?{scrollHeight:r,scrollTop:t,jump:e.scrollTop-t,changed:!0}:{scrollHeight:r,scrollTop:t,jump:0,changed:!0}}},{scrollHeight:0,jump:0,scrollTop:0,changed:!1}),F(e=>e.changed),I(e=>e.jump)),0);w(T(p,I(e=>e.atBottom)),a),w(T(a,P(50)),u);let v=B(eP);w(T(e,I(({scrollTop:e})=>e),S(),M((e,t)=>D(h)?{direction:e.direction,prevScrollTop:t}:{direction:t<e.prevScrollTop?"up":eP,prevScrollTop:t},{direction:eP,prevScrollTop:0}),I(e=>e.direction)),v),w(T(e,P(50),R("none")),v);let g=B(0);return w(T(f,F(e=>!e),R(0)),g),w(T(t,P(100),j(f),F(([e,t])=>!!t),M(([e,t],[r])=>[t,r],[0,0]),I(([e,t])=>t-e)),g),{isScrolling:f,isAtTop:s,isAtBottom:a,atBottomState:p,atTopStateChange:l,atBottomStateChange:u,scrollDirection:v,atBottomThreshold:c,atTopThreshold:d,scrollVelocity:g,lastJumpDueToItemResize:m}},g(ei)),ez=H(([{log:e}])=>{let t=B(!1),r=_(T(t,F(e=>e),S()));return t(1,t=>{t&&D(e)("props updated",{},Y.DEBUG)}),{propsReady:t,didMount:r}},g(Z),{singleton:!0});function eW(e,t){0==e?t():requestAnimationFrame(()=>eW(e-1,t))}function eU(e,t){return"number"==typeof e?e:"LAST"===e.index?t-1:e.index}let eH=H(([{sizes:e,listRefresh:t,defaultItemSize:r},{scrollTop:n},{scrollToIndex:o,scrollTargetReached:i},{didMount:a}])=>{let s=B(!0),u=B(0),l=B(!0);return w(T(a,j(u),F(([e,t])=>!!t),R(!1)),s),w(T(a,j(u),F(([e,t])=>!!t),R(!1)),l),T(U(t,a),j(s,e,r,l),F(([[,e],t,{sizeTree:r},n,o])=>e&&(!eu(r)||b(n))&&!t&&!o),j(u))(1,([,e])=>{A(i,()=>{l(0,!0)}),eW(4,()=>{A(n,()=>{s(0,!0)}),o(0,e)})}),{scrolledToInitialItem:s,initialTopMostItemIndex:u,initialItemFinalLocationReached:l}},g(eI,ei,eN,ez),{singleton:!0});function e$(e){return!!e&&("smooth"===e?"smooth":"auto")}let eV=(e,t)=>"function"==typeof e?e$(e(t)):t&&e$(e),eK=H(([{totalCount:e,listRefresh:t},{isAtBottom:r,atBottomState:n},{scrollToIndex:o},{scrolledToInitialItem:i},{propsReady:a,didMount:s},{log:u},{scrollingInProgress:l}])=>{let c=B(!1),d=x(),f=null;function h(e){o(0,{index:"LAST",align:"end",behavior:e})}function p(e){setTimeout(A(n,t=>{!e||t.atBottom||"SIZE_INCREASED"!==t.notAtBottomBecause||f||(D(u)("scrolling to bottom due to increased size",{},Y.DEBUG),h("auto"))}),100)}return T(U(T(W(e),N(1)),s),j(W(c),r,i,l),I(([[e,t],r,n,o,i])=>{let a=t&&o,s="auto";return a&&(s=eV(r,n||i),a=a&&!!s),{totalCount:e,shouldFollow:a,followOutputBehavior:s}}),F(({shouldFollow:e})=>e))(1,({totalCount:e,followOutputBehavior:r})=>{f&&(f(),f=null),f=A(t,()=>{D(u)("following output to ",{totalCount:e},Y.DEBUG),h(r),f=null})}),T(U(W(c),e,a),F(([e,,t])=>e&&t),M(({value:e},[,t])=>({refreshed:e===t,value:t}),{refreshed:!1,value:0}),F(({refreshed:e})=>e),j(c,e))(1,([,e])=>{D(i)&&p(!1!==e)}),d(1,()=>{p(!1!==D(c))}),U(W(c),n)(1,([e,t])=>{e&&!t.atBottom&&"VIEWPORT_HEIGHT_DECREASING"===t.notAtBottomBecause&&h("auto")}),{followOutput:c,autoscrollToBottom:d}},g(eI,ej,eN,eH,ez,Z,ei));function eq(e){return e.reduce((e,t)=>(e.groupIndices.push(e.totalCount),e.totalCount+=t+1,e),{totalCount:0,groupIndices:[]})}let eY=H(([{totalCount:e,groupIndices:t,sizes:r},{scrollTop:n,headerHeight:o}])=>{let i=x(),a=x(),s=_(T(i,I(eq)));return w(T(s,I(e=>e.totalCount)),e),w(T(s,I(e=>e.groupIndices)),t),w(T(U(n,r,o),F(([e,t])=>eS(t)),I(([e,t,r])=>ec(t.groupOffsetTree,Math.max(e-r,0),"v")[0]),S(),I(e=>[e])),a),{groupCounts:i,topItemsIndexes:a}},g(eI,ei));function eG(e,t){return!!(e&&e[0]===t[0]&&e[1]===t[1])}function eJ(e,t){return!!(e&&e.startIndex===t.startIndex&&e.endIndex===t.endIndex)}let eZ="bottom",eX="none";function eQ(e,t,r){return"number"==typeof e?"up"===r&&"top"===t||r===eP&&t===eZ?e:0:"up"===r?"top"===t?e.main:e.reverse:t===eZ?e.main:e.reverse}function e0(e,t){return"number"==typeof e?e:e[t]||0}let e1=H(([{scrollTop:e,viewportHeight:t,deviation:r,headerHeight:n,fixedHeaderHeight:o}])=>{let i=x(),a=B(0),s=B(0),u=B(0),l=O(T(U(W(e),W(t),W(n),W(i,eG),W(u),W(a),W(o),W(r),W(s)),I(([e,t,r,[n,o],i,a,s,u,l])=>{let c=e-u,d=Math.max(r-c,0),f=eX,h=e0(l,"top"),p=e0(l,eZ);return(n-=u,n+=r+s,o+=r+s,n>e+(a+s)-h&&(f="up"),(o-=u)<e-d+t+p&&(f=eP),f!==eX)?[Math.max(c-r-eQ(i,"top",f)-h,0),c-d-s+t+eQ(i,eZ,f)+p]:null}),F(e=>null!=e),S(eG)),[0,0]);return{listBoundary:i,overscan:u,topListHeight:a,increaseViewportBy:s,visibleRange:l}},g(ei),{singleton:!0}),e2={items:[],topItems:[],offsetTop:0,offsetBottom:0,top:0,bottom:0,topListHeight:0,totalCount:0,firstItemIndex:0};function e3(e,t,r){let n;if(0===e.length)return[];if(!eS(t))return e.map(e=>({...e,index:e.index+r,originalIndex:e.index}));let o=e[0].index,i=e[e.length-1].index,a=[],s=ev(t.groupOffsetTree,o,i),u=0;for(let o of e){let e;(!n||n.end<o.index)&&(n=s.shift(),u=t.groupIndices.indexOf(n.start)),e=o.index===n.start?{type:"group",index:u}:{index:o.index-(u+1)+r,groupIndex:u},a.push({...e,size:o.size,offset:o.offset,originalIndex:o.index,data:o.data})}return a}function e4(e,t,r,n,o,i){let{lastSize:a,lastOffset:s,lastIndex:u}=o,l=0,c=0;if(e.length>0){l=e[0].offset;let t=e[e.length-1];c=t.offset+t.size}let d=r-u,f=l,h=s+d*a+(d-1)*n-c;return{items:e3(e,o,i),topItems:e3(t,o,i),topListHeight:t.reduce((e,t)=>t.size+e,0),offsetTop:l,offsetBottom:h,top:f,bottom:c,totalCount:r,firstItemIndex:i}}function e5(e,t,r,n,o,i){let a=0;if(r.groupIndices.length>0)for(let t of r.groupIndices){if(t-a>=e)break;a++}let s=e+a,u=eU(t,s);return e4(Array.from({length:s}).map((e,t)=>({index:t+u,size:0,offset:0,data:i[t+u]})),[],s,o,r,n)}let e7=H(([{sizes:e,totalCount:t,data:r,firstItemIndex:n,gap:o},i,{visibleRange:a,listBoundary:s,topListHeight:u},{scrolledToInitialItem:l,initialTopMostItemIndex:c},{topListHeight:d},f,{didMount:h},{recalcInProgress:p}])=>{let m=B([]),v=B(0),g=x();w(i.topItemsIndexes,m);let y=O(T(U(h,p,W(a,eG),W(t),W(e),W(c),l,W(m),W(n),W(o),r),F(([e,t,,r,,,,,,,n])=>{let o=n&&n.length!==r;return e&&!t&&!o}),I(([,,[e,t],r,n,o,i,a,s,u,l])=>{let{sizeTree:c,offsetTree:d}=n,f=D(v);if(0===r)return{...e2,totalCount:r};if(0===e&&0===t)return 0===f?{...e2,totalCount:r}:e5(f,o,n,s,u,l||[]);if(eu(c))return f>0?null:e4(function(e,t,r){if(eS(t)){let n=ek(e,t);return[{index:ec(t.groupOffsetTree,n)[0],size:0,offset:0},{index:n,size:0,offset:0,data:r&&r[0]}]}return[{index:e,size:0,offset:0,data:r&&r[0]}]}(eU(o,r),n,l),[],r,u,n,s);let h=[];if(a.length>0){let e=a[0],t=a[a.length-1],r=0;for(let n of ev(c,e,t)){let o=n.value,i=Math.max(n.start,e),a=Math.min(n.end,t);for(let e=i;e<=a;e++)h.push({index:e,size:o,offset:r,data:l&&l[e]}),r+=o}}if(!i)return e4([],h,r,u,n,s);let p=a.length>0?a[a.length-1]+1:0,m=function(e,t,r,n=0){return n>0&&(t=Math.max(t,e[eE(e,n,ew)].offset)),eg(function(e,t,r,n){let o=eE(e,t,n),i=eE(e,r,n,o);return e.slice(o,i+1)}(e,t,r,eA),ex)}(d,e,t,p);if(0===m.length)return null;let g=r-1;return e4(function(e,t){return t(e),e}([],r=>{for(let n of m){let o=n.value,i=o.offset,a=n.start,s=o.size;if(o.offset<e){let t=(a+=Math.floor((e-o.offset+u)/(s+u)))-n.start;i+=t*s+t*u}a<p&&(i+=(p-a)*s,a=p);let c=Math.min(n.end,g);for(let e=a;e<=c&&!(i>=t);e++)r.push({index:e,size:s,offset:i,data:l&&l[e]}),i+=s+u}}),h,r,u,n,s)}),F(e=>null!==e),S()),e2);w(T(r,F(b),I(e=>null==e?void 0:e.length)),t),w(T(y,I(e=>e.topListHeight)),d),w(d,u),w(T(y,I(e=>[e.top,e.bottom])),s),w(T(y,I(e=>e.items)),g);let E=_(T(y,F(({items:e})=>e.length>0),j(t,r),F(([{items:e},t])=>e[e.length-1].originalIndex===t-1),I(([,e,t])=>[e-1,t]),S(eG),I(([e])=>e))),C=_(T(y,P(200),F(({items:e,topItems:t})=>e.length>0&&e[0].originalIndex===t.length),I(({items:e})=>e[0].index),S())),A=_(T(y,F(({items:e})=>e.length>0),I(({items:e})=>{let t=0,r=e.length-1;for(;"group"===e[t].type&&t<r;)t++;for(;"group"===e[r].type&&r>t;)r--;return{startIndex:e[t].index,endIndex:e[r].index}}),S(eJ)));return{listState:y,topItemsIndexes:m,endReached:E,startReached:C,rangeChanged:A,itemsRendered:g,initialItemCount:v,...f}},g(eI,eY,e1,eH,eN,ej,ez,eC),{singleton:!0}),e9=H(([{sizes:e,firstItemIndex:t,data:r,gap:n},{initialTopMostItemIndex:o},{initialItemCount:i,listState:a},{didMount:s}])=>(w(T(s,j(i),F(([,e])=>0!==e),j(o,e,t,n,r),I(([[,e],t,r,n,o,i=[]])=>e5(e,t,r,n,o,i))),a),{}),g(eI,eH,e7,ez),{singleton:!0}),e6=H(([{scrollVelocity:e}])=>{let t=B(!1),r=x(),n=B(!1);return w(T(e,j(n,t,r),F(([e,t])=>!!t),I(([e,t,r,n])=>{let{exit:o,enter:i}=t;if(r){if(o(e,n))return!1}else if(i(e,n))return!0;return r}),S()),t),T(U(t,e,r),j(n))(1,([[e,t,r],n])=>e&&n&&n.change&&n.change(t,r)),{isSeeking:t,scrollSeekConfiguration:n,scrollVelocity:e,scrollSeekRangeChanged:r}},g(ej),{singleton:!0}),e8=H(([{topItemsIndexes:e}])=>{let t=B(0);return w(T(t,F(e=>e>0),I(e=>Array.from({length:e}).map((e,t)=>t))),e),{topItemCount:t}},g(e7)),te=H(([{footerHeight:e,headerHeight:t,fixedHeaderHeight:r,fixedFooterHeight:n},{listState:o}])=>{let i=x(),a=O(T(U(e,n,t,r,o),I(([e,t,r,n,o])=>e+t+r+n+o.offsetBottom+o.bottom)),0);return w(W(a),i),{totalListHeight:a,totalListHeightChanged:i}},g(ei,e7),{singleton:!0});function tt(e){let t,r=!1;return()=>(r||(r=!0,t=e()),t)}let tr=tt(()=>/iP(ad|od|hone)/i.test(navigator.userAgent)&&/WebKit/i.test(navigator.userAgent)),tn=H(([{scrollBy:e,scrollTop:t,deviation:r,scrollingInProgress:n},{isScrolling:o,isAtBottom:i,scrollDirection:a,lastJumpDueToItemResize:s},{listState:u},{beforeUnshiftWith:l,shiftWithOffset:c,sizes:d,gap:f},{log:h},{recalcInProgress:p}])=>{let m=_(T(u,j(s),M(([,e,t,r],[{items:n,totalCount:o,bottom:i,offsetBottom:a},s])=>{let u=i+a,l=0;return t===o&&e.length>0&&n.length>0&&!(0===n[0].originalIndex&&0===e[0].originalIndex)&&0!=(l=u-r)&&(l+=s),[l,n,o,u]},[0,[],0,0]),F(([e])=>0!==e),j(t,a,n,i,h,p),F(([,e,t,r,,,n])=>!n&&!r&&0!==e&&"up"===t),I(([[e],,,,,t])=>(t("Upward scrolling compensation",{amount:e},Y.DEBUG),e))));function v(t){t>0?(e(0,{top:-t,behavior:"auto"}),r(0,0)):(r(0,0),e(0,{top:-t,behavior:"auto"}))}return T(m,j(r,o))(1,([e,t,n])=>{n&&tr()?r(0,t-e):v(-e)}),T(U(O(o,!1),r,p),F(([e,t,r])=>!e&&!r&&0!==t),I(([e,t])=>t),P(1))(1,v),w(T(c,I(e=>({top:-e}))),e),T(l,j(d,f),I(([e,{lastSize:t,groupIndices:r,sizeTree:n},o])=>{if(0===r.length)return e*(t+o);{let i=0,a=el(n,0),s=0,u=0;for(;s<e;){s++,i+=a;let n=r.length===u+1?1/0:r[u+1]-r[u]-1;s+n>e&&(i-=a,n=e-s+1),s+=n,i+=n*(t+o),u++}return i}}))(1,t=>{r(0,t),requestAnimationFrame(()=>{e(0,{top:t}),requestAnimationFrame(()=>{r(0,0),p(0,!1)})})}),{deviation:r}},g(ei,ej,e7,eI,Z,eC)),to=H(([{didMount:e},{scrollTo:t},{listState:r}])=>{let n=B(0);return T(e,j(n),F(([,e])=>0!==e),I(([,e])=>({top:e})))(1,e=>{A(T(r,N(1),F(e=>e.items.length>1)),()=>{requestAnimationFrame(()=>{t(0,e)})})}),{initialScrollTop:n}},g(ez,ei,e7),{singleton:!0}),ti=H(([{viewportHeight:e},{totalListHeight:t}])=>{let r=B(!1),n=O(T(U(r,e,t),F(([e])=>e),I(([,e,t])=>Math.max(0,e-t)),P(0),S()),0);return{alignToBottom:r,paddingTopAddition:n}},g(ei,te),{singleton:!0}),ta=H(([{scrollTo:e,scrollContainerState:t}])=>{let r=x(),n=x(),o=x(),i=B(!1),a=B(void 0);return w(T(U(r,n),I(([{viewportHeight:e,scrollTop:t,scrollHeight:r},{offsetTop:n}])=>({scrollTop:Math.max(0,t-n),scrollHeight:r,viewportHeight:e}))),t),w(T(e,j(n),I(([e,{offsetTop:t}])=>({...e,top:e.top+t}))),o),{useWindowScroll:i,customScrollParent:a,windowScrollContainerState:r,windowViewportRect:n,windowScrollTo:o}},g(ei)),ts=({itemTop:e,itemBottom:t,viewportTop:r,viewportBottom:n,locationParams:{behavior:o,align:i,...a}})=>e<r?{...a,behavior:o,align:null!=i?i:"start"}:t>n?{...a,behavior:o,align:null!=i?i:"end"}:null,tu=H(([{sizes:e,totalCount:t,gap:r},{scrollTop:n,viewportHeight:o,headerHeight:i,fixedHeaderHeight:a,fixedFooterHeight:s,scrollingInProgress:u},{scrollToIndex:l}])=>{let c=x();return w(T(c,j(e,o,t,i,a,s,n),j(r),I(([[e,t,r,n,o,i,a,s],l])=>{let{done:c,behavior:d,align:f,calculateViewLocation:h=ts,...p}=e,m=eT(e,t,n-1),v=eO(m,t.offsetTree,l)+o+i,g=v+ec(t.sizeTree,m)[1],y=h({itemTop:v,itemBottom:g,viewportTop:s+i,viewportBottom:s+r-a,locationParams:{behavior:d,align:f,...p}});return y?c&&A(T(u,F(e=>!1===e),N(D(u)?1:2)),c):c&&c(),y}),F(e=>null!==e)),l),{scrollIntoView:c}},g(eI,ei,eN,e7,Z),{singleton:!0}),tl=H(([{sizes:e,sizeRanges:t},{scrollTop:r,headerHeight:n},{initialTopMostItemIndex:o},{didMount:i},{useWindowScroll:a,windowScrollContainerState:s,windowViewportRect:u}])=>{let l=x(),c=B(void 0),d=B(null),f=B(null);return w(s,d),w(u,f),T(l,j(e,r,a,d,f,n))(1,([e,t,r,n,o,i,a])=>{let s=ef(t.sizeTree).map(({k:e,v:t},r,n)=>{let o=n[r+1];return{startIndex:e,endIndex:o?o.k-1:1/0,size:t}});n&&null!==o&&null!==i&&(r=o.scrollTop-i.offsetTop),e({ranges:s,scrollTop:r-=a})}),w(T(c,F(b),I(tc)),o),w(T(i,j(c),F(([,e])=>void 0!==e),S(),I(([,e])=>e.ranges)),t),{getState:l,restoreStateFrom:c}},g(eI,ei,eH,ez,ta));function tc(e){return{offset:e.scrollTop,index:0,align:"start"}}let td=H(([e,t,r,n,o,i,a,s,u,l])=>({...e,...t,...r,...n,...o,...i,...a,...s,...u,...l}),g(e1,e9,ez,e6,te,to,ti,ta,tu,Z)),tf=H(([{totalCount:e,sizeRanges:t,fixedItemSize:r,defaultItemSize:n,trackItemSizes:o,itemSize:i,data:a,firstItemIndex:s,groupIndices:u,statefulTotalCount:l,gap:c,sizes:d},{initialTopMostItemIndex:f,scrolledToInitialItem:h,initialItemFinalLocationReached:p},m,v,g,{listState:y,topItemsIndexes:b,...E},{scrollToIndex:C},D,{topItemCount:A},{groupCounts:x},B])=>(w(E.rangeChanged,B.scrollSeekRangeChanged),w(T(B.windowViewportRect,I(e=>e.visibleHeight)),m.viewportHeight),{totalCount:e,data:a,firstItemIndex:s,sizeRanges:t,initialTopMostItemIndex:f,scrolledToInitialItem:h,initialItemFinalLocationReached:p,topItemsIndexes:b,topItemCount:A,groupCounts:x,fixedItemHeight:r,defaultItemHeight:n,gap:c,...g,statefulTotalCount:l,listState:y,scrollToIndex:C,trackItemSizes:o,itemSize:i,groupIndices:u,...E,...B,...m,sizes:d,...v}),g(eI,eH,ei,tl,eK,e7,eN,tn,e8,eY,td)),th="-webkit-sticky",tp="sticky",tm=tt(()=>{if("undefined"==typeof document)return tp;let e=document.createElement("div");return e.style.position=th,e.style.position===th?th:tp});function tv(e,t,r){let n=i.useRef(null),o=i.useCallback(r=>{let o,i;if(null===r||!r.offsetParent)return;let a=r.getBoundingClientRect(),s=a.width;if(t){let e=t.getBoundingClientRect(),r=a.top-e.top;o=e.height-Math.max(0,r),i=r+t.scrollTop}else o=window.innerHeight-Math.max(0,a.top),i=a.top+window.pageYOffset;n.current={offsetTop:i,visibleHeight:o,visibleWidth:s},e(n.current)},[e,t]),{callbackRef:a,ref:s}=X(o,!0,r),u=i.useCallback(()=>{o(s.current)},[o,s]);return i.useEffect(()=>{if(!t)return window.addEventListener("scroll",u),window.addEventListener("resize",u),()=>{window.removeEventListener("scroll",u),window.removeEventListener("resize",u)};{t.addEventListener("scroll",u);let e=new ResizeObserver(()=>{requestAnimationFrame(u)});return e.observe(t),()=>{t.removeEventListener("scroll",u),e.unobserve(t)}}},[u,t]),a}let tg=i.createContext(void 0),ty=i.createContext(void 0);function tb(e){return e}let tE=H(()=>{let e=B(e=>`Item ${e}`),t=B(null),r=B(e=>`Group ${e}`),n=B({}),o=B(tb),i=B("div"),a=B(E),s=(e,t=null)=>O(T(n,I(t=>t[e]),S()),t);return{context:t,itemContent:e,groupContent:r,components:n,computeItemKey:o,HeaderFooterTag:i,scrollerRef:a,FooterComponent:s("Footer"),HeaderComponent:s("Header"),TopItemListComponent:s("TopItemList"),ListComponent:s("List","div"),ItemComponent:s("Item","div"),GroupComponent:s("Group","div"),ScrollerComponent:s("Scroller","div"),EmptyPlaceholder:s("EmptyPlaceholder"),ScrollSeekPlaceholder:s("ScrollSeekPlaceholder")}}),tC=H(([e,t])=>({...e,...t}),g(tf,tE)),tD=({height:e})=>(0,h.jsx)("div",{style:{height:e}}),tw={position:tm(),zIndex:1,overflowAnchor:"none"},tA={overflowAnchor:"none"},tx={...tA,display:"inline-block",height:"100%"},tB=i.memo(function({showTopList:e=!1}){let t=tU("listState"),r=tW("sizeRanges"),n=tU("useWindowScroll"),o=tU("customScrollParent"),a=tW("windowScrollContainerState"),s=tW("scrollContainerState"),u=tU("itemContent"),l=tU("context"),c=tU("groupContent"),d=tU("trackItemSizes"),f=tU("itemSize"),p=tU("log"),m=tW("gap"),v=tU("horizontalDirection"),{callbackRef:g}=ee(r,f,d,e?E:o||n?a:s,p,m,o,v,tU("skipAnimationFrameInResizeObserver")),[y,b]=i.useState(0);tH("deviation",e=>{y!==e&&b(e)});let C=tU("EmptyPlaceholder"),D=tU("ScrollSeekPlaceholder")||tD,w=tU("ListComponent"),A=tU("ItemComponent"),x=tU("GroupComponent"),B=tU("computeItemKey"),_=tU("isSeeking"),O=tU("groupIndices").length>0,T=tU("alignToBottom"),k=tU("initialItemFinalLocationReached"),S=e?{}:{boxSizing:"border-box",...v?{whiteSpace:"nowrap",display:"inline-block",height:"100%",paddingLeft:t.offsetTop,paddingRight:t.offsetBottom,marginLeft:0!==y?y:T?"auto":0}:{marginTop:0!==y?y:T?"auto":0,paddingTop:t.offsetTop,paddingBottom:t.offsetBottom},...k?{}:{visibility:"hidden"}};return!e&&0===t.totalCount&&C?(0,h.jsx)(C,{...tS(C,l)}):(0,h.jsx)(w,{...tS(w,l),ref:g,style:S,"data-testid":e?"virtuoso-top-item-list":"virtuoso-item-list",children:(e?t.topItems:t.items).map(e=>{let r=e.originalIndex,n=B(r+t.firstItemIndex,e.data,l);return _?(0,i.createElement)(D,{...tS(D,l),key:n,index:e.index,height:e.size,type:e.type||"item",..."group"===e.type?{}:{groupIndex:e.groupIndex}}):"group"===e.type?(0,i.createElement)(x,{...tS(x,l),key:n,"data-index":r,"data-known-size":e.size,"data-item-index":e.index,style:tw},c(e.index,l)):(0,i.createElement)(A,{...tS(A,l),...tF(A,e.data),key:n,"data-index":r,"data-known-size":e.size,"data-item-index":e.index,"data-item-group-index":e.groupIndex,style:v?tx:tA},O?u(e.index,e.groupIndex,e.data,l):u(e.index,e.data,l))})})}),t_={height:"100%",outline:"none",overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},tO={outline:"none",overflowX:"auto",position:"relative"},tT=e=>({width:"100%",height:"100%",position:"absolute",top:0,...e?{display:"flex",flexDirection:"column"}:{}}),tk={width:"100%",position:tm(),top:0,zIndex:1};function tS(e,t){if("string"!=typeof e)return{context:t}}function tF(e,t){return{item:"string"==typeof e?void 0:t}}let tI=i.memo(function(){let e=tU("HeaderComponent"),t=tW("headerHeight"),r=tU("HeaderFooterTag"),n=Q(i.useMemo(()=>e=>t(er(e,"height")),[t]),!0,tU("skipAnimationFrameInResizeObserver")),o=tU("context");return e?(0,h.jsx)(r,{ref:n,children:(0,h.jsx)(e,{...tS(e,o)})}):null}),tR=i.memo(function(){let e=tU("FooterComponent"),t=tW("footerHeight"),r=tU("HeaderFooterTag"),n=Q(i.useMemo(()=>e=>t(er(e,"height")),[t]),!0,tU("skipAnimationFrameInResizeObserver")),o=tU("context");return e?(0,h.jsx)(r,{ref:n,children:(0,h.jsx)(e,{...tS(e,o)})}):null});function tM({usePublisher:e,useEmitter:t,useEmitterValue:r}){return i.memo(function({style:n,children:o,...i}){let a=e("scrollContainerState"),s=r("ScrollerComponent"),u=e("smoothScrollTargetReached"),l=r("scrollerRef"),c=r("context"),d=r("horizontalDirection")||!1,{scrollerRef:f,scrollByCallback:p,scrollToCallback:m}=eo(a,u,s,l,void 0,d);return t("scrollTo",m),t("scrollBy",p),(0,h.jsx)(s,{ref:f,style:{...d?tO:t_,...n},"data-testid":"virtuoso-scroller","data-virtuoso-scroller":!0,tabIndex:0,...i,...tS(s,c),children:o})})}function tN({usePublisher:e,useEmitter:t,useEmitterValue:r}){return i.memo(function({style:n,children:o,...i}){let a=e("windowScrollContainerState"),s=r("ScrollerComponent"),u=e("smoothScrollTargetReached"),l=r("totalListHeight"),c=r("deviation"),d=r("customScrollParent"),f=r("context"),{scrollerRef:p,scrollByCallback:m,scrollToCallback:v}=eo(a,u,s,E,d);return q(()=>(p.current=d||window,()=>{p.current=null}),[p,d]),t("windowScrollTo",v),t("scrollBy",m),(0,h.jsx)(s,{style:{position:"relative",...n,...0!==l?{height:l+c}:{}},"data-virtuoso-scroller":!0,...i,...tS(s,f),children:o})})}let tP=({children:e})=>{let t=i.useContext(tg),r=tW("viewportHeight"),n=tW("fixedItemHeight"),o=tU("alignToBottom"),a=tU("horizontalDirection"),s=Q(i.useMemo(()=>m(r,e=>er(e,a?"width":"height")),[r,a]),!0,tU("skipAnimationFrameInResizeObserver"));return i.useEffect(()=>{t&&(r(t.viewportHeight),n(t.itemHeight))},[t,r,n]),(0,h.jsx)("div",{style:tT(o),ref:s,"data-viewport-type":"element",children:e})},tL=({children:e})=>{let t=i.useContext(tg),r=tW("windowViewportRect"),n=tW("fixedItemHeight"),o=tv(r,tU("customScrollParent"),tU("skipAnimationFrameInResizeObserver")),a=tU("alignToBottom");return i.useEffect(()=>{t&&(n(t.itemHeight),r({offsetTop:0,visibleHeight:t.viewportHeight,visibleWidth:100}))},[t,r,n]),(0,h.jsx)("div",{ref:o,style:tT(a),"data-viewport-type":"window",children:e})},tj=({children:e})=>{let t=tU("TopItemListComponent")||"div",r=tU("headerHeight"),n={...tk,marginTop:`${r}px`},o=tU("context");return(0,h.jsx)(t,{style:n,...tS(t,o),children:e})},{Component:tz,usePublisher:tW,useEmitterValue:tU,useEmitter:tH}=K(tC,{required:{},optional:{restoreStateFrom:"restoreStateFrom",context:"context",followOutput:"followOutput",itemContent:"itemContent",groupContent:"groupContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",groupCounts:"groupCounts",topItemCount:"topItemCount",firstItemIndex:"firstItemIndex",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"HeaderFooterTag",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",horizontalDirection:"horizontalDirection",skipAnimationFrameInResizeObserver:"skipAnimationFrameInResizeObserver"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy",autoscrollToBottom:"autoscrollToBottom",getState:"getState"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},i.memo(function(e){let t=tU("useWindowScroll"),r=tU("topItemsIndexes").length>0,n=tU("customScrollParent"),o=n||t?tV:t$,i=n||t?tL:tP;return(0,h.jsxs)(o,{...e,children:[r&&(0,h.jsx)(tj,{children:(0,h.jsx)(tB,{showTopList:!0})}),(0,h.jsxs)(i,{children:[(0,h.jsx)(tI,{}),(0,h.jsx)(tB,{}),(0,h.jsx)(tR,{})]})]})})),t$=tM({usePublisher:tW,useEmitterValue:tU,useEmitter:tH}),tV=tN({usePublisher:tW,useEmitterValue:tU,useEmitter:tH}),tK={items:[],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},tq={items:[{index:0}],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},{round:tY,ceil:tG,floor:tJ,min:tZ,max:tX}=Math;function tQ(e,t,r){return Array.from({length:t-e+1}).map((t,n)=>{let o=null===r?null:r[n+e];return{index:n+e,data:o}})}function t0(e,t){return e&&e.column===t.column&&e.row===t.row}function t1(e,t){return e&&e.width===t.width&&e.height===t.height}let t2=H(([{overscan:e,visibleRange:t,listBoundary:r},{scrollTop:n,viewportHeight:o,scrollBy:i,scrollTo:a,smoothScrollTargetReached:s,scrollContainerState:u,footerHeight:l,headerHeight:c},d,f,{propsReady:h,didMount:p},{windowViewportRect:m,useWindowScroll:v,customScrollParent:g,windowScrollContainerState:y,windowScrollTo:b},E])=>{let C=B(0),D=B(0),k=B(tK),M=B({height:0,width:0}),L=B({height:0,width:0}),z=x(),H=x(),$=B(0),V=B(null),K=B({row:0,column:0}),q=x(),Y=x(),G=B(!1),J=B(0),Z=B(!0),X=B(!1),Q=B(!1);T(p,j(J),F(([e,t])=>!!t))(1,()=>{Z(0,!1)}),T(U(p,Z,L,M,J,X),F(([e,t,r,n,,o])=>e&&!t&&0!==r.height&&0!==n.height&&!o))(1,([,,,,e])=>{X(0,!0),eW(1,()=>{z(0,e)}),A(T(n),()=>{r(0,[0,0]),Z(0,!0)})}),w(T(Y,F(e=>null!=e&&e.scrollTop>0),R(0)),D),T(p,j(Y),F(([,e])=>null!=e))(1,([,e])=>{e&&(M(0,e.viewport),L(0,null==e?void 0:e.item),K(0,e.gap),e.scrollTop>0&&(G(0,!0),A(T(n,N(1)),e=>{G(0,!1)}),a(0,{top:e.scrollTop})))}),w(T(M,I(({height:e})=>e)),o),w(T(U(W(M,t1),W(L,t1),W(K,(e,t)=>e&&e.column===t.column&&e.row===t.row),W(n)),I(([e,t,r,n])=>({viewport:e,item:t,gap:r,scrollTop:n}))),q),w(T(U(W(C),t,W(K,t0),W(L,t1),W(M,t1),W(V),W(D),W(G),W(Z),W(J)),F(([,,,,,,,e])=>!e),I(([e,[t,r],n,o,i,a,s,,u,l])=>{let c,d;let{row:f,column:h}=n,{height:p,width:m}=o,{width:v}=i;if(0===s&&(0===e||0===v))return tK;if(0===m){var g;let t=eU(l,e);return g=tQ(t,Math.max(t+s-1,0),a),{...tq,items:g}}let y=t5(v,m,h);u?0===t&&0===r&&s>0?(c=0,d=s-1):(c=y*tJ((t+f)/(p+f)),d=tZ(e-1,tX(d=y*tG((r+f)/(p+f))-1,y-1)),c=tZ(d,tX(0,c))):(c=0,d=-1);let b=tQ(c,d,a),{top:E,bottom:C}=t3(i,n,o,b),D=tG(e/y);return{items:b,offsetTop:E,offsetBottom:D*p+(D-1)*f-C,top:E,bottom:C,itemHeight:p,itemWidth:m}})),k),w(T(V,F(e=>null!==e),I(e=>e.length)),C),w(T(U(M,L,k,K),F(([e,t,{items:r}])=>r.length>0&&0!==t.height&&0!==e.height),I(([e,t,{items:r},n])=>{let{top:o,bottom:i}=t3(e,n,t,r);return[o,i]}),S(eG)),r);let ee=B(!1);w(T(n,j(ee),I(([e,t])=>t||0!==e)),ee);let et=_(T(W(k),F(({items:e})=>e.length>0),j(C,ee),F(([{items:e},t,r])=>r&&e[e.length-1].index===t-1),I(([,e])=>e-1),S())),er=_(T(W(k),F(({items:e})=>e.length>0&&0===e[0].index),R(0),S())),en=_(T(W(k),j(G),F(([{items:e},t])=>e.length>0&&!t),I(([{items:e}])=>({startIndex:e[0].index,endIndex:e[e.length-1].index})),S(eJ),P(0)));w(en,f.scrollSeekRangeChanged),w(T(z,j(M,L,C,K),I(([e,t,r,n,o])=>{let i=eM(e),{align:a,behavior:s,offset:u}=i,l=i.index;"LAST"===l&&(l=n-1);let c=t4(t,o,r,l=tX(0,l,tZ(n-1,l)));return"end"===a?c=tY(c-t.height+r.height):"center"===a&&(c=tY(c-t.height/2+r.height/2)),u&&(c+=u),{top:c,behavior:s}})),a);let eo=O(T(k,I(e=>e.offsetBottom+e.bottom)),0);return w(T(m,I(e=>({width:e.visibleWidth,height:e.visibleHeight}))),M),{data:V,totalCount:C,viewportDimensions:M,itemDimensions:L,scrollTop:n,scrollHeight:H,overscan:e,scrollBy:i,scrollTo:a,scrollToIndex:z,smoothScrollTargetReached:s,windowViewportRect:m,windowScrollTo:b,useWindowScroll:v,customScrollParent:g,windowScrollContainerState:y,deviation:$,scrollContainerState:u,footerHeight:l,headerHeight:c,initialItemCount:D,gap:K,restoreStateFrom:Y,...f,initialTopMostItemIndex:J,horizontalDirection:Q,gridState:k,totalListHeight:eo,...d,startReached:er,endReached:et,rangeChanged:en,stateChanged:q,propsReady:h,stateRestoreInProgress:G,...E}},g(e1,ei,ej,e6,ez,ta,Z));function t3(e,t,r,n){let{height:o}=r;return void 0===o||0===n.length?{top:0,bottom:0}:{top:t4(e,t,r,n[0].index),bottom:t4(e,t,r,n[n.length-1].index)+o}}function t4(e,t,r,n){let o=tJ(n/t5(e.width,r.width,t.column)),i=o*r.height+tX(0,o-1)*t.row;return i>0?i+t.row:i}function t5(e,t,r){return tX(1,tJ((e+r)/(tJ(t)+r)))}let t7=H(()=>{let e=B(e=>`Item ${e}`),t=B({}),r=B(null),n=B("virtuoso-grid-item"),o=B("virtuoso-grid-list"),i=B(tb),a=B("div"),s=B(E),u=(e,r=null)=>O(T(t,I(t=>t[e]),S()),r),l=B(!1),c=B(!1);return w(W(c),l),{readyStateChanged:l,reportReadyState:c,context:r,itemContent:e,components:t,computeItemKey:i,itemClassName:n,listClassName:o,headerFooterTag:a,scrollerRef:s,FooterComponent:u("Footer"),HeaderComponent:u("Header"),ListComponent:u("List","div"),ItemComponent:u("Item","div"),ScrollerComponent:u("Scroller","div"),ScrollSeekPlaceholder:u("ScrollSeekPlaceholder","div")}}),t9=H(([e,t])=>({...e,...t}),g(t2,t7)),t6=i.memo(function(){let e=ri("gridState"),t=ri("listClassName"),r=ri("itemClassName"),n=ri("itemContent"),o=ri("computeItemKey"),a=ri("isSeeking"),s=ro("scrollHeight"),u=ri("ItemComponent"),l=ri("ListComponent"),c=ri("ScrollSeekPlaceholder"),d=ri("context"),f=ro("itemDimensions"),p=ro("gap"),m=ri("log"),v=ri("stateRestoreInProgress"),g=ro("reportReadyState"),y=Q(i.useMemo(()=>e=>{s(e.parentElement.parentElement.scrollHeight);let t=e.firstChild;if(t){let{width:e,height:r}=t.getBoundingClientRect();f({width:e,height:r})}p({row:rl("row-gap",getComputedStyle(e).rowGap,m),column:rl("column-gap",getComputedStyle(e).columnGap,m)})},[s,f,p,m]),!0,!1);return(q(()=>{e.itemHeight>0&&e.itemWidth>0&&g(!0)},[e]),v)?null:(0,h.jsx)(l,{ref:y,className:t,...tS(l,d),style:{paddingTop:e.offsetTop,paddingBottom:e.offsetBottom},"data-testid":"virtuoso-item-list",children:e.items.map(t=>{let s=o(t.index,t.data,d);return a?(0,h.jsx)(c,{...tS(c,d),index:t.index,height:e.itemHeight,width:e.itemWidth},s):(0,i.createElement)(u,{...tS(u,d),className:r,"data-index":t.index,key:s},n(t.index,t.data,d))})})}),t8=i.memo(function(){let e=ri("HeaderComponent"),t=ro("headerHeight"),r=ri("headerFooterTag"),n=Q(i.useMemo(()=>e=>t(er(e,"height")),[t]),!0,!1),o=ri("context");return e?(0,h.jsx)(r,{ref:n,children:(0,h.jsx)(e,{...tS(e,o)})}):null}),re=i.memo(function(){let e=ri("FooterComponent"),t=ro("footerHeight"),r=ri("headerFooterTag"),n=Q(i.useMemo(()=>e=>t(er(e,"height")),[t]),!0,!1),o=ri("context");return e?(0,h.jsx)(r,{ref:n,children:(0,h.jsx)(e,{...tS(e,o)})}):null}),rt=({children:e})=>{let t=i.useContext(ty),r=ro("itemDimensions"),n=ro("viewportDimensions"),o=Q(i.useMemo(()=>e=>{n(e.getBoundingClientRect())},[n]),!0,!1);return i.useEffect(()=>{t&&(n({height:t.viewportHeight,width:t.viewportWidth}),r({height:t.itemHeight,width:t.itemWidth}))},[t,n,r]),(0,h.jsx)("div",{style:tT(!1),ref:o,children:e})},rr=({children:e})=>{let t=i.useContext(ty),r=ro("windowViewportRect"),n=ro("itemDimensions"),o=tv(r,ri("customScrollParent"),!1);return i.useEffect(()=>{t&&(n({height:t.itemHeight,width:t.itemWidth}),r({offsetTop:0,visibleHeight:t.viewportHeight,visibleWidth:t.viewportWidth}))},[t,r,n]),(0,h.jsx)("div",{ref:o,style:tT(!1),children:e})},{Component:rn,usePublisher:ro,useEmitterValue:ri,useEmitter:ra}=K(t9,{optional:{context:"context",totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",data:"data",initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",restoreStateFrom:"restoreStateFrom",initialTopMostItemIndex:"initialTopMostItemIndex"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",stateChanged:"stateChanged",readyStateChanged:"readyStateChanged"}},i.memo(function({...e}){let t=ri("useWindowScroll"),r=ri("customScrollParent"),n=r||t?ru:rs,o=r||t?rr:rt;return(0,h.jsx)(n,{...e,children:(0,h.jsxs)(o,{children:[(0,h.jsx)(t8,{}),(0,h.jsx)(t6,{}),(0,h.jsx)(re,{})]})})})),rs=tM({usePublisher:ro,useEmitterValue:ri,useEmitter:ra}),ru=tN({usePublisher:ro,useEmitterValue:ri,useEmitter:ra});function rl(e,t,r){return("normal"===t||(null==t?void 0:t.endsWith("px"))||r(`${e} was not resolved to pixel value correctly`,t,Y.WARN),"normal"===t)?0:parseInt(null!=t?t:"0",10)}let rc=H(()=>{let e=B(e=>(0,h.jsxs)("td",{children:["Item $",e]})),t=B(null),r=B(null),n=B(null),o=B({}),i=B(tb),a=B(E),s=(e,t=null)=>O(T(o,I(t=>t[e]),S()),t);return{context:t,itemContent:e,fixedHeaderContent:r,fixedFooterContent:n,components:o,computeItemKey:i,scrollerRef:a,TableComponent:s("Table","table"),TableHeadComponent:s("TableHead","thead"),TableFooterComponent:s("TableFoot","tfoot"),TableBodyComponent:s("TableBody","tbody"),TableRowComponent:s("TableRow","tr"),ScrollerComponent:s("Scroller","div"),EmptyPlaceholder:s("EmptyPlaceholder"),ScrollSeekPlaceholder:s("ScrollSeekPlaceholder"),FillerRow:s("FillerRow")}}),rd=H(([e,t])=>({...e,...t}),g(tf,rc)),rf=({height:e})=>(0,h.jsx)("tr",{children:(0,h.jsx)("td",{style:{height:e}})}),rh=({height:e})=>(0,h.jsx)("tr",{children:(0,h.jsx)("td",{style:{height:e,padding:0,border:0}})}),rp={overflowAnchor:"none"},rm=i.memo(function(){let e=rE("listState"),t=rb("sizeRanges"),r=rE("useWindowScroll"),n=rE("customScrollParent"),o=rb("windowScrollContainerState"),a=rb("scrollContainerState"),s=rE("itemContent"),u=rE("trackItemSizes"),{callbackRef:l,ref:c}=ee(t,rE("itemSize"),u,n||r?o:a,rE("log"),void 0,n,!1,rE("skipAnimationFrameInResizeObserver")),[d,f]=i.useState(0);rC("deviation",e=>{d!==e&&(c.current.style.marginTop=`${e}px`,f(e))});let p=rE("EmptyPlaceholder"),m=rE("ScrollSeekPlaceholder")||rf,v=rE("FillerRow")||rh,g=rE("TableBodyComponent"),y=rE("TableRowComponent"),b=rE("computeItemKey"),E=rE("isSeeking"),C=rE("paddingTopAddition"),D=rE("firstItemIndex"),w=rE("statefulTotalCount"),A=rE("context");if(0===w&&p)return(0,h.jsx)(p,{...tS(p,A)});let x=e.offsetTop+C+d,B=e.offsetBottom,_=x>0?(0,h.jsx)(v,{height:x,context:A},"padding-top"):null,O=B>0?(0,h.jsx)(v,{height:B,context:A},"padding-bottom"):null,T=e.items.map(e=>{let t=e.originalIndex,r=b(t+D,e.data,A);return E?(0,i.createElement)(m,{...tS(m,A),key:r,index:e.index,height:e.size,type:e.type||"item"}):(0,i.createElement)(y,{...tS(y,A),...tF(y,e.data),key:r,"data-index":t,"data-known-size":e.size,"data-item-index":e.index,style:rp},s(e.index,e.data,A))});return(0,h.jsxs)(g,{ref:l,"data-testid":"virtuoso-item-list",...tS(g,A),children:[_,T,O]})}),rv=({children:e})=>{let t=i.useContext(tg),r=rb("viewportHeight"),n=rb("fixedItemHeight"),o=Q(i.useMemo(()=>m(r,e=>er(e,"height")),[r]),!0,rE("skipAnimationFrameInResizeObserver"));return i.useEffect(()=>{t&&(r(t.viewportHeight),n(t.itemHeight))},[t,r,n]),(0,h.jsx)("div",{style:tT(!1),ref:o,"data-viewport-type":"element",children:e})},rg=({children:e})=>{let t=i.useContext(tg),r=rb("windowViewportRect"),n=rb("fixedItemHeight"),o=tv(r,rE("customScrollParent"),rE("skipAnimationFrameInResizeObserver"));return i.useEffect(()=>{t&&(n(t.itemHeight),r({offsetTop:0,visibleHeight:t.viewportHeight,visibleWidth:100}))},[t,r,n]),(0,h.jsx)("div",{ref:o,style:tT(!1),"data-viewport-type":"window",children:e})},{Component:ry,usePublisher:rb,useEmitterValue:rE,useEmitter:rC}=K(rd,{required:{},optional:{restoreStateFrom:"restoreStateFrom",context:"context",followOutput:"followOutput",firstItemIndex:"firstItemIndex",itemContent:"itemContent",fixedHeaderContent:"fixedHeaderContent",fixedFooterContent:"fixedFooterContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy",getState:"getState"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},i.memo(function(e){let t=rE("useWindowScroll"),r=rE("customScrollParent"),n=rb("fixedHeaderHeight"),o=rb("fixedFooterHeight"),a=rE("fixedHeaderContent"),s=rE("fixedFooterContent"),u=rE("context"),l=Q(i.useMemo(()=>m(n,e=>er(e,"height")),[n]),!0,rE("skipAnimationFrameInResizeObserver")),c=Q(i.useMemo(()=>m(o,e=>er(e,"height")),[o]),!0,rE("skipAnimationFrameInResizeObserver")),d=r||t?rw:rD,f=r||t?rg:rv,p=rE("TableComponent"),v=rE("TableHeadComponent"),g=rE("TableFooterComponent"),y=a?(0,h.jsx)(v,{style:{zIndex:2,position:"sticky",top:0},ref:l,...tS(v,u),children:a()},"TableHead"):null,b=s?(0,h.jsx)(g,{style:{zIndex:1,position:"sticky",bottom:0},ref:c,...tS(g,u),children:s()},"TableFoot"):null;return(0,h.jsx)(d,{...e,children:(0,h.jsx)(f,{children:(0,h.jsxs)(p,{style:{borderSpacing:0,overflowAnchor:"none"},...tS(p,u),children:[y,(0,h.jsx)(rm,{},"TableBody"),b]})})})})),rD=tM({usePublisher:rb,useEmitterValue:rE,useEmitter:rC}),rw=tN({usePublisher:rb,useEmitterValue:rE,useEmitter:rC});var rA=r(32829),rx=r(98175);let rB=i["useTransition".toString()]??function(){return[!1,(0,i.useCallback)(e=>e(),[])]},r_={position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"};var rO=r(22595),rT=r(90193);let rk=(0,i.createContext)(null);function rS(){let e=(0,i.useContext)(rk);return(0,rT.nn)(e,"EmojiPicker.Root is missing from the React tree.")}var rF=r(57631);let rI="https://cdn.jsdelivr.net/npm/emojibase-data@15.3.0",rR=e=>`${rI}/${e}/data.json`,rM=e=>`${rI}/${e}/messages.json`,rN=["bn","da","de","en","en-gb","es","es-mx","et","fi","fr","hi","hu","it","ja","ko","lt","ms","nb","nl","pl","pt","ru","sv","th","uk","zh","zh-hant"],rP=e=>`lb-emoji-data-${e}`,rL=e=>`lb-emoji-metadata-${e}`,rj="lb-emoji-metadata";function rz(e,t){let r=e.getItem(t);return r?JSON.parse(r):null}function rW(e,t,r){e.setItem(t,JSON.stringify(r))}async function rU(e){try{return(await fetch(e,{method:"HEAD"})).headers.get("etag")}catch(e){return null}}async function rH(e){let[{emojis:t,emojisEtag:r},{messages:n,messagesEtag:o}]=await Promise.all([fetch(rR(e)).then(async e=>({emojis:await e.json(),emojisEtag:e.headers.get("etag")})),fetch(rM(e)).then(async e=>({messages:await e.json(),messagesEtag:e.headers.get("etag")}))]);return{emojis:t,messages:n,emojisEtag:r,messagesEtag:o}}async function r$(e){let[t,r]=await Promise.all([rU(rR(e)),rU(rM(e))]);return{emojisEtag:t,messagesEtag:r}}async function rV(e){let{emojis:t,emojisEtag:r,messages:n,messagesEtag:o}=await rH(e),i=n.subgroups.find(e=>"subdivision-flag"===e.key),a=n.groups.filter(e=>"component"!==e.key),s=t.filter(e=>"group"in e),u=a.map(e=>({key:e.order,name:(0,rF.k)(e.message)})),l=n.skinTones.map(e=>({key:e.key,name:(0,rF.k)(e.message)})),c={emojis:s.map(e=>{let t={emoji:e.emoji,category:e.group,version:e.version,name:(0,rF.k)(e.label),tags:e.tags};return i&&e.subgroup===i.order&&(t.countryFlag=!0),t}),categories:u,skinTones:l};return rW(localStorage,rP(e),c),rW(localStorage,rL(e),{emojisEtag:r,messagesEtag:o}),c}function rK(e,t){e.clearRect(0,0,40,25),e.fillStyle="#f00",e.fillText(t,0,22),e.fillStyle="#00f",e.fillText(t,20,22);let r=e.getImageData(0,0,20,25).data,n=r.length,o=0;for(;o<n&&!r[o+3];o+=4);if(o>=n)return!1;let i=20+o/4%20,a=Math.floor(o/4/20),s=e.getImageData(i,a,1,1).data;return r[o]===s[0]&&r[o+2]===s[2]&&!(e.measureText(t).width>=20)}async function rq(e){let t;let r=rN.includes(e)?e:"en",n=rz(sessionStorage,rj),o=rz(localStorage,rP(r));if(o){if(n)t=o;else{let{emojisEtag:e,messagesEtag:n}=await r$(r),i=rz(localStorage,rL(r));t=i&&e===i.emojisEtag&&n===i.messagesEtag?o:await rV(r)}}else t=await rV(r);let i=n??function(e){let t=new Map;for(let r of e)t.has(r.version)||t.set(r.version,r.emoji);let r=[...t.keys()].sort((e,t)=>t-e),n=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});if(!n)return{emojiVersion:r[0],countryFlags:!0};n.font=`${Math.floor(12.5)}px ${function(){try{let e=document.createElement("span");e.style.display="none",e.dataset.emoji="",document.body.appendChild(e);let t=window.getComputedStyle(e).fontFamily;return document.body.removeChild(e),t}catch{return s.rQ}}()}`,n.textBaseline="top",n.canvas.width=40,n.canvas.height=25;let o=rK(n,"\uD83C\uDDEB\uD83C\uDDF7");for(let e of r)if(rK(n,t.get(e)))return{emojiVersion:e,countryFlags:o};return{emojiVersion:r[0],countryFlags:o}}(t.emojis);return rW(sessionStorage,rj,i),{emojis:t.emojis.filter(e=>{let t=e.version<=i.emojiVersion;return e.countryFlag?t&&i.countryFlags:t}),categories:t.categories,skinTones:t.skinTones}}function rY({columns:e=10,locale:t="en",onEmojiSelect:r,children:n}){let o=(0,i.useRef)(),a=(0,i.useRef)(""),[,s]=rB(),[u,l]=(0,i.useState)(),[c,d]=(0,i.useState)(),[f,h]=(0,i.useState)(0),[p,m]=(0,i.useState)(0),[v,g]=(0,i.useState)("none"),y=(0,i.useCallback)(()=>{if(r){let e=u?.rows[p]?.[f];e&&r(e.emoji)}},[u?.rows,r,f,p]),b=(0,i.useCallback)(()=>{h(0),m(0)},[]),E=(0,i.useCallback)((e,t)=>{g("pointer"),h(e),m(t)},[]),C=(0,i.useCallback)((e,t)=>{if(u){if(t.preventDefault(),"none"===v){g("keyboard");return}switch(g("keyboard"),e){case"left":if(0===f){let e=p-1,t=u.rows[e];t&&(m(e),h(t.length-1))}else h(f-1);break;case"right":if(f===u.rows[p].length-1){let e=p+1;u.rows[e]&&(m(e),h(0))}else h(f+1);break;case"up":{let e=u.rows[p-1];e&&(m(p-1),e[f]||h(e.length-1));break}case"down":{let e=u.rows[p+1];e&&(m(p+1),e[f]||h(e.length-1))}}}},[u,v,f,p]),D=(0,i.useCallback)(()=>{o.current&&s(()=>{l(()=>{if(o.current)return function(e,t,r){let n=0,o=[],i=e.map((e,t)=>({...e,index:t})),a=[],s=[],u=[];for(let e of t.map(e=>({...e,emojis:i.filter(t=>t.category===e.key)})).filter(e=>e.emojis.length>0)){let t=(0,rT.yo)(e.emojis,r),i=n+t.length;o.push(...t),u.push(e.name),a.push(t.length),s.push(function(e,t){let r=[];for(let n=e;n<=t;n++)r.push(n);return r}(n,i-1)),n=i}return{count:e.length,rows:o,categories:u,categoriesRowCounts:a,categoriesRowIndices:s}}(function(e,t){if(!t)return e;let r=t.toLowerCase().trim();return e.filter(e=>e.name.toLowerCase().includes(r)||e.tags?.some(e=>e.toLowerCase().includes(r)))}(o.current.emojis,a.current),o.current.categories,e)}),b()})},[e,b]),w=(0,i.useCallback)(e=>{a.current=e,D()},[D]);return(0,i.useCallback)(async e=>{try{o.current=await rq(e),D()}catch(e){d(e)}},[D]),i.createElement(rk.Provider,{value:{data:u,error:c,isLoading:!u&&!c,columns:e,onSearch:w,onEmojiSelect:r,selectCurrentEmoji:y,selectedRowIndex:p,selectedColumnIndex:f,moveSelection:C,setPointerSelection:E,interaction:v,setInteraction:g}},n)}let rG=(0,i.forwardRef)(({asChild:e,value:t,defaultValue:r,onChange:n,...o},a)=>{let s=e?f.g7:"input",{onSearch:u,selectCurrentEmoji:l,moveSelection:c,interaction:d,setInteraction:h}=rS(),p=(0,i.useCallback)(e=>{if(n?.(e),e.isDefaultPrevented())return;let t=e.target.value;h(t?"keyboard":"none"),u(t)},[n,u,h]),m=(0,i.useCallback)(e=>{!e.isDefaultPrevented()&&((0,rA.o)(e,"ArrowLeft")?c("left",e):(0,rA.o)(e,"ArrowRight")?c("right",e):(0,rA.o)(e,"ArrowUp")?c("up",e):(0,rA.o)(e,"ArrowDown")?c("down",e):(0,rA.o)(e,"Enter")&&"none"!==d&&(e.preventDefault(),l()))},[d,c,l]);return(0,i.useEffect)(()=>{u(t?String(t):r?String(r):"")},[]),i.createElement(s,{type:"search",value:t,defaultValue:r,onChange:p,onKeyDown:m,...o,ref:a})}),rJ={CategoryHeader:({category:e,...t})=>i.createElement("div",{...t},e),Row:({children:e,attributes:t,...r})=>i.createElement("div",{...r},e),Emoji:({emoji:e,...t})=>i.createElement("button",{...t},i.createElement(rO.d,{emoji:e})),Loading:e=>i.createElement("div",{...e}),Empty:e=>i.createElement("div",{...e}),Grid:e=>i.createElement("div",{...e}),Error:({error:e,...t})=>i.createElement("div",{...t})},rZ={rowIndex:-1,categoryRowIndex:-1,categoryRowsCount:0},rX=(0,i.forwardRef)(({children:e,...t},r)=>i.createElement("div",{...t,tabIndex:-1,"data-testid":void 0,ref:r},e)),rQ=(0,i.forwardRef)(({children:e,...t},r)=>i.createElement("div",{...t,"data-testid":void 0,ref:r},e)),r0=(0,i.forwardRef)(({components:e,asChild:t,...r},n)=>{let o=t?f.g7:"div",a=(0,i.useRef)(null),s=(0,i.useRef)(null),u=(0,i.useRef)(0),l=(0,i.useRef)(0),c=(0,i.useRef)(0),{data:d,error:h,isLoading:p,columns:m,onEmojiSelect:v,selectedColumnIndex:g,selectedRowIndex:y,setPointerSelection:b,interaction:E,setInteraction:C}=rS(),D=(0,i.useMemo)(()=>d?.rows[y]?.[g],[d?.rows,g,y]),{Loading:w,Empty:A,Error:x,CategoryHeader:B,Grid:_,Row:O,Emoji:T}=(0,i.useMemo)(()=>({...rJ,...e}),[e]),k=(0,i.useMemo)(()=>(0,i.forwardRef)(({children:e,...t},r)=>i.createElement("div",{role:"grid","aria-colcount":m,...t,"data-testid":void 0,ref:r},e)),[m]),S=(0,i.useMemo)(()=>Array(m).fill("\uD83C\uDF2B️"),[m]),F=(0,i.useCallback)(e=>{e.preventDefault()},[]),I=(0,i.useCallback)(()=>{"pointer"===E&&C("none")},[E,C]);(0,rx.b)(()=>{if(!s.current)return;let e=s.current.childNodes[0],t=s.current.childNodes[1];if(e instanceof HTMLElement){let t=window.getComputedStyle(e);u.current=parseFloat(t.scrollMarginTop),l.current=parseFloat(t.scrollMarginBottom)}t instanceof HTMLElement&&(c.current=t.offsetHeight)},[]);let R=(0,i.useCallback)(({itemTop:e,itemBottom:t,viewportTop:r,viewportBottom:n,locationParams:{behavior:o,align:i,...a}})=>e-(c.current+u.current)<r?{...a,behavior:o,align:i??"start"}:t>n?{...a,behavior:o,align:i??"end",offset:l.current}:null,[]);return(0,i.useEffect)(()=>{"keyboard"===E&&a.current?.scrollIntoView({index:y,behavior:"auto",calculateViewLocation:R})},[E,y,R]),i.createElement(o,{...r,ref:n},i.createElement("div",{style:{visibility:"hidden",height:0},ref:s},i.createElement(O,{attributes:rZ},S.map((e,t)=>i.createElement(T,{emoji:e,key:t}))),i.createElement(B,{category:"Category"})),p?i.createElement(w,null):h?i.createElement(x,{error:h}):0===d.count?i.createElement(A,null):i.createElement(_,null,i.createElement(tz,{ref:a,components:{Scroller:rX,List:k,TopItemList:rQ},groupCounts:d.categoriesRowCounts,groupContent:e=>i.createElement(B,{category:d.categories[e]}),itemContent:(e,t)=>{let r=d.categoriesRowIndices[t].indexOf(e),n=d.categoriesRowCounts[t];return i.createElement(O,{attributes:{rowIndex:e,categoryRowIndex:r,categoryRowsCount:n}},d.rows[e].map((t,r)=>{let n="none"!==E&&g===r&&y===e;return i.createElement(T,{key:t.emoji,role:"gridcell","aria-colindex":r,"aria-selected":n||void 0,"data-selected":n||void 0,onMouseDown:F,tabIndex:-1,onPointerEnter:()=>{b(r,e)},onPointerLeave:I,onClick:e=>{v?.(t.emoji),e.stopPropagation()},emoji:t.emoji})}))}})),D&&"none"!==E&&i.createElement("div",{"aria-live":"polite",style:r_},D.name))});var r1=r(56714),r2=r(17019);function r3({className:e,...t}){return i.createElement("div",{className:(0,r1.A)("lb-loading lb-emoji-picker-loading",e),...t},i.createElement(c.L,null))}function r4({className:e,...t}){let r=(0,d.QG)();return i.createElement("div",{className:(0,r1.A)("lb-empty lb-emoji-picker-empty",e),...t},r.EMOJI_PICKER_EMPTY)}function r5({error:e,className:t,...r}){let n=(0,d.QG)();return i.createElement("div",{className:(0,r1.A)("lb-error lb-emoji-picker-error",t),...r},n.EMOJI_PICKER_ERROR(e))}function r7({category:e,className:t,...r}){return i.createElement("div",{className:(0,r1.A)("lb-emoji-picker-category-header",t),...r},i.createElement("span",{className:"lb-emoji-picker-category-header-title"},e))}function r9({children:e,className:t,...r}){return i.createElement("div",{className:(0,r1.A)("lb-emoji-picker-grid",t),...r},e)}function r6({attributes:e,children:t,className:r,...n}){let o=(0,i.useMemo)(()=>0===e.categoryRowIndex,[e.categoryRowIndex]),a=(0,i.useMemo)(()=>e.categoryRowIndex===e.categoryRowsCount-1,[e.categoryRowIndex,e.categoryRowsCount]);return i.createElement("div",{className:(0,r1.A)("lb-emoji-picker-row",r),"data-first":o?"":void 0,"data-last":a?"":void 0,...n},t)}function r8({emoji:e,className:t,...r}){return i.createElement("button",{className:(0,r1.A)("lb-emoji-picker-emoji",t),...r},i.createElement(r2.d,{emoji:e}))}let ne=(0,i.forwardRef)(({onEmojiSelect:e,onOpenChange:t,children:r,className:n,...u},c)=>{let[f,h]=(0,i.useState)(!1),{portalContainer:p}=(0,a.T)(),m=(0,d.QG)(),v=(0,i.useCallback)(e=>{h(e),t?.(e)},[t]),g=(0,i.useCallback)(t=>{h(!1),e?.(t)},[e]);return i.createElement(o.fC,{open:f,onOpenChange:v},r,i.createElement(o.h_,{container:p},i.createElement(o.VY,{side:"top",align:"center",sideOffset:s.v0,collisionPadding:s.rV,className:(0,r1.A)("lb-root lb-portal lb-elevation lb-emoji-picker",n),...u,ref:c},i.createElement(rY,{onEmojiSelect:g,locale:m.locale},i.createElement("div",{className:"lb-emoji-picker-header"},i.createElement("div",{className:"lb-emoji-picker-search-container"},i.createElement(rG,{className:"lb-emoji-picker-search",placeholder:m.EMOJI_PICKER_SEARCH_PLACEHOLDER,autoFocus:!0}),i.createElement(l,{className:"lb-emoji-picker-search-icon"}))),i.createElement(r0,{className:"lb-emoji-picker-content",components:{Loading:r3,Empty:r4,Error:r5,CategoryHeader:r7,Grid:r9,Row:r6,Emoji:r8}})))))})},15874:(e,t,r)=>{"use strict";r.d(t,{JO:()=>i});var n=r(28964),o=r(56714);function i({children:e,className:t,...r}){return n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:20,viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",role:"presentation",className:(0,o.A)("lb-icon",t),...r},e)}},42917:(e,t,r)=>{"use strict";r.d(t,{a:()=>u});var n=r(69008),o=r(28964),i=r(64761),a=r(56714),s=r(7665);let u=(0,o.forwardRef)(({values:e,formatRemaining:t,truncate:r,locale:u,className:l,asChild:c,...d},f)=>{let h=c?n.g7:"span",p=(0,i.QG)(),m=t??p.LIST_REMAINING,v=(0,o.useMemo)(()=>{let t=r&&r<e.length-1?[...e.slice(0,r),m(e.length-r)]:[...e],n=Array(t.length).fill(".");return(0,s.XE)(u).formatToParts(n).map(e=>"element"===e.type?t.shift():e.value)},[m,u,r,e]);return o.createElement(h,{className:(0,a.A)("lb-list",l),...d,ref:f},v)})},11265:(e,t,r)=>{"use strict";r.d(t,{mK:()=>d,u:()=>c,vw:()=>f});var n=r(20941),o=r(28964),i=r(92257),a=r(30662),s=r(56714),u=r(25706);let l={alt:()=>({title:"Alt",key:"⌥"}),mod:()=>(0,u.m)()?{title:"Command",key:"⌘"}:{title:"Ctrl",key:"⌃"},shift:()=>({title:"Shift",key:"⇧"}),enter:()=>({title:"Enter",key:"⏎"})},c=(0,o.forwardRef)(({children:e,content:t,multiline:r,className:u,...l},c)=>{let{portalContainer:d}=(0,i.T)();return o.createElement(n.fC,{disableHoverableContent:!0},o.createElement(n.xz,{asChild:!0,ref:c},e),o.createElement(n.h_,{container:d},o.createElement(n.VY,{className:(0,s.A)("lb-root lb-portal lb-tooltip",r&&"lb-tooltip:multiline",u),side:"top",align:"center",sideOffset:a.v0,collisionPadding:a.rV,...l},t)))}),d=(0,o.forwardRef)(({children:e,content:t,shortcut:r,...n},i)=>o.createElement(c,{content:o.createElement(o.Fragment,null,t,r&&o.createElement("kbd",{className:"lb-tooltip-shortcut"},r)),...n,ref:i},e));function f({name:e,...t}){let{title:r,key:n}=(0,o.useMemo)(()=>l[e]?.(),[e]);return o.createElement("abbr",{title:r,...t},n)}},73198:(e,t,r)=>{"use strict";r.d(t,{n:()=>u});var n=r(44706),o=r(28964),i=r(64761),a=r(23176),s=r(56714);function u({userId:e,replaceSelf:t,className:r,...u}){let l=(0,a.d)(),{user:c,isLoading:d}=(0,n.qf)(e),f=(0,i.QG)(),h=(0,o.useMemo)(()=>t&&l===e?f.USER_SELF:c?.name??f.USER_UNKNOWN,[t,l,e,f.USER_SELF,f.USER_UNKNOWN,c?.name]);return o.createElement("span",{className:(0,s.A)("lb-name lb-user",r),"data-loading":d?"":void 0,...u},d?null:h)}},92257:(e,t,r)=>{"use strict";r.d(t,{T:()=>i});var n=r(28964);let o=(0,n.createContext)({});function i(){return(0,n.useContext)(o)}},30662:(e,t,r)=>{"use strict";r.d(t,{rQ:()=>i,rV:()=>o,v0:()=>n});let n=6,o=10,i="'Apple Color Emoji', 'Noto Color Emoji', 'Twemoji Mozilla', 'Android Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', EmojiSymbols, sans-serif"},11831:(e,t,r)=>{"use strict";r.d(t,{n:()=>i});var n=r(28964),o=r(15874);function i(e){return n.createElement(o.JO,{...e},n.createElement("path",{d:"M16 6L8 14L4 10"}))}},95495:(e,t,r)=>{"use strict";r.d(t,{a:()=>i});var n=r(28964),o=r(15874);function i(e){return n.createElement(o.JO,{...e},n.createElement("path",{d:"M15 5L5 15"}),n.createElement("path",{d:"M5 5L15 15"}))}},11183:(e,t,r)=>{"use strict";r.d(t,{p:()=>i});var n=r(28964),o=r(15874);function i(e){return n.createElement(o.JO,{...e},n.createElement("path",{d:"M4.5 6.5h11M14 6.5V14a1.5 1.5 0 0 1-1.5 1.5h-5A1.5 1.5 0 0 1 6 14V6.5M7.5 6.5V5a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1v1.5"}))}},67914:(e,t,r)=>{"use strict";r.d(t,{w:()=>i});var n=r(28964),o=r(15874);function i(e){return n.createElement(o.JO,{fill:"currentColor",...e},n.createElement("circle",{cx:5,cy:10,r:.75}),n.createElement("circle",{cx:10,cy:10,r:.75}),n.createElement("circle",{cx:15,cy:10,r:.75}))}},96054:(e,t,r)=>{"use strict";r.d(t,{L:()=>i});var n=r(28964),o=r(15874);function i(e){return n.createElement(o.JO,{...e},n.createElement("path",{d:"M3 10a7 7 0 0 1 7-7",className:"lb-icon-spinner"}))}},64761:(e,t,r)=>{"use strict";r.d(t,{QG:()=>u});var n=r(28964),o=r(17019);function i(e,t,r){return 1===e?t:r??`${t}s`}let a={locale:"en",dir:"ltr",USER_SELF:"you",USER_UNKNOWN:"Anonymous",LIST_REMAINING:e=>`${e} more`,LIST_REMAINING_USERS:e=>`${e} ${i(e,"other")}`,LIST_REMAINING_COMMENTS:e=>`${e} more ${i(e,"comment")}`,EMOJI_PICKER_SEARCH_PLACEHOLDER:"Search…",EMOJI_PICKER_EMPTY:"No emoji found.",EMOJI_PICKER_ERROR:()=>"There was an error while getting the list of emoji.",ATTACHMENT_TOO_LARGE:e=>e?`The file is larger than ${e}`:"The file is too large",ATTACHMENT_ERROR:()=>"The file couldn’t be uploaded.",COMPOSER_INSERT_MENTION:"Mention someone",COMPOSER_INSERT_EMOJI:"Add emoji",COMPOSER_ATTACH_FILES:"Attach files",COMPOSER_REMOVE_ATTACHMENT:"Remove attachment",COMPOSER_PLACEHOLDER:"Write a comment…",COMPOSER_SEND:"Send",COMMENT_EDITED:"(edited)",COMMENT_DELETED:"This comment has been deleted.",COMMENT_MORE:"More",COMMENT_EDIT:"Edit comment",COMMENT_EDIT_COMPOSER_PLACEHOLDER:"Edit comment…",COMMENT_EDIT_COMPOSER_CANCEL:"Cancel",COMMENT_EDIT_COMPOSER_SAVE:"Save",COMMENT_DELETE:"Delete comment",COMMENT_DELETE_ATTACHMENT:"Delete attachment",COMMENT_ADD_REACTION:"Add reaction",COMMENT_REACTION_LIST:(e,t)=>n.createElement(n.Fragment,null,e," reacted with ",n.createElement(o.d,{emoji:t})),COMMENT_REACTION_DESCRIPTION:(e,t)=>`${t} ${i(t,"reaction")}, react with ${e}`,THREAD_RESOLVE:"Resolve thread",THREAD_UNRESOLVE:"Re-open thread",THREAD_NEW_INDICATOR:"New",THREAD_NEW_INDICATOR_DESCRIPTION:"New comments",THREAD_COMPOSER_PLACEHOLDER:"Reply to thread…",THREAD_COMPOSER_SEND:"Reply",INBOX_NOTIFICATION_MORE:"More",INBOX_NOTIFICATION_MARK_AS_READ:"Mark as read",INBOX_NOTIFICATION_DELETE:"Delete notification",INBOX_NOTIFICATION_THREAD_COMMENTS_LIST:(e,t)=>n.createElement(n.Fragment,null,e," commented",t?n.createElement(n.Fragment,null," in ",t):n.createElement(n.Fragment,null," in a thread")),INBOX_NOTIFICATION_THREAD_MENTION:(e,t)=>n.createElement(n.Fragment,null,e," mentioned you",t?n.createElement(n.Fragment,null," in ",t):null),INBOX_NOTIFICATION_TEXT_MENTION:(e,t)=>n.createElement(n.Fragment,null,e," mentioned you",t?n.createElement(n.Fragment,null," in ",t):null),HISTORY_VERSION_PREVIEW_AUTHORS_LIST:e=>n.createElement(n.Fragment,null,"Edits from ",e),HISTORY_VERSION_PREVIEW_RESTORE:"Restore",HISTORY_VERSION_PREVIEW_EMPTY:"No content.",HISTORY_VERSION_PREVIEW_ERROR:()=>"There was an error while getting this version."},s=(0,n.createContext)(void 0);function u(e){let t=(0,n.useContext)(s);return(0,n.useMemo)(()=>({...a,...t,...e}),[t,e])}},45045:(e,t,r)=>{"use strict";r.d(t,{pf:()=>s,rU:()=>u,uT:()=>c});var n=r(69008),o=r(28964),i=r(78709),a=r(78390);let s=(0,o.forwardRef)(({children:e,asChild:t,...r},i)=>{let a=t?n.g7:"span";return o.createElement(a,{...r,ref:i},e)}),u=(0,o.forwardRef)(({children:e,asChild:t,...r},i)=>{let a=t?n.g7:"a";return o.createElement(a,{target:"_blank",rel:"noopener noreferrer nofollow",...r,ref:i},e)}),l={Mention:({userId:e})=>o.createElement(s,null,i.$S,e),Link:({href:e,children:t})=>o.createElement(u,{href:e},t)},c=(0,o.forwardRef)(({body:e,components:t,style:r,asChild:i,...s},u)=>{let c=i?n.g7:"div",{Mention:d,Link:f}=(0,o.useMemo)(()=>({...l,...t}),[t]);return e&&e?.content?o.createElement(c,{...s,style:{whiteSpace:"break-spaces",...r},ref:u},e.content.map((e,t)=>"paragraph"===e.type?o.createElement("p",{key:t,style:{minHeight:"1lh"}},e.children.map((e,t)=>{if((0,a.SA)(e))return e.id?o.createElement(d,{userId:e.id,key:t}):null;if((0,a.zq)(e)){let r=(0,a.BY)(e.url)??e.url;return o.createElement(f,{href:r,key:t},e.text??e.url)}let r=e.text;return e.bold&&(r=o.createElement("strong",{key:t},r)),e.italic&&(r=o.createElement("em",{key:t},r)),e.strikethrough&&(r=o.createElement("s",{key:t},r)),e.code&&(r=o.createElement("code",{key:t},r)),o.createElement("span",{key:t},r)})):null)):null})},78390:(e,t,r)=>{"use strict";function n(e){return!("type"in e)&&"text"in e&&"string"==typeof e.text}function o(e){return"type"in e&&"mention"===e.type}function i(e){return"type"in e&&"link"===e.type}function a(e){return e.startsWith("http://")||e.startsWith("https://")?e:e.startsWith("www.")?"https://"+e:void 0}r.d(t,{BY:()=>a,SA:()=>o,y3:()=>n,zq:()=>i})},90331:(e,t,r)=>{"use strict";r.d(t,{BZ:()=>l,IA:()=>i,Y8:()=>f,_O:()=>u,b3:()=>c,cR:()=>a,wi:()=>s,xc:()=>h,yr:()=>d});var n=r(90193),o=r(28964);let i=(0,o.createContext)(null),a=(0,o.createContext)(null),s=(0,o.createContext)(null),u=(0,o.createContext)(null);function l(){let e=(0,o.useContext)(a);return(0,n.nn)(e,"Composer.Form is missing from the React tree.")}function c(){return(0,o.useContext)(s)}function d(){let e=c();return(0,n.nn)(e,"Composer.Form is missing from the React tree.")}function f(e="useComposerSuggestionsContext"){let t=(0,o.useContext)(u);return(0,n.nn)(t,`${e} can\u2019t be used outside of Composer.Editor.`)}function h(){let e=(0,o.useContext)(i);return(0,n.nn)(e,"Composer.Form is missing from the React tree.")}},39185:(e,t,r)=>{"use strict";let n;r.d(t,{m5:()=>nZ,ML:()=>nY,l0:()=>nG,rU:()=>nH,pf:()=>nU,k4:()=>nJ,Db:()=>n$,Yi:()=>nV,m$:()=>nK});var o,i,a=r(62246),s=r(62386),u=r(44706),l=r(69008),c=r(28964),d=r.n(c),f=r(29334),h=r(36032),p={isHistory:e=>(0,h.P)(e)&&Array.isArray(e.redos)&&Array.isArray(e.undos)&&(0===e.redos.length||f.OX.isOperationList(e.redos[0].operations))&&(0===e.undos.length||f.OX.isOperationList(e.undos[0].operations))};new WeakMap;var m=new WeakMap,v=new WeakMap,g={isHistoryEditor:e=>p.isHistory(e.history)&&f.ML.isEditor(e),isMerging:e=>v.get(e),isSaving:e=>m.get(e),redo(e){e.redo()},undo(e){e.undo()},withoutMerging(e,t){var r=g.isMerging(e);v.set(e,!1),t(),v.set(e,r)},withoutSaving(e,t){var r=g.isSaving(e);m.set(e,!1),t(),m.set(e,r)}},y=e=>{var{apply:t}=e;return e.history={undos:[],redos:[]},e.redo=()=>{var{history:t}=e,{redos:r}=t;if(r.length>0){var n=r[r.length-1];n.selectionBefore&&f.YR.setSelection(e,n.selectionBefore),g.withoutSaving(e,()=>{f.ML.withoutNormalizing(e,()=>{for(var t of n.operations)e.apply(t)})}),t.redos.pop(),e.writeHistory("undos",n)}},e.undo=()=>{var{history:t}=e,{undos:r}=t;if(r.length>0){var n=r[r.length-1];g.withoutSaving(e,()=>{f.ML.withoutNormalizing(e,()=>{for(var t of n.operations.map(f.OX.inverse).reverse())e.apply(t);n.selectionBefore&&f.YR.setSelection(e,n.selectionBefore)})}),e.writeHistory("redos",n),t.undos.pop()}},e.apply=r=>{var{operations:n,history:o}=e,{undos:i}=o,a=i[i.length-1],s=a&&a.operations[a.operations.length-1],u=g.isSaving(e),l=g.isMerging(e);if(null==u&&(u=E(r)),u){if(null==l&&(l=null!=a&&(0!==n.length||b(r,s))),a&&l)a.operations.push(r);else{var c={operations:[r],selectionBefore:e.selection};e.writeHistory("undos",c)}for(;i.length>100;)i.shift();o.redos=[]}t(r)},e.writeHistory=(t,r)=>{e.history[t].push(r)},e},b=(e,t)=>!!(t&&"insert_text"===e.type&&"insert_text"===t.type&&e.offset===t.offset+t.text.length&&f.y$.equals(e.path,t.path)||t&&"remove_text"===e.type&&"remove_text"===t.type&&e.offset+e.text.length===t.offset&&f.y$.equals(e.path,t.path)),E=(e,t)=>"set_selection"!==e.type,C=r(18364),D=r.n(C),w=r(62968),A=r.n(w),x=r(4589),B=r.n(x);let _=e=>"object"==typeof e&&null!=e&&1===e.nodeType,O=(e,t)=>(!t||"hidden"!==e)&&"visible"!==e&&"clip"!==e,T=(e,t)=>{if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){let r=getComputedStyle(e,null);return O(r.overflowY,t)||O(r.overflowX,t)||(e=>{let t=(e=>{if(!e.ownerDocument||!e.ownerDocument.defaultView)return null;try{return e.ownerDocument.defaultView.frameElement}catch(e){return null}})(e);return!!t&&(t.clientHeight<e.scrollHeight||t.clientWidth<e.scrollWidth)})(e)}return!1},k=(e,t,r,n,o,i,a,s)=>i<e&&a>t||i>e&&a<t?0:i<=e&&s<=r||a>=t&&s>=r?i-e-n:a>t&&s<r||i<e&&s>r?a-t+o:0,S=e=>{let t=e.parentElement;return null==t?e.getRootNode().host||null:t},F=(e,t)=>{var r,n,o,i;if("undefined"==typeof document)return[];let{scrollMode:a,block:s,inline:u,boundary:l,skipOverflowHiddenElements:c}=t,d="function"==typeof l?l:e=>e!==l;if(!_(e))throw TypeError("Invalid target");let f=document.scrollingElement||document.documentElement,h=[],p=e;for(;_(p)&&d(p);){if((p=S(p))===f){h.push(p);break}null!=p&&p===document.body&&T(p)&&!T(document.documentElement)||null!=p&&T(p,c)&&h.push(p)}let m=null!=(n=null==(r=window.visualViewport)?void 0:r.width)?n:innerWidth,v=null!=(i=null==(o=window.visualViewport)?void 0:o.height)?i:innerHeight,{scrollX:g,scrollY:y}=window,{height:b,width:E,top:C,right:D,bottom:w,left:A}=e.getBoundingClientRect(),{top:x,right:B,bottom:O,left:F}=(e=>{let t=window.getComputedStyle(e);return{top:parseFloat(t.scrollMarginTop)||0,right:parseFloat(t.scrollMarginRight)||0,bottom:parseFloat(t.scrollMarginBottom)||0,left:parseFloat(t.scrollMarginLeft)||0}})(e),I="start"===s||"nearest"===s?C-x:"end"===s?w+O:C+b/2-x+O,R="center"===u?A+E/2-F+B:"end"===u?D+B:A-F,M=[];for(let e=0;e<h.length;e++){let t=h[e],{height:r,width:n,top:o,right:i,bottom:l,left:c}=t.getBoundingClientRect();if("if-needed"===a&&C>=0&&A>=0&&w<=v&&D<=m&&C>=o&&w<=l&&A>=c&&D<=i)break;let d=getComputedStyle(t),p=parseInt(d.borderLeftWidth,10),x=parseInt(d.borderTopWidth,10),B=parseInt(d.borderRightWidth,10),_=parseInt(d.borderBottomWidth,10),O=0,T=0,S="offsetWidth"in t?t.offsetWidth-t.clientWidth-p-B:0,F="offsetHeight"in t?t.offsetHeight-t.clientHeight-x-_:0,N="offsetWidth"in t?0===t.offsetWidth?0:n/t.offsetWidth:0,P="offsetHeight"in t?0===t.offsetHeight?0:r/t.offsetHeight:0;if(f===t)O="start"===s?I:"end"===s?I-v:"nearest"===s?k(y,y+v,v,x,_,y+I,y+I+b,b):I-v/2,T="start"===u?R:"center"===u?R-m/2:"end"===u?R-m:k(g,g+m,m,p,B,g+R,g+R+E,E),O=Math.max(0,O+y),T=Math.max(0,T+g);else{O="start"===s?I-o-x:"end"===s?I-l+_+F:"nearest"===s?k(o,l,r,x,_+F,I,I+b,b):I-(o+r/2)+F/2,T="start"===u?R-c-p:"center"===u?R-(c+n/2)+S/2:"end"===u?R-i+B+S:k(c,i,n,p,B+S,R,R+E,E);let{scrollLeft:e,scrollTop:a}=t;O=0===P?0:Math.max(0,Math.min(a+O/P,t.scrollHeight-r/P+F)),T=0===N?0:Math.max(0,Math.min(e+T/N,t.scrollWidth-n/N+S)),I+=a-O,R+=e-T}M.push({el:t,top:O,left:T})}return M},I=e=>!1===e?{block:"end",inline:"nearest"}:e===Object(e)&&0!==Object.keys(e).length?e:{block:"start",inline:"nearest"};var R=[],M="ResizeObserver loop completed with undelivered notifications.",N=function(){var e;"function"==typeof ErrorEvent?e=new ErrorEvent("error",{message:M}):((e=document.createEvent("Event")).initEvent("error",!1,!1),e.message=M),window.dispatchEvent(e)};!function(e){e.BORDER_BOX="border-box",e.CONTENT_BOX="content-box",e.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"}(o||(o={}));var P=function(e){return Object.freeze(e)},L=function(e,t){this.inlineSize=e,this.blockSize=t,P(this)},j=function(){function e(e,t,r,n){return this.x=e,this.y=t,this.width=r,this.height=n,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,P(this)}return e.prototype.toJSON=function(){return{x:this.x,y:this.y,top:this.top,right:this.right,bottom:this.bottom,left:this.left,width:this.width,height:this.height}},e.fromRect=function(t){return new e(t.x,t.y,t.width,t.height)},e}(),z=function(e){return e instanceof SVGElement&&"getBBox"in e},W=function(e){if(z(e)){var t=e.getBBox(),r=t.width,n=t.height;return!r&&!n}var o=e.offsetWidth,i=e.offsetHeight;return!(o||i||e.getClientRects().length)},U=function(e){if(e instanceof Element)return!0;var t,r=null===(t=null==e?void 0:e.ownerDocument)||void 0===t?void 0:t.defaultView;return!!(r&&e instanceof r.Element)},H=function(e){switch(e.tagName){case"INPUT":if("image"!==e.type)break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},$="undefined"!=typeof window?window:{},V=new WeakMap,K=/auto|scroll/,q=/^tb|vertical/,Y=/msie|trident/i.test($.navigator&&$.navigator.userAgent),G=function(e){return parseFloat(e||"0")},J=function(e,t,r){return void 0===e&&(e=0),void 0===t&&(t=0),void 0===r&&(r=!1),new L((r?t:e)||0,(r?e:t)||0)},Z=P({devicePixelContentBoxSize:J(),borderBoxSize:J(),contentBoxSize:J(),contentRect:new j(0,0,0,0)}),X=function(e,t){if(void 0===t&&(t=!1),V.has(e)&&!t)return V.get(e);if(W(e))return V.set(e,Z),Z;var r=getComputedStyle(e),n=z(e)&&e.ownerSVGElement&&e.getBBox(),o=!Y&&"border-box"===r.boxSizing,i=q.test(r.writingMode||""),a=!n&&K.test(r.overflowY||""),s=!n&&K.test(r.overflowX||""),u=n?0:G(r.paddingTop),l=n?0:G(r.paddingRight),c=n?0:G(r.paddingBottom),d=n?0:G(r.paddingLeft),f=n?0:G(r.borderTopWidth),h=n?0:G(r.borderRightWidth),p=n?0:G(r.borderBottomWidth),m=n?0:G(r.borderLeftWidth),v=d+l,g=u+c,y=m+h,b=f+p,E=s?e.offsetHeight-b-e.clientHeight:0,C=a?e.offsetWidth-y-e.clientWidth:0,D=n?n.width:G(r.width)-(o?v+y:0)-C,w=n?n.height:G(r.height)-(o?g+b:0)-E,A=D+v+C+y,x=w+g+E+b,B=P({devicePixelContentBoxSize:J(Math.round(D*devicePixelRatio),Math.round(w*devicePixelRatio),i),borderBoxSize:J(A,x,i),contentBoxSize:J(D,w,i),contentRect:new j(d,u,D,w)});return V.set(e,B),B},Q=function(e,t,r){var n=X(e,r),i=n.borderBoxSize,a=n.contentBoxSize,s=n.devicePixelContentBoxSize;switch(t){case o.DEVICE_PIXEL_CONTENT_BOX:return s;case o.BORDER_BOX:return i;default:return a}},ee=function(e){var t=X(e);this.target=e,this.contentRect=t.contentRect,this.borderBoxSize=P([t.borderBoxSize]),this.contentBoxSize=P([t.contentBoxSize]),this.devicePixelContentBoxSize=P([t.devicePixelContentBoxSize])},et=function(e){if(W(e))return 1/0;for(var t=0,r=e.parentNode;r;)t+=1,r=r.parentNode;return t},er=function(){var e=1/0,t=[];R.forEach(function(r){if(0!==r.activeTargets.length){var n=[];r.activeTargets.forEach(function(t){var r=new ee(t.target),o=et(t.target);n.push(r),t.lastReportedSize=Q(t.target,t.observedBox),o<e&&(e=o)}),t.push(function(){r.callback.call(r.observer,n,r.observer)}),r.activeTargets.splice(0,r.activeTargets.length)}});for(var r=0;r<t.length;r++)(0,t[r])();return e},en=function(e){R.forEach(function(t){t.activeTargets.splice(0,t.activeTargets.length),t.skippedTargets.splice(0,t.skippedTargets.length),t.observationTargets.forEach(function(r){r.isActive()&&(et(r.target)>e?t.activeTargets.push(r):t.skippedTargets.push(r))})})},eo=function(){var e=0;for(en(0);R.some(function(e){return e.activeTargets.length>0});)en(e=er());return R.some(function(e){return e.skippedTargets.length>0})&&N(),e>0},ei=[],ea=function(e){if(!i){var t=0,r=document.createTextNode("");new MutationObserver(function(){return ei.splice(0).forEach(function(e){return e()})}).observe(r,{characterData:!0}),i=function(){r.textContent="".concat(t?t--:t++)}}ei.push(e),i()},es=function(e){ea(function(){requestAnimationFrame(e)})},eu=0,el={attributes:!0,characterData:!0,childList:!0,subtree:!0},ec=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],ed=function(e){return void 0===e&&(e=0),Date.now()+e},ef=!1,eh=new(function(){function e(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return e.prototype.run=function(e){var t=this;if(void 0===e&&(e=250),!ef){ef=!0;var r=ed(e);es(function(){var n=!1;try{n=eo()}finally{if(ef=!1,e=r-ed(),!eu)return;n?t.run(1e3):e>0?t.run(e):t.start()}})}},e.prototype.schedule=function(){this.stop(),this.run()},e.prototype.observe=function(){var e=this,t=function(){return e.observer&&e.observer.observe(document.body,el)};document.body?t():$.addEventListener("DOMContentLoaded",t)},e.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),ec.forEach(function(t){return $.addEventListener(t,e.listener,!0)}))},e.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),ec.forEach(function(t){return $.removeEventListener(t,e.listener,!0)}),this.stopped=!0)},e}()),ep=function(e){!eu&&e>0&&eh.start(),(eu+=e)||eh.stop()},em=function(){function e(e,t){this.target=e,this.observedBox=t||o.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return e.prototype.isActive=function(){var e,t=Q(this.target,this.observedBox,!0);return z(e=this.target)||H(e)||"inline"!==getComputedStyle(e).display||(this.lastReportedSize=t),this.lastReportedSize.inlineSize!==t.inlineSize||this.lastReportedSize.blockSize!==t.blockSize},e}(),ev=function(e,t){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=t},eg=new WeakMap,ey=function(e,t){for(var r=0;r<e.length;r+=1)if(e[r].target===t)return r;return -1},eb=function(){function e(){}return e.connect=function(e,t){var r=new ev(e,t);eg.set(e,r)},e.observe=function(e,t,r){var n=eg.get(e),o=0===n.observationTargets.length;0>ey(n.observationTargets,t)&&(o&&R.push(n),n.observationTargets.push(new em(t,r&&r.box)),ep(1),eh.schedule())},e.unobserve=function(e,t){var r=eg.get(e),n=ey(r.observationTargets,t),o=1===r.observationTargets.length;n>=0&&(o&&R.splice(R.indexOf(r),1),r.observationTargets.splice(n,1),ep(-1))},e.disconnect=function(e){var t=this,r=eg.get(e);r.observationTargets.slice().forEach(function(r){return t.unobserve(e,r.target)}),r.activeTargets.splice(0,r.activeTargets.length)},e}(),eE=function(){function e(e){if(0==arguments.length)throw TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if("function"!=typeof e)throw TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");eb.connect(this,e)}return e.prototype.observe=function(e,t){if(0==arguments.length)throw TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!U(e))throw TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");eb.observe(this,e,t)},e.prototype.unobserve=function(e){if(0==arguments.length)throw TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!U(e))throw TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");eb.unobserve(this,e)},e.prototype.disconnect=function(){eb.disconnect(this)},e.toString=function(){return"function ResizeObserver () { [polyfill code] }"},e}(),eC=r(29795),eD=r(46817),ew=r.n(eD);function eA(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function ex(e){return(ex="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eB(e,t,r){var n;return n=function(e,t){if("object"!==ex(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==ex(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"===ex(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var e_=(0,c.createContext)(null),eO=()=>{var e=(0,c.useContext)(e_);if(!e)throw Error("The `useSlateStatic` hook must be used inside the <Slate> component's context.");return e},eT=parseInt(d().version.split(".")[0],10),ek="undefined"!=typeof navigator&&"undefined"!=typeof window&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,eS="undefined"!=typeof navigator&&/Mac OS X/.test(navigator.userAgent),eF="undefined"!=typeof navigator&&/Android/.test(navigator.userAgent),eI="undefined"!=typeof navigator&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),eR="undefined"!=typeof navigator&&/AppleWebKit(?!.*Chrome)/i.test(navigator.userAgent),eM="undefined"!=typeof navigator&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])(?:\.)/i.test(navigator.userAgent),eN="undefined"!=typeof navigator&&/Chrome/i.test(navigator.userAgent),eP="undefined"!=typeof navigator&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])(?:\.)/i.test(navigator.userAgent),eL=eF&&"undefined"!=typeof navigator&&/Chrome?\/(?:[0-5]?\d)(?:\.)/i.test(navigator.userAgent),ej="undefined"!=typeof navigator&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])(?:\.)).*/i.test(navigator.userAgent),ez="undefined"!=typeof navigator&&/.*UCBrowser/.test(navigator.userAgent),eW="undefined"!=typeof navigator&&/.*Wechat/.test(navigator.userAgent)&&!/.*MacWechat/.test(navigator.userAgent),eU=!!("undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement),eH=(!eP||!eL)&&!eM&&"undefined"!=typeof globalThis&&globalThis.InputEvent&&"function"==typeof globalThis.InputEvent.prototype.getTargetRanges,e$=new WeakMap,eV=new WeakMap,eK=new WeakMap,eq=new WeakMap,eY=new WeakMap,eG=new WeakMap,eJ=new WeakMap,eZ=new WeakMap,eX=new WeakMap,eQ=new WeakMap,e0=new WeakMap,e1=new WeakMap,e2=new WeakMap,e3=new WeakMap,e4=new WeakMap,e5=new WeakMap,e7=new WeakMap,e9=new WeakMap,e6=new WeakMap,e8=new WeakMap,te=new WeakMap,tt=Symbol("placeholder"),tr=Symbol("mark-placeholder"),tn=globalThis.Text,to=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView||null,ti=e=>ts(e)&&8===e.nodeType,ta=e=>ts(e)&&1===e.nodeType,ts=e=>{var t=to(e);return!!t&&e instanceof t.Node},tu=e=>{var t=e&&e.anchorNode&&to(e.anchorNode);return!!t&&e instanceof t.Selection},tl=e=>ts(e)&&3===e.nodeType,tc=e=>e.clipboardData&&""!==e.clipboardData.getData("text/plain")&&1===e.clipboardData.types.length,td=e=>{var[t,r]=e;if(ta(t)&&t.childNodes.length){var n=r===t.childNodes.length,o=n?r-1:r;for([t,o]=th(t,o,n?"backward":"forward"),n=o<r;ta(t)&&t.childNodes.length;){var i=n?t.childNodes.length-1:0;t=tp(t,i,n?"backward":"forward")}r=n&&null!=t.textContent?t.textContent.length:0}return[t,r]},tf=e=>{for(var t=e&&e.parentNode;t;){if("[object ShadowRoot]"===t.toString())return!0;t=t.parentNode}return!1},th=(e,t,r)=>{for(var{childNodes:n}=e,o=n[t],i=t,a=!1,s=!1;(ti(o)||ta(o)&&0===o.childNodes.length||ta(o)&&"false"===o.getAttribute("contenteditable"))&&(!a||!s);){if(i>=n.length){a=!0,i=t-1,r="backward";continue}if(i<0){s=!0,i=t+1,r="forward";continue}o=n[i],t=i,i+="forward"===r?1:-1}return[o,t]},tp=(e,t,r)=>{var[n]=th(e,t,r);return n},tm=e=>{var t="";if(tl(e)&&e.nodeValue)return e.nodeValue;if(ta(e)){for(var r of Array.from(e.childNodes))t+=tm(r);var n=getComputedStyle(e).getPropertyValue("display");("block"===n||"list"===n||"BR"===e.tagName)&&(t+="\n")}return t},tv=/data-slate-fragment="(.+?)"/m,tg=e=>{var[,t]=e.getData("text/html").match(tv)||[];return t},ty=(e,t,r)=>{var{target:n}=t;if(ta(n)&&n.matches('[contentEditable="false"]'))return!1;var{document:o}=tC.getWindow(e);if(o.contains(n))return tC.hasDOMNode(e,n,{editable:!0});var i=r.find(e=>{var{addedNodes:t,removedNodes:r}=e;for(var o of t)if(o===n||o.contains(n))return!0;for(var i of r)if(i===n||i.contains(n))return!0});return!!i&&i!==t&&ty(e,i,r)},tb=0;class tE{constructor(){eB(this,"id",void 0),this.id="".concat(tb++)}}var tC={androidPendingDiffs:e=>e9.get(e),androidScheduleFlush:e=>{var t;null===(t=e4.get(e))||void 0===t||t()},blur:e=>{var t=tC.toDOMNode(e,e),r=tC.findDocumentOrShadowRoot(e);e0.set(e,!1),r.activeElement===t&&t.blur()},deselect:e=>{var{selection:t}=e,r=tC.findDocumentOrShadowRoot(e).getSelection();r&&r.rangeCount>0&&r.removeAllRanges(),t&&f.YR.deselect(e)},findDocumentOrShadowRoot:e=>{var t=tC.toDOMNode(e,e),r=t.getRootNode();return(r instanceof Document||r instanceof ShadowRoot)&&null!=r.getSelection?r:t.ownerDocument},findEventRange:(e,t)=>{"nativeEvent"in t&&(t=t.nativeEvent);var r,{clientX:n,clientY:o,target:i}=t;if(null==n||null==o)throw Error("Cannot resolve a Slate range from a DOM event: ".concat(t));var a=tC.toSlateNode(e,t.target),s=tC.findPath(e,a);if(f.W_.isElement(a)&&f.ML.isVoid(e,a)){var u=i.getBoundingClientRect(),l=e.isInline(a)?n-u.left<u.left+u.width-n:o-u.top<u.top+u.height-o,c=f.ML.point(e,s,{edge:l?"start":"end"}),d=l?f.ML.before(e,c):f.ML.after(e,c);if(d)return f.ML.range(e,d)}var{document:h}=tC.getWindow(e);if(h.caretRangeFromPoint)r=h.caretRangeFromPoint(n,o);else{var p=h.caretPositionFromPoint(n,o);p&&((r=h.createRange()).setStart(p.offsetNode,p.offset),r.setEnd(p.offsetNode,p.offset))}if(!r)throw Error("Cannot resolve a Slate range from a DOM event: ".concat(t));return tC.toSlateRange(e,r,{exactMatch:!1,suppressThrow:!1})},findKey:(e,t)=>{var r=eZ.get(t);return r||(r=new tE,eZ.set(t,r)),r},findPath:(e,t)=>{for(var r=[],n=t;;){var o=eV.get(n);if(null==o){if(f.ML.isEditor(n))return r;break}var i=e$.get(n);if(null==i)break;r.unshift(i),n=o}throw Error("Unable to find the path for Slate node: ".concat(f.o4.stringify(t)))},focus:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{retries:5};if(!e0.get(e)){if(t.retries<=0)throw Error("Could not set focus, editor seems stuck with pending operations");if(e.operations.length>0){setTimeout(()=>{tC.focus(e,{retries:t.retries-1})},10);return}var r=tC.toDOMNode(e,e),n=tC.findDocumentOrShadowRoot(e);if(n.activeElement!==r){if(e.selection&&n instanceof Document){var o=n.getSelection(),i=tC.toDOMRange(e,e.selection);null==o||o.removeAllRanges(),null==o||o.addRange(i)}e.selection||(f.YR.select(e,f.ML.start(e,[])),e.onChange()),e0.set(e,!0),r.focus({preventScroll:!0})}}},getWindow:e=>{var t=eK.get(e);if(!t)throw Error("Unable to find a host window element for this editor");return t},hasDOMNode:function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{editable:o=!1}=n,i=tC.toDOMNode(e,e);try{r=ta(t)?t:t.parentElement}catch(e){if(e instanceof Error&&!e.message.includes('Permission denied to access property "nodeType"'))throw e}return!!r&&r.closest("[data-slate-editor]")===i&&(!o||!!r.isContentEditable||"boolean"==typeof r.isContentEditable&&r.closest('[contenteditable="false"]')===i||!!r.getAttribute("data-slate-zero-width"))},hasEditableTarget:(e,t)=>ts(t)&&tC.hasDOMNode(e,t,{editable:!0}),hasRange:(e,t)=>{var{anchor:r,focus:n}=t;return f.ML.hasPath(e,r.path)&&f.ML.hasPath(e,n.path)},hasSelectableTarget:(e,t)=>tC.hasEditableTarget(e,t)||tC.isTargetInsideNonReadonlyVoid(e,t),hasTarget:(e,t)=>ts(t)&&tC.hasDOMNode(e,t),insertData:(e,t)=>{e.insertData(t)},insertFragmentData:(e,t)=>e.insertFragmentData(t),insertTextData:(e,t)=>e.insertTextData(t),isComposing:e=>!!e1.get(e),isFocused:e=>!!e0.get(e),isReadOnly:e=>!!eQ.get(e),isTargetInsideNonReadonlyVoid:(e,t)=>{if(eQ.get(e))return!1;var r=tC.hasTarget(e,t)&&tC.toSlateNode(e,t);return f.W_.isElement(r)&&f.ML.isVoid(e,r)},setFragmentData:(e,t,r)=>e.setFragmentData(t,r),toDOMNode:(e,t)=>{var r=eX.get(e),n=f.ML.isEditor(t)?eq.get(e):null==r?void 0:r.get(tC.findKey(e,t));if(!n)throw Error("Cannot resolve a DOM node from Slate node: ".concat(f.o4.stringify(t)));return n},toDOMPoint:(e,t)=>{var[r]=f.ML.node(e,t.path),n=tC.toDOMNode(e,r);f.ML.void(e,{at:t})&&(t={path:t.path,offset:0});for(var o=Array.from(n.querySelectorAll("[data-slate-string], [data-slate-zero-width]")),i=0,a=0;a<o.length;a++){var s=o[a],u=s.childNodes[0];if(null!=u&&null!=u.textContent){var{length:l}=u.textContent,c=s.getAttribute("data-slate-length"),d=i+(null==c?l:parseInt(c,10)),h=o[a+1];if(t.offset===d&&null!=h&&h.hasAttribute("data-slate-mark-placeholder")){var p,m,v=h.childNodes[0];p=[v instanceof tn?v:h,null!==(m=h.textContent)&&void 0!==m&&m.startsWith("\uFEFF")?1:0];break}if(t.offset<=d){p=[u,Math.min(l,Math.max(0,t.offset-i))];break}i=d}}if(!p)throw Error("Cannot resolve a DOM point from Slate point: ".concat(f.o4.stringify(t)));return p},toDOMRange:(e,t)=>{var{anchor:r,focus:n}=t,o=f.e6.isBackward(t),i=tC.toDOMPoint(e,r),a=f.e6.isCollapsed(t)?i:tC.toDOMPoint(e,n),s=tC.getWindow(e).document.createRange(),[u,l]=o?a:i,[c,d]=o?i:a,h=!!(ta(u)?u:u.parentElement).getAttribute("data-slate-zero-width"),p=!!(ta(c)?c:c.parentElement).getAttribute("data-slate-zero-width");return s.setStart(u,h?1:l),s.setEnd(c,p?1:d),s},toSlateNode:(e,t)=>{var r=ta(t)?t:t.parentElement;r&&!r.hasAttribute("data-slate-node")&&(r=r.closest("[data-slate-node]"));var n=r?eG.get(r):null;if(!n)throw Error("Cannot resolve a Slate node from DOM node: ".concat(r));return n},toSlatePoint:(e,t,r)=>{var{exactMatch:n,suppressThrow:o}=r,[i,a]=n?t:td(t),s=i.parentNode,u=null,l=0;if(s){var c,d,h=tC.toDOMNode(e,e),p=s.closest('[data-slate-void="true"]'),m=p&&h.contains(p)?p:null,v=s.closest("[data-slate-leaf]"),g=null;if(v){if(u=v.closest('[data-slate-node="text"]')){var y=tC.getWindow(e).document.createRange();y.setStart(u,0),y.setEnd(i,a);var b=y.cloneContents();[...Array.prototype.slice.call(b.querySelectorAll("[data-slate-zero-width]")),...Array.prototype.slice.call(b.querySelectorAll("[contenteditable=false]"))].forEach(e=>{if(eF&&!n&&e.hasAttribute("data-slate-zero-width")&&e.textContent.length>0&&"\uFEFF"!==e.textContext){e.textContent.startsWith("\uFEFF")&&(e.textContent=e.textContent.slice(1));return}e.parentNode.removeChild(e)}),l=b.textContent.length,g=u}}else if(m){for(var E=m.querySelectorAll("[data-slate-leaf]"),C=0;C<E.length;C++){var D=E[C];if(tC.hasDOMNode(e,D)){v=D;break}}v?(u=v.closest('[data-slate-node="text"]'),l=(g=v).textContent.length,g.querySelectorAll("[data-slate-zero-width]").forEach(e=>{l-=e.textContent.length})):l=1}g&&l===g.textContent.length&&eF&&"z"===g.getAttribute("data-slate-zero-width")&&null!==(c=g.textContent)&&void 0!==c&&c.startsWith("\uFEFF")&&(s.hasAttribute("data-slate-zero-width")||eI&&null!==(d=g.textContent)&&void 0!==d&&d.endsWith("\n\n"))&&l--}if(eF&&!u&&!n){var w=s.hasAttribute("data-slate-node")?s:s.closest("[data-slate-node]");if(w&&tC.hasDOMNode(e,w,{editable:!0})){var A=tC.toSlateNode(e,w),{path:x,offset:B}=f.ML.start(e,tC.findPath(e,A));return w.querySelector("[data-slate-leaf]")||(B=a),{path:x,offset:B}}}if(!u){if(o)return null;throw Error("Cannot resolve a Slate point from DOM point: ".concat(t))}var _=tC.toSlateNode(e,u);return{path:tC.findPath(e,_),offset:l}},toSlateRange:(e,t,r)=>{var n,o,i,a,s,u,l,{exactMatch:c,suppressThrow:d}=r;if(tu(t)?t.anchorNode:t.startContainer){if(tu(t)){if(eI&&t.rangeCount>1){a=t.focusNode;var h=t.getRangeAt(0),p=t.getRangeAt(t.rangeCount-1);if(a instanceof HTMLTableRowElement&&h.startContainer instanceof HTMLTableRowElement&&p.startContainer instanceof HTMLTableRowElement){function m(e){return e.childElementCount>0?m(e.children[0]):e}var v=h.startContainer,g=p.startContainer,y=m(v.children[h.startOffset]),b=m(g.children[p.startOffset]);s=0,o=b.childNodes.length>0?b.childNodes[0]:b,a=y.childNodes.length>0?y.childNodes[0]:y,b instanceof HTMLElement?i=b.innerHTML.length:i=0}else h.startContainer===a?(o=p.endContainer,i=p.endOffset,s=h.startOffset):(o=h.startContainer,i=h.endOffset,s=p.startOffset)}else o=t.anchorNode,i=t.anchorOffset,a=t.focusNode,s=t.focusOffset;u=eN&&tf(o)||eI?t.anchorNode===t.focusNode&&t.anchorOffset===t.focusOffset:t.isCollapsed}else o=t.startContainer,i=t.startOffset,a=t.endContainer,s=t.endOffset,u=t.collapsed}if(null==o||null==a||null==i||null==s)throw Error("Cannot resolve a Slate range from DOM range: ".concat(t));eI&&null!==(n=a.textContent)&&void 0!==n&&n.endsWith("\n\n")&&s===a.textContent.length&&s--,"getAttribute"in a&&"false"===a.getAttribute("contenteditable")&&"true"!==a.getAttribute("data-slate-void")&&(a=o,s=(null===(l=o.textContent)||void 0===l?void 0:l.length)||0);var E=tC.toSlatePoint(e,[o,i],{exactMatch:c,suppressThrow:d});if(!E)return null;var C=u?E:tC.toSlatePoint(e,[a,s],{exactMatch:c,suppressThrow:d});if(!C)return null;var D={anchor:E,focus:C};return f.e6.isExpanded(D)&&f.e6.isForward(D)&&ta(a)&&f.ML.void(e,{at:D.focus,mode:"highest"})&&(D=f.ML.unhangRange(e,D,{voids:!0})),D}};function tD(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return r.reduce((e,t)=>e.slice(0,t.start)+t.text+e.slice(t.end),e)}function tw(e,t){var{start:r,end:n,text:o}=t,i=e.slice(r,n),a=function(e,t){for(var r=Math.min(e.length,t.length),n=0;n<r;n++)if(e.charAt(n)!==t.charAt(n))return n;return r}(i,o),s=Math.min(i.length-a,o.length-a),u=function(e,t,r){for(var n=Math.min(e.length,t.length,r),o=0;o<n;o++)if(e.charAt(e.length-o-1)!==t.charAt(t.length-o-1))return o;return n}(i,o,s),l={start:r+a,end:n-u,text:o.slice(a,o.length-u)};return l.start===l.end&&0===l.text.length?null:l}function tA(e,t){var{path:r,offset:n}=t;if(!f.ML.hasPath(e,r))return null;var o=f.NB.get(e,r);if(!f.xv.isText(o))return null;var i=f.ML.above(e,{match:t=>f.W_.isElement(t)&&f.ML.isBlock(e,t),at:r});if(!i)return null;for(;n>o.text.length;){var a=f.ML.next(e,{at:r,match:f.xv.isText});if(!a||!f.y$.isDescendant(a[1],i[1]))return null;n-=o.text.length,o=a[0],r=a[1]}return{path:r,offset:n}}function tx(e,t){var r=tA(e,t.anchor);if(!r)return null;if(f.e6.isCollapsed(t))return{anchor:r,focus:r};var n=tA(e,t.focus);return n?{anchor:r,focus:n}:null}function tB(e,t,r){var n=e9.get(e),o=null==n?void 0:n.find(e=>{var{path:r}=e;return f.y$.equals(r,t.path)});if(!o||t.offset<=o.diff.start)return f.E9.transform(t,r,{affinity:"backward"});var{diff:i}=o;if(t.offset<=i.start+i.text.length){var a={path:t.path,offset:i.start},s=f.E9.transform(a,r,{affinity:"backward"});return s?{path:s.path,offset:s.offset+t.offset-i.start}:null}var u={path:t.path,offset:t.offset-i.text.length+i.end-i.start},l=f.E9.transform(u,r,{affinity:"backward"});return l?"split_node"===r.type&&f.y$.equals(r.path,t.path)&&u.offset<r.position&&i.start<r.position?l:{path:l.path,offset:l.offset+i.text.length-i.end+i.start}:null}function t_(e,t,r){var n=tB(e,t.anchor,r);if(!n)return null;if(f.e6.isCollapsed(t))return{anchor:n,focus:n};var o=tB(e,t.focus,r);return o?{anchor:n,focus:o}:null}function tO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function tT(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tO(Object(r),!0).forEach(function(t){eB(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tO(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var tk=function(){},tS=e=>(null==e?void 0:e.constructor.name)==="DataTransfer",tF=eU?c.useLayoutEffect:c.useEffect,tI=["node"];function tR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var tM={subtree:!0,childList:!0,characterData:!0},tN=eF?e=>{var{node:t}=e,r=eA(e,tI);if(!eF)return null;var n=eO(),o=function(){var e=(0,c.useRef)(!1);return(0,c.useEffect)(()=>(e.current=!0,()=>{e.current=!1}),[]),e.current}(),[i]=(0,c.useState)(()=>(function(e){var{editor:t,scheduleOnDOMSelectionChange:r,onDOMSelectionChange:n}=e,o=!1,i=null,a=null,s=null,u=0,l=!1,c=()=>{var e=e8.get(t);if(e8.delete(t),e){var{selection:r}=t,n=tx(t,e);!n||r&&f.e6.equals(n,r)||f.YR.select(t,n)}},d=()=>{var e=e6.get(t);if(e6.delete(t),e){if(e.at){var r=f.E9.isPoint(e.at)?tA(t,e.at):tx(t,e.at);if(!r)return;var n=f.ML.range(t,r);t.selection&&f.e6.equals(t.selection,n)||f.YR.select(t,r)}e.run()}},h=()=>{if(a&&(clearTimeout(a),a=null),s&&(clearTimeout(s),s=null),!y()&&!g()){c();return}o||(o=!0,setTimeout(()=>o=!1)),g()&&(o="action");var e=t.selection&&f.ML.rangeRef(t,t.selection,{affinity:"forward"});e7.set(t,t.marks),tk("flush",e6.get(t),e9.get(t));for(var i=y();u=null===(h=e9.get(t))||void 0===h?void 0:h[0];){var u,h,p,m=e5.get(t);void 0!==m&&(e5.delete(t),t.marks=m),m&&!1===l&&(l=null);var v=function(e){var{path:t,diff:r}=e;return{anchor:{path:t,offset:r.start},focus:{path:t,offset:r.end}}}(u);t.selection&&f.e6.equals(t.selection,v)||f.YR.select(t,v),u.diff.text?f.ML.insertText(t,u.diff.text):f.ML.deleteFragment(t),e9.set(t,null===(p=e9.get(t))||void 0===p?void 0:p.filter(e=>{var{id:t}=e;return t!==u.id})),!function(e,t){var{path:r,diff:n}=t;if(!f.ML.hasPath(e,r))return!1;var o=f.NB.get(e,r);if(!f.xv.isText(o))return!1;if(n.start!==o.text.length||0===n.text.length)return o.text.slice(n.start,n.start+n.text.length)===n.text;var i=f.y$.next(r);if(!f.ML.hasPath(e,i))return!1;var a=f.NB.get(e,i);return f.xv.isText(a)&&a.text.startsWith(n.text)}(t,u)&&(i=!1,e6.delete(t),e7.delete(t),o="action",e8.delete(t),r.cancel(),n.cancel(),null==e||e.unref())}var b=null==e?void 0:e.unref();if(!b||e8.get(t)||t.selection&&f.e6.equals(b,t.selection)||f.YR.select(t,b),g()){d();return}i&&r(),r.flush(),n.flush(),c();var E=e7.get(t);e7.delete(t),void 0!==E&&(t.marks=E,t.onChange())},p=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=eY.get(t);if(r){if(y()||e){r.style.display="none";return}r.style.removeProperty("display")}},m=(e,r)=>{var n,o,i,a,s,l,c,d,h=null!==(d=e9.get(t))&&void 0!==d?d:[];e9.set(t,h);var m=f.NB.leaf(t,e),v=h.findIndex(t=>f.y$.equals(t.path,e));if(v<0){tw(m.text,r)&&h.push({path:e,diff:r,id:u++}),p();return}var g=(n=m.text,i=Math.min((o=h[v].diff).start,r.start),a=Math.max(0,Math.min(o.start+o.text.length,r.end)-r.start),s=tD(n,o,r),l=Math.max(r.start+r.text.length,o.start+o.text.length+(o.start+o.text.length>r.start?r.text.length:0)-a),c=s.slice(i,l),tw(n,{start:i,end:Math.max(o.end,r.end-o.text.length+(o.end-o.start)),text:c}));if(!g){h.splice(v,1),p();return}h[v]=tT(tT({},h[v]),{},{diff:g})},v=function(e){var{at:o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};l=!1,e8.delete(t),r.cancel(),n.cancel(),g()&&h(),e6.set(t,{at:o,run:e}),s=setTimeout(h)},g=()=>!!e6.get(t),y=()=>{var e;return!!(null!==(e=e9.get(t))&&void 0!==e&&e.length)},b=e=>{e8.set(t,e),a&&(clearTimeout(a),a=null);var{selection:r}=t;if(e){var n=!r||!f.y$.equals(r.anchor.path,e.anchor.path),o=!r||!f.y$.equals(r.anchor.path.slice(0,-1),e.anchor.path.slice(0,-1));(n&&l||o)&&(l=!1),(n||y())&&(a=setTimeout(h,200))}},E=()=>{g()||(s=setTimeout(h))};return{flush:h,scheduleFlush:E,hasPendingDiffs:y,hasPendingAction:g,hasPendingChanges:()=>g()||y(),isFlushing:()=>o,handleUserSelect:b,handleCompositionEnd:e=>{i&&clearTimeout(i),i=setTimeout(()=>{e1.set(t,!1),h()},25)},handleCompositionStart:e=>{e1.set(t,!0),i&&(clearTimeout(i),i=null)},handleDOMBeforeInput:e=>{a&&(clearTimeout(a),a=null);var{inputType:r}=e,n=null,o=e.dataTransfer||e.data||void 0;!1!==l&&"insertText"!==r&&"insertCompositionText"!==r&&(l=!1);var[i]=e.getTargetRanges();i&&(n=tC.toSlateRange(t,i,{exactMatch:!1,suppressThrow:!0}));var s=tC.getWindow(t).getSelection();if(!n&&s&&(i=s,n=tC.toSlateRange(t,s,{exactMatch:!1,suppressThrow:!0})),n=null!==(k=n)&&void 0!==k?k:t.selection){var u=!0;if(r.startsWith("delete")){if(f.e6.isExpanded(n)){var[c,d]=f.e6.edges(n);if(f.NB.leaf(t,c.path).text.length===c.offset&&0===d.offset){var h=f.ML.next(t,{at:c.path,match:f.xv.isText});h&&f.y$.equals(h[1],d.path)&&(n={anchor:d,focus:d})}}var p=r.endsWith("Backward")?"backward":"forward",[g,y]=f.e6.edges(n),[C,D]=f.ML.leaf(t,g.path),w={text:"",start:g.offset,end:y.offset},A=e9.get(t),x=null==A?void 0:A.find(e=>f.y$.equals(e.path,D)),B=x?[x.diff,w]:[w];if(0===tD(C.text,...B).length&&(u=!1),f.e6.isExpanded(n)){if(u&&f.y$.equals(n.anchor.path,n.focus.path)){var _={path:n.anchor.path,offset:g.offset};return b(f.ML.range(t,_,_)),m(n.anchor.path,{text:"",end:y.offset,start:g.offset})}return v(()=>f.ML.deleteFragment(t,{direction:p}),{at:n})}}switch(r){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":return v(()=>f.ML.deleteFragment(t),{at:n});case"deleteContent":case"deleteContentForward":var{anchor:O}=n;if(u&&f.e6.isCollapsed(n)){var T=f.NB.leaf(t,O.path);if(O.offset<T.text.length)return m(O.path,{text:"",start:O.offset,end:O.offset+1})}return v(()=>f.ML.deleteForward(t),{at:n});case"deleteContentBackward":var k,S,{anchor:F}=n,I=tu(i)?i.isCollapsed:!!(null!==(S=i)&&void 0!==S&&S.collapsed);if(u&&I&&f.e6.isCollapsed(n)&&F.offset>0)return m(F.path,{text:"",start:F.offset-1,end:F.offset});return v(()=>f.ML.deleteBackward(t),{at:n});case"deleteEntireSoftLine":return v(()=>{f.ML.deleteBackward(t,{unit:"line"}),f.ML.deleteForward(t,{unit:"line"})},{at:n});case"deleteHardLineBackward":return v(()=>f.ML.deleteBackward(t,{unit:"block"}),{at:n});case"deleteSoftLineBackward":return v(()=>f.ML.deleteBackward(t,{unit:"line"}),{at:n});case"deleteHardLineForward":return v(()=>f.ML.deleteForward(t,{unit:"block"}),{at:n});case"deleteSoftLineForward":return v(()=>f.ML.deleteForward(t,{unit:"line"}),{at:n});case"deleteWordBackward":return v(()=>f.ML.deleteBackward(t,{unit:"word"}),{at:n});case"deleteWordForward":return v(()=>f.ML.deleteForward(t,{unit:"word"}),{at:n});case"insertLineBreak":return v(()=>f.ML.insertSoftBreak(t),{at:n});case"insertParagraph":return v(()=>f.ML.insertBreak(t),{at:n});case"insertCompositionText":case"deleteCompositionText":case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":if(tS(o))return v(()=>tC.insertData(t,o),{at:n});var R=null!=o?o:"";if(e5.get(t)&&(R=R.replace("\uFEFF","")),"insertText"===r&&/.*\n.*\n$/.test(R)&&(R=R.slice(0,-1)),R.includes("\n"))return v(()=>{var e=R.split("\n");e.forEach((r,n)=>{r&&f.ML.insertText(t,r),n!==e.length-1&&f.ML.insertSoftBreak(t)})},{at:n});if(f.y$.equals(n.anchor.path,n.focus.path)){var[M,N]=f.e6.edges(n),P={start:M.offset,end:N.offset,text:R};if(R&&l&&"insertCompositionText"===r){var L=l.start+l.text.search(/\S|$/);P.start+P.text.search(/\S|$/)===L+1&&P.end===l.start+l.text.length?(P.start-=1,l=null,E()):l=!1}else l="insertText"===r&&(null===l?P:!!(l&&f.e6.isCollapsed(n))&&l.end+l.text.length===M.offset&&tT(tT({},l),{},{text:l.text+R}));if(u){m(M.path,P);return}}return v(()=>f.ML.insertText(t,R),{at:n})}}},handleKeyDown:e=>{y()||(p(!0),setTimeout(p))},handleDomMutations:e=>{if(!(y()||g())&&e.some(r=>ty(t,r,e))){var r;null===(r=te.get(t))||void 0===r||r()}},handleInput:()=>{(g()||!y())&&h()}}})(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tR(Object(r),!0).forEach(function(t){eB(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tR(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({editor:n},r)));return function(e,t,r){var[n]=(0,c.useState)(()=>new MutationObserver(t));tF(()=>{n.takeRecords()}),(0,c.useEffect)(()=>{if(!e.current)throw Error("Failed to attach MutationObserver, `node` is undefined");return n.observe(e.current,r),()=>n.disconnect()},[n,e,r])}(t,i.handleDomMutations,tM),e4.set(n,i.scheduleFlush),o&&i.flush(),i}:()=>null,tP=["anchor","focus"],tL=["anchor","focus"],tj=(e,t)=>Object.keys(e).length===Object.keys(t).length&&Object.keys(e).every(r=>t.hasOwnProperty(r)&&e[r]===t[r]),tz=(e,t)=>{var r=eA(e,tP),n=eA(t,tL);return e[tt]===t[tt]&&tj(r,n)},tW=(e,t)=>{if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++){var n=e[r],o=t[r];if(!f.e6.equals(n,o)||!tz(n,o))return!1}return!0},tU=(e,t)=>{if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++){var n=e[r],o=t[r];if(n.anchor.offset!==o.anchor.offset||n.focus.offset!==o.focus.offset||!tz(n,o))return!1}return!0};function tH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var t$=e=>{var{isLast:t,leaf:r,parent:n,text:o}=e,i=eO(),a=tC.findPath(i,o),s=f.y$.parent(a),u=!!r[tr];return i.isVoid(n)?d().createElement(tq,{length:f.NB.string(n).length}):""!==r.text||n.children[n.children.length-1]!==o||i.isInline(n)||""!==f.ML.string(i,s)?""===r.text?d().createElement(tq,{isMarkPlaceholder:u}):t&&"\n"===r.text.slice(-1)?d().createElement(tV,{isTrailing:!0,text:r.text}):d().createElement(tV,{text:r.text}):d().createElement(tq,{isLineBreak:!0,isMarkPlaceholder:u})},tV=e=>{var{text:t,isTrailing:r=!1}=e,n=(0,c.useRef)(null),o=()=>"".concat(null!=t?t:"").concat(r?"\n":""),[i]=(0,c.useState)(o);return tF(()=>{var e=o();n.current&&n.current.textContent!==e&&(n.current.textContent=e)}),d().createElement(tK,{ref:n},i)},tK=(0,c.memo)((0,c.forwardRef)((e,t)=>d().createElement("span",{"data-slate-string":!0,ref:t},e.children))),tq=e=>{var{length:t=0,isLineBreak:r=!1,isMarkPlaceholder:n=!1}=e,o={"data-slate-zero-width":r?"n":"z","data-slate-length":t};return n&&(o["data-slate-mark-placeholder"]=!0),d().createElement("span",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tH(Object(r),!0).forEach(function(t){eB(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tH(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},o),eF&&r?null:"\uFEFF",r?d().createElement("br",null):null)};function tY(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function tG(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tY(Object(r),!0).forEach(function(t){eB(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tY(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var tJ=eF?300:0;function tZ(e){e.current&&(clearTimeout(e.current),e.current=null)}var tX=d().memo(e=>{var{leaf:t,isLast:r,text:n,parent:o,renderPlaceholder:i,renderLeaf:a=e=>d().createElement(tQ,tG({},e))}=e,s=eO(),u=(0,c.useRef)(null),l=(0,c.useRef)(null),[f,h]=(0,c.useState)(!1),p=(0,c.useRef)(null),m=(0,c.useCallback)(e=>{if(function(e,t){e.current&&(e.current.disconnect(),t&&(e.current=null))}(u,null==e),null==e){var r;eY.delete(s),null===(r=t.onPlaceholderResize)||void 0===r||r.call(t,null)}else{if(eY.set(s,e),!u.current){var n=window.ResizeObserver||eE;u.current=new n(()=>{var r;null===(r=t.onPlaceholderResize)||void 0===r||r.call(t,e)})}u.current.observe(e),l.current=e}},[l,t,s]),v=d().createElement(t$,{isLast:r,leaf:t,parent:o,text:n}),g=!!t[tt];if((0,c.useEffect)(()=>(g?p.current||(p.current=setTimeout(()=>{h(!0),p.current=null},tJ)):(tZ(p),h(!1)),()=>tZ(p)),[g,h]),g&&f){var y={children:t.placeholder,attributes:{"data-slate-placeholder":!0,style:{position:"absolute",top:0,pointerEvents:"none",width:"100%",maxWidth:"100%",display:"block",opacity:"0.333",userSelect:"none",textDecoration:"none",WebkitUserModify:eR?"inherit":void 0},contentEditable:!1,ref:m}};v=d().createElement(d().Fragment,null,i(y),v)}return a({attributes:{"data-slate-leaf":!0},children:v,leaf:t,text:n})},(e,t)=>t.parent===e.parent&&t.isLast===e.isLast&&t.renderLeaf===e.renderLeaf&&t.renderPlaceholder===e.renderPlaceholder&&t.text===e.text&&f.xv.equals(t.leaf,e.leaf)&&t.leaf[tt]===e.leaf[tt]),tQ=e=>{var{attributes:t,children:r}=e;return d().createElement("span",tG({},t),r)},t0=d().memo(e=>{for(var{decorations:t,isLast:r,parent:n,renderPlaceholder:o,renderLeaf:i,text:a}=e,s=eO(),u=(0,c.useRef)(null),l=f.xv.decorations(a,t),h=tC.findKey(s,a),p=[],m=0;m<l.length;m++){var v=l[m];p.push(d().createElement(tX,{isLast:r&&m===l.length-1,key:"".concat(h.id,"-").concat(m),renderPlaceholder:o,leaf:v,text:a,parent:n,renderLeaf:i}))}var g=(0,c.useCallback)(e=>{var t=eX.get(s);e?(null==t||t.set(h,e),eJ.set(a,e),eG.set(e,a)):(null==t||t.delete(h),eJ.delete(a),u.current&&eG.delete(u.current)),u.current=e},[u,s,h,a]);return d().createElement("span",{"data-slate-node":"text",ref:g},p)},(e,t)=>t.parent===e.parent&&t.isLast===e.isLast&&t.renderLeaf===e.renderLeaf&&t.renderPlaceholder===e.renderPlaceholder&&t.text===e.text&&tU(t.decorations,e.decorations));function t1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function t2(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?t1(Object(r),!0).forEach(function(t){eB(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t1(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var t3=d().memo(e=>{var{decorations:t,element:r,renderElement:n=e=>d().createElement(t4,t2({},e)),renderPlaceholder:o,renderLeaf:i,selection:a}=e,s=eO(),u=rt(),l=s.isInline(r),h=tC.findKey(s,r),p=(0,c.useCallback)(e=>{var t=eX.get(s);e?(null==t||t.set(h,e),eJ.set(r,e),eG.set(e,r)):(null==t||t.delete(h),eJ.delete(r))},[s,h,r]),m=t8({decorations:t,node:r,renderElement:n,renderPlaceholder:o,renderLeaf:i,selection:a}),v={"data-slate-node":"element",ref:p};if(l&&(v["data-slate-inline"]=!0),!l&&f.ML.hasInlines(s,r)){var g=f.NB.string(r),y=D()(g);"rtl"===y&&(v.dir=y)}if(f.ML.isVoid(s,r)){v["data-slate-void"]=!0,!u&&l&&(v.contentEditable=!1);var[[b]]=f.NB.texts(r);m=d().createElement(l?"span":"div",{"data-slate-spacer":!0,style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},d().createElement(t0,{renderPlaceholder:o,decorations:[],isLast:!1,parent:r,text:b})),e$.set(b,0),eV.set(b,r)}return n({attributes:v,children:m,element:r})},(e,t)=>e.element===t.element&&e.renderElement===t.renderElement&&e.renderLeaf===t.renderLeaf&&e.renderPlaceholder===t.renderPlaceholder&&tW(e.decorations,t.decorations)&&(e.selection===t.selection||!!e.selection&&!!t.selection&&f.e6.equals(e.selection,t.selection))),t4=e=>{var{attributes:t,children:r,element:n}=e,o=eO().isInline(n)?"span":"div";return d().createElement(o,t2(t2({},t),{},{style:{position:"relative"}}),r)},t5=(0,c.createContext)(()=>[]),t7=()=>(0,c.useContext)(t5),t9=(0,c.createContext)(!1),t6=()=>(0,c.useContext)(t9),t8=e=>{for(var{decorations:t,node:r,renderElement:n,renderPlaceholder:o,renderLeaf:i,selection:a}=e,s=t7(),u=eO(),l=tC.findPath(u,r),c=[],h=f.W_.isElement(r)&&!u.isInline(r)&&f.ML.hasInlines(u,r),p=0;p<r.children.length;p++){var m=l.concat(p),v=r.children[p],g=tC.findKey(u,v),y=f.ML.range(u,m),b=a&&f.e6.intersection(y,a),E=s([v,m]);for(var C of t){var D=f.e6.intersection(C,y);D&&E.push(D)}f.W_.isElement(v)?c.push(d().createElement(t9.Provider,{key:"provider-".concat(g.id),value:!!b},d().createElement(t3,{decorations:E,element:v,key:g.id,renderElement:n,renderPlaceholder:o,renderLeaf:i,selection:b}))):c.push(d().createElement(t0,{decorations:E,key:g.id,isLast:h&&p===r.children.length-1,parent:r,renderPlaceholder:o,renderLeaf:i,text:v})),e$.set(v,p),eV.set(v,r)}return c},re=(0,c.createContext)(!1),rt=()=>(0,c.useContext)(re),rr=(0,c.createContext)(null),rn=()=>{var e=(0,c.useContext)(rr);if(!e)throw Error("The `useSlate` hook must be used inside the <Slate> component's context.");var{editor:t}=e;return t},ro={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",insertSoftBreak:"shift+enter",splitBlock:"enter",undo:"mod+z"},ri={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},ra={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},rs=e=>{var t=ro[e],r=ri[e],n=ra[e],o=t&&(0,eC.P6)(t),i=r&&(0,eC.P6)(r),a=n&&(0,eC.P6)(n);return e=>!!(o&&o(e)||eS&&i&&i(e)||!eS&&a&&a(e))},ru={isBold:rs("bold"),isCompose:rs("compose"),isMoveBackward:rs("moveBackward"),isMoveForward:rs("moveForward"),isDeleteBackward:rs("deleteBackward"),isDeleteForward:rs("deleteForward"),isDeleteLineBackward:rs("deleteLineBackward"),isDeleteLineForward:rs("deleteLineForward"),isDeleteWordBackward:rs("deleteWordBackward"),isDeleteWordForward:rs("deleteWordForward"),isExtendBackward:rs("extendBackward"),isExtendForward:rs("extendForward"),isExtendLineBackward:rs("extendLineBackward"),isExtendLineForward:rs("extendLineForward"),isItalic:rs("italic"),isMoveLineBackward:rs("moveLineBackward"),isMoveLineForward:rs("moveLineForward"),isMoveWordBackward:rs("moveWordBackward"),isMoveWordForward:rs("moveWordForward"),isRedo:rs("redo"),isSoftBreak:rs("insertSoftBreak"),isSplitBlock:rs("splitBlock"),isTransposeCharacter:rs("transposeCharacter"),isUndo:rs("undo")},rl=(e,t)=>{var r=[],n=()=>{r=[]};return{registerMutations:n=>{if(t.current){var o=n.filter(t=>ty(e,t,n));r.push(...o)}},restoreDOM:function(){r.length>0&&(r.reverse().forEach(e=>{"characterData"!==e.type&&(e.removedNodes.forEach(t=>{e.target.insertBefore(t,e.nextSibling)}),e.addedNodes.forEach(t=>{e.target.removeChild(t)}))}),n())},clear:n}},rc={subtree:!0,childList:!0,characterData:!0,characterDataOldValue:!0};class rd extends c.Component{constructor(){super(...arguments),eB(this,"context",null),eB(this,"manager",null),eB(this,"mutationObserver",null)}observe(){var e,{node:t}=this.props;if(!t.current)throw Error("Failed to attach MutationObserver, `node` is undefined");null===(e=this.mutationObserver)||void 0===e||e.observe(t.current,rc)}componentDidMount(){var{receivedUserInput:e}=this.props,t=this.context;this.manager=rl(t,e),this.mutationObserver=new MutationObserver(this.manager.registerMutations),this.observe()}getSnapshotBeforeUpdate(){var e,t,r,n,o=null===(e=this.mutationObserver)||void 0===e?void 0:e.takeRecords();return null!=o&&o.length&&(null===(n=this.manager)||void 0===n||n.registerMutations(o)),null===(t=this.mutationObserver)||void 0===t||t.disconnect(),null===(r=this.manager)||void 0===r||r.restoreDOM(),null}componentDidUpdate(){var e;null===(e=this.manager)||void 0===e||e.clear(),this.observe()}componentWillUnmount(){var e;null===(e=this.mutationObserver)||void 0===e||e.disconnect()}render(){return this.props.children}}eB(rd,"contextType",e_);var rf=eF?rd:e=>{var{children:t}=e;return d().createElement(d().Fragment,null,t)},rh=["autoFocus","decorate","onDOMBeforeInput","placeholder","readOnly","renderElement","renderLeaf","renderPlaceholder","scrollSelectionIntoView","style","as","disableDefaultStyles"],rp=["text"];function rm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function rv(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rm(Object(r),!0).forEach(function(t){eB(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rm(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var rg=e=>d().createElement(d().Fragment,null,t8(e)),ry=e=>{var t=(0,c.useCallback)(e=>d().createElement(rb,rv({},e)),[]),{autoFocus:r,decorate:n=rE,onDOMBeforeInput:o,placeholder:i,readOnly:a=!1,renderElement:s,renderLeaf:u,renderPlaceholder:l=t,scrollSelectionIntoView:h=rC,style:p={},as:m="div",disableDefaultStyles:v=!1}=e,g=eA(e,rh),y=rn(),[b,E]=(0,c.useState)(!1),C=(0,c.useRef)(null),w=(0,c.useRef)([]),[x,_]=(0,c.useState)(),{onUserInput:O,receivedUserInput:T}=function(){var e=eO(),t=(0,c.useRef)(!1),r=(0,c.useRef)(0),n=(0,c.useCallback)(()=>{if(!t.current){t.current=!0;var n=tC.getWindow(e);n.cancelAnimationFrame(r.current),r.current=n.requestAnimationFrame(()=>{t.current=!1})}},[e]);return(0,c.useEffect)(()=>()=>cancelAnimationFrame(r.current),[]),{receivedUserInput:t,onUserInput:n}}(),[,k]=(0,c.useReducer)(e=>e+1,0);te.set(y,k),eQ.set(y,a);var S=(0,c.useMemo)(()=>({isDraggingInternally:!1,isUpdatingSelection:!1,latestElement:null,hasMarkPlaceholder:!1}),[]);(0,c.useEffect)(()=>{C.current&&r&&C.current.focus()},[r]);var F=(0,c.useRef)(),I=(0,c.useMemo)(()=>B()(()=>{var e=F.current;if((eF||!tC.isComposing(y))&&(!S.isUpdatingSelection||null!=e&&e.isFlushing())&&!S.isDraggingInternally){var t=tC.findDocumentOrShadowRoot(y),{activeElement:r}=t,n=tC.toDOMNode(y,y),o=t.getSelection();if(r===n?(S.latestElement=r,e0.set(y,!0)):e0.delete(y),!o)return f.YR.deselect(y);var{anchorNode:i,focusNode:s}=o,u=tC.hasEditableTarget(y,i)||tC.isTargetInsideNonReadonlyVoid(y,i),l=tC.hasEditableTarget(y,s)||tC.isTargetInsideNonReadonlyVoid(y,s);if(u&&l){var c=tC.toSlateRange(y,o,{exactMatch:!1,suppressThrow:!0});c&&(tC.isComposing(y)||null!=e&&e.hasPendingChanges()||null!=e&&e.isFlushing()?null==e||e.handleUserSelect(c):f.YR.select(y,c))}!a||u&&l||f.YR.deselect(y)}},100),[y,a,S]),R=(0,c.useMemo)(()=>A()(I,0),[I]);F.current=tN({node:C,onDOMSelectionChange:I,scheduleOnDOMSelectionChange:R}),tF(()=>{C.current&&(r=to(C.current))?(eK.set(y,r),eq.set(y,C.current),eJ.set(y,C.current),eG.set(C.current,y)):eJ.delete(y);var e,t,r,{selection:n}=y,o=tC.findDocumentOrShadowRoot(y).getSelection();if(!(!o||!tC.isFocused(y)||null!==(e=F.current)&&void 0!==e&&e.hasPendingAction())){var i=e=>{var t="None"!==o.type;if(n||t){var r=o.focusNode;if(eI&&o.rangeCount>1){var i=o.getRangeAt(0),a=o.getRangeAt(o.rangeCount-1);l=i.startContainer===r?a.endContainer:i.startContainer}else l=o.anchorNode;var s=eq.get(y),u=!1;if(s.contains(l)&&s.contains(r)&&(u=!0),t&&u&&n&&!e){var l,c,d=tC.toSlateRange(y,o,{exactMatch:!0,suppressThrow:!0});if(d&&f.e6.equals(d,n)&&(!S.hasMarkPlaceholder||null!==(c=l)&&void 0!==c&&null!==(c=c.parentElement)&&void 0!==c&&c.hasAttribute("data-slate-mark-placeholder")))return}if(n&&!tC.hasRange(y,n)){y.selection=tC.toSlateRange(y,o,{exactMatch:!1,suppressThrow:!0});return}S.isUpdatingSelection=!0;var p=n&&tC.toDOMRange(y,n);return p?(tC.isComposing(y)&&!eF?o.collapseToEnd():f.e6.isBackward(n)?o.setBaseAndExtent(p.endContainer,p.endOffset,p.startContainer,p.startOffset):o.setBaseAndExtent(p.startContainer,p.startOffset,p.endContainer,p.endOffset),h(y,p)):o.removeAllRanges(),p}};o.rangeCount<=1&&i();var a=(null===(t=F.current)||void 0===t?void 0:t.isFlushing())==="action";if(!eF||!a){setTimeout(()=>{S.isUpdatingSelection=!1});return}var s=null,u=requestAnimationFrame(()=>{if(a){var e=e=>{try{tC.toDOMNode(y,y).focus(),i(e)}catch(e){}};e(),s=setTimeout(()=>{e(!0),S.isUpdatingSelection=!1})}});return()=>{cancelAnimationFrame(u),s&&clearTimeout(s)}}});var M=(0,c.useCallback)(e=>{if(O(),!a&&tC.hasEditableTarget(y,e.target)&&!rA(e,o)){if(F.current)return F.current.handleDOMBeforeInput(e);R.flush(),I.flush();var{selection:t}=y,{inputType:r}=e,n=e.dataTransfer||e.data||void 0,i="insertCompositionText"===r||"deleteCompositionText"===r;if(!(i&&tC.isComposing(y))){var s=!1;if("insertText"===r&&t&&f.e6.isCollapsed(t)&&e.data&&1===e.data.length&&/[a-z ]/i.test(e.data)&&0!==t.anchor.offset){s=!0,y.marks&&(s=!1);var{anchor:u}=t,[l,c]=tC.toDOMPoint(y,u),d=null===(m=l.parentElement)||void 0===m?void 0:m.closest("a"),h=tC.getWindow(y);if(s&&d&&tC.hasDOMNode(y,d)){var p,m,v,g,b=null==h?void 0:h.document.createTreeWalker(d,NodeFilter.SHOW_TEXT).lastChild();b===l&&(null===(g=b.textContent)||void 0===g?void 0:g.length)===c&&(s=!1)}if(s&&l.parentElement&&(null==h||null===(v=h.getComputedStyle(l.parentElement))||void 0===v?void 0:v.whiteSpace)==="pre"){var C=f.ML.above(y,{at:u.path,match:e=>f.W_.isElement(e)&&f.ML.isBlock(y,e)});C&&f.NB.string(C[0]).includes("	")&&(s=!1)}}if(!r.startsWith("delete")||r.startsWith("deleteBy")){var[D]=e.getTargetRanges();if(D){var A=tC.toSlateRange(y,D,{exactMatch:!1,suppressThrow:!1});if(!t||!f.e6.equals(t,A)){s=!1;var x=!i&&y.selection&&f.ML.rangeRef(y,y.selection);f.YR.select(y,A),x&&e2.set(y,x)}}}if(!i){if(s||e.preventDefault(),t&&f.e6.isExpanded(t)&&r.startsWith("delete")){var B=r.endsWith("Backward")?"backward":"forward";f.ML.deleteFragment(y,{direction:B});return}switch(r){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":f.ML.deleteFragment(y);break;case"deleteContent":case"deleteContentForward":f.ML.deleteForward(y);break;case"deleteContentBackward":f.ML.deleteBackward(y);break;case"deleteEntireSoftLine":f.ML.deleteBackward(y,{unit:"line"}),f.ML.deleteForward(y,{unit:"line"});break;case"deleteHardLineBackward":f.ML.deleteBackward(y,{unit:"block"});break;case"deleteSoftLineBackward":f.ML.deleteBackward(y,{unit:"line"});break;case"deleteHardLineForward":f.ML.deleteForward(y,{unit:"block"});break;case"deleteSoftLineForward":f.ML.deleteForward(y,{unit:"line"});break;case"deleteWordBackward":f.ML.deleteBackward(y,{unit:"word"});break;case"deleteWordForward":f.ML.deleteForward(y,{unit:"word"});break;case"insertLineBreak":f.ML.insertSoftBreak(y);break;case"insertParagraph":f.ML.insertBreak(y);break;case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":"insertFromComposition"===r&&tC.isComposing(y)&&(E(!1),e1.set(y,!1)),(null==n?void 0:n.constructor.name)==="DataTransfer"?tC.insertData(y,n):"string"==typeof n&&(s?w.current.push(()=>f.ML.insertText(y,n)):f.ML.insertText(y,n))}var _=null===(p=e2.get(y))||void 0===p?void 0:p.unref();e2.delete(y),!_||y.selection&&f.e6.equals(y.selection,_)||f.YR.select(y,_)}}}},[y,I,O,o,a,R]),N=(0,c.useCallback)(e=>{null==e?(I.cancel(),R.cancel(),eq.delete(y),eJ.delete(y),C.current&&eH&&C.current.removeEventListener("beforeinput",M)):eH&&e.addEventListener("beforeinput",M),C.current=e},[I,R,y,M]);tF(()=>{var e=tC.getWindow(y);return e.document.addEventListener("selectionchange",R),()=>{e.document.removeEventListener("selectionchange",R)}},[R]);var P=n([y,[]]),L=i&&1===y.children.length&&1===Array.from(f.NB.texts(y)).length&&""===f.NB.string(y)&&!b,j=(0,c.useCallback)(e=>{if(e&&L){var t;_(null===(t=e.getBoundingClientRect())||void 0===t?void 0:t.height)}else _(void 0)},[L]);if(L){var z=f.ML.start(y,[]);P.push({[tt]:!0,placeholder:i,onPlaceholderResize:j,anchor:z,focus:z})}var{marks:W}=y;if(S.hasMarkPlaceholder=!1,y.selection&&f.e6.isCollapsed(y.selection)&&W){var{anchor:U}=y.selection,H=f.NB.leaf(y,U.path),$=eA(H,rp);if(!f.xv.equals(H,W,{loose:!0})){S.hasMarkPlaceholder=!0;var V=Object.fromEntries(Object.keys($).map(e=>[e,null]));P.push(rv(rv(rv({[tr]:!0},V),W),{},{anchor:U,focus:U}))}}return(0,c.useEffect)(()=>{setTimeout(()=>{var{selection:e}=y;if(e){var{anchor:t}=e,r=f.NB.leaf(y,t.path);if(W&&!f.xv.equals(r,W,{loose:!0})){e5.set(y,W);return}}e5.delete(y)})}),d().createElement(re.Provider,{value:a},d().createElement(t5.Provider,{value:n},d().createElement(rf,{node:C,receivedUserInput:T},d().createElement(m,rv(rv({role:a?void 0:"textbox","aria-multiline":!a||void 0},g),{},{spellCheck:(!!eH||!eU)&&g.spellCheck,autoCorrect:eH||!eU?g.autoCorrect:"false",autoCapitalize:eH||!eU?g.autoCapitalize:"false","data-slate-editor":!0,"data-slate-node":"value",contentEditable:!a,zindex:-1,suppressContentEditableWarning:!0,ref:N,style:rv(rv({},v?{}:rv({position:"relative",whiteSpace:"pre-wrap",wordWrap:"break-word"},x?{minHeight:x}:{})),p),onBeforeInput:(0,c.useCallback)(e=>{if(!eH&&!a&&!rD(e,g.onBeforeInput)&&tC.hasSelectableTarget(y,e.target)&&(e.preventDefault(),!tC.isComposing(y))){var t=e.data;f.ML.insertText(y,t)}},[g.onBeforeInput,y,a]),onInput:(0,c.useCallback)(e=>{if(!rD(e,g.onInput)){if(F.current){F.current.handleInput();return}for(var t of w.current)t();w.current=[]}},[g.onInput]),onBlur:(0,c.useCallback)(e=>{if(!(a||S.isUpdatingSelection||!tC.hasSelectableTarget(y,e.target)||rD(e,g.onBlur))){var t=tC.findDocumentOrShadowRoot(y);if(S.latestElement!==t.activeElement){var{relatedTarget:r}=e;if(!(r===tC.toDOMNode(y,y)||ta(r)&&r.hasAttribute("data-slate-spacer"))){if(null!=r&&ts(r)&&tC.hasDOMNode(y,r)){var n=tC.toSlateNode(y,r);if(f.W_.isElement(n)&&!y.isVoid(n))return}if(eR){var o=t.getSelection();null==o||o.removeAllRanges()}e0.delete(y)}}}},[a,S.isUpdatingSelection,S.latestElement,y,g.onBlur]),onClick:(0,c.useCallback)(e=>{if(tC.hasTarget(y,e.target)&&!rD(e,g.onClick)&&ts(e.target)){var t=tC.toSlateNode(y,e.target),r=tC.findPath(y,t);if(f.ML.hasPath(y,r)&&f.NB.get(y,r)===t){if(3===e.detail&&r.length>=1){var n=r;if(!(f.W_.isElement(t)&&f.ML.isBlock(y,t))){var o,i=f.ML.above(y,{match:e=>f.W_.isElement(e)&&f.ML.isBlock(y,e),at:r});n=null!==(o=null==i?void 0:i[1])&&void 0!==o?o:r.slice(0,1)}var s=f.ML.range(y,n);f.YR.select(y,s);return}if(!a){var u=f.ML.start(y,r),l=f.ML.end(y,r),c=f.ML.void(y,{at:u}),d=f.ML.void(y,{at:l});if(c&&d&&f.y$.equals(c[1],d[1])){var h=f.ML.range(y,u);f.YR.select(y,h)}}}}},[y,g.onClick,a]),onCompositionEnd:(0,c.useCallback)(e=>{if(tC.hasSelectableTarget(y,e.target)){var t;if(tC.isComposing(y)&&Promise.resolve().then(()=>{E(!1),e1.set(y,!1)}),null===(t=F.current)||void 0===t||t.handleCompositionEnd(e),!rD(e,g.onCompositionEnd)&&!eF&&!eR&&!ej&&!ek&&!eW&&!ez&&e.data){var r=e5.get(y);e5.delete(y),void 0!==r&&(e7.set(y,y.marks),y.marks=r),f.ML.insertText(y,e.data);var n=e7.get(y);e7.delete(y),void 0!==n&&(y.marks=n)}}},[g.onCompositionEnd,y]),onCompositionUpdate:(0,c.useCallback)(e=>{!tC.hasSelectableTarget(y,e.target)||rD(e,g.onCompositionUpdate)||tC.isComposing(y)||(E(!0),e1.set(y,!0))},[g.onCompositionUpdate,y]),onCompositionStart:(0,c.useCallback)(e=>{if(tC.hasSelectableTarget(y,e.target)&&(null===(t=F.current)||void 0===t||t.handleCompositionStart(e),!rD(e,g.onCompositionStart)&&!eF)){E(!0);var t,{selection:r}=y;if(r&&f.e6.isExpanded(r)){f.ML.deleteFragment(y);return}}},[g.onCompositionStart,y]),onCopy:(0,c.useCallback)(e=>{!tC.hasSelectableTarget(y,e.target)||rD(e,g.onCopy)||rw(e)||(e.preventDefault(),tC.setFragmentData(y,e.clipboardData,"copy"))},[g.onCopy,y]),onCut:(0,c.useCallback)(e=>{if(!a&&tC.hasSelectableTarget(y,e.target)&&!rD(e,g.onCut)&&!rw(e)){e.preventDefault(),tC.setFragmentData(y,e.clipboardData,"cut");var{selection:t}=y;if(t){if(f.e6.isExpanded(t))f.ML.deleteFragment(y);else{var r=f.NB.parent(y,t.anchor.path);f.ML.isVoid(y,r)&&f.YR.delete(y)}}}},[a,y,g.onCut]),onDragOver:(0,c.useCallback)(e=>{if(tC.hasTarget(y,e.target)&&!rD(e,g.onDragOver)){var t=tC.toSlateNode(y,e.target);f.W_.isElement(t)&&f.ML.isVoid(y,t)&&e.preventDefault()}},[g.onDragOver,y]),onDragStart:(0,c.useCallback)(e=>{if(!a&&tC.hasTarget(y,e.target)&&!rD(e,g.onDragStart)){var t=tC.toSlateNode(y,e.target),r=tC.findPath(y,t);if(f.W_.isElement(t)&&f.ML.isVoid(y,t)||f.ML.void(y,{at:r,voids:!0})){var n=f.ML.range(y,r);f.YR.select(y,n)}S.isDraggingInternally=!0,tC.setFragmentData(y,e.dataTransfer,"drag")}},[a,y,g.onDragStart,S]),onDrop:(0,c.useCallback)(e=>{if(!a&&tC.hasTarget(y,e.target)&&!rD(e,g.onDrop)){e.preventDefault();var t=y.selection,r=tC.findEventRange(y,e),n=e.dataTransfer;f.YR.select(y,r),S.isDraggingInternally&&t&&!f.e6.equals(t,r)&&!f.ML.void(y,{at:r,voids:!0})&&f.YR.delete(y,{at:t}),tC.insertData(y,n),tC.isFocused(y)||tC.focus(y)}S.isDraggingInternally=!1},[a,y,g.onDrop,S]),onDragEnd:(0,c.useCallback)(e=>{!a&&S.isDraggingInternally&&g.onDragEnd&&tC.hasTarget(y,e.target)&&g.onDragEnd(e),S.isDraggingInternally=!1},[a,S,g,y]),onFocus:(0,c.useCallback)(e=>{if(!a&&!S.isUpdatingSelection&&tC.hasEditableTarget(y,e.target)&&!rD(e,g.onFocus)){var t=tC.toDOMNode(y,y),r=tC.findDocumentOrShadowRoot(y);if(S.latestElement=r.activeElement,eI&&e.target!==t){t.focus();return}e0.set(y,!0)}},[a,S,y,g.onFocus]),onKeyDown:(0,c.useCallback)(e=>{if(!a&&tC.hasEditableTarget(y,e.target)){null===(t=F.current)||void 0===t||t.handleKeyDown(e);var t,{nativeEvent:r}=e;if(tC.isComposing(y)&&!1===r.isComposing&&(e1.set(y,!1),E(!1)),!(rD(e,g.onKeyDown)||tC.isComposing(y))){var{selection:n}=y,o=y.children[null!==n?n.focus.path[0]:0],i="rtl"===D()(f.NB.string(o));if(ru.isRedo(r)){e.preventDefault(),"function"==typeof y.redo&&y.redo();return}if(ru.isUndo(r)){e.preventDefault(),"function"==typeof y.undo&&y.undo();return}if(ru.isMoveLineBackward(r)){e.preventDefault(),f.YR.move(y,{unit:"line",reverse:!0});return}if(ru.isMoveLineForward(r)){e.preventDefault(),f.YR.move(y,{unit:"line"});return}if(ru.isExtendLineBackward(r)){e.preventDefault(),f.YR.move(y,{unit:"line",edge:"focus",reverse:!0});return}if(ru.isExtendLineForward(r)){e.preventDefault(),f.YR.move(y,{unit:"line",edge:"focus"});return}if(ru.isMoveBackward(r)){e.preventDefault(),n&&f.e6.isCollapsed(n)?f.YR.move(y,{reverse:!i}):f.YR.collapse(y,{edge:i?"end":"start"});return}if(ru.isMoveForward(r)){e.preventDefault(),n&&f.e6.isCollapsed(n)?f.YR.move(y,{reverse:i}):f.YR.collapse(y,{edge:i?"start":"end"});return}if(ru.isMoveWordBackward(r)){e.preventDefault(),n&&f.e6.isExpanded(n)&&f.YR.collapse(y,{edge:"focus"}),f.YR.move(y,{unit:"word",reverse:!i});return}if(ru.isMoveWordForward(r)){e.preventDefault(),n&&f.e6.isExpanded(n)&&f.YR.collapse(y,{edge:"focus"}),f.YR.move(y,{unit:"word",reverse:i});return}if(eH){if((eN||eR)&&n&&(ru.isDeleteBackward(r)||ru.isDeleteForward(r))&&f.e6.isCollapsed(n)){var s=f.NB.parent(y,n.anchor.path);if(f.W_.isElement(s)&&f.ML.isVoid(y,s)&&(f.ML.isInline(y,s)||f.ML.isBlock(y,s))){e.preventDefault(),f.ML.deleteBackward(y,{unit:"block"});return}}}else{if(ru.isBold(r)||ru.isItalic(r)||ru.isTransposeCharacter(r)){e.preventDefault();return}if(ru.isSoftBreak(r)){e.preventDefault(),f.ML.insertSoftBreak(y);return}if(ru.isSplitBlock(r)){e.preventDefault(),f.ML.insertBreak(y);return}if(ru.isDeleteBackward(r)){e.preventDefault(),n&&f.e6.isExpanded(n)?f.ML.deleteFragment(y,{direction:"backward"}):f.ML.deleteBackward(y);return}if(ru.isDeleteForward(r)){e.preventDefault(),n&&f.e6.isExpanded(n)?f.ML.deleteFragment(y,{direction:"forward"}):f.ML.deleteForward(y);return}if(ru.isDeleteLineBackward(r)){e.preventDefault(),n&&f.e6.isExpanded(n)?f.ML.deleteFragment(y,{direction:"backward"}):f.ML.deleteBackward(y,{unit:"line"});return}if(ru.isDeleteLineForward(r)){e.preventDefault(),n&&f.e6.isExpanded(n)?f.ML.deleteFragment(y,{direction:"forward"}):f.ML.deleteForward(y,{unit:"line"});return}if(ru.isDeleteWordBackward(r)){e.preventDefault(),n&&f.e6.isExpanded(n)?f.ML.deleteFragment(y,{direction:"backward"}):f.ML.deleteBackward(y,{unit:"word"});return}if(ru.isDeleteWordForward(r)){e.preventDefault(),n&&f.e6.isExpanded(n)?f.ML.deleteFragment(y,{direction:"forward"}):f.ML.deleteForward(y,{unit:"word"});return}}}}},[a,y,g.onKeyDown]),onPaste:(0,c.useCallback)(e=>{!a&&tC.hasEditableTarget(y,e.target)&&!rD(e,g.onPaste)&&(!eH||tc(e.nativeEvent)||eR)&&(e.preventDefault(),tC.insertData(y,e.clipboardData))},[a,y,g.onPaste])}),d().createElement(rg,{decorations:P,node:y,renderElement:s,renderPlaceholder:l,renderLeaf:u,selection:y.selection})))))},rb=e=>{var{attributes:t,children:r}=e;return d().createElement("span",rv({},t),r,eF&&d().createElement("br",null))},rE=()=>[],rC=(e,t)=>{if(t.getBoundingClientRect&&(!e.selection||e.selection&&f.e6.isCollapsed(e.selection))){var r=t.startContainer.parentElement;r.getBoundingClientRect=t.getBoundingClientRect.bind(t),function(e,t){if(!e.isConnected||!(e=>{let t=e;for(;t&&t.parentNode;){if(t.parentNode===document)return!0;t=t.parentNode instanceof ShadowRoot?t.parentNode.host:t.parentNode}return!1})(e))return;let r=(e=>{let t=window.getComputedStyle(e);return{top:parseFloat(t.scrollMarginTop)||0,right:parseFloat(t.scrollMarginRight)||0,bottom:parseFloat(t.scrollMarginBottom)||0,left:parseFloat(t.scrollMarginLeft)||0}})(e);if("object"==typeof t&&"function"==typeof t.behavior)return t.behavior(F(e,t));let n="boolean"==typeof t||null==t?void 0:t.behavior;for(let{el:o,top:i,left:a}of F(e,I(t))){let e=i-r.top+r.bottom,t=a-r.left+r.right;o.scroll({top:e,left:t,behavior:n})}}(r,{scrollMode:"if-needed"}),delete r.getBoundingClientRect}},rD=(e,t)=>{if(!t)return!1;var r=t(e);return null!=r?r:e.isDefaultPrevented()||e.isPropagationStopped()},rw=e=>ts(e.target)&&(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement),rA=(e,t)=>{if(!t)return!1;var r=t(e);return null!=r?r:e.defaultPrevented},rx=(0,c.createContext)(!1),rB=(0,c.createContext)({}),r_=["editor","children","onChange","onSelectionChange","onValueChange","initialValue"],rO=e=>{var{editor:t,children:r,onChange:n,onSelectionChange:o,onValueChange:i,initialValue:a}=e,s=eA(e,r_),[u,l]=d().useState(()=>{if(!f.NB.isNodeList(a))throw Error("[Slate] initialValue is invalid! Expected a list of elements but got: ".concat(f.o4.stringify(a)));if(!f.ML.isEditor(t))throw Error("[Slate] editor is invalid! You passed: ".concat(f.o4.stringify(t)));return t.children=a,Object.assign(t,s),{v:0,editor:t}}),{selectorContext:h,onChange:p}=function(e){var t=(0,c.useRef)([]).current,r=(0,c.useRef)({editor:e}).current,n=(0,c.useCallback)(e=>{r.editor=e,t.forEach(t=>t(e))},[t,r]);return{selectorContext:(0,c.useMemo)(()=>({getSlate:()=>r.editor,addEventListener:e=>(t.push(e),()=>{t.splice(t.indexOf(e),1)})}),[t,r]),onChange:n}}(t),m=(0,c.useCallback)(e=>{var r;(n&&n(t.children),(null==e||null===(r=e.operation)||void 0===r?void 0:r.type)==="set_selection")?null==o||o(t.selection):null==i||i(t.children),l(e=>({v:e.v+1,editor:t})),p(t)},[t,p,n,o,i]);(0,c.useEffect)(()=>(e3.set(t,m),()=>{e3.set(t,()=>{})}),[t,m]);var[v,g]=(0,c.useState)(tC.isFocused(t));return(0,c.useEffect)(()=>{g(tC.isFocused(t))},[t]),tF(()=>{var e=()=>g(tC.isFocused(t));return eT>=17?(document.addEventListener("focusin",e),document.addEventListener("focusout",e),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",e)}):(document.addEventListener("focus",e,!0),document.addEventListener("blur",e,!0),()=>{document.removeEventListener("focus",e,!0),document.removeEventListener("blur",e,!0)})},[]),d().createElement(rB.Provider,{value:h},d().createElement(rr.Provider,{value:u},d().createElement(e_.Provider,{value:u.editor},d().createElement(rx.Provider,{value:v},r))))},rT=(e,t)=>{var r=(t.top+t.bottom)/2;return e.top<=r&&e.bottom>=r},rk=(e,t,r)=>{var n=tC.toDOMRange(e,t).getBoundingClientRect(),o=tC.toDOMRange(e,r).getBoundingClientRect();return rT(n,o)&&rT(o,n)},rS=(e,t)=>{var r=f.ML.range(e,f.e6.end(t)),n=Array.from(f.ML.positions(e,{at:t})),o=0,i=n.length,a=Math.floor(i/2);if(rk(e,f.ML.range(e,n[o]),r))return f.ML.range(e,n[o],r);if(n.length<2)return f.ML.range(e,n[n.length-1],r);for(;a!==n.length&&a!==o;)rk(e,f.ML.range(e,n[a]),r)?i=a:o=a,a=Math.floor((o+i)/2);return f.ML.range(e,n[i],r)};function rF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function rI(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rF(Object(r),!0).forEach(function(t){eB(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rF(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var rR=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x-slate-fragment",{apply:r,onChange:n,deleteBackward:o,addMark:i,removeMark:a}=e;return eX.set(e,new WeakMap),e.addMark=(t,r)=>{var n,o;null===(n=e4.get(e))||void 0===n||n(),!e5.get(e)&&null!==(o=e9.get(e))&&void 0!==o&&o.length&&e5.set(e,null),e7.delete(e),i(t,r)},e.removeMark=t=>{var r;!e5.get(e)&&null!==(r=e9.get(e))&&void 0!==r&&r.length&&e5.set(e,null),e7.delete(e),a(t)},e.deleteBackward=t=>{if("line"!==t)return o(t);if(e.selection&&f.e6.isCollapsed(e.selection)){var r=f.ML.above(e,{match:t=>f.W_.isElement(t)&&f.ML.isBlock(e,t),at:e.selection});if(r){var[,n]=r,i=f.ML.range(e,n,e.selection.anchor),a=rS(e,i);f.e6.isCollapsed(a)||f.YR.delete(e,{at:a})}}},e.apply=t=>{var n=[],o=[],i=e9.get(e);if(null!=i&&i.length){var a=i.map(e=>(function(e,t){var{path:r,diff:n,id:o}=e;switch(t.type){case"insert_text":if(!f.y$.equals(t.path,r)||t.offset>=n.end)return e;if(t.offset<=n.start)return{diff:{start:t.text.length+n.start,end:t.text.length+n.end,text:n.text},id:o,path:r};return{diff:{start:n.start,end:n.end+t.text.length,text:n.text},id:o,path:r};case"remove_text":if(!f.y$.equals(t.path,r)||t.offset>=n.end)return e;if(t.offset+t.text.length<=n.start)return{diff:{start:n.start-t.text.length,end:n.end-t.text.length,text:n.text},id:o,path:r};return{diff:{start:n.start,end:n.end-t.text.length,text:n.text},id:o,path:r};case"split_node":if(!f.y$.equals(t.path,r)||t.position>=n.end)return{diff:n,id:o,path:f.y$.transform(r,t,{affinity:"backward"})};if(t.position>n.start)return{diff:{start:n.start,end:Math.min(t.position,n.end),text:n.text},id:o,path:r};return{diff:{start:n.start-t.position,end:n.end-t.position,text:n.text},id:o,path:f.y$.transform(r,t,{affinity:"forward"})};case"merge_node":if(!f.y$.equals(t.path,r))return{diff:n,id:o,path:f.y$.transform(r,t)};return{diff:{start:n.start+t.position,end:n.end+t.position,text:n.text},id:o,path:f.y$.transform(r,t)}}var i=f.y$.transform(r,t);return i?{diff:n,path:i,id:o}:null})(e,t)).filter(Boolean);e9.set(e,a)}var s=e8.get(e);s&&e8.set(e,t_(e,s,t));var u=e6.get(e);if(null!=u&&u.at){var l=f.E9.isPoint(null==u?void 0:u.at)?tB(e,u.at,t):t_(e,u.at,t);e6.set(e,l?rI(rI({},u),{},{at:l}):null)}switch(t.type){case"insert_text":case"remove_text":case"set_node":case"split_node":n.push(...rM(e,t.path));break;case"set_selection":null===(c=e2.get(e))||void 0===c||c.unref(),e2.delete(e);break;case"insert_node":case"remove_node":n.push(...rM(e,f.y$.parent(t.path)));break;case"merge_node":n.push(...rM(e,f.y$.previous(t.path)));break;case"move_node":n.push(...rM(e,f.y$.common(f.y$.parent(t.path),f.y$.parent(t.newPath)))),f.y$.isBefore(t.path,t.newPath)?(n.push(...rM(e,f.y$.parent(t.path))),d=t.newPath):(n.push(...rM(e,f.y$.parent(t.newPath))),d=t.path);var c,d,h=f.NB.get(e,f.y$.parent(d)),p=tC.findKey(e,h);o.push([f.ML.pathRef(e,f.y$.parent(d)),p])}for(var[m,v]of(r(t),n)){var[g]=f.ML.node(e,m);eZ.set(g,v)}for(var[y,b]of o)if(y.current){var[E]=f.ML.node(e,y.current);eZ.set(E,b)}},e.setFragmentData=r=>{var{selection:n}=e;if(n){var[o,i]=f.e6.edges(n),a=f.ML.void(e,{at:o.path}),s=f.ML.void(e,{at:i.path});if(!f.e6.isCollapsed(n)||a){var u=tC.toDOMRange(e,n),l=u.cloneContents(),c=l.childNodes[0];if(l.childNodes.forEach(e=>{e.textContent&&""!==e.textContent.trim()&&(c=e)}),s){var[d]=s,h=u.cloneRange(),p=tC.toDOMNode(e,d);h.setEndAfter(p),l=h.cloneContents()}if(a&&(c=l.querySelector("[data-slate-spacer]")),Array.from(l.querySelectorAll("[data-slate-zero-width]")).forEach(e=>{var t="n"===e.getAttribute("data-slate-zero-width");e.textContent=t?"\n":""}),tl(c)){var m=c.ownerDocument.createElement("span");m.style.whiteSpace="pre",m.appendChild(c),l.appendChild(m),c=m}var v=JSON.stringify(e.getFragment()),g=window.btoa(encodeURIComponent(v));c.setAttribute("data-slate-fragment",g),r.setData("application/".concat(t),g);var y=l.ownerDocument.createElement("div");return y.appendChild(l),y.setAttribute("hidden","true"),l.ownerDocument.body.appendChild(y),r.setData("text/html",y.innerHTML),r.setData("text/plain",tm(y)),l.ownerDocument.body.removeChild(y),r}}},e.insertData=t=>{e.insertFragmentData(t)||e.insertTextData(t)},e.insertFragmentData=r=>{var n=r.getData("application/".concat(t))||tg(r);if(n){var o=JSON.parse(decodeURIComponent(window.atob(n)));return e.insertFragment(o),!0}return!1},e.insertTextData=t=>{var r=t.getData("text/plain");if(r){var n=r.split(/\r\n|\r|\n/),o=!1;for(var i of n)o&&f.YR.splitNodes(e,{always:!0}),e.insertText(i),o=!0;return!0}return!1},e.onChange=t=>{(eT<18?ew().unstable_batchedUpdates:e=>e())(()=>{var r=e3.get(e);r&&r(t),n(t)})},e},rM=(e,t)=>{var r=[];for(var[n,o]of f.ML.levels(e,{at:t})){var i=tC.findKey(e,n);r.push([o,i])}return r},rN=r(92257),rP=r(30662),rL=r(23176),rj=r(85759),rz=r(6954),rW=r(8695),rU=r(98474);let rH=[{type:"mark",mark:"bold",character:"*"},{type:"mark",mark:"italic",character:"_"},{type:"mark",mark:"strikethrough",character:"~"},{type:"mark",mark:"code",character:"`"}],r$=rH.filter(e=>"mark"===e.type).map(e=>e.character);var rV=r(51744),rK=r(74162),rq=r(37905);function rY(e,t){for(let r of t)if((0,rq.G)(r)){if(!(0,rW.k)(r.text))return!1}else if("paragraph"===r.type){if(r.children.length>1||!((0,rq.G)(r.children[0])&&(0,rW.k)(r.children[0].text)))return!1}else if(!f.ML.isEmpty(e,r))return!1;return!0}function rG(e,t){(function(e,t){let r=f.ML.marks(e);return!!r&&!0===r[t]})(e,t)?f.ML.removeMark(e,t):f.ML.addMark(e,t,!0)}function rJ(e){let t=f.ML.marks(e);if(t)for(let r in t)f.ML.removeMark(e,r)}function rZ(e,t){(0,rU.d)(e.selection)&&Object.keys(f.ML.marks(e)??{}).length>0&&!("start"===t?(0,rj.F)(e,e.selection):(0,rj.z)(e,e.selection))&&rJ(e)}var rX=r(78709);function rQ(e){return(rQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r0(e,t,r){var n;return n=function(e,t){if("object"!==rQ(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==rQ(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"===rQ(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var r1=new WeakMap,r2=new WeakMap;class r3{}class r4 extends r3{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),r0(this,"offset",void 0),r0(this,"path",void 0);var{offset:t,path:r}=e;this.offset=t,this.path=r}}class r5 extends r3{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),r0(this,"offset",void 0),r0(this,"path",void 0);var{offset:t,path:r}=e;this.offset=t,this.path=r}}var r7=(e,t)=>{var r=e.text.length;r1.set(e,[r,t])},r9=e=>r1.get(e),r6=(e,t)=>{var r=e.text.length;r2.set(e,[r,t])},r8=e=>r2.get(e);function ne(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function nt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(r),!0).forEach(function(t){r0(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ne(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var nr=new WeakSet,nn=e=>{var t=[],r=e=>{if(null!=e){var n=t[t.length-1];if("string"==typeof e){var o={text:e};nr.add(o),e=o}if(f.xv.isText(e)){var i=e;f.xv.isText(n)&&nr.has(n)&&nr.has(i)&&f.xv.equals(n,i,{loose:!0})?n.text+=i.text:t.push(i)}else if(f.W_.isElement(e))t.push(e);else if(e instanceof r3){var a=t[t.length-1];f.xv.isText(a)||(r(""),a=t[t.length-1]),e instanceof r4?r7(a,e):e instanceof r5&&r6(a,e)}else throw Error("Unexpected hyperscript child object: ".concat(e))}};for(var n of e.flat(1/0))r(n);return t};function no(e,t,r){return nt(nt({},t),{},{children:nn(r)})}function ni(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function na(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ni(Object(r),!0).forEach(function(t){r0(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ni(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var ns={anchor:function(e,t,r){return new r4(t)},cursor:function(e,t,r){return[new r4(t),new r5(t)]},editor:(n=f.Jh,(e,t,r)=>{var o,i=[];for(var a of r)f.e6.isRange(a)?o=a:i.push(a);var s=nn(i),u={},l=n();for(var[c,d]of(Object.assign(l,t),l.children=s,f.NB.texts(l))){var h=r9(c),p=r8(c);if(null!=h){var[m]=h;u.anchor={path:d,offset:m}}if(null!=p){var[v]=p;u.focus={path:d,offset:v}}}if(u.anchor&&!u.focus)throw Error("Slate hyperscript ranges must have both `<anchor />` and `<focus />` defined if one is defined, but you only defined `<anchor />`. For collapsed selections, use `<cursor />` instead.");if(!u.anchor&&u.focus)throw Error("Slate hyperscript ranges must have both `<anchor />` and `<focus />` defined if one is defined, but you only defined `<focus />`. For collapsed selections, use `<cursor />` instead.");return null!=o?l.selection=o:f.e6.isRange(u)&&(l.selection=u),l}),element:no,focus:function(e,t,r){return new r5(t)},fragment:function(e,t,r){return nn(r)},selection:function(e,t,r){var n=r.find(e=>e instanceof r4),o=r.find(e=>e instanceof r5);if(!n||null==n.offset||null==n.path)throw Error("The <selection> hyperscript tag must have an <anchor> tag as a child with `path` and `offset` attributes defined.");if(!o||null==o.offset||null==o.path)throw Error("The <selection> hyperscript tag must have a <focus> tag as a child with `path` and `offset` attributes defined.");return nt({anchor:{offset:n.offset,path:n.path},focus:{offset:o.offset,path:o.path}},t)},text:function(e,t,r){var n=nn(r);if(n.length>1)throw Error("The <text> hyperscript tag must only contain a single node's worth of children.");var[o]=n;if(null==o&&(o={text:""}),!f.xv.isText(o))throw Error("\n    The <text> hyperscript tag can only contain text content as children.");return nr.delete(o),Object.assign(o,t),o}},nu=e=>function(t,r){for(var n=arguments.length,o=Array(n>2?n-2:0),i=2;i<n;i++)o[i-2]=arguments[i];var a=e[t];if(!a)throw Error("No hyperscript creator found for tag: <".concat(t,">"));return null==r&&(r={}),(0,h.P)(r)||(o=[r].concat(o),r={}),a(t,r,o=o.filter(e=>!!e).flat())},nl=e=>{var t={};for(var r in e)!function(){var n=e[r];if("object"!=typeof n)throw Error("Properties specified for a hyperscript shorthand should be an object, but for the custom element <".concat(r,">  tag you passed: ").concat(n));t[r]=(e,t,r)=>no("element",na(na({},n),t),r)}();return t},nc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{elements:t={}}=e,r=nl(t);return nu(na(na(na({},ns),r),e.creators))}(),nd=r(6051);let nf=()=>({type:"paragraph"}),nh={A:e=>{let t=e.getAttribute("href"),r=e.innerText;return{type:t&&function(e,t){try{let r=new URL(e),n=new URL(t);return r.origin===n.origin&&r.pathname===n.pathname}catch{return!1}}(t,r)?"auto-link":"custom-link",url:t??""}},P:nf,BLOCKQUOTE:nf,H1:nf,H2:nf,H3:nf,H4:nf,H5:nf,H6:nf,LI:nf},np={CODE:()=>({code:!0}),DEL:()=>({strikethrough:!0}),EM:()=>({italic:!0}),I:()=>({italic:!0}),S:()=>({strikethrough:!0}),STRONG:()=>({bold:!0})};var nm=r(32829),nv=r(90193);let ng=eD["flushSync".toString()]??function(e){return e()};var ny=r(98175);let nb=(0,c.createContext)(null);function nE(){let e=(0,c.useContext)(nb);return(0,nv.nn)(e,"Persist is missing from the React tree.")}function nC({children:e}){let[t,r]=(0,c.useState)(!0),n=(0,c.useRef)(null),o=function(e){let t=Array.isArray(e)?c.Children.only(e):e;return(0,c.isValidElement)(t)?t:void 0}(e),i=(0,c.useCallback)(()=>{ng(()=>r(!1))},[]);return(0,ny.b)(()=>{o&&(r(!0),n.current=o)},[o]),c.createElement(nb.Provider,{value:[!!o,i]},o??(t?n.current:null))}let nD=(0,c.forwardRef)(({container:e=document?.body,asChild:t,...r},n)=>{let o=t?l.g7:"div";return e?(0,eD.createPortal)(c.createElement(o,{"data-liveblocks-portal":"",...r,ref:n}),e):null}),nw=!1,nA=0;function nx(){return++nA}let nB=c["useId".toString()]??function(){let[e,t]=(0,c.useState)(nw?nx:null);return(0,ny.b)(()=>{null===e&&t(nx())},[e]),(0,c.useEffect)(()=>{nw||(nw=!0)},[]),String(e)??void 0};function n_(e,t,r){return Math.min(Math.max(e,t),r)}function nO(e,t,r){let n=r-t;return n>0?((e-t)%n+n)%n+t:0}let nT={wrap:!0};var nk=r(43853),nS=r(88973),nF=r(78390),nI=r(90331),nR=r(22161);let nM={version:1,content:[{type:"paragraph",children:[{text:""}]}]};function nN({Mention:e,attributes:t,children:r,element:n}){let o=t6();return c.createElement("span",{...t},n.id?c.createElement(e,{userId:n.id,isSelected:o}):null,r)}function nP({Link:e,attributes:t,element:r,children:n}){let o=(0,c.useMemo)(()=>(0,nF.BY)(r.url)??r.url,[r.url]);return c.createElement("span",{...t},c.createElement(e,{href:o},n))}function nL({id:e,itemId:t,userIds:r,selectedUserId:n,setSelectedUserId:o,mentionDraft:i,onItemSelect:u,position:l="top",dir:d,MentionSuggestions:f}){let h=eO(),{isFocused:p}=(0,nI.xc)(),[m,v]=(0,c.useState)(null),[g,y]=(0,c.useState)(),b=(0,c.useCallback)(v,[v]),{portalContainer:E}=(0,rN.T)(),C=(0,c.useMemo)(()=>{let e={padding:rP.rV};return{strategy:"fixed",placement:(0,nR.a_)(l,d),middleware:[(0,a.RR)({...e,crossAxis:!1}),(0,a.Cp)(e),(0,a.uY)({...e,limiter:(0,a.dr)()}),(0,a.dp)({...e,apply({availableWidth:e,availableHeight:t,elements:r}){r.floating.style.setProperty("--lb-composer-suggestions-available-width",`${e}px`),r.floating.style.setProperty("--lb-composer-suggestions-available-height",`${t}px`)}})],whileElementsMounted:(...e)=>(0,s.Me)(...e,{animationFrame:!0})}},[l,d]),{refs:{setReference:D,setFloating:w},strategy:A,isPositioned:x,placement:B,x:_,y:O}=(0,a.YF)(C);return(0,ny.b)(()=>{m&&y(window.getComputedStyle(m).zIndex)},[m]),(0,ny.b)(()=>{if(!i)return;let e=function e(t,r){try{return tC.toDOMRange(t,r)}catch(n){return e(t,{anchor:r.anchor,focus:r.anchor})}}(h,i.range);e&&D({getBoundingClientRect:()=>e.getBoundingClientRect(),getClientRects:()=>e.getClientRects()})},[D,h,i]),c.createElement(nC,null,i?.range&&p&&r?c.createElement(nI._O.Provider,{value:{id:e,itemId:t,selectedValue:n,setSelectedValue:o,onItemSelect:u,placement:B,dir:d,ref:b}},c.createElement(nD,{ref:w,container:E,style:{position:A,top:0,left:0,transform:x?`translate3d(${Math.round(_)}px, ${Math.round(O)}px, 0)`:"translate3d(0, -200%, 0)",minWidth:"max-content",zIndex:g}},c.createElement(f,{userIds:r,selectedUserId:n}))):null)}function nj({Mention:e,Link:t,...r}){let{attributes:n,children:o,element:i}=r;switch(i.type){case"mention":return c.createElement(nN,{Mention:e,...r});case"auto-link":case"custom-link":return c.createElement(nP,{Link:t,...r});case"paragraph":return c.createElement("p",{...n,style:{position:"relative"}},o);default:return null}}function nz({attributes:e,children:t,leaf:r}){return r.bold&&(t=c.createElement("strong",null,t)),r.italic&&(t=c.createElement("em",null,t)),r.strikethrough&&(t=c.createElement("s",null,t)),r.code&&(t=c.createElement("code",null,t)),c.createElement("span",{...e},t)}function nW({attributes:e,children:t}){let{opacity:r,...n}=e.style;return c.createElement("span",{...e,style:n,"data-placeholder":""},t)}let nU=(0,c.forwardRef)(({children:e,asChild:t,...r},n)=>{let o=t?l.g7:"span",i=t6();return c.createElement(o,{"data-selected":i||void 0,...r,ref:n},e)}),nH=(0,c.forwardRef)(({children:e,asChild:t,...r},n)=>{let o=t?l.g7:"a";return c.createElement(o,{target:"_blank",rel:"noopener noreferrer nofollow",...r,ref:n},e)}),n$=(0,c.forwardRef)(({children:e,style:t,asChild:r,...n},o)=>{let[i]=nE(),a=(0,c.useRef)(null),{ref:s,placement:u,dir:d}=(0,nI.Y8)("ComposerSuggestions"),f=(0,nS.v)(o,s,a),[h,p]=(0,c.useMemo)(()=>(0,nR.P5)(u),[u]),m=r?l.g7:"div";return function(e){let[t,r]=nE(),n=(0,c.useRef)(null),o=(0,c.useRef)(null);(0,ny.b)(()=>{let t=e.current;if(!t)return;let i=e=>{e.animationName===o.current&&r(),n.current=e.animationName};return t.addEventListener("animationcancel",i),t.addEventListener("animationend",i),()=>{t.removeEventListener("animationcancel",i),t.removeEventListener("animationend",i)}},[e,r]),(0,ny.b)(()=>{let i;let a=e.current;if(a)return t||(i=requestAnimationFrame(()=>{let e=getComputedStyle(a);o.current=e.animationName,("none"===e.animationName||e.animationName===n.current||"none"===e.display)&&r()})),()=>{cancelAnimationFrame(i)}},[t,e,r])}(a),c.createElement(m,{dir:d,...n,"data-state":i?"open":"closed","data-side":h,"data-align":p,style:{display:"flex",flexDirection:"column",maxHeight:"var(--lb-composer-suggestions-available-height)",overflowY:"auto",...t},ref:f},e)}),nV=(0,c.forwardRef)(({children:e,asChild:t,...r},n)=>{let{id:o}=(0,nI.Y8)("ComposerSuggestionsList"),i=t?l.g7:"ul";return c.createElement(i,{role:"listbox",id:o,"aria-label":"Suggestions list",...r,ref:n},e)}),nK=(0,c.forwardRef)(({value:e,children:t,onPointerMove:r,onPointerDown:n,asChild:o,...i},a)=>{let s=(0,c.useRef)(null),u=(0,nS.v)(a,s),{selectedValue:d,setSelectedValue:f,itemId:h,onItemSelect:p}=(0,nI.Y8)("ComposerSuggestionsListItem"),m=o?l.g7:"li",v=(0,c.useMemo)(()=>d===e,[d,e]),g=(0,c.useMemo)(()=>h(e),[h,e]);(0,c.useEffect)(()=>{s?.current&&v&&s.current.scrollIntoView({block:"nearest"})},[v]);let y=(0,c.useCallback)(t=>{r?.(t),t.isDefaultPrevented()||f(e)},[r,f,e]),b=(0,c.useCallback)(t=>{if(n?.(t),!t.isDefaultPrevented()){let r=t.target;r.hasPointerCapture(t.pointerId)&&r.releasePointerCapture(t.pointerId),0===t.button&&!1===t.ctrlKey&&(p(e),t.preventDefault())}},[p,n,e]);return c.createElement(m,{role:"option",id:g,"data-selected":v||void 0,"aria-selected":v||void 0,onPointerMove:y,onPointerDown:b,...i,ref:u},t)}),nq={Link:({href:e,children:t})=>c.createElement(nH,{href:e},t),Mention:({userId:e})=>c.createElement(nU,null,rX.$S,e),MentionSuggestions:({userIds:e})=>e.length>0?c.createElement(n$,null,c.createElement(nV,null,e.map(e=>c.createElement(nK,{key:e,value:e},e)))):null},nY=(0,c.forwardRef)(({defaultValue:e,onKeyDown:t,onFocus:r,onBlur:n,disabled:o,autoFocus:i,components:a,dir:s,...u},l)=>{let{editor:d,validate:h,setFocused:p}=(0,nI.BZ)(),{submit:m,focus:v,select:g,canSubmit:y,isDisabled:b,isFocused:E}=(0,nI.xc)(),C=b||o,D=(0,nk.T)(e??nM),w=(0,c.useMemo)(()=>(0,nR.XM)(D),[D]),{Link:A,Mention:x,MentionSuggestions:B}=(0,c.useMemo)(()=>({...nq,...a}),[a]),[_,O]=(0,c.useState)(),T=(0,rL.q)(_?.text),[k,S,F,I]=function(e,t,r){let{wrap:n}=(0,c.useMemo)(()=>({...nT}),[void 0]),o=(0,c.useMemo)(()=>n?nO:n_,[n]),[i,a]=(0,c.useState)(0);return(0,c.useEffect)(()=>{a(e=>n_(e,0,Math.max(t-1,0)))},[t]),[i,(0,c.useCallback)(()=>{a(e=>o(e-1,0,Math.max(t,0)))},[t,o]),(0,c.useCallback)(()=>{a(e=>o(e+1,0,Math.max(t,0)))},[t,o]),a]}(0,T?.length??0),R=nB(),M=(0,c.useMemo)(()=>`liveblocks-suggestions-list-${R}`,[R]),N=(0,c.useCallback)(e=>e?`liveblocks-suggestions-list-item-${R}-${e}`:void 0,[R]),P=(0,c.useCallback)(e=>c.createElement(nj,{Mention:x,Link:A,...e}),[A,x]),L=(0,c.useCallback)(e=>{h(e),O((0,rX.CQ)(d))},[d,h]),j=(0,c.useCallback)(e=>{_&&e&&(f.YR.select(d,_.range),(0,rX.lZ)(d,e),O(void 0),I(0))},[d,_,I]),z=(0,c.useCallback)(e=>{t?.(e),!e.isDefaultPrevented()&&((0,nm.o)(e,"ArrowLeft")&&rZ(d,"start"),(0,nm.o)(e,"ArrowRight")&&rZ(d,"end"),_&&T?.length?((0,nm.o)(e,"ArrowDown")&&(e.preventDefault(),F()),(0,nm.o)(e,"ArrowUp")&&(e.preventDefault(),S()),((0,nm.o)(e,"Enter")||(0,nm.o)(e,"Tab"))&&(e.preventDefault(),j(T?.[k])),(0,nm.o)(e,"Escape")&&(e.preventDefault(),O(void 0),I(0))):((0,nm.o)(e,"Escape")&&(e.preventDefault(),tC.blur(d)),(0,nm.o)(e,"Enter",{shift:!1})&&(e.preventDefault(),y&&m()),(0,nm.o)(e,"Enter",{shift:!0})&&(e.preventDefault(),d.insertBreak()),(0,nm.o)(e,"b",{mod:!0})&&(e.preventDefault(),rG(d,"bold")),(0,nm.o)(e,"i",{mod:!0})&&(e.preventDefault(),rG(d,"italic")),(0,nm.o)(e,"s",{mod:!0,shift:!0})&&(e.preventDefault(),rG(d,"strikethrough")),(0,nm.o)(e,"e",{mod:!0})&&(e.preventDefault(),rG(d,"code"))))},[j,d,y,_,T,k,t,F,S,I,m]),W=(0,c.useCallback)(e=>{r?.(e),e.isDefaultPrevented()||p(!0)},[r,p]),U=(0,c.useCallback)(e=>{n?.(e),e.isDefaultPrevented()||p(!1)},[n,p]),H=(0,c.useMemo)(()=>T?.[k],[k,T]),$=(0,c.useCallback)(e=>{let t=T?.indexOf(e);void 0!==t&&t>=0&&I(t)},[I,T]),V=(0,c.useMemo)(()=>_?{role:"combobox","aria-autocomplete":"list","aria-expanded":!0,"aria-controls":M,"aria-activedescendant":N(H)}:{},[_,M,N,H]);return(0,c.useImperativeHandle)(l,()=>tC.toDOMNode(d,d),[d]),(0,c.useEffect)(()=>{i&&v()},[i,d,v]),(0,c.useEffect)(()=>{E&&null===d.selection&&g()},[d,g,E]),c.createElement(rO,{editor:d,initialValue:w,onChange:L},c.createElement(ry,{dir:s,enterKeyHint:_?"enter":"send",autoCapitalize:"sentences","aria-label":"Composer editor","data-focused":E||void 0,"data-disabled":C||void 0,...V,...u,readOnly:C,disabled:C,onKeyDown:z,onFocus:W,onBlur:U,renderElement:P,renderLeaf:nz,renderPlaceholder:nW}),c.createElement(nL,{dir:s,mentionDraft:_,selectedUserId:H,setSelectedUserId:$,userIds:T,id:M,itemId:N,onItemSelect:j,MentionSuggestions:B}))}),nG=(0,c.forwardRef)(({children:e,onSubmit:t,onComposerSubmit:r,defaultAttachments:n=[],pasteFilesAsAttachments:o,disabled:i,asChild:a,...s},d)=>{let h=a?l.g7:"form",p=(0,u.kB)(),[m,v]=(0,c.useState)(!0),[g,b]=(0,c.useState)(!1),[E,C]=(0,c.useState)(!1),{attachments:D,isUploadingAttachments:w,addAttachments:A,removeAttachment:x,clearAttachments:B}=(0,nR.Y1)(n,{maxFileSize:1073741824}),_=D.length,O=_>=10,T=(0,c.useMemo)(()=>{let e=p.getSelf(),t=e?.canComment??!0;return g||i||!t},[g,i,p]),k=(0,c.useMemo)(()=>!m&&!w,[m,w]),S=(0,c.useRef)(null),F=(0,nS.v)(d,S),I=(0,c.useRef)(null),R=(0,c.useCallback)(e=>{if(!e.length)return;let t=Math.max(0,10-_);e.splice(t),A(e.map(e=>p.prepareAttachment(e)))},[A,10,_,p]),M=(0,c.useRef)(R);(0,c.useEffect)(()=>{M.current=R},[R]);let N=(0,c.useCallback)(e=>{M.current(e)},[]),P=(0,nk.T)(()=>(function({createAttachments:e,pasteFilesAsAttachments:t}){return(0,rX.r)((0,rK.P)((0,rV.F)(function(e){let{insertText:t}=e;return e.insertText=(r,n)=>{if(!(0,rU.d)(e.selection))return t(r,n);let o=!0;for(let t of rH)"mark"===t.type&&function(e,t,r){if(t!==r.character)return!1;let n=(0,rz.j)(e,e.selection,[r.character]);if(!n||f.e6.isCollapsed(n))return!1;let o=(0,rj.F)(e,n);if(!o||o.text!==r.character)return!1;let i=(0,rj.F)(e,o.range);if(i&&!r$.includes(i.text)&&!(0,rW.k)(i.text))return!1;let a=f.ML.string(e,n);return a.trim()===a&&(f.YR.select(e,n),e.addMark(r.mark,!0),f.YR.collapse(e,{edge:"end"}),e.removeMark(r.mark),f.YR.delete(e,{at:o.range}),!0)}(e,r,t)&&(o=!1);o&&t(r,n)},e}(function(e){let{onChange:t}=e;return e.onChange=r=>{rY(e,e.children)&&rJ(e),t(r)},e}(function(e,{createAttachments:t,pasteFilesAsAttachments:r}){let{insertData:n}=e;return e.insertData=o=>{if(o.types.includes("Files")&&r){let e=(0,nd.b)(o);if(e.length>0){t(e);return}}if(o.types.includes("text/html")){let t=o.getData("text/html"),r=function e(t){if(3===t.nodeType)return t.textContent;if(1!==t.nodeType)return null;if("BR"===t.nodeName)return"\n";let r=Array.from(t.childNodes).map(e).flat();if(("UL"===t.nodeName||"OL"===t.nodeName)&&(r=(function e(t){let r=[];return"LI"===t.nodeName&&r.push(t),t.childNodes.forEach(t=>{1===t.nodeType&&r.push(...e(t))}),r})(t).map(t=>e(t)).flat()),0===r.length&&(r=[{text:""}]),"BODY"===t.nodeName)return nc("fragment",{},r);if(nh[t.nodeName])return nc("element",nh[t.nodeName](t),r);if(np[t.nodeName]){let e=np[t.nodeName](t);return r.map(t=>nc("text",e,t))}return r}(new DOMParser().parseFromString(t,"text/html").body);if(null!==r&&Array.isArray(r)){f.YR.insertFragment(e,r);return}}n(o)},e}(y(rR((0,f.Jh)())),{createAttachments:e,pasteFilesAsAttachments:t}))))))})({createAttachments:N,pasteFilesAsAttachments:o})),L=(0,c.useCallback)(e=>{v(rY(P,e))},[P]),j=(0,c.useCallback)(()=>{k&&requestAnimationFrame(()=>{S.current&&function(e,t){if("function"==typeof e.requestSubmit)return e.requestSubmit(t);t?t.click():((t=document.createElement("input")).type="submit",t.hidden=!0,e.appendChild(t),t.click(),e.removeChild(t))}(S.current)})},[k]),z=(0,c.useCallback)(()=>{f.YR.delete(P,{at:{anchor:f.ML.start(P,[]),focus:f.ML.end(P,[])}})},[P]),W=(0,c.useCallback)(()=>{f.YR.select(P,{anchor:f.ML.end(P,[]),focus:f.ML.end(P,[])})},[P]),U=(0,c.useCallback)((e=!0)=>{tC.isFocused(P)||(f.YR.select(P,e||!P.selection?f.ML.end(P,[]):P.selection),tC.focus(P))},[P]),H=(0,c.useCallback)(()=>{tC.blur(P)},[P]),$=(0,c.useCallback)(()=>{U(),(0,rX.ji)(P)},[P,U]),V=(0,c.useCallback)(e=>{U(!1),(0,f.Om)(P,e)},[P,U]),K=(0,c.useCallback)(()=>{I.current&&I.current.click()},[]),q=(0,c.useCallback)(e=>{e.target.files&&(R(Array.from(e.target.files)),e.target.value="")},[R]),Y=(0,c.useCallback)(()=>{z(),H(),B(),b(!1)},[H,z,B]),G=(0,c.useCallback)(e=>{if(rY(P,P.children)||(t?.(e),!r||e.isDefaultPrevented())){e.preventDefault();return}let n=r({body:(0,nR.z7)(P.children),attachments:D.filter(e=>"attachment"===e.type||"localAttachment"===e.type&&"uploaded"===e.status).map(e=>({id:e.id,type:"attachment",mimeType:e.mimeType,size:e.size,name:e.name}))},e);e.preventDefault(),n?(b(!0),n.then(Y)):Y()},[P,D,r,t,Y]);return c.createElement(nI.cR.Provider,{value:{editor:P,validate:L,setFocused:C}},c.createElement(nI.wi.Provider,{value:{createAttachments:R,isUploadingAttachments:w,hasMaxAttachments:O,maxAttachments:10,maxAttachmentSize:1073741824}},c.createElement(nI.IA.Provider,{value:{isDisabled:T,isFocused:E,isEmpty:m,canSubmit:k,submit:j,clear:z,select:W,focus:U,blur:H,createMention:$,insertText:V,attachments:D,attachFiles:K,removeAttachment:x}},c.createElement(h,{...s,onSubmit:G,ref:F},c.createElement("input",{type:"file",multiple:!0,ref:I,onChange:q,tabIndex:-1,style:{display:"none"}}),c.createElement(l.A4,null,e)))))}),nJ=(0,c.forwardRef)(({children:e,disabled:t,asChild:r,...n},o)=>{let i=r?l.g7:"button",{canSubmit:a,isDisabled:s}=(0,nI.xc)();return c.createElement(i,{type:"submit",...n,ref:o,disabled:s||t||!a},e)}),nZ=(0,c.forwardRef)(({children:e,onClick:t,disabled:r,asChild:n,...o},i)=>{let a=n?l.g7:"button",{hasMaxAttachments:s}=(0,nI.yr)(),{isDisabled:u,attachFiles:d}=(0,nI.xc)(),f=(0,c.useCallback)(e=>{t?.(e),e.isDefaultPrevented()||d()},[d,t]);return c.createElement(a,{type:"button",...o,onClick:f,ref:i,disabled:u||s||r},e)})},22161:(e,t,r)=>{"use strict";r.d(t,{KI:()=>D,P5:()=>C,XM:()=>b,Y1:()=>x,YZ:()=>w,a_:()=>E,z7:()=>g});var n=r(90193),o=r(44706),i=r(28964),a=r(94455),s=r(51744),u=r(74162),l=r(78709),c=r(37905),d=r(6051),f=r(65511),h=r(43853),p=r(51276),m=r(78390),v=r(90331);function g(e){return{version:1,content:e.map(e=>{if("paragraph"!==e.type)return null;let t=e.children.map(e=>(0,l.hb)(e)?{type:"mention",id:e.id}:(0,s.k)(e)?{type:"link",url:e.url}:(0,u.e)(e)?{type:"link",url:e.url,text:e.children.map(e=>e.text).join("")}:(0,c.G)(e)?e:null).filter(f.G);return{...e,children:t}}).filter(f.G)}}let y=[];function b(e){return e&&e?.content?e.content.map(e=>{if("paragraph"!==e.type)return null;let t=e.children.map(e=>(0,m.SA)(e)?{type:"mention",id:e.id,children:[{text:""}]}:(0,m.zq)(e)?e.text?{type:"custom-link",url:e.url,children:[{text:e.text}]}:{type:"auto-link",url:e.url,children:[{text:e.url}]}:(0,m.y3)(e)?e:null).filter(f.G);return{...e,children:t}}).filter(f.G):y}function E(e,t="ltr"){return`${e}-${"rtl"===t?"end":"start"}`}function C(e){let[t,r="center"]=e.split("-");return[t,r]}function D({onDragEnter:e,onDragLeave:t,onDragOver:r,onDrop:n,disabled:o}){let{isDisabled:a}=(0,v.xc)(),s=a||o,{createAttachments:u}=(0,v.yr)(),[l,c]=(0,i.useState)(!1),f=(0,p.d)(l),h=(0,i.useCallback)(t=>{e?.(t),!(f.current||s||t.isDefaultPrevented())&&t.dataTransfer.types.includes("Files")&&(t.preventDefault(),t.stopPropagation(),c(!0))},[e,s]);return[l,{onDragEnter:h,onDragLeave:(0,i.useCallback)(e=>{t?.(e),!f.current||s||e.isDefaultPrevented()||(e.relatedTarget?e.relatedTarget===e.currentTarget||e.currentTarget.contains(e.relatedTarget):e.currentTarget!==e.target)||(e.preventDefault(),e.stopPropagation(),c(!1))},[t,s]),onDragOver:(0,i.useCallback)(e=>{r?.(e),s||e.isDefaultPrevented()||(e.preventDefault(),e.stopPropagation())},[r,s]),onDrop:(0,i.useCallback)(e=>{n?.(e),!f.current||s||e.isDefaultPrevented()||(e.preventDefault(),e.stopPropagation(),c(!1),u((0,d.b)(e.dataTransfer)))},[n,s,u]),"data-drop":l?"":void 0,"data-disabled":s?"":void 0}]}class w extends Error{constructor(e,t="client"){super(e),this.name="AttachmentTooLargeError",this.origin=t}}function A(e){e.preventDefault()}function x(e,t){let r=(0,o.kB)(),s=(0,h.T)(e),u=(0,h.T)(()=>(function(e,t){let r=new Map,o=new Map,i=(0,n.Zb)(),a=null;function s(){a=null,i.notify()}return{addAttachments:function(i){if(0===i.length)return;let a=i.filter(e=>!r.has(e.id)),u=[];for(let e of a)if("localAttachment"===e.type){if(e.file.size>t.maxFileSize){r.set(e.id,{...e,status:"error",error:new w("File is too large.","client")});continue}r.set(e.id,{...e,status:"uploading"}),u.push(e)}else r.set(e.id,e);for(let t of(a.length>0&&s(),u))!function(t){let i=new AbortController;o.set(t.id,i),e.uploadAttachment(t,{signal:i.signal}).then(()=>{r.set(t.id,{...t,status:"uploaded"}),s()}).catch(e=>{e instanceof Error&&"AbortError"!==e.name&&"TimeoutError"!==e.name&&(r.set(t.id,{...t,status:"error",error:e instanceof n.iz&&413===e.status?new w("File is too large.","server"):e}),s())})}(t)},removeAttachment:function(e){let t=o.get(e);t?.abort(),r.delete(e),o.delete(e),s()},getSnapshot:function(){return a||(a=Array.from(r.values())),a},subscribe:i.subscribe,clear:function(){o.forEach(e=>e.abort()),o.clear(),r.clear(),s()}}})(r,t));(0,i.useEffect)(()=>{u.addAttachments(s)},[s,u]),(0,i.useEffect)(()=>()=>{u.clear()},[u]);let l=(0,a.useSyncExternalStore)(u.subscribe,u.getSnapshot,u.getSnapshot),c=(0,i.useMemo)(()=>l.some(e=>"localAttachment"===e.type&&"uploading"===e.status),[l]);return(0,i.useEffect)(()=>{if(c)return window.addEventListener("beforeunload",A),()=>{window.removeEventListener("beforeunload",A)}},[c]),{attachments:l,isUploadingAttachments:c,addAttachments:u.addAttachments,removeAttachment:u.removeAttachment,clearAttachments:u.clear}}},94490:(e,t,r)=>{"use strict";r.d(t,{E:()=>f});var n=r(69008),o=r(28964),i=r(57631),a=r(7665);let s=3e4,u={seconds:60,minutes:60,hours:24,days:7,weeks:4.34524,months:12};function l(e,t){let r=(0,a.dq)(t,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"});return(0,i.k)(r.format(e))}let c=["br","fr","nb","nn","no","ro","sv"];function d(e,t){return e.getTime()>Date.now()-2592e5?function(e,t){let r;r=t||(0,a.J6)().resolvedOptions().locale;let n=c.some(e=>r===e||r.startsWith(`${e}-`)),o=(0,a.J6)(r,{style:n?"short":"narrow",numeric:"auto"}),s=(e.getTime()-Date.now())/1e3;if(s>-u.seconds&&s<u.seconds)return o.format(0,"seconds");for(let[e,t]of Object.entries(u)){if(Math.abs(s)<t)return o.format(Math.round(s),e);s/=t}return(0,i.k)(o.format(Math.round(s),"years"))}(e,t):function(e,t){let r=(0,a.dq)(t,{month:"short",day:"numeric"});return(0,i.k)(r.format(e))}(e,t)}let f=(0,o.forwardRef)(({date:e,locale:t,children:r=d,title:i=l,dateTime:a,interval:u=s,asChild:c,...f},h)=>{let p=c?n.g7:"time",[m,v]=function(){let[e,t]=(0,o.useReducer)(e=>e+1,0);return[t,e]}(),g=(0,o.useMemo)(()=>new Date(e),[e]),y=(0,o.useMemo)(()=>g.toISOString(),[g]),b=(0,o.useMemo)(()=>"function"==typeof i?i(g,t):i,[i,g,v]),E=(0,o.useMemo)(()=>"function"==typeof r?r(g,t):r,[r,g,v]);return function(e,t){let r=(0,o.useRef)(e);(0,o.useEffect)(()=>{r.current=e},[e]),(0,o.useEffect)(()=>{if(!t&&0!==t)return;let e=setInterval(()=>{!1===r.current()&&clearInterval(e)},t);return()=>clearInterval(e)},[t])}(m,u),o.createElement(p,{...f,ref:h,dateTime:a??y,title:b},E)})},22595:(e,t,r)=>{"use strict";r.d(t,{d:()=>a});var n=r(69008),o=r(28964),i=r(30662);let a=(0,o.forwardRef)(({emoji:e,style:t,asChild:r,...a},s)=>{let u=r?n.g7:"span";return o.createElement(u,{role:"img","aria-label":e,"data-emoji":e,style:{...t,fontFamily:i.rQ,display:"inline-flex",alignItems:"center",justifyContent:"center",width:"1em",whiteSpace:"nowrap"},...a,ref:s},e)})},23176:(e,t,r)=>{"use strict";r.d(t,{d:()=>l,q:()=>u});var n=r(90193),o=r(44706),i=r(28964),a=r(94455);let s=new WeakMap;function u(e){let t=(0,o.m8)(),r=(0,o.kB)(),[a,u]=i.useState(),l=i.useRef();return i.useEffect(()=>{let o,i;let a=t[n.W_].resolveMentionSuggestions;if(void 0===e||!a)return;let c={text:e,roomId:r.id},d=(0,n.Pz)(c),f=!1,h=((i=s.get(t))||(i=new Map,s.set(t,i)),i),p=async()=>{try{l.current=performance.now();let e=await a(c);f||(u(e),h.set(d,e))}catch(e){console.error(e?.message)}};return h.has(d)?u(h.get(d)):!l.current||Math.abs(performance.now()-l.current)>500?p():o=window.setTimeout(()=>{p()},500),()=>{f=!0,window.clearTimeout(o)}},[t,r.id,e]),a}function l(){let e=(0,i.useContext)(o.RY);return null!==(0,i.useContext)(o.BU)?(0,o.f8)(e=>"string"==typeof e.id?e.id:null):null!==e?function(e){let t=e[n.W_].currentUserIdStore;return(0,a.useSyncExternalStore)(t.subscribe,t.get,t.get)}(e):void(0,n.OU)("LiveblocksProvider or RoomProvider are missing from the React tree.")}},51744:(e,t,r)=>{"use strict";r.d(t,{F:()=>a,k:()=>s});var n=r(29334),o=r(37905),i=r(74162);function a(e){let{isInline:t,normalizeNode:r,deleteBackward:a}=e;return e.isInline=e=>"auto-link"===e.type||t(e),e.normalizeNode=t=>{let[a,u]=t;if(!(0,i.e)(a)){if((0,o.G)(a)){let t=n.NB.parent(e,u);if((0,i.e)(t))return;if(s(t)){if(v(e,[t,n.y$.parent(u)]),!(0,o.$)(a)){let t=Object.keys(a).filter(e=>"text"!==e);n.YR.unsetNodes(e,t,{at:u})}}else g(e,[a,u]),y(e,[a,u])}r(t)}},e.deleteBackward=t=>{a(t);let{selection:r}=e;if(!r||!n.e6.isCollapsed(r))return;let[o]=n.ML.nodes(e,{at:r,match:s,mode:"lowest"});o&&n.YR.unwrapNodes(e,{match:s})},e}function s(e){return n.W_.isElement(e)&&"auto-link"===e.type}let u=/((https?:\/\/(www\.)?)|(www\.))[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9().@:%_+~#?&//=]*)/,l=/[.,;!?\s()]/,c=/^[.?][a-zA-Z0-9]+/,d=/[()]/;function f(e){return l.test(e)}function h(e){return f(e[e.length-1])}function p(e,t){let r=n.ML.previous(e,{at:t});return!r||(0,o.G)(r[0])&&(h(r[0].text)||""===r[0].text)}function m(e,t){let r=n.ML.next(e,{at:t});return!r||(0,o.G)(r[0])&&(f(r[0].text[0])||""===r[0].text)}let v=(e,t)=>{let[r,i]=t;for(let[t]of n.NB.children(e,i))if(!(0,o.G)(t)){n.YR.unwrapNodes(e,{at:i});return}let a=n.NB.string(r),s=u.exec(a);if(!s||s[0]!==a){n.YR.unwrapNodes(e,{at:i});return}if(function(e){return"."===e[e.length-1]||"?"===e[e.length-1]}(a)){n.YR.unwrapNodes(e,{at:i});let t=a.slice(0,a.length-1);n.YR.wrapNodes(e,{type:"auto-link",url:t,children:[]},{at:{anchor:{path:i,offset:0},focus:{path:i,offset:t.length}},split:!0});return}let l=function(e){if(!d.test(e))return e.length;let t=0,r=0;for(let n of e){if("("===n&&r++,")"===n&&--r<0)break;t++}return t}(a);if(l<a.length){n.YR.unwrapNodes(e,{at:i});let t=a.slice(0,l);n.YR.wrapNodes(e,{type:"auto-link",url:t,children:[]},{at:{anchor:{path:i,offset:0},focus:{path:i,offset:t.length}},split:!0});return}if(!p(e,i)||!m(e,i)){n.YR.unwrapNodes(e,{at:i});return}if(r.url!==a){n.YR.setNodes(e,{url:s[0]},{at:i});return}},g=(e,t)=>{let[r,o]=t,i=u.exec(r.text);if(!i)return;let a=i.index,s=a+i[0].length;(function(e,t,r,n){let[o,i]=t,a=o.text,s=r>0?f(a[r-1]):p(e,i),u=n<a.length?f(a[n]):m(e,i);return s&&u})(e,t,a,s)&&n.YR.wrapNodes(e,{type:"auto-link",url:i[0],children:[]},{at:{anchor:{path:o,offset:a},focus:{path:o,offset:s}},split:!0})},y=(e,t)=>{let[r,o]=t,i=r.text,a=n.ML.previous(e,{at:o});if(a&&s(a[0])){if(c.test(i)){n.YR.unwrapNodes(e,{at:a[1]}),n.YR.mergeNodes(e,{at:o});return}if(!f(i[0])){n.YR.unwrapNodes(e,{at:a[1]});return}}let u=n.ML.next(e,{at:o});if(u&&s(u[0])&&!h(i)){n.YR.unwrapNodes(e,{at:u[1]});return}}},74162:(e,t,r)=>{"use strict";r.d(t,{e:()=>a,P:()=>i});var n=r(29334),o=r(37905);function i(e){let{isInline:t,normalizeNode:r,insertData:i}=e;return e.isInline=e=>"custom-link"===e.type||t(e),e.normalizeNode=t=>{let[i,s]=t;if((0,o.G)(i)&&a(n.NB.parent(e,s))&&!(0,o.$)(i)){let t=Object.keys(i).filter(e=>"text"!==e);n.YR.unsetNodes(e,t,{at:s})}r(t)},e.insertData=t=>{let{selection:r}=e,a=t.getData("text/plain"),s=!0;r&&!n.e6.isCollapsed(r)&&r.anchor.path[0]===r.focus.path[0]&&function(e){try{return new URL(e),!0}catch(e){return!1}}(a)&&!function(e,t){let{selection:r}=e;if(!r)return!1;for(let[,o]of Array.from(n.ML.nodes(e,{at:r,match:t=>n.W_.isElement(t)&&n.ML.isBlock(e,t),mode:"lowest"}))){let i=n.e6.isRange(r)?n.e6.intersection(r,n.ML.range(e,o)):r;if(i&&Array.from(n.ML.nodes(e,{at:i,match:r=>n.ML.isInline(e,r)&&t(r)})).length>0)return!0}return!1}(e,e=>!(0,o.G)(e))&&(n.YR.wrapNodes(e,{type:"custom-link",url:a,children:[]},{at:r,split:!0,match:o.$}),s=!1),s&&i(t)},e}function a(e){return n.W_.isElement(e)&&"custom-link"===e.type}},78709:(e,t,r)=>{"use strict";r.d(t,{$S:()=>u,CQ:()=>l,hb:()=>c,ji:()=>f,lZ:()=>d,r:()=>h});var n=r(29334),o=r(85759),i=r(6954),a=r(8695),s=r(98474);let u="@";function l(e){let{selection:t}=e;if(!(0,s.d)(t))return;let r=(0,i.j)(e,t);if(!r)return;let o=n.ML.string(e,r);if(o.startsWith(u))return{range:r,text:o.substring(1)}}function c(e){return n.W_.isElement(e)&&"mention"===e.type}function d(e,t){n.YR.insertNodes(e,{type:"mention",id:t,children:[{text:""}]}),n.YR.move(e);let r=e.selection?(0,o.z)(e,e.selection):void 0;!r||r.void?n.YR.insertText(e," "):(0,a.k)(r.text)&&n.YR.move(e)}function f(e){if(!e.selection)return;let t=(0,o.F)(e,e.selection,{filterVoids:!0}),r=(0,o.z)(e,e.selection,{filterVoids:!0}),i=t&&!(0,a.k)(t.text),l=r&&!(0,a.k)(r.text);(0,s.d)(e.selection)?(e.insertText((i?" ":"")+u+(l?" ":"")),l&&n.YR.move(e,{distance:1,unit:"character",reverse:!0})):(e.insertText((i?" ":"")+u,{at:n.e6.start(e.selection)}),l&&e.insertText(" ",{at:n.e6.end(e.selection)}),n.YR.collapse(e,{edge:"end"}))}function h(e){let{isInline:t,isVoid:r,markableVoid:o,deleteBackward:i}=e;return e.isInline=e=>c(e)||t(e),e.isVoid=e=>c(e)||r(e),e.markableVoid=e=>c(e)||o(e),e.deleteBackward=t=>{let{selection:r}=e;if((0,s.d)(r)){let[o]=n.ML.nodes(e,{at:"character"===t?n.ML.before(e,r,{unit:"character"}):r,match:c});i(t),o&&n.YR.insertText(e,u)}else i(t)},e}},85759:(e,t,r)=>{"use strict";r.d(t,{F:()=>o,z:()=>i});var n=r(29334);function o(e,t,r={}){let{filterVoids:o}=r,i=n.ML.before(e,t,{unit:"character",voids:o});if(i){let r=n.ML.range(e,i,n.e6.isRange(t)?n.e6.start(t):t),o=n.ML.string(e,r);return{range:r,text:o,void:0===o.length}}}function i(e,t,r={}){let{filterVoids:o}=r,i=n.ML.after(e,t,{unit:"character",voids:o});if(i){let r=n.ML.range(e,i,n.e6.isRange(t)?n.e6.end(t):t),o=n.ML.string(e,r);return{range:r,text:o,void:0===o.length}}}},6954:(e,t,r)=>{"use strict";r.d(t,{j:()=>i});var n=r(29334);let o={direction:"before"};function i(e,t,r=[" "],i=o){let{include:a,direction:s}={...o,...i},[u,l]=n.e6.edges(t),c=u;function d(t){let o="after"===t?n.ML.after(e,c,{unit:"character"}):n.ML.before(e,c,{unit:"character"}),i=o&&n.ML.string(e,"after"===t?{anchor:c,focus:o}:{anchor:o,focus:c}),a=i&&i["after"===t?0:i.length-1];return!(!o||!a||r.includes(a))&&0!==(c=o).offset}if("before"!==s){for(c=l;d("after"););l=c}if("after"!==s){for(c=u;d("before"););u=c}return a?{anchor:n.ML.before(e,u,{unit:"offset"})??u,focus:n.ML.after(e,l,{unit:"offset"})??l}:{anchor:u,focus:l}}},8695:(e,t,r)=>{"use strict";function n(e){return!e.trim()}r.d(t,{k:()=>n})},98474:(e,t,r)=>{"use strict";r.d(t,{d:()=>o});var n=r(29334);function o(e){return null!==e&&n.e6.isCollapsed(e)}},37905:(e,t,r)=>{"use strict";function n(e){return!("type"in e)&&"text"in e&&"string"==typeof e.text}function o(e){return n(e)&&1===Object.keys(e).length}r.d(t,{$:()=>o,G:()=>n})},57631:(e,t,r)=>{"use strict";function n(e){return e.charAt(0).toUpperCase()+e.slice(1)}r.d(t,{k:()=>n})},56714:(e,t,r)=>{"use strict";function n(...e){return e.filter(e=>"string"==typeof e||"number"==typeof e).join(" ")}r.d(t,{A:()=>n})},6051:(e,t,r)=>{"use strict";r.d(t,{b:()=>o});var n=r(65511);function o(e){if(!e.types.includes("Files"))return[];let t=Array.from(e.items).map(e=>{let t=e.webkitGetAsEntry();return t&&t.isFile?e.getAsFile():null}).filter(n.G);return t.length||(t=Array.from(e.files).filter(e=>""!==e.type)),t}},65511:(e,t,r)=>{"use strict";function n(e){return null!=e}r.d(t,{G:()=>n})},7665:(e,t,r)=>{"use strict";r.d(t,{dq:()=>i,XE:()=>s,Y4:()=>u,J6:()=>a});var n=r(90193);function o(e){let t=new Map;return(...r)=>{let o=JSON.stringify(r.map(e=>(0,n.Pz)(e)));if(t.has(o))return t.get(o);let i=e(...r);return t.set(o,i),i}}let i=o((...e)=>new Intl.DateTimeFormat(...e)),a=o((...e)=>new Intl.RelativeTimeFormat(...e)),s=o((...e)=>new Intl.ListFormat(...e)),u=o((...e)=>new Intl.NumberFormat(...e))},25706:(e,t,r)=>{"use strict";r.d(t,{m:()=>o});let n=/Mac|iPod|iPhone|iPad/;function o(){return"undefined"!=typeof window&&n.test(window.navigator.platform)}},32829:(e,t,r)=>{"use strict";r.d(t,{o:()=>i});var n=r(25706);let o={alt:()=>"altKey",ctrl:()=>"ctrlKey",meta:()=>"metaKey",mod:()=>(0,n.m)()?"metaKey":"ctrlKey",shift:()=>"shiftKey"};function i(e,t,r={}){return e.key===t&&Object.entries(r).filter(([,e])=>"boolean"==typeof e).every(([t,r])=>e[o[t]()]===r)}},43853:(e,t,r)=>{"use strict";r.d(t,{T:()=>o});var n=r(28964);function o(e){let[t]=(0,n.useState)(e);return t}},51276:(e,t,r)=>{"use strict";r.d(t,{d:()=>o});var n=r(28964);function o(e){let t=(0,n.useRef)(e);return(0,n.useEffect)(()=>{t.current=e},[e]),t}},98175:(e,t,r)=>{"use strict";r.d(t,{b:()=>o});var n=r(28964);let o="undefined"!=typeof window?n.useLayoutEffect:n.useEffect},88973:(e,t,r)=>{"use strict";r.d(t,{v:()=>o});var n=r(28964);function o(...e){return(0,n.useCallback)(t=>(function(e,...t){for(let r of t)e&&("function"==typeof r?r(e):r&&"current"in r&&(r.current=e))})(t,...e),[e])}},44706:(e,t,r)=>{"use strict";r.d(t,{$$:()=>ey,BU:()=>s,Bc:()=>eB,EH:()=>a,J6:()=>em,LL:()=>e_,QU:()=>ep,RN:()=>eg,RY:()=>B,U9:()=>eb,WT:()=>P,WX:()=>j,X0:()=>eh,_A:()=>ew,_d:()=>eO,bN:()=>ed,d3:()=>eD,d7:()=>ev,f8:()=>eT,gV:()=>z,k3:()=>L,k9:()=>H,kB:()=>eA,m8:()=>M,mT:()=>ex,q9:()=>W,qf:()=>$,us:()=>ef,xS:()=>U});var n=r(28964),o=r(90193);r(94455);var i=r(90490);function a(e){let[t,r]=n.useState(!1);return n.useEffect(()=>{r(!0)},[]),n.createElement(n.Suspense,{fallback:e.fallback},t?"function"==typeof e.children?e.children():e.children:e.fallback)}var s=n.createContext(null);function u(){return n.useContext(s)}function l(e,t){return e.createdAt.getTime()-t.createdAt.getTime()}function c(e,t){return(t.updatedAt??t.createdAt).getTime()-(e.updatedAt??e.createdAt).getTime()}function d(e){return"string"==typeof e}function f(e,t){t>=5||setTimeout(()=>{e()},5e3*Math.pow(2,t))}var h=e=>e;function p(e){return(0,n.useReducer)(h,e)[0]}function m(e){let t=p(e);if("function"!=typeof t)return t;{let t=function(e){let t=(0,n.useRef)(e);return(0,n.useEffect)(()=>{t.current=e},[e]),t}(e);return(0,n.useCallback)((...e)=>t.current(...e),[t])}}var v=e=>{if("pending"===e.status)throw e;if("fulfilled"===e.status)return e.value;if("rejected"===e.status)throw e.reason;throw e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e},g=Object.freeze({isLoading:!0}),y=Object.freeze({isLoading:!1,data:void 0});function b(e){return`${e}:NOTIFICATION_SETTINGS`}function E(e){return`${e}-VERSIONS`}var C=class{constructor(){this._prevState=null,this._stateCached=null,this._store=(0,o.MT)({rawThreadsById:{},query1:void 0,queries2:{},queries3:{},queries4:{},optimisticUpdates:[],inboxNotificationsById:{},notificationSettingsByRoomId:{},versionsByRoomId:{}}),this.getFullState=this.getFullState.bind(this),this.getInboxNotificationsAsync=this.getInboxNotificationsAsync.bind(this),this.subscribeThreads=this.subscribeThreads.bind(this),this.subscribeUserThreads=this.subscribeUserThreads.bind(this),this.subscribeThreadsOrInboxNotifications=this.subscribeThreadsOrInboxNotifications.bind(this),this.subscribeNotificationSettings=this.subscribeNotificationSettings.bind(this),this.subscribeVersions=this.subscribeVersions.bind(this),this._hasOptimisticUpdates=this._hasOptimisticUpdates.bind(this),this._subscribeOptimisticUpdates=this._subscribeOptimisticUpdates.bind(this)}get(){let e=this._store.get();return(this._prevState!==e||null===this._stateCached)&&(this._prevState=e,this._stateCached=function(e){let t={threadsById:{...e.rawThreadsById},inboxNotificationsById:{...e.inboxNotificationsById},notificationSettingsByRoomId:{...e.notificationSettingsByRoomId}};for(let r of e.optimisticUpdates)switch(r.type){case"create-thread":t.threadsById[r.thread.id]=r.thread;break;case"edit-thread-metadata":{let e=t.threadsById[r.threadId];if(void 0===e||void 0!==e.deletedAt||void 0!==e.updatedAt&&e.updatedAt>r.updatedAt)break;t.threadsById[e.id]={...e,updatedAt:r.updatedAt,metadata:{...e.metadata,...r.metadata}};break}case"mark-thread-as-resolved":{let e=t.threadsById[r.threadId];if(void 0===e||void 0!==e.deletedAt)break;t.threadsById[e.id]={...e,resolved:!0};break}case"mark-thread-as-unresolved":{let e=t.threadsById[r.threadId];if(void 0===e||void 0!==e.deletedAt)break;t.threadsById[e.id]={...e,resolved:!1};break}case"create-comment":{let e=t.threadsById[r.comment.threadId];if(void 0===e)break;t.threadsById[e.id]=D(e,r.comment);let n=Object.values(t.inboxNotificationsById).find(t=>"thread"===t.kind&&t.threadId===e.id);if(void 0===n)break;t.inboxNotificationsById[n.id]={...n,notifiedAt:r.comment.createdAt,readAt:r.comment.createdAt};break}case"edit-comment":{let e=t.threadsById[r.comment.threadId];if(void 0===e)break;t.threadsById[e.id]=D(e,r.comment);break}case"delete-comment":{let e=t.threadsById[r.threadId];if(void 0===e)break;t.threadsById[e.id]=w(e,r.commentId,r.deletedAt);break}case"delete-thread":{let e=t.threadsById[r.threadId];if(void 0===e)break;t.threadsById[r.threadId]={...e,deletedAt:r.deletedAt,updatedAt:r.deletedAt,comments:[]};break}case"add-reaction":{let e=t.threadsById[r.threadId];if(void 0===e)break;t.threadsById[e.id]=A(e,r.commentId,r.reaction);break}case"remove-reaction":{let e=t.threadsById[r.threadId];if(void 0===e)break;t.threadsById[e.id]=x(e,r.commentId,r.emoji,r.userId,r.removedAt);break}case"mark-inbox-notification-as-read":{let e=t.inboxNotificationsById[r.inboxNotificationId];if(void 0===e)break;t.inboxNotificationsById[r.inboxNotificationId]={...e,readAt:r.readAt};break}case"mark-all-inbox-notifications-as-read":for(let e in t.inboxNotificationsById){let n=t.inboxNotificationsById[e];if(void 0===n)break;t.inboxNotificationsById[e]={...n,readAt:r.readAt}}break;case"delete-inbox-notification":delete t.inboxNotificationsById[r.inboxNotificationId];break;case"delete-all-inbox-notifications":t.inboxNotificationsById={};break;case"update-notification-settings":{let e=t.notificationSettingsByRoomId[r.roomId];if(void 0===e)break;t.notificationSettingsByRoomId[r.roomId]={...e,...r.settings}}}let r=Object.values(t.threadsById).filter(e=>!e.deletedAt).filter(e=>e.comments.some(e=>void 0===e.deletedAt));return{inboxNotifications:Object.values(t.inboxNotificationsById).filter(e=>"thread"!==e.kind||t.threadsById[e.threadId]&&t.threadsById[e.threadId]?.deletedAt===void 0).sort((e,t)=>t.notifiedAt.getTime()-e.notifiedAt.getTime()),inboxNotificationsById:t.inboxNotificationsById,notificationSettingsByRoomId:t.notificationSettingsByRoomId,queries2:e.queries2,queries3:e.queries3,queries4:e.queries4,threads:r,threadsById:t.threadsById,versionsByRoomId:e.versionsByRoomId}}(e)),this._stateCached}batch(e){return this._store.batch(e)}getFullState(){return this.get()}getThreadsAsync(e){let t=this._store.get().queries2[e];return void 0===t||t.isLoading?g:t.error?t:{isLoading:!1,fullState:this.getFullState()}}getUserThreadsAsync(e){let t=this._store.get().queries2[e];return void 0===t||t.isLoading?g:t.error?t:{isLoading:!1,fullState:this.getFullState()}}getInboxNotificationsAsync(){let e=this._store.get().query1;return void 0===e||e.isLoading?g:void 0!==e.error?e:{isLoading:!1,inboxNotifications:this.getFullState().inboxNotifications}}getNotificationSettingsAsync(e){let t=this.get(),r=t.queries3[b(e)];return void 0===r||r.isLoading?g:void 0!==r.error?r:{isLoading:!1,settings:(0,o.nn)(t.notificationSettingsByRoomId[e])}}getVersionsAsync(e){let t=this.get(),r=t.queries4[E(e)];return void 0===r||r.isLoading?g:void 0!==r.error?r:{isLoading:!1,versions:(0,o.nn)(t.versionsByRoomId[e])}}_hasOptimisticUpdates(){return this._store.get().optimisticUpdates.length>0}subscribe(e){return this._store.subscribe(e)}_subscribeOptimisticUpdates(e){return this.subscribe(e)}subscribeThreads(e){return this.subscribe(e)}subscribeUserThreads(e){return this.subscribe(e)}subscribeThreadsOrInboxNotifications(e){return this.subscribe(e)}subscribeNotificationSettings(e){return this.subscribe(e)}subscribeVersions(e){return this.subscribe(e)}updateThreadsCache(e){this._store.set(t=>{let r=e(t.rawThreadsById);return r!==t.rawThreadsById?{...t,rawThreadsById:r}:t})}updateInboxNotificationsCache(e){this._store.set(t=>{let r=e(t.inboxNotificationsById);return r!==t.inboxNotificationsById?{...t,inboxNotificationsById:r}:t})}setNotificationSettings(e,t){this._store.set(r=>({...r,notificationSettingsByRoomId:{...r.notificationSettingsByRoomId,[e]:t}}))}setVersions(e,t){this._store.set(r=>({...r,versionsByRoomId:{...r.versionsByRoomId,[e]:t}}))}setQuery1State(e){this._store.set(t=>({...t,query1:e}))}setQuery2State(e,t){this._store.set(r=>({...r,queries2:{...r.queries2,[e]:t}}))}setQuery3State(e,t){this._store.set(r=>({...r,queries3:{...r.queries3,[e]:t}}))}setQuery4State(e,t){this._store.set(r=>({...r,queries4:{...r.queries4,[e]:t}}))}updateOptimisticUpdatesCache(e){this._store.set(t=>({...t,optimisticUpdates:e(t.optimisticUpdates)}))}force_set(e){return this._store.set(e)}updateInboxNotification(e,t,r){this._store.batch(()=>{this.removeOptimisticUpdate(t),this.updateInboxNotificationsCache(t=>{let n=t[e];return n?{...t,[e]:r(n)}:t})})}updateAllInboxNotifications(e,t){this._store.batch(()=>{this.removeOptimisticUpdate(e),this.updateInboxNotificationsCache(e=>(0,o.Q8)(e,t))})}deleteInboxNotification(e,t){this._store.batch(()=>{this.removeOptimisticUpdate(t),this.updateInboxNotificationsCache(t=>{let{[e]:r,...n}=t;return void 0===r?t:n})})}deleteAllInboxNotifications(e){this._store.batch(()=>{this.removeOptimisticUpdate(e),this.updateInboxNotificationsCache(()=>({}))})}createThread(e,t){this._store.batch(()=>{this.removeOptimisticUpdate(e),this.updateThreadsCache(e=>({...e,[t.id]:t}))})}updateThread(e,t,r,n){this._store.batch(()=>{null!==t&&this.removeOptimisticUpdate(t),this.updateThreadsCache(t=>{let o=t[e];return!o||void 0!==o.deletedAt||n&&o.updatedAt&&o.updatedAt>n?t:{...t,[e]:r(o)}})})}patchThread(e,t,r,n){return this.updateThread(e,t,e=>({...e,...(0,o.yg)(r)}),n)}addReaction(e,t,r,n,o){this.updateThread(e,t,e=>A(e,r,n),o)}removeReaction(e,t,r,n,o,i){this.updateThread(e,t,e=>x(e,r,n,o,i),i)}deleteThread(e,t){return this.updateThread(e,t,e=>({...e,updatedAt:new Date,deletedAt:new Date}))}createComment(e,t){this._store.batch(()=>{this.removeOptimisticUpdate(t);let r=this._store.get().rawThreadsById[e.threadId];r&&(this.updateThreadsCache(t=>({...t,[e.threadId]:D(r,e)})),this.updateInboxNotificationsCache(t=>{let r=Object.values(t).find(t=>"thread"===t.kind&&t.threadId===e.threadId);return r?{...t,[r.id]:{...r,notifiedAt:e.createdAt,readAt:e.createdAt}}:t}))})}editComment(e,t,r){return this.updateThread(e,t,e=>D(e,r))}deleteComment(e,t,r,n){return this.updateThread(e,t,e=>w(e,r,n),n)}updateThreadAndNotification(e,t){this._store.batch(()=>{this.updateThreadsCache(t=>{let r=t[e.id];return void 0===r||0>c(e,r)?{...t,[e.id]:e}:t}),void 0!==t&&this.updateInboxNotificationsCache(e=>({...e,[t.id]:t}))})}updateThreadsAndNotifications(e,t,r,n){this._store.batch(()=>{this.updateThreadsCache(t=>(function(e,t){let r={...e};return t.newThreads.forEach(e=>{let t=r[e.id];!(t&&0>c(t,e))&&(r[e.id]=e)}),t.deletedThreads.forEach(({id:e,deletedAt:t})=>{let n=r[e];void 0!==n&&(n.deletedAt=t,n.updatedAt=t,n.comments=[])}),r})(t,{newThreads:e,deletedThreads:r})),this.updateInboxNotificationsCache(e=>(function(e,t){let r={...e};return t.newInboxNotifications.forEach(e=>{let t=r[e.id];(!t||1!=(t.notifiedAt>e.notifiedAt?1:t.notifiedAt<e.notifiedAt?-1:t.readAt&&e.readAt?t.readAt>e.readAt?1:t.readAt<e.readAt?-1:0:t.readAt||e.readAt?t.readAt?1:-1:0))&&(r[e.id]=e)}),t.deletedNotifications.forEach(({id:e})=>delete r[e]),r})(e,{newInboxNotifications:t,deletedNotifications:n}))})}updateRoomInboxNotificationSettings2(e,t,r){this._store.batch(()=>{this.removeOptimisticUpdate(t),this.setNotificationSettings(e,r)})}updateRoomInboxNotificationSettings(e,t,r){this._store.batch(()=>{this.setQuery3OK(r),this.setNotificationSettings(e,t)})}updateRoomVersions(e,t,r){this._store.batch(()=>{this.setVersions(e,t),void 0!==r&&this.setQuery4OK(r)})}addOptimisticUpdate(e){let t=(0,o.x0)(),r={...e,id:t};return this.updateOptimisticUpdatesCache(e=>[...e,r]),t}removeOptimisticUpdate(e){this.updateOptimisticUpdatesCache(t=>t.filter(t=>t.id!==e))}setQuery1Loading(){this.setQuery1State(g)}setQuery1OK(){this.setQuery1State(y)}setQuery1Error(e){this.setQuery1State({isLoading:!1,error:e})}setQuery2Loading(e){this.setQuery2State(e,g)}setQuery2OK(e){this.setQuery2State(e,y)}setQuery2Error(e,t){this.setQuery2State(e,{isLoading:!1,error:t})}setQuery3Loading(e){this.setQuery3State(e,g)}setQuery3OK(e){this.setQuery3State(e,y)}setQuery3Error(e,t){this.setQuery3State(e,{isLoading:!1,error:t})}setQuery4Loading(e){this.setQuery4State(e,g)}setQuery4OK(e){this.setQuery4State(e,y)}setQuery4Error(e,t){this.setQuery4State(e,{isLoading:!1,error:t})}};function D(e,t){if(void 0!==e.deletedAt)return e;if(t.threadId!==e.id)return o.iV.warn(`Comment ${t.id} does not belong to thread ${e.id}`),e;let r=e.comments.find(e=>e.id===t.id);if(void 0===r){let r=new Date(Math.max(e.updatedAt?.getTime()||0,t.createdAt.getTime()));return{...e,updatedAt:r,comments:[...e.comments,t]}}if(void 0!==r.deletedAt)return e;if(void 0===r.editedAt||void 0===t.editedAt||r.editedAt<=t.editedAt){let r=e.comments.map(e=>e.id===t.id?t:e);return{...e,updatedAt:new Date(Math.max(e.updatedAt?.getTime()||0,t.editedAt?.getTime()||t.createdAt.getTime())),comments:r}}return e}function w(e,t,r){if(void 0!==e.deletedAt)return e;let n=e.comments.find(e=>e.id===t);if(void 0===n||void 0!==n.deletedAt)return e;let o=e.comments.map(e=>e.id===t?{...e,deletedAt:r,body:void 0,attachments:[]}:e);return o.every(e=>void 0!==e.deletedAt)?{...e,deletedAt:r,updatedAt:r}:{...e,updatedAt:r,comments:o}}function A(e,t,r){if(void 0!==e.deletedAt)return e;let n=e.comments.find(e=>e.id===t);if(void 0===n||void 0!==n.deletedAt)return e;let o=e.comments.map(e=>e.id===t?{...e,reactions:function(e,t){let r=e.find(e=>e.emoji===t.emoji);return void 0===r?[...e,{emoji:t.emoji,createdAt:t.createdAt,users:[{id:t.userId}]}]:!1===r.users.some(e=>e.id===t.userId)?e.map(e=>e.emoji===t.emoji?{...e,users:[...e.users,{id:t.userId}]}:e):e}(e.reactions,r)}:e);return{...e,updatedAt:new Date(Math.max(r.createdAt.getTime(),e.updatedAt?.getTime()||0)),comments:o}}function x(e,t,r,n,o){if(void 0!==e.deletedAt)return e;let i=e.comments.find(e=>e.id===t);if(void 0===i||void 0!==i.deletedAt)return e;let a=e.comments.map(e=>e.id===t?{...e,reactions:e.reactions.map(e=>e.emoji===r?{...e,users:e.users.filter(e=>e.id!==n)}:e).filter(e=>e.users.length>0)}:e);return{...e,updatedAt:new Date(Math.max(o.getTime(),e.updatedAt?.getTime()||0)),comments:a}}var B=(0,n.createContext)(null);function _(e){return e}var O=new WeakMap,T=new WeakMap,k="USER_THREADS";function S(e){return e.inboxNotifications?{isLoading:!1,count:function(e){let t=0;for(let r of e)(null===r.readAt||r.readAt<r.notifiedAt)&&t++;return t}(e.inboxNotifications)}:e}function F(e){let t=O.get(e);return t||(t=new C,O.set(e,t)),t}function I(e){let t=T.get(e);return t||(t=function(e){let t,r;let n=F(e);async function i(){if(void 0===t){let r=await e.getInboxNotifications();n.batch(()=>{n.updateThreadsAndNotifications(r.threads,r.inboxNotifications,[],[]),n.setQuery1OK()}),t=r.requestedAt}else{let r=await e.getInboxNotificationsSince({since:t});n.batch(()=>{n.updateThreadsAndNotifications(r.threads.updated,r.inboxNotifications.updated,r.threads.deleted,r.inboxNotifications.deleted),n.setQuery1OK()}),t<r.requestedAt&&(t=r.requestedAt)}}let a=0,s=(0,o.x3)(async()=>{try{await u(),await i()}catch(e){console.warn(`Polling new inbox notifications failed: ${String(e)}`)}}),u=(0,o.yt)(async()=>{n.setQuery1Loading();try{await (0,o.du)(()=>i(),5,[5e3,5e3,1e4,15e3])}catch(e){throw n.setQuery1Error(e),e}}),l=(0,o.x3)(d),c=!1;async function d(){let t=r;if(void 0!==t&&!c)try{c=!0;let i=await e[o.W_].getThreadsSince({since:t});c=!1,n.batch(()=>{n.updateThreadsAndNotifications(i.threads.updated,[],i.threads.deleted,[]),n.setQuery2OK(k)}),r=i.requestedAt}catch(e){c=!1;return}}let h=new Map,p=new Map;async function m(t,i,{retryCount:a}={retryCount:0}){let s=p.get(t);if(void 0!==s)return s;let u=e[o.W_].getThreads(i);p.set(t,u),n.setQuery2Loading(t);try{let e=await u;n.batch(()=>{n.updateThreadsAndNotifications(e.threads,e.inboxNotifications,[],[]),n.setQuery2OK(t)}),(void 0===r||r<e.requestedAt)&&(r=e.requestedAt),l.start(6e4)}catch(e){p.delete(t),f(()=>{m(t,i,{retryCount:a+1})},a),n.setQuery2Error(t,e)}}return{store:n,startPolling:function(){return a++,s.start(6e4),()=>{if(a<=0){console.warn("Unexpected internal error: cannot decrease subscriber count for inbox notifications.");return}--a<=0&&s.stop()}},waitUntilInboxNotificationsLoaded:u,loadInboxNotifications:function(){u().catch(()=>{})},incrementUserThreadsQuerySubscribers:function(e){let t=h.get(e)??0;return h.set(e,t+1),l.start(6e4),()=>{let t=h.get(e);if(void 0===t||t<=0){console.warn(`Internal unexpected behavior. Cannot decrease subscriber count for query "${e}"`);return}h.set(e,t-1);let r=0;for(let e of h.values())r+=e;r<=0&&l.stop()}},getUserThreads:m}}(e),T.set(e,t)),t}function R(){return(0,n.useContext)(B)}function M(){return R()??(0,o.OU)("LiveblocksProvider is missing from the React tree.")}function N(e){return function(e){let t=R();if(!e?.allowNesting&&null!==t)throw Error("You cannot nest multiple LiveblocksProvider instances in the same React tree.")}(e),n.createElement(B.Provider,{value:e.client},e.children)}function P(e){let{children:t,...r}=e,i={publicApiKey:p(r.publicApiKey),throttle:p(r.throttle),lostConnectionTimeout:p(r.lostConnectionTimeout),backgroundKeepAliveTimeout:p(r.backgroundKeepAliveTimeout),polyfills:p(r.polyfills),unstable_fallbackToHTTP:p(r.unstable_fallbackToHTTP),unstable_streamData:p(r.unstable_streamData),authEndpoint:m(r.authEndpoint),resolveMentionSuggestions:m(r.resolveMentionSuggestions),resolveUsers:m(r.resolveUsers),resolveRoomsInfo:m(r.resolveRoomsInfo),baseUrl:p(r.baseUrl),enableDebugLogging:p(r.enableDebugLogging)},a=(0,n.useMemo)(()=>(0,o.eI)(i),[]);return n.createElement(N,{client:a},t)}function L(){return function(e){let{waitUntilInboxNotificationsLoaded:t}=I(e);v(t());let r=function(e){let{loadInboxNotifications:t,store:r,startPolling:a}=I(e);return(0,n.useEffect)(t,[t]),(0,n.useEffect)(a,[a]),(0,i.useSyncExternalStoreWithSelector)(r.subscribeThreadsOrInboxNotifications,r.getInboxNotificationsAsync,r.getInboxNotificationsAsync,_,o.Xd)}(e);return(0,o.hu)(!r.error,"Did not expect error"),(0,o.hu)(!r.isLoading,"Did not expect loading"),r}(M())}function j(){var e;return e=M(),(0,n.useCallback)(t=>{let{store:r}=I(e),n=new Date,o=r.addOptimisticUpdate({type:"mark-inbox-notification-as-read",inboxNotificationId:t,readAt:n});e.markInboxNotificationAsRead(t).then(()=>{r.updateInboxNotification(t,o,e=>({...e,readAt:n}))},()=>{r.removeOptimisticUpdate(o)})},[e])}function z(){var e;return e=M(),(0,n.useCallback)(t=>{let{store:r}=I(e),n=new Date,o=r.addOptimisticUpdate({type:"delete-inbox-notification",inboxNotificationId:t,deletedAt:n});e.deleteInboxNotification(t).then(()=>{r.deleteInboxNotification(t,o)},()=>{r.removeOptimisticUpdate(o)})},[e])}function W(){return function(e){let{store:t,loadInboxNotifications:r,startPolling:a}=I(e);return(0,n.useEffect)(r,[r]),(0,n.useEffect)(a,[a]),(0,i.useSyncExternalStoreWithSelector)(t.subscribeThreadsOrInboxNotifications,t.getInboxNotificationsAsync,t.getInboxNotificationsAsync,S,o.Xd)}(M())}function U(e){return function(e,t){let r=e[o.W_].roomsInfoStore,a=(0,n.useCallback)(()=>r.getState(t),[r,t]),s=(0,n.useCallback)(e=>{var r;return void 0===e||e?.isLoading?e??{isLoading:!0}:e.error?e:e.data?{isLoading:!1,info:e.data}:{isLoading:!1,error:(r=t,Error(`resolveRoomsInfo didn't return anything for room '${r}'`))}},[t]);return(0,n.useEffect)(()=>{r.get(t)},[r,t]),(0,i.useSyncExternalStoreWithSelector)(r.subscribe,a,a,s,o.Xd)}(M(),e)}var H=function(e){return function(e,t){let{store:r}=I(e),a=r.getFullState,s=(0,n.useCallback)(e=>{let r=e.inboxNotificationsById[t]??(0,o.OU)(`Inbox notification with ID "${t}" not found`);return"thread"!==r.kind&&(0,o.OU)(`Inbox notification with ID "${t}" is not of kind "thread"`),e.threadsById[r.threadId]??(0,o.OU)(`Thread with ID "${r.threadId}" not found, this inbox notification might not be of kind "thread"`)},[t]);return(0,i.useSyncExternalStoreWithSelector)(r.subscribeThreadsOrInboxNotifications,a,a,s)}(M(),e)},$=function(e){return function(e,t){let r=e[o.W_].usersStore,a=(0,n.useCallback)(()=>r.getState(t),[r,t]);(0,n.useEffect)(()=>{r.get(t)},[r,t]);let s=(0,n.useCallback)(e=>{var r;return void 0===e||e?.isLoading?e??{isLoading:!0}:e.error?e:e.data?{isLoading:!1,user:e.data}:{isLoading:!1,error:(r=t,Error(`resolveUsers didn't return anything for user '${r}'`))}},[t]);return(0,i.useSyncExternalStoreWithSelector)(r.subscribe,a,a,s,o.Xd)}(M(),e)},V=class extends Error{constructor(e,t){super("Create thread failed."),this.cause=e,this.context=t,this.name="CreateThreadError"}},K=class extends Error{constructor(e,t){super("Mark thread as resolved failed."),this.cause=e,this.context=t,this.name="MarkThreadAsResolvedError"}},q=class extends Error{constructor(e,t){super("Mark thread as unresolved failed."),this.cause=e,this.context=t,this.name="MarkThreadAsUnresolvedError"}},Y=class extends Error{constructor(e,t){super("Create comment failed."),this.cause=e,this.context=t,this.name="CreateCommentError"}},G=class extends Error{constructor(e,t){super("Edit comment failed."),this.cause=e,this.context=t,this.name="EditCommentError"}},J=class extends Error{constructor(e,t){super("Delete comment failed."),this.cause=e,this.context=t,this.name="DeleteCommentError"}},Z=class extends Error{constructor(e,t){super("Add reaction failed."),this.cause=e,this.context=t,this.name="AddReactionError"}},X=class extends Error{constructor(e,t){super("Remove reaction failed."),this.cause=e,this.context=t,this.name="RemoveReactionError"}},Q=class extends Error{constructor(e,t){super("Mark inbox notification as read failed."),this.cause=e,this.context=t,this.name="MarkInboxNotificationAsReadError"}},ee=class extends Error{constructor(e,t){super("Update notification settings failed."),this.cause=e,this.context=t,this.name="UpdateNotificationSettingsError"}},et=e=>e,er=Object.freeze([]);function en(){return er}function eo(){return null}function ei(e){let t=e.getSelf();return null===t||void 0===t.id?"anonymous":t.id}function ea(e){let t=`Request failed with status ${e.status}: ${e.message}`;if(e.details?.error==="FORBIDDEN"){let r=[t,e.details.suggestion,e.details.docs].filter(Boolean).join("\n");o.iV.error(r)}return Error(t)}var es=new WeakMap;function eu(e){let t=es.get(e);return t||(t=function(e){let t=F(e),r=new Map,n=new Map,i=new Map,a=new Map,s=(0,o.x3)(u);async function u(){let t=[];e[o.W_].getRoomIds().map(r=>{let n=e.getRoom(r);null!==n&&t.push(l(n.id))}),await Promise.allSettled(t)}async function l(n){let o=e.getRoom(n);if(null===o)return;let a=r.get(o.id);if(void 0!==a&&!0!==(i.get(o.id)??!1))try{i.set(o.id,!0);let e=await o.getThreadsSince({since:a});setTimeout(()=>{i.set(o.id,!1)},2e3),t.updateThreadsAndNotifications(e.threads.updated,e.inboxNotifications.updated,e.threads.deleted,e.inboxNotifications.deleted),r.set(o.id,e.requestedAt)}catch(e){i.set(o.id,!1);return}}async function c(e,{retryCount:r}={retryCount:0}){let i=E(e.id),a=n.get(i);if(void 0!==a)return a;let s=e[o.W_].listTextVersions();n.set(i,s),t.setQuery4Loading(i);try{let r=await s,o=(await r.json()).versions.map(({createdAt:e,...t})=>({createdAt:new Date(e),...t}));t.updateRoomVersions(e.id,o,i),n.delete(i)}catch(o){n.delete(i),f(()=>{c(e,{retryCount:r+1})},r),t.setQuery4Error(i,o)}}async function d(e,o,i,{retryCount:a}={retryCount:0}){let u=n.get(o);if(void 0!==u)return u;let l=e.getThreads(i);n.set(o,l),t.setQuery2Loading(o);try{let n=await l;t.batch(()=>{t.updateThreadsAndNotifications(n.threads,n.inboxNotifications,[],[]),t.setQuery2OK(o)});let i=r.get(e.id);(void 0===i||i>n.requestedAt)&&r.set(e.id,n.requestedAt),s.start(3e5)}catch(r){n.delete(o),f(()=>{d(e,o,i,{retryCount:a+1})},a),t.setQuery2Error(o,r)}}async function h(e,{retryCount:r}={retryCount:0}){let o=b(e.id),i=n.get(o);if(void 0!==i)return i;try{let r=e.getNotificationSettings();n.set(o,r),t.setQuery3Loading(o);let i=await r;t.updateRoomInboxNotificationSettings(e.id,i,o)}catch(i){n.delete(o),f(()=>{h(e,{retryCount:r+1})},r),t.setQuery3Error(o,i)}}let p=(0,o.Zb)();return{store:t,incrementQuerySubscribers:function(e){let t=a.get(e)??0;return a.set(e,t+1),s.start(3e5),()=>{let t=a.get(e);if(void 0===t||t<=0){o.iV.warn(`Internal unexpected behavior. Cannot decrease subscriber count for query "${e}"`);return}a.set(e,t-1);let r=0;for(let e of a.values())r+=e;r<=0&&s.stop()}},commentsErrorEventSource:p,getThreadsUpdates:l,getThreadsAndInboxNotifications:d,getInboxNotificationSettings:h,getRoomVersions:c,onMutationFailure:function(e,r,n){if(t.removeOptimisticUpdate(r),e instanceof o.iz){let t=ea(e);p.notify(n(t));return}if(e instanceof o.VB){ea(e);return}throw e}}}(e),es.set(e,t)),t}function el(e){let t=M(),{id:r,stableEnterRoom:i}=e,a=p({initialPresence:e.initialPresence,initialStorage:e.initialStorage,unstable_batchedUpdates:e.unstable_batchedUpdates,autoConnect:e.autoConnect??"undefined"!=typeof window}),[{room:u},l]=n.useState(()=>i(r,{...a,autoConnect:!1}));return n.useEffect(()=>{let{store:e}=eu(t);async function r(t){if(t.type===o.yO.THREAD_DELETED){e.deleteThread(t.threadId,null);return}let r=await u.getThread(t.threadId);if(!r.thread){e.deleteThread(t.threadId,null);return}let{thread:n,inboxNotification:i}=r,a=e.getFullState().threadsById[t.threadId];switch(t.type){case o.yO.COMMENT_EDITED:case o.yO.THREAD_METADATA_UPDATED:case o.yO.THREAD_UPDATED:case o.yO.COMMENT_REACTION_ADDED:case o.yO.COMMENT_REACTION_REMOVED:case o.yO.COMMENT_DELETED:if(!a)break;e.updateThreadAndNotification(n,i);break;case o.yO.COMMENT_CREATED:e.updateThreadAndNotification(n,i)}}return u.events.comments.subscribe(e=>void r(e))},[t,u]),n.useEffect(()=>{let{getThreadsUpdates:e}=eu(t);e(u.id)},[t,u.id]),n.useEffect(()=>{function e(){let{getThreadsUpdates:e}=eu(t);e(u.id)}return window.addEventListener("online",e),()=>{window.removeEventListener("online",e)}},[t,u.id]),n.useEffect(()=>{let e=i(r,a);l(e);let{room:t,leave:n}=e;return a.autoConnect&&t.connect(),()=>{n()}},[r,a,i]),n.createElement(s.Provider,{value:u},e.children)}function ec(){let e=u();if(null===e)throw Error("RoomProvider is missing from the React tree.");return e}Symbol();function ed(){let e=M(),t=ec();return n.useCallback(({threadId:r,body:n,attachments:i})=>{let a=(0,o.F0)(),s=new Date,u={id:a,threadId:r,roomId:t.id,type:"comment",createdAt:s,userId:ei(t),body:n,reactions:[],attachments:i??[]},{store:l,onMutationFailure:c}=eu(e),d=l.addOptimisticUpdate({type:"create-comment",comment:u}),f=i?.map(e=>e.id);return t.createComment({threadId:r,commentId:a,body:n,attachmentIds:f}).then(e=>{l.createComment(e,d)},e=>c(e,d,e=>new Y(e,{roomId:t.id,threadId:r,commentId:a,body:n}))),u},[e,t])}function ef(){let e=M(),t=ec();return n.useCallback(({threadId:r,commentId:n,body:i,attachments:a})=>{let s=new Date,{store:u,onMutationFailure:l}=eu(e),c=u.getFullState().threadsById[r];if(void 0===c){o.iV.warn(`Internal unexpected behavior. Cannot edit comment in thread "${r}" because the thread does not exist in the cache.`);return}let d=c.comments.find(e=>e.id===n);if(void 0===d||void 0!==d.deletedAt){o.iV.warn(`Internal unexpected behavior. Cannot edit comment "${n}" in thread "${r}" because the comment does not exist in the cache.`);return}let f=u.addOptimisticUpdate({type:"edit-comment",comment:{...d,editedAt:s,body:i,attachments:a??[]}}),h=a?.map(e=>e.id);t.editComment({threadId:r,commentId:n,body:i,attachmentIds:h}).then(e=>{u.editComment(r,f,e)},e=>l(e,f,e=>new G(e,{roomId:t.id,threadId:r,commentId:n,body:i})))},[e,t])}function eh(){let e=M(),t=ec();return n.useCallback(({threadId:r,commentId:n})=>{let o=new Date,{store:i,onMutationFailure:a}=eu(e),s=i.addOptimisticUpdate({type:"delete-comment",threadId:r,commentId:n,deletedAt:o,roomId:t.id});t.deleteComment({threadId:r,commentId:n}).then(()=>{i.deleteComment(r,s,n,o)},e=>a(e,s,e=>new J(e,{roomId:t.id,threadId:r,commentId:n})))},[e,t])}function ep(){let e=M(),t=ec();return n.useCallback(({threadId:r,commentId:n,emoji:o})=>{let i=ei(t),a=new Date,{store:s,onMutationFailure:u}=eu(e),l=s.addOptimisticUpdate({type:"remove-reaction",threadId:r,commentId:n,emoji:o,userId:i,removedAt:a});t.removeReaction({threadId:r,commentId:n,emoji:o}).then(()=>{s.removeReaction(r,l,n,o,i,a)},e=>u(e,l,e=>new X(e,{roomId:t.id,threadId:r,commentId:n,emoji:o})))},[e,t])}function em(){let e=M(),t=ec();return n.useCallback(r=>{let{store:n,onMutationFailure:o}=eu(e),i=Object.values(n.getFullState().inboxNotificationsById).find(e=>"thread"===e.kind&&e.threadId===r);if(!i)return;let a=new Date,s=n.addOptimisticUpdate({type:"mark-inbox-notification-as-read",inboxNotificationId:i.id,readAt:a});t.markInboxNotificationAsRead(i.id).then(()=>{n.updateInboxNotification(i.id,s,e=>({...e,readAt:a}))},e=>{o(e,s,e=>new Q(e,{inboxNotificationId:i.id}))})},[e,t])}function ev(){let e=M(),t=ec();return n.useCallback(r=>{let n=new Date,{store:o,onMutationFailure:i}=eu(e),a=o.addOptimisticUpdate({type:"mark-thread-as-resolved",threadId:r,updatedAt:n});t.markThreadAsResolved(r).then(()=>{o.patchThread(r,a,{resolved:!0},n)},e=>i(e,a,e=>new K(e,{roomId:t.id,threadId:r})))},[e,t])}function eg(){let e=M(),t=ec();return n.useCallback(r=>{let n=new Date,{store:o,onMutationFailure:i}=eu(e),a=o.addOptimisticUpdate({type:"mark-thread-as-unresolved",threadId:r,updatedAt:n});t.markThreadAsUnresolved(r).then(()=>{o.patchThread(r,a,{resolved:!1},n)},e=>i(e,a,e=>new q(e,{roomId:t.id,threadId:r})))},[e,t])}function ey(e){let{store:t}=eu(M()),r=n.useCallback(t=>{let r=t.inboxNotifications.find(t=>"thread"===t.kind&&t.threadId===e),n=t.threadsById[e];return void 0===r||void 0===n?{status:"not-subscribed"}:{status:"subscribed",unreadSince:r.readAt}},[e]);return(0,i.useSyncExternalStoreWithSelector)(t.subscribeThreads,t.getFullState,t.getFullState,r)}function eb(){let e=M(),t=ec();return n.useCallback(r=>{let{store:n,onMutationFailure:o}=eu(e),i=n.addOptimisticUpdate({type:"update-notification-settings",roomId:t.id,settings:r});t.updateNotificationSettings(r).then(e=>{n.updateRoomInboxNotificationSettings2(t.id,i,e)},e=>o(e,i,e=>new ee(e,{roomId:t.id})))},[e,t])}function eE(){if("undefined"==typeof window)throw Error("You cannot use the Suspense version of this hook on the server side. Make sure to only call them on the client side.\nFor tips, see https://liveblocks.io/docs/api-reference/liveblocks-react#suspense-avoid-ssr")}function eC(e){return void 0===e||e?.isLoading?e??{isLoading:!0}:e.error?e:((0,o.hu)(void 0!==e.data,"Unexpected missing attachment URL"),{isLoading:!1,url:e.data})}function eD(e){let{attachmentUrlsStore:t}=ec()[o.W_],r=n.useCallback(()=>t.getState(e),[t,e]);return n.useEffect(()=>{t.get(e)},[t,e]),(0,i.useSyncExternalStoreWithSelector)(t.subscribe,r,r,eC,o.Xd)}var ew=function(e){let t=M(),[r]=n.useState(()=>new Map),o=n.useCallback((e,n)=>{let o=r.get(e);if(o)return o;let i=t.enterRoom(e,n),a=i.leave;return i.leave=()=>{a(),r.delete(e)},r.set(e,i),i},[t,r]);return n.createElement(el,{...e,stableEnterRoom:o})},eA=ec,ex=function(){return null!==u()},eB=function(){let e=M(),t=ec();return n.useCallback(({threadId:r,commentId:n,emoji:o})=>{let i=new Date,a=ei(t),{store:s,onMutationFailure:u}=eu(e),l=s.addOptimisticUpdate({type:"add-reaction",threadId:r,commentId:n,reaction:{emoji:o,userId:a,createdAt:i}});t.addReaction({threadId:r,commentId:n,emoji:o}).then(e=>{s.addReaction(r,l,n,e,i)},e=>u(e,l,e=>new Z(e,{roomId:t.id,threadId:r,commentId:n,emoji:o})))},[e,t])},e_=function(){let e=M(),t=ec();return n.useCallback(r=>{let n=r.body,i=r.metadata??{},a=r.attachments,s=(0,o.iK)(),u=(0,o.F0)(),l=new Date,c={id:u,threadId:s,roomId:t.id,createdAt:l,type:"comment",userId:ei(t),body:n,reactions:[],attachments:a??[]},d={id:s,type:"thread",createdAt:l,updatedAt:l,roomId:t.id,metadata:i,comments:[c],resolved:!1},{store:f,onMutationFailure:h}=eu(e),p=f.addOptimisticUpdate({type:"create-thread",thread:d,roomId:t.id}),m=a?.map(e=>e.id);return t.createThread({threadId:s,commentId:u,body:n,metadata:i,attachmentIds:m}).then(e=>{f.createThread(p,e)},e=>h(e,p,e=>new V(e,{roomId:t.id,threadId:s,commentId:u,body:n,metadata:i}))),d},[e,t])},eO=function(e={query:{metadata:{}}}){var t,r;let{scrollOnLoad:a=!0}=e,s=M(),u=ec(),f=n.useMemo(()=>{var t,r;return t=u.id,r=e.query,`${t}-${(0,o.Pz)(r??{})}`},[u,e]),{store:h,getThreadsAndInboxNotifications:p}=eu(s),m=h.getFullState().queries2[f];if(void 0===m||m.isLoading)throw p(u,f,e);if(m.error)throw m.error;let v=n.useCallback(t=>({threads:function(e,t){let r=e.threads;null!==t.roomId&&(r=r.filter(e=>e.roomId===t.roomId));let n=t.query;return n&&(r=r.filter(e=>(void 0===n.resolved||e.resolved===n.resolved)&&function(e,t){let r=e.metadata;return void 0===t.metadata||Object.entries(t.metadata).every(([e,t])=>{var n,i;return void 0===t||(n=r[e],i=t,(0,o.PO)(i)&&d(i.startsWith)?d(n)&&n.startsWith(i.startsWith):n===i)})}(e,n))),r.sort("last-update"===t.orderBy?c:l)}(t,{roomId:u.id,query:e.query,orderBy:"age"}),isLoading:!1}),[u,f]);n.useEffect(()=>{let{incrementQuerySubscribers:e}=eu(s);return e(f)},[s,f]);let g=(0,i.useSyncExternalStoreWithSelector)(h.subscribeThreads,h.getFullState,h.getFullState,v);return t=a,r=g,n.useEffect(()=>{!function(e,t){if(!1===e||!t.threads||!("undefined"!=typeof window))return;let r=window.location.hash.slice(1);if(!r.startsWith("cm_"))return;let n=document.getElementById(r);null!==n&&t.threads.flatMap(e=>e.comments).some(e=>e.id===r)&&n.scrollIntoView()}(t,r)},[r.isLoading]),g};function eT(...e){return function(e,t){let r=ec(),o=r.events.self.subscribe,a=r.getSelf,s=e??et,u=n.useCallback(e=>null!==e?s(e):null,[s]);return(0,i.useSyncExternalStoreWithSelector)(o,a,eo,u,t)}(...e)}},71168:(e,t,r)=>{"use strict";r.d(t,{oC:()=>tf,VY:()=>tu,Xi:()=>e9,$F:()=>e1,ZA:()=>tl,ck:()=>td,wU:()=>tm,__:()=>tc,Uv:()=>ts,Ee:()=>th,Rk:()=>tp,fC:()=>ti,Z0:()=>tv,Tr:()=>tg,tu:()=>tb,fF:()=>ty,xz:()=>ta});var n=r(28964),o=r(70319),i=r(93191),a=r(20732),s=r(28469),u=r(22251),l=r(97247),c=r(69008);function d(e){let t=e+"CollectionProvider",[r,o]=function(e,t=[]){let r=[],o=()=>{let t=r.map(e=>n.createContext(e));return function(r){let o=r?.[e]||t;return n.useMemo(()=>({[`__scope${e}`]:{...r,[e]:o}}),[r,o])}};return o.scopeName=e,[function(t,o){let i=n.createContext(o),a=r.length;function s(t){let{scope:r,children:o,...s}=t,u=r?.[e][a]||i,c=n.useMemo(()=>s,Object.values(s));return(0,l.jsx)(u.Provider,{value:c,children:o})}return r=[...r,o],s.displayName=t+"Provider",[s,function(r,s){let u=s?.[e][a]||i,l=n.useContext(u);if(l)return l;if(void 0!==o)return o;throw Error(`\`${r}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let r=()=>{let r=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let o=r.reduce((t,{useScope:r,scopeName:n})=>{let o=r(e)[`__scope${n}`];return{...t,...o}},{});return n.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}(o,...t)]}(t),[a,s]=r(t,{collectionRef:{current:null},itemMap:new Map}),u=e=>{let{scope:t,children:r}=e,o=n.useRef(null),i=n.useRef(new Map).current;return(0,l.jsx)(a,{scope:t,itemMap:i,collectionRef:o,children:r})};u.displayName=t;let d=e+"CollectionSlot",f=n.forwardRef((e,t)=>{let{scope:r,children:n}=e,o=s(d,r),a=(0,i.e)(t,o.collectionRef);return(0,l.jsx)(c.g7,{ref:a,children:n})});f.displayName=d;let h=e+"CollectionItemSlot",p="data-radix-collection-item",m=n.forwardRef((e,t)=>{let{scope:r,children:o,...a}=e,u=n.useRef(null),d=(0,i.e)(t,u),f=s(h,r);return n.useEffect(()=>(f.itemMap.set(u,{ref:u,...a}),()=>void f.itemMap.delete(u))),(0,l.jsx)(c.g7,{[p]:"",ref:d,children:o})});return m.displayName=h,[{Provider:u,Slot:f,ItemSlot:m},function(t){let r=s(e+"CollectionConsumer",t);return n.useCallback(()=>{let e=r.collectionRef.current;if(!e)return[];let t=Array.from(e.querySelectorAll(`[${p}]`));return Array.from(r.itemMap.values()).sort((e,r)=>t.indexOf(e.ref.current)-t.indexOf(r.ref.current))},[r.collectionRef,r.itemMap])},o]}var f=n.createContext(void 0);function h(e){let t=n.useContext(f);return e||t||"ltr"}var p=r(96990),m=r(3402),v=r(60018),g=r(27015),y=r(80173),b=r(28611),E=r(67264),C=r(85090),D="rovingFocusGroup.onEntryFocus",w={bubbles:!1,cancelable:!0},A="RovingFocusGroup",[x,B,_]=d(A),[O,T]=function(e,t=[]){let r=[],o=()=>{let t=r.map(e=>n.createContext(e));return function(r){let o=r?.[e]||t;return n.useMemo(()=>({[`__scope${e}`]:{...r,[e]:o}}),[r,o])}};return o.scopeName=e,[function(t,o){let i=n.createContext(o),a=r.length;function s(t){let{scope:r,children:o,...s}=t,u=r?.[e][a]||i,c=n.useMemo(()=>s,Object.values(s));return(0,l.jsx)(u.Provider,{value:c,children:o})}return r=[...r,o],s.displayName=t+"Provider",[s,function(r,s){let u=s?.[e][a]||i,l=n.useContext(u);if(l)return l;if(void 0!==o)return o;throw Error(`\`${r}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let r=()=>{let r=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let o=r.reduce((t,{useScope:r,scopeName:n})=>{let o=r(e)[`__scope${n}`];return{...t,...o}},{});return n.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}(o,...t)]}(A,[_]),[k,S]=O(A),F=n.forwardRef((e,t)=>(0,l.jsx)(x.Provider,{scope:e.__scopeRovingFocusGroup,children:(0,l.jsx)(x.Slot,{scope:e.__scopeRovingFocusGroup,children:(0,l.jsx)(I,{...e,ref:t})})}));F.displayName=A;var I=n.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:r,orientation:a,loop:c=!1,dir:d,currentTabStopId:f,defaultCurrentTabStopId:p,onCurrentTabStopIdChange:m,onEntryFocus:v,preventScrollOnEntryFocus:g=!1,...y}=e,b=n.useRef(null),E=(0,i.e)(t,b),A=h(d),[x=null,_]=(0,s.T)({prop:f,defaultProp:p,onChange:m}),[O,T]=n.useState(!1),S=(0,C.W)(v),F=B(r),I=n.useRef(!1),[R,M]=n.useState(0);return n.useEffect(()=>{let e=b.current;if(e)return e.addEventListener(D,S),()=>e.removeEventListener(D,S)},[S]),(0,l.jsx)(k,{scope:r,orientation:a,dir:A,loop:c,currentTabStopId:x,onItemFocus:n.useCallback(e=>_(e),[_]),onItemShiftTab:n.useCallback(()=>T(!0),[]),onFocusableItemAdd:n.useCallback(()=>M(e=>e+1),[]),onFocusableItemRemove:n.useCallback(()=>M(e=>e-1),[]),children:(0,l.jsx)(u.WV.div,{tabIndex:O||0===R?-1:0,"data-orientation":a,...y,ref:E,style:{outline:"none",...e.style},onMouseDown:(0,o.M)(e.onMouseDown,()=>{I.current=!0}),onFocus:(0,o.M)(e.onFocus,e=>{let t=!I.current;if(e.target===e.currentTarget&&t&&!O){let t=new CustomEvent(D,w);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){let e=F().filter(e=>e.focusable);P([e.find(e=>e.active),e.find(e=>e.id===x),...e].filter(Boolean).map(e=>e.ref.current),g)}}I.current=!1}),onBlur:(0,o.M)(e.onBlur,()=>T(!1))})})}),R="RovingFocusGroupItem",M=n.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:r,focusable:i=!0,active:a=!1,tabStopId:s,...c}=e,d=(0,g.M)(),f=s||d,h=S(R,r),p=h.currentTabStopId===f,m=B(r),{onFocusableItemAdd:v,onFocusableItemRemove:y}=h;return n.useEffect(()=>{if(i)return v(),()=>y()},[i,v,y]),(0,l.jsx)(x.ItemSlot,{scope:r,id:f,focusable:i,active:a,children:(0,l.jsx)(u.WV.span,{tabIndex:p?0:-1,"data-orientation":h.orientation,...c,ref:t,onMouseDown:(0,o.M)(e.onMouseDown,e=>{i?h.onItemFocus(f):e.preventDefault()}),onFocus:(0,o.M)(e.onFocus,()=>h.onItemFocus(f)),onKeyDown:(0,o.M)(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey){h.onItemShiftTab();return}if(e.target!==e.currentTarget)return;let t=function(e,t,r){var n;let o=(n=e.key,"rtl"!==r?n:"ArrowLeft"===n?"ArrowRight":"ArrowRight"===n?"ArrowLeft":n);if(!("vertical"===t&&["ArrowLeft","ArrowRight"].includes(o))&&!("horizontal"===t&&["ArrowUp","ArrowDown"].includes(o)))return N[o]}(e,h.orientation,h.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let r=m().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)r.reverse();else if("prev"===t||"next"===t){"prev"===t&&r.reverse();let n=r.indexOf(e.currentTarget);r=h.loop?function(e,t){return e.map((r,n)=>e[(t+n)%e.length])}(r,n+1):r.slice(n+1)}setTimeout(()=>P(r))}})})})});M.displayName=R;var N={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function P(e,t=!1){let r=document.activeElement;for(let n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}var L=r(58529),j=r(78350),z=["Enter"," "],W=["ArrowUp","PageDown","End"],U=["ArrowDown","PageUp","Home",...W],H={ltr:[...z,"ArrowRight"],rtl:[...z,"ArrowLeft"]},$={ltr:["ArrowLeft"],rtl:["ArrowRight"]},V="Menu",[K,q,Y]=d(V),[G,J]=(0,a.b)(V,[Y,y.D7,T]),Z=(0,y.D7)(),X=T(),[Q,ee]=G(V),[et,er]=G(V),en=e=>{let{__scopeMenu:t,open:r=!1,children:o,dir:i,onOpenChange:a,modal:s=!0}=e,u=Z(t),[c,d]=n.useState(null),f=n.useRef(!1),p=(0,C.W)(a),m=h(i);return n.useEffect(()=>{let e=()=>{f.current=!0,document.addEventListener("pointerdown",t,{capture:!0,once:!0}),document.addEventListener("pointermove",t,{capture:!0,once:!0})},t=()=>f.current=!1;return document.addEventListener("keydown",e,{capture:!0}),()=>{document.removeEventListener("keydown",e,{capture:!0}),document.removeEventListener("pointerdown",t,{capture:!0}),document.removeEventListener("pointermove",t,{capture:!0})}},[]),(0,l.jsx)(y.fC,{...u,children:(0,l.jsx)(Q,{scope:t,open:r,onOpenChange:p,content:c,onContentChange:d,children:(0,l.jsx)(et,{scope:t,onClose:n.useCallback(()=>p(!1),[p]),isUsingKeyboardRef:f,dir:m,modal:s,children:o})})})};en.displayName=V;var eo=n.forwardRef((e,t)=>{let{__scopeMenu:r,...n}=e,o=Z(r);return(0,l.jsx)(y.ee,{...o,...n,ref:t})});eo.displayName="MenuAnchor";var ei="MenuPortal",[ea,es]=G(ei,{forceMount:void 0}),eu=e=>{let{__scopeMenu:t,forceMount:r,children:n,container:o}=e,i=ee(ei,t);return(0,l.jsx)(ea,{scope:t,forceMount:r,children:(0,l.jsx)(E.z,{present:r||i.open,children:(0,l.jsx)(b.h,{asChild:!0,container:o,children:n})})})};eu.displayName=ei;var el="MenuContent",[ec,ed]=G(el),ef=n.forwardRef((e,t)=>{let r=es(el,e.__scopeMenu),{forceMount:n=r.forceMount,...o}=e,i=ee(el,e.__scopeMenu),a=er(el,e.__scopeMenu);return(0,l.jsx)(K.Provider,{scope:e.__scopeMenu,children:(0,l.jsx)(E.z,{present:n||i.open,children:(0,l.jsx)(K.Slot,{scope:e.__scopeMenu,children:a.modal?(0,l.jsx)(eh,{...o,ref:t}):(0,l.jsx)(ep,{...o,ref:t})})})})}),eh=n.forwardRef((e,t)=>{let r=ee(el,e.__scopeMenu),a=n.useRef(null),s=(0,i.e)(t,a);return n.useEffect(()=>{let e=a.current;if(e)return(0,L.Ry)(e)},[]),(0,l.jsx)(em,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:(0,o.M)(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),ep=n.forwardRef((e,t)=>{let r=ee(el,e.__scopeMenu);return(0,l.jsx)(em,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),em=n.forwardRef((e,t)=>{let{__scopeMenu:r,loop:a=!1,trapFocus:s,onOpenAutoFocus:u,onCloseAutoFocus:d,disableOutsidePointerEvents:f,onEntryFocus:h,onEscapeKeyDown:g,onPointerDownOutside:b,onFocusOutside:E,onInteractOutside:C,onDismiss:D,disableOutsideScroll:w,...A}=e,x=ee(el,r),B=er(el,r),_=Z(r),O=X(r),T=q(r),[k,S]=n.useState(null),I=n.useRef(null),R=(0,i.e)(t,I,x.onContentChange),M=n.useRef(0),N=n.useRef(""),P=n.useRef(0),L=n.useRef(null),z=n.useRef("right"),H=n.useRef(0),$=w?j.Z:n.Fragment,V=w?{as:c.g7,allowPinchZoom:!0}:void 0,K=e=>{let t=N.current+e,r=T().filter(e=>!e.disabled),n=document.activeElement,o=r.find(e=>e.ref.current===n)?.textValue,i=function(e,t,r){var n;let o=t.length>1&&Array.from(t).every(e=>e===t[0])?t[0]:t,i=(n=Math.max(r?e.indexOf(r):-1,0),e.map((t,r)=>e[(n+r)%e.length]));1===o.length&&(i=i.filter(e=>e!==r));let a=i.find(e=>e.toLowerCase().startsWith(o.toLowerCase()));return a!==r?a:void 0}(r.map(e=>e.textValue),t,o),a=r.find(e=>e.textValue===i)?.ref.current;(function e(t){N.current=t,window.clearTimeout(M.current),""!==t&&(M.current=window.setTimeout(()=>e(""),1e3))})(t),a&&setTimeout(()=>a.focus())};n.useEffect(()=>()=>window.clearTimeout(M.current),[]),(0,m.EW)();let Y=n.useCallback(e=>z.current===L.current?.side&&function(e,t){return!!t&&function(e,t){let{x:r,y:n}=e,o=!1;for(let e=0,i=t.length-1;e<t.length;i=e++){let a=t[e].x,s=t[e].y,u=t[i].x,l=t[i].y;s>n!=l>n&&r<(u-a)*(n-s)/(l-s)+a&&(o=!o)}return o}({x:e.clientX,y:e.clientY},t)}(e,L.current?.area),[]);return(0,l.jsx)(ec,{scope:r,searchRef:N,onItemEnter:n.useCallback(e=>{Y(e)&&e.preventDefault()},[Y]),onItemLeave:n.useCallback(e=>{Y(e)||(I.current?.focus(),S(null))},[Y]),onTriggerLeave:n.useCallback(e=>{Y(e)&&e.preventDefault()},[Y]),pointerGraceTimerRef:P,onPointerGraceIntentChange:n.useCallback(e=>{L.current=e},[]),children:(0,l.jsx)($,{...V,children:(0,l.jsx)(v.M,{asChild:!0,trapped:s,onMountAutoFocus:(0,o.M)(u,e=>{e.preventDefault(),I.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:d,children:(0,l.jsx)(p.XB,{asChild:!0,disableOutsidePointerEvents:f,onEscapeKeyDown:g,onPointerDownOutside:b,onFocusOutside:E,onInteractOutside:C,onDismiss:D,children:(0,l.jsx)(F,{asChild:!0,...O,dir:B.dir,orientation:"vertical",loop:a,currentTabStopId:k,onCurrentTabStopIdChange:S,onEntryFocus:(0,o.M)(h,e=>{B.isUsingKeyboardRef.current||e.preventDefault()}),preventScrollOnEntryFocus:!0,children:(0,l.jsx)(y.VY,{role:"menu","aria-orientation":"vertical","data-state":eH(x.open),"data-radix-menu-content":"",dir:B.dir,..._,...A,ref:R,style:{outline:"none",...A.style},onKeyDown:(0,o.M)(A.onKeyDown,e=>{let t=e.target.closest("[data-radix-menu-content]")===e.currentTarget,r=e.ctrlKey||e.altKey||e.metaKey,n=1===e.key.length;t&&("Tab"===e.key&&e.preventDefault(),!r&&n&&K(e.key));let o=I.current;if(e.target!==o||!U.includes(e.key))return;e.preventDefault();let i=T().filter(e=>!e.disabled).map(e=>e.ref.current);W.includes(e.key)&&i.reverse(),function(e){let t=document.activeElement;for(let r of e)if(r===t||(r.focus(),document.activeElement!==t))return}(i)}),onBlur:(0,o.M)(e.onBlur,e=>{e.currentTarget.contains(e.target)||(window.clearTimeout(M.current),N.current="")}),onPointerMove:(0,o.M)(e.onPointerMove,eK(e=>{let t=e.target,r=H.current!==e.clientX;if(e.currentTarget.contains(t)&&r){let t=e.clientX>H.current?"right":"left";z.current=t,H.current=e.clientX}}))})})})})})})});ef.displayName=el;var ev=n.forwardRef((e,t)=>{let{__scopeMenu:r,...n}=e;return(0,l.jsx)(u.WV.div,{role:"group",...n,ref:t})});ev.displayName="MenuGroup";var eg=n.forwardRef((e,t)=>{let{__scopeMenu:r,...n}=e;return(0,l.jsx)(u.WV.div,{...n,ref:t})});eg.displayName="MenuLabel";var ey="MenuItem",eb="menu.itemSelect",eE=n.forwardRef((e,t)=>{let{disabled:r=!1,onSelect:a,...s}=e,c=n.useRef(null),d=er(ey,e.__scopeMenu),f=ed(ey,e.__scopeMenu),h=(0,i.e)(t,c),p=n.useRef(!1);return(0,l.jsx)(eC,{...s,ref:h,disabled:r,onClick:(0,o.M)(e.onClick,()=>{let e=c.current;if(!r&&e){let t=new CustomEvent(eb,{bubbles:!0,cancelable:!0});e.addEventListener(eb,e=>a?.(e),{once:!0}),(0,u.jH)(e,t),t.defaultPrevented?p.current=!1:d.onClose()}}),onPointerDown:t=>{e.onPointerDown?.(t),p.current=!0},onPointerUp:(0,o.M)(e.onPointerUp,e=>{p.current||e.currentTarget?.click()}),onKeyDown:(0,o.M)(e.onKeyDown,e=>{let t=""!==f.searchRef.current;!r&&(!t||" "!==e.key)&&z.includes(e.key)&&(e.currentTarget.click(),e.preventDefault())})})});eE.displayName=ey;var eC=n.forwardRef((e,t)=>{let{__scopeMenu:r,disabled:a=!1,textValue:s,...c}=e,d=ed(ey,r),f=X(r),h=n.useRef(null),p=(0,i.e)(t,h),[m,v]=n.useState(!1),[g,y]=n.useState("");return n.useEffect(()=>{let e=h.current;e&&y((e.textContent??"").trim())},[c.children]),(0,l.jsx)(K.ItemSlot,{scope:r,disabled:a,textValue:s??g,children:(0,l.jsx)(M,{asChild:!0,...f,focusable:!a,children:(0,l.jsx)(u.WV.div,{role:"menuitem","data-highlighted":m?"":void 0,"aria-disabled":a||void 0,"data-disabled":a?"":void 0,...c,ref:p,onPointerMove:(0,o.M)(e.onPointerMove,eK(e=>{a?d.onItemLeave(e):(d.onItemEnter(e),e.defaultPrevented||e.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:(0,o.M)(e.onPointerLeave,eK(e=>d.onItemLeave(e))),onFocus:(0,o.M)(e.onFocus,()=>v(!0)),onBlur:(0,o.M)(e.onBlur,()=>v(!1))})})})}),eD=n.forwardRef((e,t)=>{let{checked:r=!1,onCheckedChange:n,...i}=e;return(0,l.jsx)(ek,{scope:e.__scopeMenu,checked:r,children:(0,l.jsx)(eE,{role:"menuitemcheckbox","aria-checked":e$(r)?"mixed":r,...i,ref:t,"data-state":eV(r),onSelect:(0,o.M)(i.onSelect,()=>n?.(!!e$(r)||!r),{checkForDefaultPrevented:!1})})})});eD.displayName="MenuCheckboxItem";var ew="MenuRadioGroup",[eA,ex]=G(ew,{value:void 0,onValueChange:()=>{}}),eB=n.forwardRef((e,t)=>{let{value:r,onValueChange:n,...o}=e,i=(0,C.W)(n);return(0,l.jsx)(eA,{scope:e.__scopeMenu,value:r,onValueChange:i,children:(0,l.jsx)(ev,{...o,ref:t})})});eB.displayName=ew;var e_="MenuRadioItem",eO=n.forwardRef((e,t)=>{let{value:r,...n}=e,i=ex(e_,e.__scopeMenu),a=r===i.value;return(0,l.jsx)(ek,{scope:e.__scopeMenu,checked:a,children:(0,l.jsx)(eE,{role:"menuitemradio","aria-checked":a,...n,ref:t,"data-state":eV(a),onSelect:(0,o.M)(n.onSelect,()=>i.onValueChange?.(r),{checkForDefaultPrevented:!1})})})});eO.displayName=e_;var eT="MenuItemIndicator",[ek,eS]=G(eT,{checked:!1}),eF=n.forwardRef((e,t)=>{let{__scopeMenu:r,forceMount:n,...o}=e,i=eS(eT,r);return(0,l.jsx)(E.z,{present:n||e$(i.checked)||!0===i.checked,children:(0,l.jsx)(u.WV.span,{...o,ref:t,"data-state":eV(i.checked)})})});eF.displayName=eT;var eI=n.forwardRef((e,t)=>{let{__scopeMenu:r,...n}=e;return(0,l.jsx)(u.WV.div,{role:"separator","aria-orientation":"horizontal",...n,ref:t})});eI.displayName="MenuSeparator";var eR=n.forwardRef((e,t)=>{let{__scopeMenu:r,...n}=e,o=Z(r);return(0,l.jsx)(y.Eh,{...o,...n,ref:t})});eR.displayName="MenuArrow";var eM="MenuSub",[eN,eP]=G(eM),eL=e=>{let{__scopeMenu:t,children:r,open:o=!1,onOpenChange:i}=e,a=ee(eM,t),s=Z(t),[u,c]=n.useState(null),[d,f]=n.useState(null),h=(0,C.W)(i);return n.useEffect(()=>(!1===a.open&&h(!1),()=>h(!1)),[a.open,h]),(0,l.jsx)(y.fC,{...s,children:(0,l.jsx)(Q,{scope:t,open:o,onOpenChange:h,content:d,onContentChange:f,children:(0,l.jsx)(eN,{scope:t,contentId:(0,g.M)(),triggerId:(0,g.M)(),trigger:u,onTriggerChange:c,children:r})})})};eL.displayName=eM;var ej="MenuSubTrigger",ez=n.forwardRef((e,t)=>{let r=ee(ej,e.__scopeMenu),a=er(ej,e.__scopeMenu),s=eP(ej,e.__scopeMenu),u=ed(ej,e.__scopeMenu),c=n.useRef(null),{pointerGraceTimerRef:d,onPointerGraceIntentChange:f}=u,h={__scopeMenu:e.__scopeMenu},p=n.useCallback(()=>{c.current&&window.clearTimeout(c.current),c.current=null},[]);return n.useEffect(()=>p,[p]),n.useEffect(()=>{let e=d.current;return()=>{window.clearTimeout(e),f(null)}},[d,f]),(0,l.jsx)(eo,{asChild:!0,...h,children:(0,l.jsx)(eC,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":s.contentId,"data-state":eH(r.open),...e,ref:(0,i.F)(t,s.onTriggerChange),onClick:t=>{e.onClick?.(t),e.disabled||t.defaultPrevented||(t.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:(0,o.M)(e.onPointerMove,eK(t=>{u.onItemEnter(t),t.defaultPrevented||e.disabled||r.open||c.current||(u.onPointerGraceIntentChange(null),c.current=window.setTimeout(()=>{r.onOpenChange(!0),p()},100))})),onPointerLeave:(0,o.M)(e.onPointerLeave,eK(e=>{p();let t=r.content?.getBoundingClientRect();if(t){let n=r.content?.dataset.side,o="right"===n,i=t[o?"left":"right"],a=t[o?"right":"left"];u.onPointerGraceIntentChange({area:[{x:e.clientX+(o?-5:5),y:e.clientY},{x:i,y:t.top},{x:a,y:t.top},{x:a,y:t.bottom},{x:i,y:t.bottom}],side:n}),window.clearTimeout(d.current),d.current=window.setTimeout(()=>u.onPointerGraceIntentChange(null),300)}else{if(u.onTriggerLeave(e),e.defaultPrevented)return;u.onPointerGraceIntentChange(null)}})),onKeyDown:(0,o.M)(e.onKeyDown,t=>{let n=""!==u.searchRef.current;!e.disabled&&(!n||" "!==t.key)&&H[a.dir].includes(t.key)&&(r.onOpenChange(!0),r.content?.focus(),t.preventDefault())})})})});ez.displayName=ej;var eW="MenuSubContent",eU=n.forwardRef((e,t)=>{let r=es(el,e.__scopeMenu),{forceMount:a=r.forceMount,...s}=e,u=ee(el,e.__scopeMenu),c=er(el,e.__scopeMenu),d=eP(eW,e.__scopeMenu),f=n.useRef(null),h=(0,i.e)(t,f);return(0,l.jsx)(K.Provider,{scope:e.__scopeMenu,children:(0,l.jsx)(E.z,{present:a||u.open,children:(0,l.jsx)(K.Slot,{scope:e.__scopeMenu,children:(0,l.jsx)(em,{id:d.contentId,"aria-labelledby":d.triggerId,...s,ref:h,align:"start",side:"rtl"===c.dir?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:e=>{c.isUsingKeyboardRef.current&&f.current?.focus(),e.preventDefault()},onCloseAutoFocus:e=>e.preventDefault(),onFocusOutside:(0,o.M)(e.onFocusOutside,e=>{e.target!==d.trigger&&u.onOpenChange(!1)}),onEscapeKeyDown:(0,o.M)(e.onEscapeKeyDown,e=>{c.onClose(),e.preventDefault()}),onKeyDown:(0,o.M)(e.onKeyDown,e=>{let t=e.currentTarget.contains(e.target),r=$[c.dir].includes(e.key);t&&r&&(u.onOpenChange(!1),d.trigger?.focus(),e.preventDefault())})})})})})});function eH(e){return e?"open":"closed"}function e$(e){return"indeterminate"===e}function eV(e){return e$(e)?"indeterminate":e?"checked":"unchecked"}function eK(e){return t=>"mouse"===t.pointerType?e(t):void 0}eU.displayName=eW;var eq="DropdownMenu",[eY,eG]=(0,a.b)(eq,[J]),eJ=J(),[eZ,eX]=eY(eq),eQ=e=>{let{__scopeDropdownMenu:t,children:r,dir:o,open:i,defaultOpen:a,onOpenChange:u,modal:c=!0}=e,d=eJ(t),f=n.useRef(null),[h=!1,p]=(0,s.T)({prop:i,defaultProp:a,onChange:u});return(0,l.jsx)(eZ,{scope:t,triggerId:(0,g.M)(),triggerRef:f,contentId:(0,g.M)(),open:h,onOpenChange:p,onOpenToggle:n.useCallback(()=>p(e=>!e),[p]),modal:c,children:(0,l.jsx)(en,{...d,open:h,onOpenChange:p,dir:o,modal:c,children:r})})};eQ.displayName=eq;var e0="DropdownMenuTrigger",e1=n.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,disabled:n=!1,...a}=e,s=eX(e0,r),c=eJ(r);return(0,l.jsx)(eo,{asChild:!0,...c,children:(0,l.jsx)(u.WV.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...a,ref:(0,i.F)(t,s.triggerRef),onPointerDown:(0,o.M)(e.onPointerDown,e=>{n||0!==e.button||!1!==e.ctrlKey||(s.onOpenToggle(),s.open||e.preventDefault())}),onKeyDown:(0,o.M)(e.onKeyDown,e=>{!n&&(["Enter"," "].includes(e.key)&&s.onOpenToggle(),"ArrowDown"===e.key&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(e.key)&&e.preventDefault())})})})});e1.displayName=e0;var e2=e=>{let{__scopeDropdownMenu:t,...r}=e,n=eJ(t);return(0,l.jsx)(eu,{...n,...r})};e2.displayName="DropdownMenuPortal";var e3="DropdownMenuContent",e4=n.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...i}=e,a=eX(e3,r),s=eJ(r),u=n.useRef(!1);return(0,l.jsx)(ef,{id:a.contentId,"aria-labelledby":a.triggerId,...s,...i,ref:t,onCloseAutoFocus:(0,o.M)(e.onCloseAutoFocus,e=>{u.current||a.triggerRef.current?.focus(),u.current=!1,e.preventDefault()}),onInteractOutside:(0,o.M)(e.onInteractOutside,e=>{let t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey,n=2===t.button||r;(!a.modal||n)&&(u.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});e4.displayName=e3;var e5=n.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,o=eJ(r);return(0,l.jsx)(ev,{...o,...n,ref:t})});e5.displayName="DropdownMenuGroup";var e7=n.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,o=eJ(r);return(0,l.jsx)(eg,{...o,...n,ref:t})});e7.displayName="DropdownMenuLabel";var e9=n.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,o=eJ(r);return(0,l.jsx)(eE,{...o,...n,ref:t})});e9.displayName="DropdownMenuItem";var e6=n.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,o=eJ(r);return(0,l.jsx)(eD,{...o,...n,ref:t})});e6.displayName="DropdownMenuCheckboxItem";var e8=n.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,o=eJ(r);return(0,l.jsx)(eB,{...o,...n,ref:t})});e8.displayName="DropdownMenuRadioGroup";var te=n.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,o=eJ(r);return(0,l.jsx)(eO,{...o,...n,ref:t})});te.displayName="DropdownMenuRadioItem";var tt=n.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,o=eJ(r);return(0,l.jsx)(eF,{...o,...n,ref:t})});tt.displayName="DropdownMenuItemIndicator";var tr=n.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,o=eJ(r);return(0,l.jsx)(eI,{...o,...n,ref:t})});tr.displayName="DropdownMenuSeparator",n.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,o=eJ(r);return(0,l.jsx)(eR,{...o,...n,ref:t})}).displayName="DropdownMenuArrow";var tn=n.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,o=eJ(r);return(0,l.jsx)(ez,{...o,...n,ref:t})});tn.displayName="DropdownMenuSubTrigger";var to=n.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,o=eJ(r);return(0,l.jsx)(eU,{...o,...n,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});to.displayName="DropdownMenuSubContent";var ti=eQ,ta=e1,ts=e2,tu=e4,tl=e5,tc=e7,td=e9,tf=e6,th=e8,tp=te,tm=tt,tv=tr,tg=e=>{let{__scopeDropdownMenu:t,children:r,open:n,onOpenChange:o,defaultOpen:i}=e,a=eJ(t),[u=!1,c]=(0,s.T)({prop:n,defaultProp:i,onChange:o});return(0,l.jsx)(eL,{...a,open:u,onOpenChange:c,children:r})},ty=tn,tb=to},66206:(e,t,r)=>{"use strict";r.d(t,{VY:()=>K,ee:()=>H,fC:()=>U,h_:()=>V,xo:()=>k,xz:()=>$});var n=r(28964),o=r(70319),i=r(93191),a=r(20732),s=r(96990),u=r(3402),l=r(60018),c=r(27015),d=r(80173),f=r(28611),h=r(67264),p=r(22251),m=r(69008),v=r(28469),g=r(58529),y=r(78350),b=r(97247),E="Popover",[C,D]=(0,a.b)(E,[d.D7]),w=(0,d.D7)(),[A,x]=C(E),B=e=>{let{__scopePopover:t,children:r,open:o,defaultOpen:i,onOpenChange:a,modal:s=!1}=e,u=w(t),l=n.useRef(null),[f,h]=n.useState(!1),[p=!1,m]=(0,v.T)({prop:o,defaultProp:i,onChange:a});return(0,b.jsx)(d.fC,{...u,children:(0,b.jsx)(A,{scope:t,contentId:(0,c.M)(),triggerRef:l,open:p,onOpenChange:m,onOpenToggle:n.useCallback(()=>m(e=>!e),[m]),hasCustomAnchor:f,onCustomAnchorAdd:n.useCallback(()=>h(!0),[]),onCustomAnchorRemove:n.useCallback(()=>h(!1),[]),modal:s,children:r})})};B.displayName=E;var _="PopoverAnchor",O=n.forwardRef((e,t)=>{let{__scopePopover:r,...o}=e,i=x(_,r),a=w(r),{onCustomAnchorAdd:s,onCustomAnchorRemove:u}=i;return n.useEffect(()=>(s(),()=>u()),[s,u]),(0,b.jsx)(d.ee,{...a,...o,ref:t})});O.displayName=_;var T="PopoverTrigger",k=n.forwardRef((e,t)=>{let{__scopePopover:r,...n}=e,a=x(T,r),s=w(r),u=(0,i.e)(t,a.triggerRef),l=(0,b.jsx)(p.WV.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":W(a.open),...n,ref:u,onClick:(0,o.M)(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?l:(0,b.jsx)(d.ee,{asChild:!0,...s,children:l})});k.displayName=T;var S="PopoverPortal",[F,I]=C(S,{forceMount:void 0}),R=e=>{let{__scopePopover:t,forceMount:r,children:n,container:o}=e,i=x(S,t);return(0,b.jsx)(F,{scope:t,forceMount:r,children:(0,b.jsx)(h.z,{present:r||i.open,children:(0,b.jsx)(f.h,{asChild:!0,container:o,children:n})})})};R.displayName=S;var M="PopoverContent",N=n.forwardRef((e,t)=>{let r=I(M,e.__scopePopover),{forceMount:n=r.forceMount,...o}=e,i=x(M,e.__scopePopover);return(0,b.jsx)(h.z,{present:n||i.open,children:i.modal?(0,b.jsx)(P,{...o,ref:t}):(0,b.jsx)(L,{...o,ref:t})})});N.displayName=M;var P=n.forwardRef((e,t)=>{let r=x(M,e.__scopePopover),a=n.useRef(null),s=(0,i.e)(t,a),u=n.useRef(!1);return n.useEffect(()=>{let e=a.current;if(e)return(0,g.Ry)(e)},[]),(0,b.jsx)(y.Z,{as:m.g7,allowPinchZoom:!0,children:(0,b.jsx)(j,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,o.M)(e.onCloseAutoFocus,e=>{e.preventDefault(),u.current||r.triggerRef.current?.focus()}),onPointerDownOutside:(0,o.M)(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey,n=2===t.button||r;u.current=n},{checkForDefaultPrevented:!1}),onFocusOutside:(0,o.M)(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1})})})}),L=n.forwardRef((e,t)=>{let r=x(M,e.__scopePopover),o=n.useRef(!1),i=n.useRef(!1);return(0,b.jsx)(j,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(o.current||r.triggerRef.current?.focus(),t.preventDefault()),o.current=!1,i.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(o.current=!0,"pointerdown"!==t.detail.originalEvent.type||(i.current=!0));let n=t.target;r.triggerRef.current?.contains(n)&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&i.current&&t.preventDefault()}})}),j=n.forwardRef((e,t)=>{let{__scopePopover:r,trapFocus:n,onOpenAutoFocus:o,onCloseAutoFocus:i,disableOutsidePointerEvents:a,onEscapeKeyDown:c,onPointerDownOutside:f,onFocusOutside:h,onInteractOutside:p,...m}=e,v=x(M,r),g=w(r);return(0,u.EW)(),(0,b.jsx)(l.M,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:o,onUnmountAutoFocus:i,children:(0,b.jsx)(s.XB,{asChild:!0,disableOutsidePointerEvents:a,onInteractOutside:p,onEscapeKeyDown:c,onPointerDownOutside:f,onFocusOutside:h,onDismiss:()=>v.onOpenChange(!1),children:(0,b.jsx)(d.VY,{"data-state":W(v.open),role:"dialog",id:v.contentId,...g,...m,ref:t,style:{...m.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),z="PopoverClose";function W(e){return e?"open":"closed"}n.forwardRef((e,t)=>{let{__scopePopover:r,...n}=e,i=x(z,r);return(0,b.jsx)(p.WV.button,{type:"button",...n,ref:t,onClick:(0,o.M)(e.onClick,()=>i.onOpenChange(!1))})}).displayName=z,n.forwardRef((e,t)=>{let{__scopePopover:r,...n}=e,o=w(r);return(0,b.jsx)(d.Eh,{...o,...n,ref:t})}).displayName="PopoverArrow";var U=B,H=O,$=k,V=R,K=N},80173:(e,t,r)=>{"use strict";r.d(t,{ee:()=>S,Eh:()=>I,VY:()=>F,fC:()=>k,D7:()=>p});var n=r(28964),o=r(62246),i=r(62386),a=r(22251),s=r(97247),u=n.forwardRef((e,t)=>{let{children:r,width:n=10,height:o=5,...i}=e;return(0,s.jsx)(a.WV.svg,{...i,ref:t,width:n,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:(0,s.jsx)("polygon",{points:"0,0 30,0 15,10"})})});u.displayName="Arrow";var l=r(93191),c=r(85090),d=r(9537),f="Popper",[h,p]=function(e,t=[]){let r=[],o=()=>{let t=r.map(e=>n.createContext(e));return function(r){let o=r?.[e]||t;return n.useMemo(()=>({[`__scope${e}`]:{...r,[e]:o}}),[r,o])}};return o.scopeName=e,[function(t,o){let i=n.createContext(o),a=r.length;function u(t){let{scope:r,children:o,...u}=t,l=r?.[e][a]||i,c=n.useMemo(()=>u,Object.values(u));return(0,s.jsx)(l.Provider,{value:c,children:o})}return r=[...r,o],u.displayName=t+"Provider",[u,function(r,s){let u=s?.[e][a]||i,l=n.useContext(u);if(l)return l;if(void 0!==o)return o;throw Error(`\`${r}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let r=()=>{let r=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let o=r.reduce((t,{useScope:r,scopeName:n})=>{let o=r(e)[`__scope${n}`];return{...t,...o}},{});return n.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}(o,...t)]}(f),[m,v]=h(f),g=e=>{let{__scopePopper:t,children:r}=e,[o,i]=n.useState(null);return(0,s.jsx)(m,{scope:t,anchor:o,onAnchorChange:i,children:r})};g.displayName=f;var y="PopperAnchor",b=n.forwardRef((e,t)=>{let{__scopePopper:r,virtualRef:o,...i}=e,u=v(y,r),c=n.useRef(null),d=(0,l.e)(t,c);return n.useEffect(()=>{u.onAnchorChange(o?.current||c.current)}),o?null:(0,s.jsx)(a.WV.div,{...i,ref:d})});b.displayName=y;var E="PopperContent",[C,D]=h(E),w=n.forwardRef((e,t)=>{let{__scopePopper:r,side:u="bottom",sideOffset:f=0,align:h="center",alignOffset:p=0,arrowPadding:m=0,avoidCollisions:g=!0,collisionBoundary:y=[],collisionPadding:b=0,sticky:D="partial",hideWhenDetached:w=!1,updatePositionStrategy:A="optimized",onPlaced:x,...B}=e,k=v(E,r),[S,F]=n.useState(null),I=(0,l.e)(t,e=>F(e)),[R,M]=n.useState(null),N=function(e){let[t,r]=n.useState(void 0);return(0,d.b)(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});let t=new ResizeObserver(t=>{let n,o;if(!Array.isArray(t)||!t.length)return;let i=t[0];if("borderBoxSize"in i){let e=i.borderBoxSize,t=Array.isArray(e)?e[0]:e;n=t.inlineSize,o=t.blockSize}else n=e.offsetWidth,o=e.offsetHeight;r({width:n,height:o})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}r(void 0)},[e]),t}(R),P=N?.width??0,L=N?.height??0,j="number"==typeof b?b:{top:0,right:0,bottom:0,left:0,...b},z=Array.isArray(y)?y:[y],W=z.length>0,U={padding:j,boundary:z.filter(_),altBoundary:W},{refs:H,floatingStyles:$,placement:V,isPositioned:K,middlewareData:q}=(0,o.YF)({strategy:"fixed",placement:u+("center"!==h?"-"+h:""),whileElementsMounted:(...e)=>(0,i.Me)(...e,{animationFrame:"always"===A}),elements:{reference:k.anchor},middleware:[(0,o.cv)({mainAxis:f+L,alignmentAxis:p}),g&&(0,o.uY)({mainAxis:!0,crossAxis:!1,limiter:"partial"===D?(0,o.dr)():void 0,...U}),g&&(0,o.RR)({...U}),(0,o.dp)({...U,apply:({elements:e,rects:t,availableWidth:r,availableHeight:n})=>{let{width:o,height:i}=t.reference,a=e.floating.style;a.setProperty("--radix-popper-available-width",`${r}px`),a.setProperty("--radix-popper-available-height",`${n}px`),a.setProperty("--radix-popper-anchor-width",`${o}px`),a.setProperty("--radix-popper-anchor-height",`${i}px`)}}),R&&(0,o.x7)({element:R,padding:m}),O({arrowWidth:P,arrowHeight:L}),w&&(0,o.Cp)({strategy:"referenceHidden",...U})]}),[Y,G]=T(V),J=(0,c.W)(x);(0,d.b)(()=>{K&&J?.()},[K,J]);let Z=q.arrow?.x,X=q.arrow?.y,Q=q.arrow?.centerOffset!==0,[ee,et]=n.useState();return(0,d.b)(()=>{S&&et(window.getComputedStyle(S).zIndex)},[S]),(0,s.jsx)("div",{ref:H.setFloating,"data-radix-popper-content-wrapper":"",style:{...$,transform:K?$.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ee,"--radix-popper-transform-origin":[q.transformOrigin?.x,q.transformOrigin?.y].join(" "),...q.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:(0,s.jsx)(C,{scope:r,placedSide:Y,onArrowChange:M,arrowX:Z,arrowY:X,shouldHideArrow:Q,children:(0,s.jsx)(a.WV.div,{"data-side":Y,"data-align":G,...B,ref:I,style:{...B.style,animation:K?void 0:"none"}})})})});w.displayName=E;var A="PopperArrow",x={top:"bottom",right:"left",bottom:"top",left:"right"},B=n.forwardRef(function(e,t){let{__scopePopper:r,...n}=e,o=D(A,r),i=x[o.placedSide];return(0,s.jsx)("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:(0,s.jsx)(u,{...n,ref:t,style:{...n.style,display:"block"}})})});function _(e){return null!==e}B.displayName=A;var O=e=>({name:"transformOrigin",options:e,fn(t){let{placement:r,rects:n,middlewareData:o}=t,i=o.arrow?.centerOffset!==0,a=i?0:e.arrowWidth,s=i?0:e.arrowHeight,[u,l]=T(r),c={start:"0%",center:"50%",end:"100%"}[l],d=(o.arrow?.x??0)+a/2,f=(o.arrow?.y??0)+s/2,h="",p="";return"bottom"===u?(h=i?c:`${d}px`,p=`${-s}px`):"top"===u?(h=i?c:`${d}px`,p=`${n.floating.height+s}px`):"right"===u?(h=`${-s}px`,p=i?c:`${f}px`):"left"===u&&(h=`${n.floating.width+s}px`,p=i?c:`${f}px`),{data:{x:h,y:p}}}});function T(e){let[t,r="center"]=e.split("-");return[t,r]}var k=g,S=b,F=w,I=B},94274:(e,t,r)=>{"use strict";r.d(t,{f:()=>l});var n=r(28964),o=r(70319),i=r(28469),a=r(22251),s=r(97247),u=n.forwardRef((e,t)=>{let{pressed:r,defaultPressed:n=!1,onPressedChange:u,...l}=e,[c=!1,d]=(0,i.T)({prop:r,onChange:u,defaultProp:n});return(0,s.jsx)(a.WV.button,{type:"button","aria-pressed":c,"data-state":c?"on":"off","data-disabled":e.disabled?"":void 0,...l,ref:t,onClick:(0,o.M)(e.onClick,()=>{e.disabled||d(!c)})})});u.displayName="Toggle";var l=u},20941:(e,t,r)=>{"use strict";r.d(t,{VY:()=>V,h_:()=>$,fC:()=>U,pn:()=>A,xz:()=>H});var n=r(28964),o=r(70319),i=r(93191),a=r(20732),s=r(96990),u=r(27015),l=r(80173),c=r(28611),d=r(67264),f=r(22251),h=r(69008),p=r(28469),m=r(97247),v=n.forwardRef((e,t)=>(0,m.jsx)(f.WV.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));v.displayName="VisuallyHidden";var[g,y]=(0,a.b)("Tooltip",[l.D7]),b=(0,l.D7)(),E="TooltipProvider",C="tooltip.open",[D,w]=g(E),A=e=>{let{__scopeTooltip:t,delayDuration:r=700,skipDelayDuration:o=300,disableHoverableContent:i=!1,children:a}=e,[s,u]=n.useState(!0),l=n.useRef(!1),c=n.useRef(0);return n.useEffect(()=>{let e=c.current;return()=>window.clearTimeout(e)},[]),(0,m.jsx)(D,{scope:t,isOpenDelayed:s,delayDuration:r,onOpen:n.useCallback(()=>{window.clearTimeout(c.current),u(!1)},[]),onClose:n.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>u(!0),o)},[o]),isPointerInTransitRef:l,onPointerInTransitChange:n.useCallback(e=>{l.current=e},[]),disableHoverableContent:i,children:a})};A.displayName=E;var x="Tooltip",[B,_]=g(x),O=e=>{let{__scopeTooltip:t,children:r,open:o,defaultOpen:i=!1,onOpenChange:a,disableHoverableContent:s,delayDuration:c}=e,d=w(x,e.__scopeTooltip),f=b(t),[h,v]=n.useState(null),g=(0,u.M)(),y=n.useRef(0),E=s??d.disableHoverableContent,D=c??d.delayDuration,A=n.useRef(!1),[_=!1,O]=(0,p.T)({prop:o,defaultProp:i,onChange:e=>{e?(d.onOpen(),document.dispatchEvent(new CustomEvent(C))):d.onClose(),a?.(e)}}),T=n.useMemo(()=>_?A.current?"delayed-open":"instant-open":"closed",[_]),k=n.useCallback(()=>{window.clearTimeout(y.current),A.current=!1,O(!0)},[O]),S=n.useCallback(()=>{window.clearTimeout(y.current),O(!1)},[O]),F=n.useCallback(()=>{window.clearTimeout(y.current),y.current=window.setTimeout(()=>{A.current=!0,O(!0)},D)},[D,O]);return n.useEffect(()=>()=>window.clearTimeout(y.current),[]),(0,m.jsx)(l.fC,{...f,children:(0,m.jsx)(B,{scope:t,contentId:g,open:_,stateAttribute:T,trigger:h,onTriggerChange:v,onTriggerEnter:n.useCallback(()=>{d.isOpenDelayed?F():k()},[d.isOpenDelayed,F,k]),onTriggerLeave:n.useCallback(()=>{E?S():window.clearTimeout(y.current)},[S,E]),onOpen:k,onClose:S,disableHoverableContent:E,children:r})})};O.displayName=x;var T="TooltipTrigger",k=n.forwardRef((e,t)=>{let{__scopeTooltip:r,...a}=e,s=_(T,r),u=w(T,r),c=b(r),d=n.useRef(null),h=(0,i.e)(t,d,s.onTriggerChange),p=n.useRef(!1),v=n.useRef(!1),g=n.useCallback(()=>p.current=!1,[]);return n.useEffect(()=>()=>document.removeEventListener("pointerup",g),[g]),(0,m.jsx)(l.ee,{asChild:!0,...c,children:(0,m.jsx)(f.WV.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...a,ref:h,onPointerMove:(0,o.M)(e.onPointerMove,e=>{"touch"===e.pointerType||v.current||u.isPointerInTransitRef.current||(s.onTriggerEnter(),v.current=!0)}),onPointerLeave:(0,o.M)(e.onPointerLeave,()=>{s.onTriggerLeave(),v.current=!1}),onPointerDown:(0,o.M)(e.onPointerDown,()=>{p.current=!0,document.addEventListener("pointerup",g,{once:!0})}),onFocus:(0,o.M)(e.onFocus,()=>{p.current||s.onOpen()}),onBlur:(0,o.M)(e.onBlur,s.onClose),onClick:(0,o.M)(e.onClick,s.onClose)})})});k.displayName=T;var S="TooltipPortal",[F,I]=g(S,{forceMount:void 0}),R=e=>{let{__scopeTooltip:t,forceMount:r,children:n,container:o}=e,i=_(S,t);return(0,m.jsx)(F,{scope:t,forceMount:r,children:(0,m.jsx)(d.z,{present:r||i.open,children:(0,m.jsx)(c.h,{asChild:!0,container:o,children:n})})})};R.displayName=S;var M="TooltipContent",N=n.forwardRef((e,t)=>{let r=I(M,e.__scopeTooltip),{forceMount:n=r.forceMount,side:o="top",...i}=e,a=_(M,e.__scopeTooltip);return(0,m.jsx)(d.z,{present:n||a.open,children:a.disableHoverableContent?(0,m.jsx)(z,{side:o,...i,ref:t}):(0,m.jsx)(P,{side:o,...i,ref:t})})}),P=n.forwardRef((e,t)=>{let r=_(M,e.__scopeTooltip),o=w(M,e.__scopeTooltip),a=n.useRef(null),s=(0,i.e)(t,a),[u,l]=n.useState(null),{trigger:c,onClose:d}=r,f=a.current,{onPointerInTransitChange:h}=o,p=n.useCallback(()=>{l(null),h(!1)},[h]),v=n.useCallback((e,t)=>{let r=e.currentTarget,n={x:e.clientX,y:e.clientY},o=function(e,t){let r=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),o=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(r,n,o,i)){case i:return"left";case o:return"right";case r:return"top";case n:return"bottom";default:throw Error("unreachable")}}(n,r.getBoundingClientRect());l(function(e){let t=e.slice();return t.sort((e,t)=>e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:e.y>t.y?1:0),function(e){if(e.length<=1)return e.slice();let t=[];for(let r=0;r<e.length;r++){let n=e[r];for(;t.length>=2;){let e=t[t.length-1],r=t[t.length-2];if((e.x-r.x)*(n.y-r.y)>=(e.y-r.y)*(n.x-r.x))t.pop();else break}t.push(n)}t.pop();let r=[];for(let t=e.length-1;t>=0;t--){let n=e[t];for(;r.length>=2;){let e=r[r.length-1],t=r[r.length-2];if((e.x-t.x)*(n.y-t.y)>=(e.y-t.y)*(n.x-t.x))r.pop();else break}r.push(n)}return(r.pop(),1===t.length&&1===r.length&&t[0].x===r[0].x&&t[0].y===r[0].y)?t:t.concat(r)}(t)}([...function(e,t,r=5){let n=[];switch(t){case"top":n.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":n.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":n.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":n.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r})}return n}(n,o),...function(e){let{top:t,right:r,bottom:n,left:o}=e;return[{x:o,y:t},{x:r,y:t},{x:r,y:n},{x:o,y:n}]}(t.getBoundingClientRect())])),h(!0)},[h]);return n.useEffect(()=>()=>p(),[p]),n.useEffect(()=>{if(c&&f){let e=e=>v(e,f),t=e=>v(e,c);return c.addEventListener("pointerleave",e),f.addEventListener("pointerleave",t),()=>{c.removeEventListener("pointerleave",e),f.removeEventListener("pointerleave",t)}}},[c,f,v,p]),n.useEffect(()=>{if(u){let e=e=>{let t=e.target,r={x:e.clientX,y:e.clientY},n=c?.contains(t)||f?.contains(t),o=!function(e,t){let{x:r,y:n}=e,o=!1;for(let e=0,i=t.length-1;e<t.length;i=e++){let a=t[e].x,s=t[e].y,u=t[i].x,l=t[i].y;s>n!=l>n&&r<(u-a)*(n-s)/(l-s)+a&&(o=!o)}return o}(r,u);n?p():o&&(p(),d())};return document.addEventListener("pointermove",e),()=>document.removeEventListener("pointermove",e)}},[c,f,u,d,p]),(0,m.jsx)(z,{...e,ref:s})}),[L,j]=g(x,{isInside:!1}),z=n.forwardRef((e,t)=>{let{__scopeTooltip:r,children:o,"aria-label":i,onEscapeKeyDown:a,onPointerDownOutside:u,...c}=e,d=_(M,r),f=b(r),{onClose:p}=d;return n.useEffect(()=>(document.addEventListener(C,p),()=>document.removeEventListener(C,p)),[p]),n.useEffect(()=>{if(d.trigger){let e=e=>{let t=e.target;t?.contains(d.trigger)&&p()};return window.addEventListener("scroll",e,{capture:!0}),()=>window.removeEventListener("scroll",e,{capture:!0})}},[d.trigger,p]),(0,m.jsx)(s.XB,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:u,onFocusOutside:e=>e.preventDefault(),onDismiss:p,children:(0,m.jsxs)(l.VY,{"data-state":d.stateAttribute,...f,...c,ref:t,style:{...c.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[(0,m.jsx)(h.A4,{children:o}),(0,m.jsx)(L,{scope:r,isInside:!0,children:(0,m.jsx)(v,{id:d.contentId,role:"tooltip",children:i||o})})]})})});N.displayName=M;var W="TooltipArrow";n.forwardRef((e,t)=>{let{__scopeTooltip:r,...n}=e,o=b(r);return j(W,r).isInside?null:(0,m.jsx)(l.Eh,{...o,...n,ref:t})}).displayName=W;var U=O,H=k,$=R,V=N},36032:(e,t,r)=>{"use strict";function n(e){return"[object Object]"===Object.prototype.toString.call(e)}function o(e){var t,r;return!1!==n(e)&&(void 0===(t=e.constructor)||!1!==n(r=t.prototype)&&!1!==r.hasOwnProperty("isPrototypeOf"))}r.d(t,{P:()=>o})}};